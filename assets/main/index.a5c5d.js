window.__require=function e(t,i,o){function a(r,s){if(!i[r]){if(!t[r]){var c=r.split("/");if(c=c[c.length-1],!t[c]){var l="function"==typeof __require&&__require;if(!s&&l)return l(c,!0);if(n)return n(c,!0);throw new Error("Cannot find module '"+r+"'")}r=c}var u=i[r]={exports:{}};t[r][0].call(u.exports,function(e){return a(t[r][1][e]||e)},u,u.exports,e,t,i,o)}return i[r].exports}for(var n="function"==typeof __require&&__require,r=0;r<o.length;r++)a(o[r]);return a}({ADManager:[function(e,t,i){"use strict";cc._RF.push(t,"920b8I6xFJPCqUQIcDVcOmJ","ADManager"),Object.defineProperty(i,"__esModule",{value:!0}),i.ADMgr=void 0;var o=e("./ArrayUtils"),a=e("./GameConfig"),n=e("./LoadingManager"),r=e("./LogManager"),s=e("./MiniGameSdk"),c=e("./PlatformManager"),l=e("./PlayerDataManager"),u=e("./SingletonManager"),d=e("./TipsManager"),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._adInstance=null,t._successCallback=null,t._failCallback=null,t._currentRetryCount=0,t._maximumRetryCount=0,t._adTitle="",t}return __extends(t,e),t.prototype.setShareData=function(){s.MiniGameSdk.API.showShareMenu()},t.prototype.shareGame=function(e){s.MiniGameSdk.API.shareAppToFriendsNew("\u4f60\u6562\u6765\u5403\u6211\u5417","","https://mmocgame.qpic.cn/wechatgame/bSAKPPBBQFUN44PHyDL1mOY72Z1pA2eT0x3QtvGFxdL0ZPob1wej1Dy32ttBtt5y/0","",e)},t.prototype.showRewardedVideoAd=function(e,t,i,o){if(void 0===o&&(o=3),this._adTitle=e,c.PlatformMgr.isMiniGame()&&!l.PlayerDataMgr.WHITE_NAME_NO_VIDEO){if(!a.default.adConfig.ADUnitId||0===a.default.adConfig.ADUnitId.length)return d.TipMgr.showToast("\u89c6\u9891\u62c9\u53d6\u5931\u8d25"),void(i&&i());s.MiniGameSdk.AdvertManager.instance.showVideo(a.default.adConfig.ADUnitId,function(e){switch(e){case s.MiniGameSdk.EAdVideoResult.ACCEPT:t&&t();break;case s.MiniGameSdk.EAdVideoResult.REJECT:case s.MiniGameSdk.EAdVideoResult.ERROR:d.TipMgr.showToast("\u4eb2\uff0c\u5e7f\u544a\u6ca1\u770b\u5b8c\u5462"),i&&i()}})}else t&&t()},t.prototype.showInterstitial=function(e){c.PlatformMgr.isMiniGame()&&s.MiniGameSdk.AdvertManager.instance.showInterstitial(e)},t.prototype.loadBanner=function(e,t,i){void 0===t&&(t=s.MiniGameSdk.EAdBannerLocation.TOP),void 0===i&&(i=1),c.PlatformMgr.isMiniGame()&&s.MiniGameSdk.AdvertManager.instance.loadBanner(e,t,i)},t.prototype.showBanner=function(){c.PlatformMgr.isMiniGame()&&s.MiniGameSdk.AdvertManager.instance.showBanner()},t.prototype.hideBanner=function(){c.PlatformMgr.isMiniGame()&&s.MiniGameSdk.AdvertManager.instance.hideBanner()},t.prototype.loadCustom=function(e,t,i,o){if(void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=1),c.PlatformMgr.isMiniGame()){var a=window.wx.getSystemInfoSync().screenHeight;s.MiniGameSdk.AdvertManager.instance.loadCustom(e,{top:a-t,left:i},o)}},t.prototype.showCustom=function(){c.PlatformMgr.isMiniGame()&&s.MiniGameSdk.AdvertManager.instance.showCustom()},t.prototype.hideCustom=function(){c.PlatformMgr.isMiniGame()&&s.MiniGameSdk.AdvertManager.instance.hideCustom()},t.prototype._createRewardedVideoAd=function(){return this._adInstance||(this._getADUnitId(),this._adInstance.onError(this._handleRewardedVideoAdError.bind(this)),this._adInstance.onClose(this._handleRewardedVideoAdClose.bind(this)),this._adInstance.onLoad(this._handleRewardedVideoAdLoaded.bind(this))),this._adInstance},t.prototype._playRewardedVideo=function(){var e=this._createRewardedVideoAd();e.load().then(function(){e.show()})},t.prototype._getADUnitId=function(){var e=a.default.adConfig.ADUnitId;return o.default.getRandomElement(e)},t.prototype._handleRewardedVideoAdError=function(e){this._currentRetryCount<this._maximumRetryCount?(this._currentRetryCount++,this._playRewardedVideo()):(d.TipMgr.showToast("\u89c6\u9891\u52a0\u8f7d\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5\uff01"),n.LoadingMgr.hide(),r.LogMgr.debug("show reward video error: "+e))},t.prototype._handleRewardedVideoAdClose=function(e){n.LoadingMgr.hide(),r.LogMgr.debug("reward video close "+JSON.stringify(e)),(null==e?void 0:e.isEnded)?this._successCallback&&this._successCallback():this._failCallback&&this._failCallback()},t.prototype._handleRewardedVideoAdLoaded=function(){r.LogMgr.debug("reward video load success")},t}(u.SingletonBase);i.ADMgr=h.getInstance(),cc._RF.pop()},{"./ArrayUtils":"ArrayUtils","./GameConfig":"GameConfig","./LoadingManager":"LoadingManager","./LogManager":"LogManager","./MiniGameSdk":"MiniGameSdk","./PlatformManager":"PlatformManager","./PlayerDataManager":"PlayerDataManager","./SingletonManager":"SingletonManager","./TipsManager":"TipsManager"}],AIControl:[function(e,t,i){"use strict";cc._RF.push(t,"71c49BSgP9IR7Zj4hKWyzrQ","AIControl"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./ResKeeper"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shuBiaoDian=null,t.blockNode=null,t.isOpen=!1,t.aiCDTime=.5,t.clickCDTime=1,t.mouseDelayTime=.5,t.dragTime=1,t.startDelayTime=2,t.fightDelayTime=1,t.isAiTime=!1,t}var i;return __extends(t,e),i=t,t.prototype.onLoad=function(){i._instance=this,this.node.zIndex=9999,this.blockNode.active=!1},t.prototype.displayClickButton=function(e,t){var i=this;this.isOpen&&!this.isAiTime&&(this.isAiTime=!0,this.scheduleOnce(function(){i.shuBiaoDian.active=!0,i.shuBiaoDian.stopAllActions();var o=e.convertToWorldSpaceAR(cc.v2(0,0)),a=i.shuBiaoDian.parent.convertToNodeSpaceAR(o);i.shuBiaoDian.setPosition(a),i.shuBiaoDian.runAction(cc.sequence(cc.delayTime(i.mouseDelayTime),cc.callFunc(function(){i.shuBiaoDian.active=!1,i.isAiTime=!1,t&&t()})))},this.clickCDTime))},__decorate([r(cc.Node)],t.prototype,"shuBiaoDian",void 0),__decorate([r(cc.Node)],t.prototype,"blockNode",void 0),i=__decorate([n],t)}(o.default);i.default=s,cc._RF.pop()},{"./ResKeeper":"ResKeeper"}],AddPowerByTime:[function(e,t,i){"use strict";cc._RF.push(t,"a5ee1RoAnBE4YeTfdifCMBA","AddPowerByTime"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./EventManager"),a=e("./ResKeeper"),n=e("./TimeUtils"),r=e("./EvenType"),s=e("./PlayerDataManager"),c=e("./GameGlobalVariable"),l=cc._decorator,u=l.ccclass,d=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.timeLabel=null,t}return __extends(t,e),t.prototype.onEnable=function(){this.resetDisplayTime(),o.EventMgrInstance.addListener(r.EVENT_TYPE.Hall_ResetRich,this.resetDisplayTime,this)},t.prototype.onDisable=function(){o.EventMgrInstance.removeListener(r.EVENT_TYPE.Hall_ResetRich,this.resetDisplayTime,this)},t.prototype.resetDisplayTime=function(){var e=this;if(this.timeLabel){this.timeLabel.node.stopAllActions(),this.timeLabel.string="";var t=s.PlayerDataMgr.globalData;if(t.power<t.maxPower){var i=(new Date).getTime(),o=6e4*c.GameGlobalVariable.addPowerTime,a=i-t.lastAddPowerTime;if(a>=o){var r=Math.floor(a/o);if(t.power+r>t.maxPower)return void s.PlayerDataMgr.addPower(t.maxPower-t.power);s.PlayerDataMgr.addPower(r),a-=r*o,t.lastAddPowerTime=i-a}a=o-a;var l=Math.floor(.001*a);this.timeLabel.string=n.default.convertSecondsToMinutesSeconds(l),this.timeLabel.node.runAction(cc.repeatForever(cc.sequence(cc.delayTime(1),cc.callFunc(function(){l--,e.timeLabel.string=n.default.convertSecondsToMinutesSeconds(l),0===l&&e.resetDisplayTime()}))))}}},__decorate([d(cc.Label)],t.prototype,"timeLabel",void 0),__decorate([u],t)}(a.default);i.default=h,cc._RF.pop()},{"./EvenType":"EvenType","./EventManager":"EventManager","./GameGlobalVariable":"GameGlobalVariable","./PlayerDataManager":"PlayerDataManager","./ResKeeper":"ResKeeper","./TimeUtils":"TimeUtils"}],ArrayUtils:[function(e,t,i){"use strict";cc._RF.push(t,"83453BlOa5NT7mIy44kwYdx","ArrayUtils"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./LogManager"),a=function(){function e(){}return e.shuffleArray=function(e){for(var t,i,o=e.slice(),a=o.length,n=a;n--;)n!==(i=Math.floor(Math.random()*a))&&(t=o[n],o[n]=o[i],o[i]=t);return o},e.generateRandomArray=function(e,t,i){for(var o=[],a=[],n=t;n<=i;n++)o.push(n);for(;e>0;){var r=Math.floor(Math.random()*(o.length-1));a.push(o[r]),o[r]=o[o.length-1],o.pop(),e--}return a},e.getRandomElement=function(e){return e[this.generateRandomArray(e.length,0,e.length-1)[this.random(0,e.length)]]},e.random=function(e,t){var i=Math.floor(Math.random()*(t-e))+e;return i==t&&(i-=1),i},e.deepClone=function(e){var t=this;if(!Array.isArray(e))throw new TypeError("Input must be an array");return e.map(function(e){return Array.isArray(e)?t.deepClone(e):"object"==typeof e&&null!==e?JSON.parse(JSON.stringify(e)):e})},e.uniqueElements=function(e){return e.filter(function(e,t,i){return i.indexOf(e)===t})},e.removeNullElements=function(e){return e.filter(function(e){return null!=e})},e.getRandomElementByProbability=function(e,t){if(e.length===t.length){for(var i=[],a=0;a<e.length;a++)for(var n=e[a],r=t[a],s=0;s<r;s++)i.push(n);return(i=this.shuffleArray(i))[this.generateRandomArray(i.length,0,i.length-1)[this.random(0,i.length)]]}o.LogMgr.error("\u968f\u673a\u6570\u7ec4\u4e0e\u6982\u7387\u6570\u7ec4\u957f\u5ea6\u4e0d\u4e00\u81f4")},e.getWeightedRandomIndex=function(e){var t=0;e.forEach(function(e){return t+=e}),t*=Math.random();for(var i=0;i<e.length;i++)if((t-=e[i])<=0)return i;return 0},e.getCenterIndex=function(e){return[Math.floor(e.length/2),Math.floor(e[0].length/2)]},e.removeEmptyElements=function(e){return e.filter(function(e){return null!=e})},e}();i.default=a,cc._RF.pop()},{"./LogManager":"LogManager"}],AudioManager:[function(e,t,i){"use strict";cc._RF.push(t,"f3628PAgqNH5bUqHWwLXQFl","AudioManager"),Object.defineProperty(i,"__esModule",{value:!0}),i.AudioMgr=void 0;var o=e("./BundleConfig"),a=e("./ResLoader"),n=e("./DataManager"),r=e("./LogManager"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._secret_key="audio",t._settings=null,t.currentMusic=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"isMusicOn",{get:function(){return!this._settings||this._settings.musicOn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isEffectOn",{get:function(){return!this._settings||this._settings.effectOn},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isShakeOn",{get:function(){return!this._settings||this._settings.shakeOn},enumerable:!1,configurable:!0}),t.prototype.initialize=function(){var e=this._load("setting");this._settings=__assign({music:"",musicVolume:1,musicOn:!0,effectVolume:1,effectOn:!0,shakeOn:!0},e)},t.prototype.playBackgroundMusic=function(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=o.BundleNames.Audio);var n=i+"&"+e;n!==this.currentMusic&&(this.currentMusic=n,this._settings.musicOn&&(this._save("setting",this._settings),a.default.loadRes(i,e,cc.AudioClip).then(function(o){o?cc.audioEngine.playMusic(o,t):r.LogMgr.debug("AudioManager playBgm failed",i,e)})))},t.prototype.stopBackgroundMusic=function(){cc.audioEngine.stopMusic()},t.prototype.toggleMusic=function(e){this._settings.musicOn=e,e?cc.audioEngine.resumeMusic():cc.audioEngine.pauseMusic(),this._save("setting",this._settings)},t.prototype.setBackgroundMusicVolume=function(e){this._settings.musicVolume=e,cc.audioEngine.setMusicVolume(e),this._save("setting",this._settings)},t.prototype.playSoundEffect=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=o.BundleNames.Audio),this._settings.effectOn&&a.default.loadRes(i,e,cc.AudioClip).then(function(o){o?cc.audioEngine.playEffect(o,t):r.LogMgr.debug("AudioManager playEffect failed",i,e)})},t.prototype.toggleSoundEffects=function(e){this._settings.effectOn=e,e||cc.audioEngine.stopAllEffects(),this._save("setting",this._settings)},t.prototype.setSoundEffectVolume=function(e){this._settings.effectVolume=e,cc.audioEngine.setEffectsVolume(e),this._save("setting",this._settings)},t.prototype.toggleShake=function(e){this._settings.shakeOn=e,this._save("setting",this._settings)},t.prototype.getAudioSettings=function(){return this._settings},t}(n.default);i.AudioMgr=s.getInstance(),cc._RF.pop()},{"./BundleConfig":"BundleConfig","./DataManager":"DataManager","./LogManager":"LogManager","./ResLoader":"ResLoader"}],AutoImagZiTi:[function(e,t,i){"use strict";cc._RF.push(t,"9e125O1M/RANZY9V4KoamK8","AutoImagZiTi"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./BundleConfig"),a=e("./ResKeeper"),n=cc._decorator,r=n.ccclass,s=(n.property,n.inspector,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setSprites=function(e){return __awaiter(this,void 0,Promise,function(){var t,i,a,n,r,s,c,l,u;return __generator(this,function(d){switch(d.label){case 0:t=e.length,i=this.node.children,a=i.length,n=Math.max(t,a),r=0,d.label=1;case 1:return r<n?(s=e[r],c=i[r],s?c?(l=c.getComponent(cc.Sprite),[4,this._loadRes(o.BundleNames.Common,"res/player/boss_"+s,cc.SpriteFrame)]):[3,3]:[3,4]):[3,6];case 2:u=d.sent(),l.spriteFrame=u,c.active=!0,c.width="1"===s?10:15,d.label=3;case 3:return[3,5];case 4:c&&(c.active=!1),d.label=5;case 5:return r++,[3,1];case 6:return[2]}})})},__decorate([r],t)}(a.default));i.default=s,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./ResKeeper":"ResKeeper"}],BagCiTiaoRichText:[function(e,t,i){"use strict";cc._RF.push(t,"c24538KRE9HmaZaVD1W6wc5","BagCiTiaoRichText"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./BundleConfig"),a=e("./UIManager"),n=e("./UIConfig_Home"),r=cc._decorator,s=r.ccclass,c=(r.property,r.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shuiGuoId=0,t.ciTiaoId=0,t}return __extends(t,e),t.prototype.displayHybridInfo=function(){a.default.open(o.BundleNames.Home,n.UIView_Home.UI_ShowZaZhong,{shuiGuoId:this.shuiGuoId,ciTiaoId:this.ciTiaoId})},__decorate([s],t)}(cc.Component));i.default=c,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager"}],BaseExcel:[function(e,t,i){"use strict";cc._RF.push(t,"8faf3uBwlJEbrlw7vF85v7d","BaseExcel"),Object.defineProperty(i,"__esModule",{value:!0}),i.BaseExcel=i.itemData=void 0;var o=e("./ExcelUtil");i.itemData=function(e,t,i){this.key=e,this.value=t,this.extent=i};var a=function(){function e(){}return e.loadData=function(e,t,i){this.dataMap.set(e,o.ExcelUtil.convertExcelData(e,t,i))},e.getData=function(e,t){var i=this.dataMap.get(e);return(null==i?void 0:i.get(t))||null},e.getAllData=function(e){return this.dataMap.get(e)},e.dataMap=new Map,e}();i.BaseExcel=a,cc._RF.pop()},{"./ExcelUtil":"ExcelUtil"}],BaseModule:[function(e,t,i){"use strict";cc._RF.push(t,"ff6e0z5NuJK5YmSfr3KxGkw","BaseModule"),Object.defineProperty(i,"__esModule",{value:!0}),i.ModuleNames=void 0;var o=e("./ResKeeper"),a=cc._decorator,n=a.ccclass;a.property,a.inspector,function(e){e.Shop="Module_Shop",e.WareHouse="Module_WareHouse",e.Fighting="Module_Fighting",e.News="Module_News"}(i.ModuleNames||(i.ModuleNames={}));var r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.show=function(e){void 0===e&&(e={})},__decorate([n],t)}(o.default);i.default=r,cc._RF.pop()},{"./ResKeeper":"ResKeeper"}],BossComming_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"f0b45J7Yt9O8ZrIJ4UTY17H","BossComming_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.node_tiaoNode=null,t.node_boneNode=null,t.node_ziNode=null,t.node_fireNode=null,t.node_headNode=null,t}return __extends(t,e),__decorate([r(cc.Node)],t.prototype,"node_tiaoNode",void 0),__decorate([r(cc.Node)],t.prototype,"node_boneNode",void 0),__decorate([r(cc.Node)],t.prototype,"node_ziNode",void 0),__decorate([r(cc.Node)],t.prototype,"node_fireNode",void 0),__decorate([r(cc.Node)],t.prototype,"node_headNode",void 0),__decorate([n("BossComming_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],BossComming:[function(e,t,i){"use strict";cc._RF.push(t,"05dbfsnlxRIMrjqfa5tGw74","BossComming"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./BossComming_UIBindings"),a=e("./ResKeeper"),n=e("./AudioManager"),r=e("./BundleConfig"),s=cc._decorator,c=s.ccclass,l=s.property,u=(s.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.startAnimation()},t.prototype.startAnimation=function(){var e=this.auto_ui;this.runNodeHeadAnimation(e.node_headNode),this.runNodeBoneAnimation(e.node_boneNode),this.runNodeZiAnimation(e.node_ziNode),this.runNodeFireAnimation(e.node_fireNode)},t.prototype.runNodeHeadAnimation=function(e){e.runAction(cc.repeatForever(cc.sequence(cc.spawn(cc.scaleTo(1,1.1,1.1),cc.fadeTo(1,180)),cc.spawn(cc.scaleTo(1,1,1),cc.fadeTo(1,255)))))},t.prototype.runNodeBoneAnimation=function(e){e.runAction(cc.repeatForever(cc.sequence(cc.rotateTo(.125,15),cc.rotateTo(.25,-15),cc.rotateTo(.125,0),cc.delayTime(1))))},t.prototype.runNodeZiAnimation=function(e){e.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(1,1.1,1.1),cc.scaleTo(1,1,1))))},t.prototype.runNodeFireAnimation=function(e){var t=0;e.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){e.children.forEach(function(i,o){i.active=o===t%e.childrenCount}),t++}),cc.delayTime(.25))))},t.prototype.onEnable=function(){},t.prototype.onDisable=function(){},t.prototype.displayAnimation=function(){var e=this;if(!this.node.children[0].active){n.AudioMgr.playSoundEffect("sound/bossComming",!1,r.BundleNames.Game),this.node.children[0].active=!0;var t=this.auto_ui.node_tiaoNode;t.setPosition(7,101),t.opacity=255,t.stopAllActions(),t.runAction(cc.sequence(cc.repeat(cc.sequence(cc.moveTo(.1,t.x,t.y+10),cc.moveTo(.2,t.x,t.y-15),cc.moveTo(.1,t.x,t.y)),3),cc.fadeOut(1),cc.callFunc(function(){e.node.children[0].active=!1})))}},__decorate([l(o.default)],t.prototype,"auto_ui",void 0),__decorate([c],t)}(a.default));i.default=u,cc._RF.pop()},{"./AudioManager":"AudioManager","./BossComming_UIBindings":"BossComming_UIBindings","./BundleConfig":"BundleConfig","./ResKeeper":"ResKeeper"}],BuffMag:[function(e,t,i){"use strict";cc._RF.push(t,"ebb89SlWm9KJrwZNPkkfHzH","BuffMag"),Object.defineProperty(i,"__esModule",{value:!0}),i.BuffMgr=void 0;var o=e("./CommonUtils"),a=e("./EvenType"),n=e("./EventManager"),r=e("./Excel"),s=e("./ExcelUtil"),c=e("./GameDataManager"),l=e("./GameGlobalVariable"),u=e("./HallGlobalVariable"),d=e("./PlayerDataManager"),h=e("./SingletonManager"),p=e("./UI_MosterLogic"),_=e("./UI_Player"),g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ciTiaoData=[],t.offTime=0,t.monsterBombCount={},t.attackCount={},t.currentWaveCount=0,t.monsterBomb={},t.durianCountRecord={},t.intervalCount={},t.playerSendCount={},t}return __extends(t,e),t.prototype.addCurrentCiTiao=function(e){this.addSingleCiTiao(e)||this.ciTiaoData.push(e)},t.prototype.saveCurrentCiTiao=function(){c.GameDataMgr.updateCiTiaoData(l.GameGlobalVariable.nowlevel,this.ciTiaoData)},t.prototype.calculateFinalAward=function(e){for(var t=0,i=0,o=this.ciTiaoData;i<o.length;i++){var a=o[i],n=r.Excel.shuiguobuff(a.citiaoshuzhitype);6===n.buffefftype&&(t+=n.value[0])}return e+t},t.prototype.addSingleCiTiao=function(e){var t=r.Excel.shuiguobuff(e.citiaoshuzhitype),i=!1;return 44===t.buffefftype&&(n.EventMgrInstance.emitEvent(a.EVENT_TYPE.Game_Add_YinBi,t.value[0]),i=!0),i},t.prototype.setSavedCiTiao=function(e){this.ciTiaoData=e},t.prototype.getPlayerCiTiaoList=function(e){return this.ciTiaoData.filter(function(t){return 1===t.citiaochuxian||t.shuiguoId===e.playerId+1e3})},t.prototype.clearCurrentCiTiao=function(){this.ciTiaoData=[],c.GameDataMgr.updateCiTiaoData(l.GameGlobalVariable.nowlevel,null),n.EventMgrInstance.emitEvent(a.EVENT_TYPE.Game_Add_CiTiao)},t.prototype.getCurrentCiTiao=function(e){for(var t=this,i=r.Excel.shuiguocitiao_all,o=[],a=i.size,n=function(e){var i=r.Excel.shuiguocitiao(e);if(0!==i.citiaoshuzhitype&&![59,60,64].includes(i.id)){var a=-1;-1===i.citiaochuxian&&(a=t.ciTiaoData.findIndex(function(e){return e.id===i.id})),-1===a&&(-1!==i.citiaochuxian||d.PlayerDataMgr.getEquipIsDressUp(i.shuiguoId)&&u.default.getUnLockCiTiao(i))&&o.push({index:e-1,weight:i.weigth})}},s=1;s<=a;s++)n(s);return e?this.selectRandomCiTiao(o):this.selectHighQualityCiTiao(o)},t.prototype.selectRandomCiTiao=function(e){for(var t=[],i=0;i<3;i++){var o=this.randomWeightIndex(e);t.push(r.Excel.shuiguocitiao(e[o].index+1)),e.splice(o,1)}return t},t.prototype.selectHighQualityCiTiao=function(e){for(var t=[],i=[],o=0;o<e.length;o++){var a=e[o].index,n=r.Excel.shuiguocitiao(a+1);3===n.quality&&t.length<2&&t.push(o),2===n.quality&&i.length<1&&i.push(o)}return t.concat(i).map(function(t){return r.Excel.shuiguocitiao(e[t].index+1)})},t.prototype.randomWeightIndex=function(e){for(var t=e.reduce(function(e,t){return e+t.weight},0)*Math.random(),i=0;i<e.length;i++)if((t-=e[i].weight)<=0)return i;return 0},t.prototype.monsterHit=function(e,t){for(var i=null,o=0,a=this.ciTiaoData;o<a.length;o++){var n=a[o],s=r.Excel.shuiguobuff(n.citiaoshuzhitype);n.shuiguoId===t.playerId+1e3&&(1===s.buffefftype?(!i||i.bufftime<s.bufftime)&&(i=s):e.applySpeedReduction(s,t)),24===s.buffefftype&&t.kuangrePlayer&&e.applySpeedReduction(s,t)}this.applyPlayerBuff(e,t,i)},t.prototype.applyPlayerBuff=function(e,t,i){var o=r.Excel.shuiguobuff(t.sgtianfuid);o&&e.applySpeedReduction(o,t),i&&e.applySpeedReduction(i,t);var a=s.ExcelUtil.getMatchingData(r.Excel.shuiguohecheng_all,"shuiguoId",t.playerId+1e3)[t.playerInfo.equipLevel];if(a){var n=r.Excel.shuiguobuff(a.newTianFuBuff);n&&e.applySpeedReduction(n,t)}},t.prototype.getPoisonFog=function(){return this.findBuffByEffectType(37)},t.prototype.getPoisonDamage=function(){return this.findBuffByEffectType(41)},t.prototype.findBuffByEffectType=function(e){for(var t=null,i=0;i<this.ciTiaoData.length;i++){var o=this.ciTiaoData[i],a=r.Excel.shuiguobuff(o.citiaoshuzhitype);a.buffefftype===e&&(t=a)}return t},t.prototype.addMosterBombCount=function(e){var t=e.node.uuid;this.monsterBombCount[t]=(this.monsterBombCount[t]||0)+1},t.prototype.clearMonsterBombCount=function(e){delete this.monsterBombCount[e.node.uuid]},t.prototype.getMonsterBombSailingCount=function(e){var t=e.node.uuid;return this.hasBuffEffectType(31)?.1*(this.monsterBombCount[t]||0):0},t.prototype.getMonsterBombDamageIncrease=function(){return this.calculateBuffValueByEffectType(29,100)},t.prototype.getSecondaryFruitBuff=function(){return this.findBuffByEffectType(45)},t.prototype.addPlayerAttack=function(e,t){var i=r.Excel.shuiguobuff(t.sgtianfuid);return i&&16===i.buffefftype||(i=this.getNewTianFuBuff(t)),i&&16===i.buffefftype?this.calculateAttackIncrease(e,t,i):0},t.prototype.getNewTianFuBuff=function(e){var t=s.ExcelUtil.getMatchingData(r.Excel.shuiguohecheng_all,"shuiguoId",e.playerId+1e3)[e.playerInfo.equipLevel];return t?r.Excel.shuiguobuff(t.newTianFuBuff):null},t.prototype.calculateAttackIncrease=function(e,t,i){var o=e.node.uuid,a=t.node.uuid,n=this.attackCount[o]&&this.attackCount[o][a]||0;return n=Math.min(n+1,i.value[1]),this.attackCount[o]||(this.attackCount[o]={}),this.attackCount[o][a]=n,i.value[0]/100*n},t.prototype.clearMonsterStack=function(e){delete this.attackCount[e.node.uuid]},t.prototype.boshuAttackAdd=function(){this.currentWaveCount+=this.countBuffEffectType(48)},t.prototype.getAttackIncrease=function(){var e=this.findBuffByEffectType(48);if(e){var t=e.value[0]*this.currentWaveCount;return t>e.value[1]&&(t=e.value[1]),t/100}return 0},t.prototype.resetCurrentWave=function(){this.currentWaveCount=0},t.prototype.playerAttackModeInProgress=function(e,t){return this.findPlayerBuffByEffectType(e,14)?2:t},t.prototype.applyAttackBonus=function(e,t,i){for(var o=0,a=0,n=this.ciTiaoData;a<n.length;a++){var s=n[a],c=r.Excel.shuiguobuff(s.citiaoshuzhitype);s.shuiguoId!==e.playerId+1e3&&1!==s.citiaochuxian||(o+=this.calculateAttackBonus(c,e,i))}return e.kuangrePlayer&&(o+=this.calculateFrenzyAttackBonus(e)),this.applyAttackTypeBonus(t,o,i)},t.prototype.calculateAttackBonus=function(e,t,i){var o=0;return 1===i&&[15,38].includes(e.buffefftype)?o+=e.value[0]/100:2===i&&(17===e.buffefftype?o+=Math.min(e.value[0]/100,3):33===e.buffefftype&&(o+=this.calculateSendCountBonus(t,e))),2===i&&28===e.buffefftype&&3!==t.playerId&&(o+=e.value[0]/100*this.getBeOhterShuiGuoBuff(t)),1===i&&9===e.buffefftype&&3!==t.playerId&&(o+=e.value[0]/100*this.getBeOhterShuiGuoBuff(t)),o},t.prototype.calculateSendCountBonus=function(e,t){var i=e.node.uuid,o=this.playerSendCount[i]||1;return o=Math.min(o,15),t.value[0]/100*o},t.prototype.calculateFrenzyAttackBonus=function(e){return this.addTalent(e).reduce(function(e,t){return e+(40===t.buffefftype?t.value[0]/100:0)},0)},t.prototype.applyAttackTypeBonus=function(e,t,i){var o=this.getAttackIncrease();return 1===i?e*(1+t+o):2===i?e/(1+t):e},t.prototype.getTotalMonsterDamage=function(e){return e*(1+this.ciTiaoData.reduce(function(e,t){var i=r.Excel.shuiguobuff(t.citiaoshuzhitype);return 1===t.citiaochuxian&&43===i.buffefftype?e+i.value[0]/100:e},0))},t.prototype.getMonsterBombBonus=function(e){if(this.monsterBomb[e.node.uuid]){var t=this.findBuffByEffectType(31);return t?t.value[0]/100:0}return 0},t.prototype.getBleedBonus=function(e){var t=this.findPlayerBuffByEffectType(e,49);return t?t.value[0]/100:0},t.prototype.setMonsterBomb=function(e){this.monsterBomb[e]="ok"},t.prototype.cleanMosterBomb=function(e){delete this.monsterBomb[e]},t.prototype.getBombBuffScope=function(e){var t=this.findPlayerBuffByEffectType(e,4);return t?t.value[0]/100:0},t.prototype.setBombDamage=function(e,t){var i=this.findPlayerBuffByEffectType(e,42);if(i){n.EventMgrInstance.emitEvent(a.EVENT_TYPE.Game_Add_BaoZha,t.node.getPosition(),2,i.value[0]);var o=t.getNowMosterNode(i.value[0]),r=this.applyAttackBonus(e,e.sgattack,1);r+=r*i.value[1]/100,o.forEach(function(t){t.getComponent(p.default).fujiaAttack(r,1,e)})}},t.prototype.getRangeBuff=function(e){return this.findPlayerBuffByEffectType(e,36)},t.prototype.getBombBuff=function(e){for(var t=null,i=0;i<this.ciTiaoData.length;i++){var o=this.ciTiaoData[i];if(o.shuiguoId==e.playerId+1e3&&4==(a=r.Excel.shuiguobuff(o.citiaoshuzhitype)).buffefftype){t=a;break}}if(!t){var a,n=s.ExcelUtil.getMatchingData(r.Excel.shuiguohecheng_all,"shuiguoId",e.playerId+1e3)[e.playerInfo.equipLevel];n&&(a=r.Excel.shuiguobuff(n.newTianFuBuff))&&4==a.buffefftype&&(t=a)}return t},t.prototype.findPlayerBuffByEffectType=function(e,t){for(var i=0,o=this.ciTiaoData;i<o.length;i++){var a=o[i];if(a.shuiguoId===e.playerId+1e3){var n=r.Excel.shuiguobuff(a.citiaoshuzhitype);if(n.buffefftype===t)return n}}return null},t.prototype.getBlueMelonExtraBuff=function(e){return this.findPlayerBuffByEffectType(e,32)},t.prototype.getBeOhterShuiGuoBuff=function(e){for(var t=e.node.parent.children,i=0,a=0;a<t.length;a++){var n=t[a];if(e.node.uuid!==n.uuid&&3===n.getComponent(_.default).playerId)for(var r=n.getChildByName("dir").children,s=0;s<r.length;s++){var c=r[s],l=c.x+n.x,u=c.y+n.y;if(o.default.isPointInRect(cc.v2(l,u),e.node)){i++;break}}}return i},t.prototype.getDurianBuff=function(e){return this.getDurianCountBuff(e,30,3)},t.prototype.getDurianBomb=function(e){var t=null,i=s.ExcelUtil.getMatchingData(r.Excel.shuiguohecheng_all,"shuiguoId",e.playerId+1e3)[e.playerInfo.equipLevel];if(i){var o=r.Excel.shuiguobuff(i.newTianFuBuff);49===o.buffefftype&&(t=o)}return t},t.prototype.getDurianCountBuff=function(e,t,i){var o=this.findPlayerBuffByEffectType(e,t);if(o){var a=e.node.uuid,n=(this.durianCountRecord[a]||0)+1;if(this.durianCountRecord[a]=n,n>i)return this.durianCountRecord[a]=0,o}return null},t.prototype.cleanLiuLian=function(){this.durianCountRecord={}},t.prototype.getAttackCritical=function(e,t){void 0===t&&(t=!1);for(var i=0,o=0,a=null,n=0,s=this.ciTiaoData;n<s.length;n++){var c=s[n],l=r.Excel.shuiguobuff(c.citiaoshuzhitype);e.kuangrePlayer&&e.kuangrePlayer.playerId+1e3===c.shuiguoId&&(26===l.buffefftype&&(i+=l.value[0]/100),23===l.buffefftype&&(o+=l.value[0]/100)),c.shuiguoId!==e.playerId+1e3&&c.shuiguoId||(12===l.buffefftype&&(i+=l.value[0]/100),13===l.buffefftype&&(o+=l.value[0]/100),34===l.buffefftype&&(a=l))}return{baojijilv:i=this.applyIntervalBuff(e,a,i,t),baojijiacheng:o}},t.prototype.applyIntervalBuff=function(e,t,i,o){if(t){var a=e.node.uuid,n=this.intervalCount[a]||0;o||(n+=1),this.intervalCount[a]=n,n>t.value[0]&&(this.intervalCount[a]=0,i=1)}return i},t.prototype.isFrenzyOver=function(){return this.ciTiaoData.some(function(e){return 25===r.Excel.shuiguobuff(e.citiaoshuzhitype).buffefftype})},t.prototype.getLemonReal=function(e){for(var t=e.node.parent.children,i=[],a=0;a<t.length;a++){var n=t[a];if(n.uuid!==e.node.uuid){var r=n.getComponent(_.default);if(3===r.playerId)for(var s=n.getChildByName("dir").children,c=0;c<s.length;c++){var l=s[c],u=l.x+n.x,d=l.y+n.y;if(o.default.isPointInRect(cc.v2(u,d),e.node)){i.push(r);break}}}}return i},t.prototype.getFixedAttack=function(e){var t=this,i=this.getBeOhterShuiGuoBuff(e),o=this.ciTiaoData.reduce(function(e,t){var o=r.Excel.shuiguobuff(t.citiaoshuzhitype);return 21===o.buffefftype?e+o.value[0]*i:e},0);return this.getLemonReal(e).reduce(function(e,i){var o=r.Excel.shuiguo(i.playerId+1e3),a=r.Excel.shuiguobuff(o.talent);return e+t.getLemonResult(i,a)},o)},t.prototype.getLemonResult=function(e,t){var i=s.ExcelUtil.getMatchingData(r.Excel.shuiguolevel_all,"shuiguoId",e.playerId+1e3),o=d.PlayerDataMgr.getEquipDataById(e.playerId+1e3).level,a=i.slice(0,o).reduce(function(e,t,i){return i>0?e+t.addbeidongbuff[0]:e},0),n=s.ExcelUtil.getMatchingData(r.Excel.shuiguohecheng_all,"shuiguoId",e.playerId+1e3)[e.playerInfo.equipLevel],c=n?n.addbeidongbuff[0]/100:0;return t.value[0]*(1+c)+a},t.prototype.addTalent=function(e){return e.kuangrePlayer?[r.Excel.shuiguobuff(e.kuangrePlayer.sgtianfuid)]:[]},t.prototype.addPlayerSendCount=function(e){var t=e.node.uuid;this.playerSendCount[t]=(this.playerSendCount[t]||0)+1},t.prototype.clearPlayerSendCount=function(e){delete this.playerSendCount[e.node.uuid]},t.prototype.getPlayerExperienceValue=function(e){return e*(1+this.ciTiaoData.reduce(function(e,t){var i=r.Excel.shuiguobuff(t.citiaoshuzhitype);return 47===i.buffefftype?e+i.value[0]/100:e},0))},t.prototype.isStacked=function(e){return this.ciTiaoData.some(function(t){return t.shuiguoId===e.playerId+1e3&&35===r.Excel.shuiguobuff(t.citiaoshuzhitype).buffefftype})},t.prototype.getCurrentSpeedRatio=function(){return this.ciTiaoData.reduce(function(e,t){var i=r.Excel.shuiguobuff(t.citiaoshuzhitype);return 19===i.buffefftype?e+i.value[0]/100:e},0)},t.prototype.isContinuousAttack=function(e){return this.ciTiaoData.some(function(t){return t.shuiguoId===e.playerId+1e3&&18===r.Excel.shuiguobuff(t.citiaoshuzhitype).buffefftype})},t.prototype.getFruitBuff=function(e,t){var i=r.Excel.shuiguo(e),o=r.Excel.shuiguobuff(i.talent),a=o.value[0];return 1002===e?a=this.getFruitBonus(t):1003===e&&(a=this.getHamiMelonBonus(t)),{nowvalue:a,otherValue:void 0!==o.value[1]?o.value[1]:-1}},t.prototype.getFruitBonus=function(e){var t=r.Excel.shuiguo(1002),i=s.ExcelUtil.getMatchingData(r.Excel.shuiguohecheng_all,"shuiguoId",1002)[e],o=r.Excel.shuiguobuff(t.talent).value[0],a=0;return i&&i.addbeidongbuff[0]&&(a=i.addbeidongbuff[0]/100),o*(1+a)},t.prototype.getHamiMelonBonus=function(e){var t=r.Excel.shuiguo(1003),i=s.ExcelUtil.getMatchingData(r.Excel.shuiguohecheng_all,"shuiguoId",1003)[e],o=r.Excel.shuiguobuff(t.talent).value[0],a=0;return i&&i.addbeidongbuff[0]&&(a=i.addbeidongbuff[0]/100),o*(1+a)},t.prototype.setFrenzyBuff=function(e){var t=e.node.parent.children.filter(function(t){var i=t.getComponent(_.default);return t.uuid!==e.node.uuid&&!i.kuangrePlayer&&![5,8,9].includes(i.sgattacktagtype)});t.length>0&&t[o.default.getRandomInteger(0,t.length-1)].setKuangRe(e)},t.prototype.hasBuffEffectType=function(e){return this.ciTiaoData.some(function(t){return r.Excel.shuiguobuff(t.citiaoshuzhitype).buffefftype===e})},t.prototype.calculateBuffValueByEffectType=function(e,t){return this.ciTiaoData.reduce(function(i,o){var a=r.Excel.shuiguobuff(o.citiaoshuzhitype);return a.buffefftype===e?i+a.value[0]/t:i},0)},t.prototype.countBuffEffectType=function(e){return this.ciTiaoData.reduce(function(t,i){return r.Excel.shuiguobuff(i.citiaoshuzhitype).buffefftype===e?t+1:t},0)},t}(h.SingletonBase);i.BuffMgr=g.getInstance(),cc._RF.pop()},{"./CommonUtils":"CommonUtils","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./ExcelUtil":"ExcelUtil","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./HallGlobalVariable":"HallGlobalVariable","./PlayerDataManager":"PlayerDataManager","./SingletonManager":"SingletonManager","./UI_MosterLogic":"UI_MosterLogic","./UI_Player":"UI_Player"}],BundleConfig:[function(e,t,i){"use strict";var o;cc._RF.push(t,"beaf7+EOcVJwK8HqWLC4l8i","BundleConfig"),Object.defineProperty(i,"__esModule",{value:!0}),i.MainGameBundle=i.BundleNames=void 0,function(e){e.Resouce="resouce",e.Excel="excel",e.Audio="audio",e.Home="home",e.Game="game",e.Common="common"}(o=i.BundleNames||(i.BundleNames={})),i.MainGameBundle=o.Home,cc._RF.pop()},{}],CameraShak:[function(e,t,i){"use strict";cc._RF.push(t,"faa9bydhAVI/r/Y6SwTjVta","CameraShak"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./EventManager"),a=e("./ResKeeper"),n=e("./EvenType"),r=cc._decorator,s=r.ccclass,c=(r.property,r.inspector,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEnable=function(){o.EventMgrInstance.addListener(n.EVENT_TYPE.COMMON_SHAK,this.executeShake,this)},t.prototype.onDisable=function(){o.EventMgrInstance.removeListener(n.EVENT_TYPE.COMMON_SHAK,this.executeShake,this)},t.prototype.executeShake=function(){var e=this;cc.tween(this.node).by(.05,{position:cc.v3(8,8)}).by(.05,{position:cc.v3(-16,-16)}).by(.05,{position:cc.v3(8,8)}).call(function(){e.node.setPosition(cc.Vec2.ZERO)}).start()},__decorate([s],t)}(a.default));i.default=c,cc._RF.pop()},{"./EvenType":"EvenType","./EventManager":"EventManager","./ResKeeper":"ResKeeper"}],CommonUtils:[function(e,t,i){"use strict";cc._RF.push(t,"0d1afhjo+ZPrJWbe0mNqYmh","CommonUtils"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./AudioManager"),a=e("./BundleConfig"),n=e("./GameDataManager"),r=e("./LogManager"),s=e("./NodePoolMag"),c=e("./PlayerDataManager"),l=e("./ResLoader"),u=e("./TipsManager"),d=function(){function e(){}return e.limitInRange=function(e,t){e=Math.min(e,t);var i=Math.max(e,t)-e;return e+Math.random()*i},e.limitIntegerInRange=function(e,t){return Math.floor(this.limitInRange(e,t+1))},e.getRandomInteger=function(e,t){var i;return e>t&&(e=(i=[t,e])[0],t=i[1]),Math.floor(Math.random()*(t-e+1))+e},e.limitSpriteSize=function(e,t){if(e.spriteFrame){var i=e.spriteFrame.getOriginalSize(),o=1;(i.width>t||i.height>t)&&(o=i.width>i.height?t/i.width:t/i.height,o=Math.min(o,1)),e.node.scale=o}else e.node.scale=1},e.isPointInRect=function(e,t){var i=t.x-t.width/2,o=t.x+t.width/2,a=t.y-t.height/2,n=t.y+t.height/2;return e.x>i&&e.x<o&&e.y>a&&e.y<n},e.onShare=function(e){window.tt||window.wx&&this.wxShare(e)},e.wxShare=function(e){var t=this;window.wx&&(this._onShowCallback=function(){window.wx.offShow(t._onShowCallback);var i=Date.now();e&&(t._failedShareCount<2?i-t._lastShareTime>2e3?Math.random()<.3?(e(!1),u.TipMgr.showToast("\u5206\u4eab\u5931\u8d25,\u8bf7\u5206\u4eab\u81f3\u7fa4\u804a"),t._failedShareCount++):(u.TipMgr.showToast("\u5206\u4eab\u6210\u529f"),e(!0)):(t._failedShareCount++,e(!1),u.TipMgr.showToast("\u5206\u4eab\u5931\u8d25,\u8bf7\u91cd\u65b0\u5206\u4eab")):(u.TipMgr.showToast("\u5206\u4eab\u6210\u529f"),t._failedShareCount=0,e(!0)))},window.wx.onShow(this._onShowCallback),this._lastShareTime=Date.now(),window.wx.shareAppMessage({imageUrlId:"",imageUrl:"https://mmocgame.qpic.cn/wechatgame/bSAKPPBBQFUN44PHyDL1mOY72Z1pA2eT0x3QtvGFxdL0ZPob1wej1Dy32ttBtt5y/0",title:"\u4f60\u6562\u6765\u5403\u6211\u5417"}))},e.replaceStringSymbols=function(e,t,i){for(var o=e,a=0,n=i;a<n.length;a++){var r=n[a];o=o.replace(t,r)}return o},e.showCoinAnimation=function(e,t,i,a,n,r){return void 0===n&&(n=!0),void 0===r&&(r=null),__awaiter(this,void 0,Promise,function(){var c,u;return __generator(this,function(d){switch(d.label){case 0:return c=s.NodePoolMag.instance.getNodeFromPool("coin"),o.AudioMgr.playSoundEffect("effect/daozhang",!1),c?[3,2]:[4,l.default.loadRes("common","prefab/CoinIcon",cc.Prefab)];case 1:u=d.sent(),s.NodePoolMag.instance.createNodePool("coin",1,u,null),d.label=2;case 2:return this.playCoinAnimation({toPosition:e,count:10,amount:i,name:a,fromPosition:t,save:n,onComplete:r}),[2]}})})},e.clearCoins=function(){return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return cc.director.getScene().children.forEach(function(e){"fei_yinbi"===e.name&&s.NodePoolMag.instance.recycleNodeToPool("coin",e)}),[2]})})},e.playCoinAnimation=function(e){return __awaiter(this,void 0,Promise,function(){var t,i,o,u,d,h,p=this;return __generator(this,function(_){switch(_.label){case 0:for(u in t=function(e){return Math.floor(Math.random()*e)},i={fromPosition:cc.v2(cc.winSize.width/2,cc.winSize.height/2),toPosition:cc.v2(-320,600),count:6,amount:0,name:"gold",save:!0,onComplete:null},o=Object.assign({},i,e))null==o[u]&&(o[u]=i[u]);if(o.save)switch(o.name){case"yinbi":n.GameDataMgr.addSilverCoin(o.amount);break;case"power":c.PlayerDataMgr.addPower(o.amount);break;case"jinbi":c.PlayerDataMgr.addGold(o.amount);break;case"zuanshi":c.PlayerDataMgr.addDiamond(o.amount)}d=function(e){return __awaiter(p,void 0,void 0,function(){var i,n,c,u,d,h;return __generator(this,function(p){switch(p.label){case 0:if(!(i=s.NodePoolMag.instance.getNodeFromPool("coin")))return[2];switch(n=i.getChildByName("img").getComponent(cc.Sprite),c=null,o.name){case"yinbi":return[3,1];case"jinbi":return[3,3];case"zuanshi":return[3,5];case"power":return[3,7]}return[3,9];case 1:return[4,l.default.loadRes(a.BundleNames.Game,"res/yinbi",cc.SpriteFrame)];case 2:return c=p.sent(),[3,9];case 3:return[4,l.default.loadRes(a.BundleNames.Common,"res/ui/tu/goldIcon",cc.SpriteFrame)];case 4:return c=p.sent(),[3,9];case 5:return[4,l.default.loadRes(a.BundleNames.Common,"res/ui/tu/diamondIcon",cc.SpriteFrame)];case 6:return c=p.sent(),[3,9];case 7:return[4,l.default.loadRes(a.BundleNames.Common,"res/ui/tu/powerIcon",cc.SpriteFrame)];case 8:return c=p.sent(),[3,9];case 9:return i.name="fei_yinbi",n.spriteFrame=c,i.zIndex=cc.macro.MAX_ZINDEX,r.LogMgr.debug("\u91d1\u5e01\u8282\u70b9\uff1a",i,o.fromPosition),i.setPosition(o.fromPosition),cc.director.getScene().addChild(i),u=t(240)-120,d=t(240)-120,h=t(200)/1e3,cc.tween(i).delay(h).by(.6,{x:u,y:d},{easing:cc.easing.quadOut}).to(1,{x:o.toPosition.x,y:o.toPosition.y},{easing:cc.easing.quartIn}).call(function(){0!==e?s.NodePoolMag.instance.recycleNodeToPool("coin",i):(o.onComplete&&o.onComplete(),s.NodePoolMag.instance.recycleNodeToPool("coin",i))}).start(),[2]}})})},h=0,_.label=1;case 1:return h<o.count?[4,d(h)]:[3,4];case 2:_.sent(),_.label=3;case 3:return h++,[3,1];case 4:return[2]}})})},e.layoutChildren=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=!0);var o=e.children,a=[];if(o.length<=1)return 1===o.length&&(a.push(cc.Vec2.ZERO),i&&o[0].setPosition(0,0)),a;var n=0;o.forEach(function(e){return n+=e.width}),n+=(o.length-1)*t;for(var r=0,s=-1;s<o.length-1;s++)r+=-1===s?-n/2+o[0].width/2:o[s].width/2+t+o[s+1].width/2,a.push(cc.v2(r,0)),i&&(o[s+1].x=r);return a},e.sendTrackingEvent=function(e,t){this.sendTrackingDataByItemName(e,t),r.LogMgr.debug("\u53d1\u9001\u57cb\u70b9",e,t)},e.sendTrackingDataByItemName=function(e,t){var i;window.tt?i=window.tt:window.wx&&(i=window.wx),i&&i.uma&&i.uma.trackEvent(e,{itemName:t})},e.loadLevel5Effect=function(e,t,i,o,n,r){return void 0===n&&(n=null),void 0===r&&(r=null),__awaiter(this,void 0,Promise,function(){return __generator(this,function(){return t&&t.destroyAllChildren(),o(a.BundleNames.Common,"item/item_level5_qi_"+e,cc.Prefab).then(function(e){var i=cc.instantiate(e);t&&(i.parent=t,i.setPosition(0,0)),n&&n(i)}),i&&i.destroyAllChildren(),o(a.BundleNames.Common,"item/item_level5_huo_"+e,cc.Prefab).then(function(e){var t=cc.instantiate(e);i&&(t.parent=i,t.setPosition(0,0)),r&&r(t)}),[2]})})},e._onShowCallback=null,e._lastShareTime=0,e._failedShareCount=0,e}();i.default=d,cc._RF.pop()},{"./AudioManager":"AudioManager","./BundleConfig":"BundleConfig","./GameDataManager":"GameDataManager","./LogManager":"LogManager","./NodePoolMag":"NodePoolMag","./PlayerDataManager":"PlayerDataManager","./ResLoader":"ResLoader","./TipsManager":"TipsManager"}],Const_Common:[function(e,t,i){"use strict";cc._RF.push(t,"e53ffDry2dAMJTCU812PovA","Const_Common"),Object.defineProperty(i,"__esModule",{value:!0}),i.DressUpEquipGuideIndex=i.UpEquipLevelGuideIndex=i.GameBagGuideIndex=i.GuideName=void 0,function(e){e.GameBag="gameBag",e.EquipLevelUp="upEquipLevel",e.FruitDressUpEquip="dressupEquip"}(i.GuideName||(i.GuideName={})),function(e){e[e.InitialGuide1=0]="InitialGuide1",e[e.DragFruitGuide2=1]="DragFruitGuide2",e[e.RefreshButtonGuide3=2]="RefreshButtonGuide3",e[e.SynthesisGuide4=3]="SynthesisGuide4",e[e.StartBattleGuide6=4]="StartBattleGuide6",e[e.EntryGuide7=5]="EntryGuide7",e[e.EntryGuide7Completion=6]="EntryGuide7Completion",e[e.GridGuide8=7]="GridGuide8",e[e.OtherFruitsGuide9=8]="OtherFruitsGuide9",e[e.GuideEnd10=9]="GuideEnd10",e[e.GuideCompletion=10]="GuideCompletion"}(i.GameBagGuideIndex||(i.GameBagGuideIndex={})),function(e){e[e.GiveFixedReward1=0]="GiveFixedReward1",e[e.GuideClickWarehouseFruit2=1]="GuideClickWarehouseFruit2",e[e.GuideClickUpgrade3=2]="GuideClickUpgrade3",e[e.GuideBattle4=3]="GuideBattle4",e[e.GuideCompletion=4]="GuideCompletion"}(i.UpEquipLevelGuideIndex||(i.UpEquipLevelGuideIndex={})),function(e){e[e.GuideDialog=0]="GuideDialog",e[e.SelectFruit=1]="SelectFruit",e[e.GuideDressing=2]="GuideDressing",e[e.GuideCompletion=3]="GuideCompletion"}(i.DressUpEquipGuideIndex||(i.DressUpEquipGuideIndex={})),cc._RF.pop()},{}],Const_Game:[function(e,t,i){"use strict";cc._RF.push(t,"a78eb7Wwi9EepRTuaELxcaf","Const_Game"),Object.defineProperty(i,"__esModule",{value:!0}),i.FruitPrefabName=i.FruitId=i.VideoPurchaseData=void 0;i.VideoPurchaseData=function(){this.coinCount=0},function(e){e[e["\u6768\u6843\u5fcd\u8005"]=1001]="\u6768\u6843\u5fcd\u8005",e[e["\u62db\u8d22\u6a59\u5b50"]=1002]="\u62db\u8d22\u6a59\u5b50",e[e["\u67e0\u6aac\u7cbe"]=1003]="\u67e0\u6aac\u7cbe",e[e["\u7206\u5934\u74dc"]=1004]="\u7206\u5934\u74dc",e[e["\u5143\u5a74\u679c"]=1005]="\u5143\u5a74\u679c",e[e["\u897f\u74dc\u5927\u70ae"]=1006]="\u897f\u74dc\u5927\u70ae",e[e["\u69b4\u83b2\u738b"]=1007]="\u69b4\u83b2\u738b",e[e["\u5357\u74dc\u70b8\u5f39"]=1008]="\u5357\u74dc\u70b8\u5f39",e[e["\u9999\u8549\u5c04\u624b"]=1009]="\u9999\u8549\u5c04\u624b",e[e["\u9ec4\u74dc\u5927\u68d2"]=1010]="\u9ec4\u74dc\u5927\u68d2",e[e["\u8fa3\u59b9\u5b50"]=1011]="\u8fa3\u59b9\u5b50",e[e["\u51bb\u65af\u68a8"]=1012]="\u51bb\u65af\u68a8",e[e["\u6bd2\u8611\u83c7"]=1013]="\u6bd2\u8611\u83c7",e[e["\u5929\u5c71\u96ea\u83b2"]=1014]="\u5929\u5c71\u96ea\u83b2"}(i.FruitId||(i.FruitId={})),function(e){e.gezi="gezi",e.heng2="heng2",e.Lxingfan="Lxingfan",e.sige="sige",e.shu2="shu2",e.Lxing="Lxing",e.shu3="shu3",e.heng3="heng3",e.qizi="qizi"}(i.FruitPrefabName||(i.FruitPrefabName={})),cc._RF.pop()},{}],Const_Hall:[function(e,t,i){"use strict";cc._RF.push(t,"f3041Y9TKxAHZ+bSSaljqXR","Const_Hall"),Object.defineProperty(i,"__esModule",{value:!0}),i.BagEquipShowData=i.equipIconSize=i.BoxInfoData=i.GetItemsData=i.OpenBoxViewData=i.ShopItemInfoData=i.RichType=i.TodayShopItemData=i.ShopSaveData=void 0;i.ShopSaveData=function(){this.nextResetTime=0,this.todayResetCount=0,this.boxExp=0,this.boxLevel=0,this.box1BuyCount=0,this.box2BuyCount=0,this.videoBuyGoldCount=0,this.todayBuyDiamondCount=0};i.TodayShopItemData=function(){},function(e){e[e.Video=0]="Video",e[e.Gold=1]="Gold",e[e.Diamond=2]="Diamond"}(i.RichType||(i.RichType={}));i.ShopItemInfoData=function(){};i.OpenBoxViewData=function(){this.boxType=0};i.GetItemsData=function(){};i.BoxInfoData=function(){},i.equipIconSize=100;i.BagEquipShowData=function(){this.unLockChar=0,this.shuiGuoId=0},cc._RF.pop()},{}],DataManager:[function(e,t,i){"use strict";cc._RF.push(t,"9fe3d22W6ZCZqBmYtzZaUkr","DataManager"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./0/YpNetMag"),a=e("./GameConfig"),n=e("./LogManager"),r=function(e){function t(){var t=e.call(this)||this;return t._secret_key="secret-key",t._dataMap=new Map,t}return __extends(t,e),t.prototype._save=function(e,t){if(n.LogMgr.debug("DataManager","saveData",e,t),n.LogMgr.debug("YpNetMag.isload=",o.GameNetworkManager.isLoad),o.GameNetworkManager.isLoad){var i=JSON.stringify(t),a=this._getKey(e);this._setKey(a,i),this.saveCount(),this._dataMap.set(e,t),o.GameNetworkManager.saveSeverStorage()}},t.prototype.getSecretKey=function(){return this._secret_key},t.prototype.getAllData=function(){return this._dataMap},t.prototype._load=function(e){var t=this._getKey(e),i=localStorage.getItem(t),o=null;if(i)try{o=JSON.parse(i)}catch(a){o=i}return this._dataMap.set(e,o),o},t.prototype.saveCount=function(){var e=Number(localStorage.getItem("gameversion"));e||(e=0),e+=1,localStorage.setItem("gameversion",e.toString())},t.prototype._clear=function(e){var t=[];if(e){t.push(e);for(var i=0;i<t.length;i++){var o=t[i],a=this._getKey(o);this._rmKey(a)}}else localStorage.clear()},t.prototype._getKey=function(e){return a.default.appConfig.Publish?this._secret_key+"-release-"+e:this._secret_key+"-xfd-"+e},t.prototype._setKey=function(e,t){localStorage.setItem(e,t)},t.prototype._rmKey=function(e){localStorage.removeItem(e),this._dataMap.delete(e)},t.prototype.isNull=function(e){return null==e},t}(e("./SingletonManager").SingletonBase);i.default=r,cc._RF.pop()},{"./0/YpNetMag":"YpNetMag","./GameConfig":"GameConfig","./LogManager":"LogManager","./SingletonManager":"SingletonManager"}],DebugManager:[function(e,t,i){"use strict";cc._RF.push(t,"3442d0HvSBBw4thXVnBmsFi","DebugManager"),Object.defineProperty(i,"__esModule",{value:!0}),i.DebugMgr=void 0;var o=e("./BundleConfig"),a=e("./GameConfig"),n=e("./ResLoader"),r=e("./ResUtil"),s=e("./SingletonManager"),c=e("./UI_Debug"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.debugUI=null,t.logEntries=[],t.isResourcesLoaded=!1,t}return __extends(t,e),t.prototype.addLogEntry=function(e){this.logEntries.push(e),this.debugUI?this.executeDebug():this.fetchDebugUI()},t.prototype.removeLogEntry=function(e){var t=this.logEntries.indexOf(e);t>=0&&this.logEntries.splice(t,1),this.executeDebug()},t.prototype.clearLogs=function(){this.logEntries.length=0,this.debugUI=null,this.isResourcesLoaded=!1},t.prototype.fetchDebugUI=function(){var e,t=this;this.isResourcesLoaded||(null===(e=a.default.appConfig)||void 0===e?void 0:e.Publish)||(this.isResourcesLoaded=!0,n.default.loadRes(o.BundleNames.Resouce,"common/UI_Debug",cc.Prefab).then(function(e){var i=r.ResourceUtil.instantiate(e);cc.director.getScene().getChildByName("Canvas").getChildByName("UITips").addChild(i),t.debugUI=i.getComponent(c.default),t.executeDebug()}))},t.prototype.executeDebug=function(){var e;null===(e=this.debugUI)||void 0===e||e.refresh(this.logEntries)},t}(s.SingletonBase);i.DebugMgr=l.getInstance(),cc._RF.pop()},{"./BundleConfig":"BundleConfig","./GameConfig":"GameConfig","./ResLoader":"ResLoader","./ResUtil":"ResUtil","./SingletonManager":"SingletonManager","./UI_Debug":"UI_Debug"}],DingbuShipei:[function(e,t,i){"use strict";cc._RF.push(t,"22a56v89kJIpLY9Ie6nHrQA","DingbuShipei"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./ResKeeper"),a=cc._decorator,n=a.ccclass,r=a.property,s=(a.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.linpinShiPei=0,t.deftop=0,t}return __extends(t,e),t.prototype.onEnable=function(){var e=this;this.scheduleOnce(function(){var t=e.node.getComponent(cc.Widget);if(t){0===e.deftop&&(e.deftop=t.top);var i=e.deftop;cc.winSize.height/cc.winSize.width>2&&(t.top=i+e.linpinShiPei,t.updateAlignment())}})},__decorate([r()],t.prototype,"linpinShiPei",void 0),__decorate([n],t)}(o.default));i.default=s,cc._RF.pop()},{"./ResKeeper":"ResKeeper"}],EditorAsset:[function(e,t,i){"use strict";cc._RF.push(t,"025e4q2IsFKIKaZ+vTVvL/W","EditorAsset"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(){}return e.load=function(){return new Promise(function(e){e(null),cc.warn("[EditorAsset]","\u8be5\u51fd\u6570\u53ea\u5728\u7f16\u8f91\u5668\u73af\u5883\u5185\u6709\u6548\uff01")})},e}();i.default=o,cc._RF.pop()},{}],Entry:[function(e,t,i){"use strict";cc._RF.push(t,"da803qpn0xMgrpoqN4fnvfq","Entry"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./BundleConfig"),a=e("./UIConfig_Entry"),n=e("./LogManager"),r=e("./ScheduleManage"),s=e("./UIManager"),c=e("./UIScene"),l=cc._decorator,u=l.ccclass,d=(l.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype._show=function(){var e=[];for(var t in a.UIConfigEntry.UIConfig_Entry)if(a.UIConfigEntry.UIConfig_Entry.hasOwnProperty(t)){var i=a.UIConfigEntry.UIConfig_Entry[t].prefab;e.push(i)}cc.resources.preload(e,function(e){e&&n.LogMgr.error("\u9884\u52a0\u8f7d\u901a\u7528\u9884\u5236\u4f53\u9519\u8bef: "+e),s.default.open(o.BundleNames.Resouce,a.UIConfigEntry.UIView_Entry.UI_Entry)}),cc.debug.setDisplayStats(!1)},t.prototype.update=function(e){r.ScheduleMgr.update(e)},__decorate([u],t)}(c.default));i.default=d,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./LogManager":"LogManager","./ScheduleManage":"ScheduleManage","./UIConfig_Entry":"UIConfig_Entry","./UIManager":"UIManager","./UIScene":"UIScene"}],EvenType:[function(e,t,i){"use strict";cc._RF.push(t,"04853hh5qlAraMtvWAbIgsS","EvenType"),Object.defineProperty(i,"__esModule",{value:!0}),i.EVENT_TYPE=void 0,i.EVENT_TYPE={Game_next_level:"Game_next_level",Game_add_power:"Game_add_power",Game_count_down_time:"Game_count_down_time",Game_OpenGame:"Game_OpenGame",Game_CameraControl:"Game_CameraControl",Game_Update:"Game_Update",Game_ShangHai_FeiZi:"Game_ShangHai_FeiZi",Game_Moster_DIE:"Game_Moster_DIE",Game_Add_CiTiao:"Game_Add_CiTiao",Game_Moster_Attack:"Game_Moster_Attack",Hall_StartGame:"Hall_StartGame",Hall_ResetRich:"Hall_ResetRich",HallResetShopBox:"HallResetShopBox",HallScrollShop:"HallScrollShop",HallBagShowDrag:"HallBagShowDrag",HallBagRemoveId:"HallBagRemoveId",HallResetBag:"HallResetBag",HallResetUnLockFurit:"HallResetUnLockFurit",Game_CreateDuWu:"Game_CreateDuWu",Game_YinBiValue:"Game_YinBiValue",Game_Add_YinBi:"Game_Add_YinBi",Game_Moster_FenLie:"Game_Moster_FenLie",MainRedPointChange:"MainRedPointChange",HideGuideShow:"HideGuideShow",Game_ZhaoHuan_Moster:"Game_ZhaoHuan_Moster",Game_Update_Level_Award:"Game_Update_Level_Award",Game_Update_TiaoZhan_Award:"Game_Update_TiaoZhan_Award",Game_Add_BaoZha:"Game_Add_BaoZha",Game_Load_View:"Game_Load_View",Home_Add_Gold:"Home_Add_Gold",COMMON_SHAK:"COMMON_SHAK",Game_Value_Fei:"Game_Value_Fei",Game_Hide:"Game_Hide",Game_PASS:"Game_PASS",GAME_LOCK_SCREE:"GAME_LOCK_SCREE",ResetWareHouseAI:"ResetWareHouseAI",ResetGameBagAI:"ResetGameBagAI",GAME_TIAOZHAN_VIEW:"GAME_TIAOZHAN_VIEW",GAME_TIAOZHAN_COUNT:"GAME_TIAOZHAN_COUNT",GAME_BackHall:"GAME_BackHall",GAME_QianDao_COUNT:"GAME_QianDao_COUNT",Game_TIAOZHAN_PASS:"Game_TIAOZHAN_PASS",Game_TiaoZhan_JiFen:"Game_TiaoZhan_JiFen",GAME_UPDATE_BAG:"GAME_UPDATE_BAG",HOME_QIANDAO_UPDATE:"HOME_QIANDAO_UPDATE",GAME_SHANGHAI_TONGJI:"GAME_SHANGHAI_TONGJI",GAME_SHOW_BOOS:"GAME_SHOW_BOOS",GAME_HIDE_TONGJI:"GAME_HIDE_TONGJI",Game_Show_Level5Tip:"Game_Show_Level5Tip",RichText_Click:"RichText_Click"},cc._RF.pop()},{}],EventManager:[function(e,t,i){"use strict";cc._RF.push(t,"bd4cdNRKe1CG5g8gJ77yT1o","EventManager"),Object.defineProperty(i,"__esModule",{value:!0}),i.EventMgrInstance=void 0;var o=e("./LogManager"),a=function(e){function t(){var t=e.call(this)||this;return t._eventTarget=new cc.EventTarget,t}return __extends(t,e),t.prototype.addListener=function(e,t,i){return e?null==t?(o.LogMgr.warn("addEventListener callback is nil"),!1):(this._eventTarget.on(e,t,i),!0):(o.LogMgr.warn("eventName is empty: "+e),!1)},t.prototype.addListenerOnce=function(e,t,i){return e?null==t?(o.LogMgr.warn("addEventListenerOnce callback is nil"),!1):(this._eventTarget.once(e,t,i),!0):(o.LogMgr.warn("eventName is empty: "+e),!1)},t.prototype.clearListeners=function(){return this._eventTarget.clear(),!0},t.prototype.removeListener=function(e,t,i){this._eventTarget.off(e,t,i)},t.prototype.emitEvent=function(e){for(var t,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];(t=this._eventTarget).emit.apply(t,__spreadArrays([e],i))},t}(e("./SingletonManager").SingletonBase);i.EventMgrInstance=a.getInstance(),cc._RF.pop()},{"./LogManager":"LogManager","./SingletonManager":"SingletonManager"}],ExcelData:[function(e,t,i){"use strict";cc._RF.push(t,"68b11ntH39Mf5nwmiMoz1gy","ExcelData"),Object.defineProperty(i,"__esModule",{value:!0}),i.ExcelData=void 0;var o=e("./BaseExcel"),a=e("./Excel"),n=function(){function e(){}return e.loadConfig=function(e,t){switch(e){case"addPower":o.BaseExcel.loadData(e,t,a.AddPower);break;case"bagEquipRule":o.BaseExcel.loadData(e,t,a.BagEquipRule);break;case"shopBoxLevel":o.BaseExcel.loadData(e,t,a.ShopBoxLevel);break;case"shopControl":o.BaseExcel.loadData(e,t,a.ShopControl);break;case"shuiguoboshu":o.BaseExcel.loadData(e,t,a.ShuiguoBoshu);break;case"shuiguobuff":o.BaseExcel.loadData(e,t,a.ShuiguoBuff);break;case"shuiguocitiao":o.BaseExcel.loadData(e,t,a.ShuiguoCitiao);break;case"shuiguoconfig":o.BaseExcel.loadData(e,t,a.ShuiguoConfig);break;case"shuiguoguaiwu":o.BaseExcel.loadData(e,t,a.ShuiguoGuaiwu);break;case"shuiguoguanqia":o.BaseExcel.loadData(e,t,a.ShuiguoGuanqia);break;case"shuiguohecheng":o.BaseExcel.loadData(e,t,a.ShuiguoHecheng);break;case"shuiguojineng":o.BaseExcel.loadData(e,t,a.ShuiguoJineng);break;case"shuiguolevel":o.BaseExcel.loadData(e,t,a.ShuiguoLevel);break;case"shuiguoneibulevel":o.BaseExcel.loadData(e,t,a.ShuiguoNeibulevel);break;case"shuiguoqiandao":o.BaseExcel.loadData(e,t,a.ShuiguoQiandao);break;case"shuiguotianfu":o.BaseExcel.loadData(e,t,a.ShuiguoTianfu);break;case"shuiguotiaozhan":o.BaseExcel.loadData(e,t,a.ShuiguoTiaozhan);break;case"shuiguo":o.BaseExcel.loadData(e,t,a.Shuiguo);break;case"todayShop":o.BaseExcel.loadData(e,t,a.TodayShop);break;case"wareHouseControl":o.BaseExcel.loadData(e,t,a.WareHouseControl);break;default:console.error("Unknown config name: "+e)}},e.addPower="addPower",e.bagEquipRule="bagEquipRule",e.shopBoxLevel="shopBoxLevel",e.shopControl="shopControl",e.shuiguoboshu="shuiguoboshu",e.shuiguobuff="shuiguobuff",e.shuiguocitiao="shuiguocitiao",e.shuiguoconfig="shuiguoconfig",e.shuiguoguaiwu="shuiguoguaiwu",e.shuiguoguanqia="shuiguoguanqia",e.shuiguohecheng="shuiguohecheng",e.shuiguojineng="shuiguojineng",e.shuiguolevel="shuiguolevel",e.shuiguoneibulevel="shuiguoneibulevel",e.shuiguoqiandao="shuiguoqiandao",e.shuiguotianfu="shuiguotianfu",e.shuiguotiaozhan="shuiguotiaozhan",e.shuiguo="shuiguo",e.todayShop="todayShop",e.wareHouseControl="wareHouseControl",e.allFiles=["addPower","bagEquipRule","shopBoxLevel","shopControl","shuiguoboshu","shuiguobuff","shuiguocitiao","shuiguoconfig","shuiguoguaiwu","shuiguoguanqia","shuiguohecheng","shuiguojineng","shuiguolevel","shuiguoneibulevel","shuiguoqiandao","shuiguotianfu","shuiguotiaozhan","shuiguo","todayShop","wareHouseControl"],e}();i.ExcelData=n,cc._RF.pop()},{"./BaseExcel":"BaseExcel","./Excel":"Excel"}],ExcelLoader:[function(e,t,i){"use strict";cc._RF.push(t,"87cfaN9KYBGZaZhRnAsMU0Z","ExcelLoader"),Object.defineProperty(i,"__esModule",{value:!0}),i.ExcelLoader=void 0;var o=e("./BundleConfig"),a=e("./LogManager"),n=e("./ResLoader"),r=e("./ExcelData"),s=function(){function e(){}return e.loadAllExcelFiles=function(){var e=this;return new Promise(function(t){e._allFiles=__spreadArrays(r.ExcelData.allFiles),e._totalCount=e._allFiles.length;var i=setInterval(function(){return __awaiter(e,void 0,void 0,function(){var e;return __generator(this,function(){return this._loadedCount>=this._totalCount?(clearInterval(i),a.LogMgr.debug("load excel done",this._totalCount),t(!0)):(e=this._allFiles.pop())&&this.loadSingleExcelFile(e),[2]})})},1)})},e.loadSingleExcelFile=function(e){var t=this;n.default.loadRes(o.BundleNames.Excel,e,cc.JsonAsset).then(function(i){t._loadedCount++,i?r.ExcelData.loadConfig(e,i):console.error("load excel "+e+" error"),i.decRef()})},e._allFiles=[],e._totalCount=0,e._loadedCount=0,e}();i.ExcelLoader=s,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./ExcelData":"ExcelData","./LogManager":"LogManager","./ResLoader":"ResLoader"}],ExcelUtil:[function(e,t,i){"use strict";cc._RF.push(t,"495e5xu0R5ME7x/VDdn/IyZ","ExcelUtil"),Object.defineProperty(i,"__esModule",{value:!0}),i.ExcelUtil=void 0;var o=e("./BaseExcel"),a=function(){function e(){}return e.convertValueToString=function(e,t){var i=this;switch(e){case"string":return t;case"string[]":return t.join(",");case"number":return t+"";case"number[]":return t.join(",");case"number[][]":return t.map(function(e){return e.join(",")}).join(";");case"cc.Vec2":return t.x+","+t.y;case"cc.Vec2[]":return t.map(function(e){return e.x+","+e.y}).join(";");case"cc.Color":return t.toHEX("#rrggbb");case"cc.Color[]":return t.map(function(e){return e.toHEX("#rrggbb")}).join(",");case"itemData":return this.convertItemDataArrayToString([t]);case"itemData[]":return t.map(function(e){return i.convertItemDataArrayToString([e])}).join(";");case"boolean":return(t?1:0)+"";case"boolean[]":return t.map(function(e){return e?1:0}).join(",");default:return t}},e.convertStringToDataType=function(e,t){switch(t){case"string":return e;case"string[]":return e.split(",");case"number":return""===e?0:Number(e);case"number[]":return this.convertStringToNumberArray(e);case"number[][]":return this.convertStringToNumber2DArray(e);case"cc.Vec2":return this.convertStringToVec2(e);case"cc.Vec2[]":return this.convertStringToVec2Array(e);case"cc.Color":return this.convertStringToColor(e);case"cc.Color[]":return this.convertStringToColorArray(e);case"itemData":return this.convertStringToItemData(e);case"itemData[]":return this.convertStringToItemDataArray(e);case"boolean":return this.convertStringToBoolean(e);case"boolean[]":return this.convertStringToBooleanArray(e);default:return e}},e.convertItemDataArrayToString=function(e){return e.map(function(e,t){return 0===t?e.key+","+e.value:";"+e.key+","+e.value}).join("")},e.convertStringToBoolean=function(e){return!(""===e||"0"===e||"false"===e.toLowerCase())},e.convertStringToBooleanArray=function(e){return e.length>0?e.split(",").map(this.convertStringToBoolean):[]},e.convertStringToColorArray=function(e){return e.length>0?e.split(",").map(this.convertStringToColor):[]},e.convertStringToColor=function(e){if(e.length>=6){var t=parseInt(e.substring(0,2),16),i=parseInt(e.substring(2,4),16),o=parseInt(e.substring(4,6),16),a=e.length>6?parseInt(e.substring(6,8),16):255;return new cc.Color(t,i,o,a)}return cc.Color.BLACK},e.convertStringToVec2Array=function(e){return e.length>0?e.split(";").map(this.convertStringToVec2):[]},e.convertStringToVec2=function(e){var t=this.convertStringToNumberArray(e);return t.length>=2?new cc.Vec2(t[0],t[1]):new cc.Vec2(0,0)},e.convertStringToNumberArray=function(e){return e.length>0?e.split(",").map(Number):[]},e.convertStringToNumber2DArray=function(e){return e.length>0?e.split(";").map(this.convertStringToNumberArray):[]},e.convertItemDataToString=function(e){return e.extent?e.key+","+e.extent+","+e.value:e.key+","+e.value},e.convertStringToItemData=function(e){var t=this.convertStringToNumberArray(e),i=t.length;return 2===i?new o.itemData(t[0],t[1]):i>2?new o.itemData(t[0],t[1],t[2]):null},e.convertStringToItemDataArray=function(e){return e.length>0?e.split(";").map(this.convertStringToItemData):[]},e.convertItemArrayToString=function(e){return e.map(this.convertItemDataToString).join(";")},e.convertJsonToValue=function(e,t,i,o){var a={talk_task:"talk"}[i];for(var n in t){var r=e[n]||"";a&&t[n]===a&&r.indexOf("\\n")>=0&&r.replace(/\\n/g,"\n"),o[t[n]]=this.convertStringToDataType(r,o.typeStr[t[n]])}},e.convertExcelData=function(e,t,i){var o=new Map;if(t instanceof cc.JsonAsset){var a=t.json.rows,n=t.json.header;for(var r in a){var s=new i;this.convertJsonToValue(a[r],n,e,s),(u=parseInt(r))&&o.set(u,s)}}else if(Array.isArray(t)){var c=[],l={};for(var r in t.forEach(function(e,t){if(0===t)for(var i in e)c.push(i);var o=!0;for(var i in e)if(0===i.length||e[i].indexOf("##1")>=0||e[i].indexOf("##2")>=0){o=!1;break}if(o){var a=e[c[0]];a&&a.length>0&&(l[a]=e)}}),l){var u;s=new i,this.convertJsonToValue(l[r],c,e,s),(u=parseInt(r))&&o.set(u,s)}}return o},e.convertExcelToArray=function(e,t){void 0===t&&(t=",");for(var i,o=new RegExp("(\\"+t+'|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\'+t+"\\r\\n]*))","gi"),a=[[]];i=o.exec(e);){var n=i[1];n.length&&n!==t&&a.push([]);var r=i[2]?i[2].replace(/""/g,'"'):i[3];a[a.length-1].push(r)}return a.splice(-1),a},e.convertExcelToObjectArray=function(e){for(var t=this.convertExcelToArray(e),i=[],o=1;o<t.length;o++){for(var a={},n=0;n<t[0].length&&n<t[o].length;n++)a[t[0][n]]=t[o][n];i.push(a)}return i},e.convertExcelToJson=function(e){return JSON.stringify(this.convertExcelToObjectArray(e))},e.getMatchingData=function(e,t,i,o,a){var n=[];return e.forEach(function(e){e[t]&&e[t]===i&&(o?e[o]===a&&n.push(e):n.push(e))}),n},e}();i.ExcelUtil=a,cc._RF.pop()},{"./BaseExcel":"BaseExcel"}],Excel:[function(e,t,i){"use strict";cc._RF.push(t,"e953coPthNCdKz4ktPzII0L","Excel"),Object.defineProperty(i,"__esModule",{value:!0}),i.Excel=i.WareHouseControl=i.TodayShop=i.Shuiguo=i.ShuiguoTiaozhan=i.ShuiguoTianfu=i.ShuiguoQiandao=i.ShuiguoNeibulevel=i.ShuiguoLevel=i.ShuiguoJineng=i.ShuiguoHecheng=i.ShuiguoGuanqia=i.ShuiguoGuaiwu=i.ShuiguoConfig=i.ShuiguoCitiao=i.ShuiguoBuff=i.ShuiguoBoshu=i.ShopControl=i.ShopBoxLevel=i.BagEquipRule=i.AddPower=void 0;var o=e("./BaseExcel"),a=e("./ExcelData"),n=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",addCount:"number",maxTime:"number",price:"number",videoAddCount:"number",videoMaxTime:"number"},t}return __extends(t,e),t}(o.BaseExcel);i.AddPower=n;var r=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",shuiguoId:"number",pfbName:"string",level:"number",isHaveQiPao:"number",showName:"string",weight:"number",videoWidget:"number"},t}return __extends(t,e),t}(o.BaseExcel);i.BagEquipRule=r;var s=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",level:"number",exp:"number",moneyCount:"number",rewards:"number[]",bigMoneyCount:"number",bigRewards:"number[]"},t}return __extends(t,e),t}(o.BaseExcel);i.ShopBoxLevel=s;var c=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",resetTime:"number",lastResetCount:"number",todayDiamondCount:"number",getDiamondTime:"number",boxPrice:"number",bigBoxPrice:"number",box1BuyCount:"number",box2BuyCount:"number",gold1Count:"number",gold1Time:"number",gold2Count:"number",gold2Price:"number",gold3Count:"number",gold3Price:"number"},t}return __extends(t,e),t}(o.BaseExcel);i.ShopControl=c;var l=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",levelname:"string",mosterid:"number[][]",mosterjiaxue:"number"},t}return __extends(t,e),t}(o.BaseExcel);i.ShuiguoBoshu=l;var u=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",buffdesc:"string",buffefftype:"number",bufftime:"number",value:"number[]",probability:"number"},t}return __extends(t,e),t}(o.BaseExcel);i.ShuiguoBuff=u;var d=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",shuiguoId:"number",citiaomiaoshu:"string",citiaoshuzhitype:"number",weigth:"number",citiaochuxian:"number",quality:"number",jiesuo:"number",name:"string"},t}return __extends(t,e),t}(o.BaseExcel);i.ShuiguoCitiao=d;var h=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",configkey:"string",name:"string",value:"number",content:"string"},t}return __extends(t,e),t}(o.BaseExcel);i.ShuiguoConfig=h;var p=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",mostername:"string",mosterdesc:"string",mosterimg:"string",mosterxue:"number",mosterspeed:"number",mosterskillid:"string",mosterjinyan:"number",boss:"number",resistance:"number",mostertype:"number"},t}return __extends(t,e),t}(o.BaseExcel);i.ShuiguoGuaiwu=p;var _=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",levelname:"string",type:"number",levelaward:"number[][]",levelboshuid:"number[]",awardboshuid:"number[]",yinbi:"number",awardbox1:"number[][]",awardbox2:"number[][]",awardbox3:"number[][]",dipicture:"number",tiaozhanbox1:"number[][]",tiaozhanbox2:"number[][]",tiaozhanbox3:"number[][]",tiaozhanbox4:"number[][]"},t}return __extends(t,e),t}(o.BaseExcel);i.ShuiguoGuanqia=_;var g=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",shuiguoId:"number",shuiguoimg:"string",addattack:"number",addbeidongbuff:"number[]",addattackspeed:"number",newTianFuBuff:"number"},t}return __extends(t,e),t}(o.BaseExcel);i.ShuiguoHecheng=g;var f=function(e){function t(){var t=e.call(this)||this;return t.typeStr={},t}return __extends(t,e),t}(o.BaseExcel);i.ShuiguoJineng=f;var m=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",shuiguoId:"number",shengjixiaohao:"number",addattack:"number",addAtkSpeed:"number",addbeidongbuff:"number[]",money:"number"},t}return __extends(t,e),t}(o.BaseExcel);i.ShuiguoLevel=m;var v=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",jinyan:"number"},t}return __extends(t,e),t}(o.BaseExcel);i.ShuiguoNeibulevel=v;var y=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",award:"number",awardtype:"number"},t}return __extends(t,e),t}(o.BaseExcel);i.ShuiguoQiandao=y;var b=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",shuiguoid:"string",tianfumiaoshu:"string",tianfuleixing:"number",tianfujiesuo:"number"},t}return __extends(t,e),t}(o.BaseExcel);i.ShuiguoTianfu=b;var I=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",tiaozhanId:"number",tiaozhanName:"string",yinbi:"number",awardboshuid:"number[]",levelboshuid:"number[]",dipicture:"number"},t}return __extends(t,e),t}(o.BaseExcel);i.ShuiguoTiaozhan=I;var E=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",name:"string",quality:"number",attack:"number",attackspeed:"number",baojilv:"number",baojivalue:"number",attacktype:"number",attackstate:"number",unLock:"number",isShow:"number",talent:"number",shuiguomiaoshu:"string",littleDesc:"string",jinJieLv:"number",jinjieShuiGuoId:"number",newName:"string",starWord:"string"},t}return __extends(t,e),t}(o.BaseExcel);i.Shuiguo=E;var M=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",shuiguoId:"number",count:"number",showName:"string",describe:"string",diamond:"number",gold:"number",discount:"number[]",weight:"number",goldWeight:"number"},t}return __extends(t,e),t}(o.BaseExcel);i.TodayShop=M;var C=function(e){function t(){var t=e.call(this)||this;return t.typeStr={id:"number",unLockArray:"number[]"},t}return __extends(t,e),t}(o.BaseExcel);i.WareHouseControl=C;var B=function(){function e(){}return e.addPower=function(e){return o.BaseExcel.getData(a.ExcelData.addPower,e)},Object.defineProperty(e,"addPower_all",{get:function(){return o.BaseExcel.getAllData(a.ExcelData.addPower)},enumerable:!1,configurable:!0}),e.bagEquipRule=function(e){return o.BaseExcel.getData(a.ExcelData.bagEquipRule,e)},Object.defineProperty(e,"bagEquipRule_all",{get:function(){return o.BaseExcel.getAllData(a.ExcelData.bagEquipRule)},enumerable:!1,configurable:!0}),e.shopBoxLevel=function(e){return o.BaseExcel.getData(a.ExcelData.shopBoxLevel,e)},Object.defineProperty(e,"shopBoxLevel_all",{get:function(){return o.BaseExcel.getAllData(a.ExcelData.shopBoxLevel)},enumerable:!1,configurable:!0}),e.shopControl=function(e){return o.BaseExcel.getData(a.ExcelData.shopControl,e)},Object.defineProperty(e,"shopControl_all",{get:function(){return o.BaseExcel.getAllData(a.ExcelData.shopControl)},enumerable:!1,configurable:!0}),e.shuiguoboshu=function(e){return o.BaseExcel.getData(a.ExcelData.shuiguoboshu,e)},Object.defineProperty(e,"shuiguoboshu_all",{get:function(){return o.BaseExcel.getAllData(a.ExcelData.shuiguoboshu)},enumerable:!1,configurable:!0}),e.shuiguobuff=function(e){return o.BaseExcel.getData(a.ExcelData.shuiguobuff,e)},Object.defineProperty(e,"shuiguobuff_all",{get:function(){return o.BaseExcel.getAllData(a.ExcelData.shuiguobuff)},enumerable:!1,configurable:!0}),e.shuiguocitiao=function(e){return o.BaseExcel.getData(a.ExcelData.shuiguocitiao,e)},Object.defineProperty(e,"shuiguocitiao_all",{get:function(){return o.BaseExcel.getAllData(a.ExcelData.shuiguocitiao)},enumerable:!1,configurable:!0}),e.shuiguoconfig=function(e){return o.BaseExcel.getData(a.ExcelData.shuiguoconfig,e)},Object.defineProperty(e,"shuiguoconfig_all",{get:function(){return o.BaseExcel.getAllData(a.ExcelData.shuiguoconfig)},enumerable:!1,configurable:!0}),e.shuiguoguaiwu=function(e){return o.BaseExcel.getData(a.ExcelData.shuiguoguaiwu,e)},Object.defineProperty(e,"shuiguoguaiwu_all",{get:function(){return o.BaseExcel.getAllData(a.ExcelData.shuiguoguaiwu)},enumerable:!1,configurable:!0}),e.shuiguoguanqia=function(e){return o.BaseExcel.getData(a.ExcelData.shuiguoguanqia,e)},Object.defineProperty(e,"shuiguoguanqia_all",{get:function(){return o.BaseExcel.getAllData(a.ExcelData.shuiguoguanqia)},enumerable:!1,configurable:!0}),e.shuiguohecheng=function(e){return o.BaseExcel.getData(a.ExcelData.shuiguohecheng,e)},Object.defineProperty(e,"shuiguohecheng_all",{get:function(){return o.BaseExcel.getAllData(a.ExcelData.shuiguohecheng)},enumerable:!1,configurable:!0}),e.shuiguojineng=function(e){return o.BaseExcel.getData(a.ExcelData.shuiguojineng,e)},Object.defineProperty(e,"shuiguojineng_all",{get:function(){return o.BaseExcel.getAllData(a.ExcelData.shuiguojineng)},enumerable:!1,configurable:!0}),e.shuiguolevel=function(e){return o.BaseExcel.getData(a.ExcelData.shuiguolevel,e)},Object.defineProperty(e,"shuiguolevel_all",{get:function(){return o.BaseExcel.getAllData(a.ExcelData.shuiguolevel)},enumerable:!1,configurable:!0}),e.shuiguoneibulevel=function(e){return o.BaseExcel.getData(a.ExcelData.shuiguoneibulevel,e)},Object.defineProperty(e,"shuiguoneibulevel_all",{get:function(){return o.BaseExcel.getAllData(a.ExcelData.shuiguoneibulevel)},enumerable:!1,configurable:!0}),e.shuiguoqiandao=function(e){return o.BaseExcel.getData(a.ExcelData.shuiguoqiandao,e)},Object.defineProperty(e,"shuiguoqiandao_all",{get:function(){return o.BaseExcel.getAllData(a.ExcelData.shuiguoqiandao)},enumerable:!1,configurable:!0}),e.shuiguotianfu=function(e){return o.BaseExcel.getData(a.ExcelData.shuiguotianfu,e)},Object.defineProperty(e,"shuiguotianfu_all",{get:function(){return o.BaseExcel.getAllData(a.ExcelData.shuiguotianfu)},enumerable:!1,configurable:!0}),e.shuiguotiaozhan=function(e){return o.BaseExcel.getData(a.ExcelData.shuiguotiaozhan,e)},Object.defineProperty(e,"shuiguotiaozhan_all",{get:function(){return o.BaseExcel.getAllData(a.ExcelData.shuiguotiaozhan)},enumerable:!1,configurable:!0}),e.shuiguo=function(e){return o.BaseExcel.getData(a.ExcelData.shuiguo,e)},Object.defineProperty(e,"shuiguo_all",{get:function(){return o.BaseExcel.getAllData(a.ExcelData.shuiguo)},enumerable:!1,configurable:!0}),e.todayShop=function(e){return o.BaseExcel.getData(a.ExcelData.todayShop,e)},Object.defineProperty(e,"todayShop_all",{get:function(){return o.BaseExcel.getAllData(a.ExcelData.todayShop)},enumerable:!1,configurable:!0}),e.wareHouseControl=function(e){return o.BaseExcel.getData(a.ExcelData.wareHouseControl,e)},Object.defineProperty(e,"wareHouseControl_all",{get:function(){return o.BaseExcel.getAllData(a.ExcelData.wareHouseControl)},enumerable:!1,configurable:!0}),e}();i.Excel=B,cc._RF.pop()},{"./BaseExcel":"BaseExcel","./ExcelData":"ExcelData"}],FMButton:[function(e,t,i){"use strict";cc._RF.push(t,"43c70tFxOhBKodPmYl3/ubS","FMButton"),Object.defineProperty(i,"__esModule",{value:!0}),i.FMButtonComponent=void 0;var o=e("./AudioManager"),a=cc._decorator,n=a.ccclass,r=a.property,s=a.menu,c=a.disallowMultiple,l=a.requireComponent,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isScale=!0,t.isBtSound=!0,t.isBtSound1=!1,t.lastClickTime=0,t}return __extends(t,e),t.prototype.onLoad=function(){var e=this.node.getComponent(cc.Button);e.transition===cc.Button.Transition.NONE&&this.isScale&&(e.transition=cc.Button.Transition.SCALE,e.duration=.1,e.zoomScale=.9),this.node.on("click",this.handleClick,this)},t.prototype.handleClick=function(){var e=(new Date).getTime();e-this.lastClickTime>100&&(this.isBtSound&&o.AudioMgr.playSoundEffect("effect/button"),this.lastClickTime=e)},__decorate([r()],t.prototype,"isScale",void 0),__decorate([r()],t.prototype,"isBtSound",void 0),__decorate([r()],t.prototype,"isBtSound1",void 0),__decorate([n,l(cc.Button),c,s("FM\u7ec4\u4ef6/FMButtonComponent")],t)}(cc.Component);i.FMButtonComponent=u,cc._RF.pop()},{"./AudioManager":"AudioManager"}],GameBagData:[function(e,t,i){"use strict";cc._RF.push(t,"29088/49qJI6YuQopPn2yfr","GameBagData"),Object.defineProperty(i,"__esModule",{value:!0}),i.GameBagData=void 0,function(e){e.BagSaveData=function(){this.bagArray=null,this.dressUpEquips=[],this.equipPool=[],this.videoCount=0,this.pickCardCount=0,this.geZiBaoDi=0,this.cellWposArray=[],this.silverCoin=15,this.videoCellCount=0};e.CellData=function(){};e.EquipData=function(){}}(i.GameBagData||(i.GameBagData={})),cc._RF.pop()},{}],GameConfig:[function(e,t,i){"use strict";cc._RF.push(t,"999bbkoYkRFoIUaO8bU6jFP","GameConfig"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._appConfig=null,t._adConfig=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"appConfig",{get:function(){return this._appConfig},set:function(e){this._appConfig=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"adConfig",{get:function(){return this._adConfig},set:function(e){this._adConfig=e},enumerable:!1,configurable:!0}),t}(e("./SingletonManager").SingletonBase);i.default=o.getInstance(),cc._RF.pop()},{"./SingletonManager":"SingletonManager"}],GameDataManager:[function(e,t,i){"use strict";cc._RF.push(t,"cf7e6wzCPtKraUT6As7mNkm","GameDataManager"),Object.defineProperty(i,"__esModule",{value:!0}),i.GameDataMgr=void 0;var o,a=e("./DataManager"),n=e("./EventManager"),r=e("./TipsManager"),s=e("./EvenType"),c=e("./Excel"),l=e("./GameBagData");(function(e){e.level="level",e.tiaozhanlevel="tiaozhanlevel",e.gameBag="gameBag"})(o||(o={}));var u=function(e){function t(){var t=e.call(this)||this;return t._secretKey="game",t._level={1:{ispass:!1,maxboshu:0,nowboshu:0,awardjilu:0,citiaodata:null,level:1,huanyipi:0,allhave:0,rolelevel:0}},t._tiaozhanlevel={1:{isjixu:!1,ispass:!1,maxboshu:0,nowboshu:0,level:1,leijifen:0,awardjilu:null}},t._gameBag=new l.GameBagData.BagSaveData,t}return __extends(t,e),t.prototype.initialize=function(e){void 0===e&&(e=null),this.reset(),this._level=Object.assign({},this._level,this.getCurrentData(o.level,e)),this._tiaozhanlevel=Object.assign({},this._tiaozhanlevel,this.getCurrentData(o.tiaozhanlevel,e)),this._gameBag=Object.assign({},this._gameBag,this.getCurrentData(o.gameBag,e))},t.prototype.getCurrentData=function(e,t){return t&&t[e]?t[e]:this._load(e)},t.prototype.reset=function(){this._level={1:{ispass:!1,maxboshu:0,nowboshu:0,awardjilu:0,citiaodata:null,level:1,huanyipi:0,allhave:0,rolelevel:0}},this._tiaozhanlevel={1:{isjixu:!1,ispass:!1,maxboshu:0,nowboshu:0,level:1,leijifen:0,awardjilu:null}},this._gameBag=new l.GameBagData.BagSaveData},t.prototype.getCurrentLevelData=function(e){return this._level[e]},t.prototype.getCiTiaoCount=function(e,t){var i=this._level[e];return i?1===t?i.huanyipi:i.allhave:1===t?10:6},t.prototype.clearChallengeLevel=function(e){this._tiaozhanlevel[e]={isjixu:!1,ispass:!1,maxboshu:0,nowboshu:0,level:1,leijifen:0,awardjilu:null},this._save(o.tiaozhanlevel,this._tiaozhanlevel)},t.prototype.updateChallengePoints=function(e,t){var i=this._tiaozhanlevel[e];if(i){var a=(i.leijifen||0)+t;i.leijifen=a,this._tiaozhanlevel[e]=i,this._save(o.tiaozhanlevel,this._tiaozhanlevel),n.EventMgrInstance.emitEvent(s.EVENT_TYPE.Game_TiaoZhan_JiFen)}},t.prototype.getChallengePoints=function(e){var t;return(null===(t=this._tiaozhanlevel[e])||void 0===t?void 0:t.leijifen)||0},t.prototype.updateChallengeContinue=function(e,t){var i=this._tiaozhanlevel[e];i&&(i.isjixu=t,this._tiaozhanlevel[e]=i,this._save(o.tiaozhanlevel,this._tiaozhanlevel))},t.prototype.updateRoleLevel=function(e,t,i,a){if(2===a){var n=this._level[e];n&&(n.rolelevel={level:t,levelexper:i},this._level[e]=n,this._save(o.level,this._level))}},t.prototype.getRoleLevel=function(e,t){var i;return 2===t&&(null===(i=this._level[e])||void 0===i?void 0:i.rolelevel)||null},t.prototype.updateCurrentLevel=function(e,t,i,a){if(2===a){var n=this._level[e];n&&(n.huanyipi=t,n.allhave=i,this._level[e]=n,this._save(o.level,this._level))}},t.prototype.unlockLevelProgress=function(e){this._level[e]={ispass:!1,nowboshu:0,awardjilu:{},level:e},this._save(o.level,this._level)},t.prototype.getContinueGame=function(){for(var e in this._level){var t=this._level[e];if(t&&t.citiaodata){var i=c.Excel.shuiguoguanqia(Number(e));if(i.levelboshuid.length<=t.maxboshu&&this.updateLevelPassState(Number(e),2),i.levelboshuid.length>t.nowboshu)return t;break}}return null},t.prototype.getContinueChallenge=function(){return!!this._tiaozhanlevel[1].isjixu},t.prototype.updateCiTiaoData=function(e,t){var i=this._level[e];i&&(i.citiaodata=t?t.concat():null,this._save(o.level,this._level))},t.prototype.getCurrentMaxLevel=function(){var e=[],t=this._level;for(var i in t)t[i]&&t[i].ispass&&e.push(Number(i));return(e=e.sort(function(e,t){return e>t?1:-1})).length<=0?0:e[e.length-1]},t.prototype.updateLevelWave=function(e,t,i){var a,n;if(1===i?(a=this._tiaozhanlevel[e],n=c.Excel.shuiguotiaozhan(e)):2===i&&(a=this._level[e],n=c.Excel.shuiguoguanqia(e)),a){var r=a.maxboshu||0;(t=Math.min(t,n.levelboshuid.length))>=r&&(a.maxboshu=t),a.nowboshu=t,n.levelboshuid[t]||this.updateLevelPassState(e,i),this._save(1===i?o.tiaozhanlevel:o.level,a)}},t.prototype.updateLevelPassState=function(e,t){if(1===t)(i=this._tiaozhanlevel[e])&&(i.ispass=!0,this._tiaozhanlevel[e]=i,this._save(o.tiaozhanlevel,this._tiaozhanlevel),n.EventMgrInstance.emitEvent(s.EVENT_TYPE.Game_TIAOZHAN_PASS));else if(2===t){var i;(i=this._level[e])&&(i.ispass=!0,this._level[e]=i,this.unlockLevelProgress(e+1),this._save(o.level,this._level),n.EventMgrInstance.emitEvent(s.EVENT_TYPE.Game_PASS))}},t.prototype.getCurrentLevelPassState=function(e,t){var i;return 1===t?(i=this._tiaozhanlevel[e])?i.ispass?1:2:-1:2===t?(i=this._level[e])?i.ispass?1:2:-1:void 0},t.prototype.getCurrentLevelWaveState=function(e,t){var i;return 1===t?(i=this._tiaozhanlevel[e])&&i.nowboshu||0:2===t?(i=this._level[e])&&i.nowboshu||0:void 0},t.prototype.getMaxLevelWaveState=function(e,t){var i;return 1===t?(i=this._tiaozhanlevel[e])&&i.maxboshu||0:2===t?(i=this._level[e])&&i.maxboshu||0:void 0},t.prototype.updateChallengeAwardRecord=function(e,t){var i=this._tiaozhanlevel[e];i.awardjilu=i.awardjilu||{},i.awardjilu[t]="isok",this._tiaozhanlevel[e]=i,n.EventMgrInstance.emitEvent(s.EVENT_TYPE.Game_Update_TiaoZhan_Award),this._save(o.tiaozhanlevel,this._tiaozhanlevel)},t.prototype.getChallengeAwardRecord=function(e,t){var i,o=null===(i=this._tiaozhanlevel[e])||void 0===i?void 0:i.awardjilu;return!!o&&!!o[t]},t.prototype.updateLevelAwardRecord=function(e,t){var i=this._level[e];i.awardjilu=i.awardjilu||{},i.awardjilu[t]="isok",this._level[e]=i,n.EventMgrInstance.emitEvent(s.EVENT_TYPE.Game_Update_Level_Award),this._save(o.level,this._level)},t.prototype.getLevelAwardRecord=function(e,t){var i,o=null===(i=this._level[e])||void 0===i?void 0:i.awardjilu;return!!o&&!!o[t]},t.prototype.hasLevelAward=function(e){var t=this,i=c.Excel.shuiguoguanqia(e);if(i){var o=i.awardboshuid,a=this.getMaxLevelWaveState(e,2);return o.some(function(i){return a>=i&&!t.getLevelAwardRecord(e,i)})}return!1},Object.defineProperty(t.prototype,"getGameBag",{get:function(){return this._gameBag},enumerable:!1,configurable:!0}),t.prototype.clearGameBagData=function(){this._gameBag=new l.GameBagData.BagSaveData,this.saveGameBagData(),n.EventMgrInstance.emitEvent(s.EVENT_TYPE.Game_YinBiValue)},t.prototype.saveGameBagData=function(){this._save(o.gameBag,this._gameBag)},Object.defineProperty(t.prototype,"getSilverCoin",{get:function(){return this._gameBag.silverCoin||0},enumerable:!1,configurable:!0}),t.prototype.addSilverCoin=function(e){Number.isNaN(e)||(this._gameBag.silverCoin+=e),n.EventMgrInstance.emitEvent(s.EVENT_TYPE.Game_YinBiValue),this.saveGameBagData()},t.prototype.subtractSilverCoin=function(e){if(!Number.isNaN(e)){if(this._gameBag.silverCoin<e)return r.TipMgr.showToast("\u94f6\u5e01\u4e0d\u8db3"),!1;this._gameBag.silverCoin-=e}return n.EventMgrInstance.emitEvent(s.EVENT_TYPE.Game_YinBiValue),this.saveGameBagData(),!0},t}(a.default);i.GameDataMgr=new u,cc._RF.pop()},{"./DataManager":"DataManager","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GameBagData":"GameBagData","./TipsManager":"TipsManager"}],GameGlobalVariable:[function(e,t,i){"use strict";cc._RF.push(t,"7ba8bimNwxAWJvmNRiCBrLI","GameGlobalVariable"),Object.defineProperty(i,"__esModule",{value:!0}),i.GameGlobalVariable=void 0;var o=e("./BundleConfig"),a=e("./AudioManager"),n=e("./EventManager"),r=e("./ResLoader"),s=e("./EvenType"),c=e("./Excel"),l=e("./ExcelUtil"),u=e("./UI_BulletMove"),d=e("./UI_MosterLogic"),h=e("./NodePoolMag"),p=function(){function e(){}return e.initializeConfig=function(){this.huanyipi=this.getConfigData("huanyipin"),this.allhave=this.getConfigData("allhave"),this.shaodangtilicount=this.getConfigData("saodangpower"),this.kaishitilicount=this.getConfigData("kaishipower"),this.meirimianfeicount=this.getConfigData("saodangfreecount"),this.houlevelunlock=this.getConfigData("houlevellunlock"),this.wujintilicount=this.getConfigData("wujintilicount"),this.wujinsaodangcount=this.getConfigData("wujinsaodangtilicount"),this.wujinmeirifreecount=this.getConfigData("wujinmeirifreecount"),this.wujinunlockcount=this.getConfigData("wujinunlockcount"),this.addPowerTime=this.getConfigData("addPowerTime"),this.bagVideoCellCount=this.getConfigData("bagVideoCellCount"),this.severdatatime=this.getConfigData("severdatatime"),this.putongfuhuocount=this.getConfigData("putongfuhuocount"),this.wujinfuhuocount=this.getConfigData("wujinfuhuocount"),this.liulianlanguabomb=this.getConfigData("liulianlanguabomb")},e.getConfigData=function(e){var t=l.ExcelUtil.getMatchingData(c.Excel.shuiguoconfig_all,"configkey",e);return t&&t.length>0?t[0].value:{severdatatime:3,huanyipin:10,allhave:3,saodangpower:5,kaishipower:5,saodangfreecount:3,houlevellunlock:4,wujintilicount:5,wujinsaodangtilicount:5,wujinmeirifreecount:3,addPowerTime:20,bagVideoCellCount:3,wujinunlockcount:4,putongfuhuocount:999999,wujinfuhuocount:1,liulianlanguabomb:.4}[e]||0},e.recordAttack=function(e,t){var i=this.nowwShangHai[e]||0;i+=t,this.nowwShangHai[e]=i,n.EventMgrInstance.emitEvent(s.EVENT_TYPE.GAME_SHANGHAI_TONGJI)},e.clearAttackRecords=function(){this.nowwShangHai={}},e.playHitSoundEffect=function(){(new Date).getTime()-this.offtime1>3e3&&(a.AudioMgr.playSoundEffect("sound/\u51bb\u68a8\u97f3\u6548",!1,o.BundleNames.Game),this.offtime1=(new Date).getTime())},e.playHitDurianSoundEffect=function(){(new Date).getTime()-this.offtimeLiuLian>300*Math.random()&&(a.AudioMgr.playSoundEffect("sound/\u69b4\u83b2\u6253\u51fb",!1,o.BundleNames.Game),this.offtimeLiuLian=(new Date).getTime())},e.playHitSound=function(){(new Date).getTime()-this.offtime>500*Math.random()&&(a.AudioMgr.playSoundEffect("sound/hit",!1,o.BundleNames.Game),this.offtime=(new Date).getTime())},e.playBomb1SoundEffect=function(){(new Date).getTime()-this.offbomb1time>500*Math.random()&&(a.AudioMgr.playSoundEffect("sound/\u5357\u74dc\u70b8\u5f39",!1,o.BundleNames.Game),this.offbomb1time=(new Date).getTime())},e.playBomb2SoundEffect=function(){(new Date).getTime()-this.offbomb2time>500*Math.random()&&(a.AudioMgr.playSoundEffect("sound/\u897f\u74dc\u7206\u70b8",!1,o.BundleNames.Game),this.offbomb2time=(new Date).getTime())},e.isSpecialLevel=function(){return-1===this.nowlevel?1:2},e.decrementHuanYiPi=function(){this.huanyipi-=1},e.decrementAllHave=function(){this.allhave-=1},e.getSceneId=function(){return(-1===this.nowlevel?c.Excel.shuiguotiaozhan(this.teshulevel):c.Excel.shuiguoguanqia(this.nowlevel)).dipicture},e.addCurrentLevelCurrency=function(e){this.nowlevelhuobi+=e},e.subtractCurrentLevelCurrency=function(e){this.nowlevelhuobi-=e},e.sortMonsters=function(e){for(var t=[],i=[],o=0,a=e.getComponentsInChildren(d.default);o<a.length;o++){var n=a[o];if(!n.isDie){var r=cc.Vec2.subtract(cc.v2(),cc.v2(),n.node.getPosition()),s=180/Math.PI*Math.atan2(r.y,r.x)+180;s>=0&&s<=90?t.push({angle:s,script:n}):i.push({angle:s,script:n})}}return t.sort(function(e,t){return t.angle-e.angle}),i.sort(function(e,t){return t.angle-e.angle}),__spreadArrays(t,i)},e.sortBlueMelons=function(e,t){for(var i=[],o=[],a=0,n=e;a<n.length;a++){var r=n[a];r.setBoxState(!1);var s=cc.Vec2.subtract(cc.v2(),cc.v2(),r.node.getPosition()),c=180/Math.PI*Math.atan2(s.y,s.x)+180;c>=0&&c<=90?i.push({angle:c,script:r}):o.push({angle:c,script:r})}i.sort(function(e,t){return t.angle-e.angle}),o.sort(function(e,t){return t.angle-e.angle});var l=this.sortMonsters(t)[0];l&&(i.length>0||o.length>0)&&(l.angle>0&&l.angle<90?(o.forEach(function(e){return e.script.setBoxState(!0)}),i.forEach(function(e){e.angle>l.angle+20?e.script.setBoxState(!1):e.script.setBoxState(!0)})):(i.forEach(function(e){return e.script.setBoxState(!1)}),o.forEach(function(e){e.angle>l.angle+20?e.script.setBoxState(!1):e.script.setBoxState(!0)})))},e.addMovingBullet=function(e){this.movebullets.push(e),-1===this.ishavetime&&(this.sendMovingBullet(),this.ishavetime=setInterval(this.sendMovingBullet.bind(this),200))},e.sendMovingBullet=function(){return __awaiter(this,void 0,Promise,function(){var e,t,i,a,n;return __generator(this,function(s){switch(s.label){case 0:return this.movebullets.length>0?(e=this.movebullets.shift(),(t=h.NodePoolMag.instance.getNodeFromPool("bullet_3"))?[3,2]:[4,r.default.loadRes(o.BundleNames.Game,"prefabs/bullet/bullet3",cc.Prefab)]):[3,3];case 1:i=s.sent(),h.NodePoolMag.instance.createNodePool("bullet_3",1,i),t=h.NodePoolMag.instance.getNodeFromPool("bullet_3"),s.label=2;case 2:return a=e.paths.children[5].convertToWorldSpaceAR(cc.v2()),n=e.liulianNode.convertToNodeSpaceAR(a),t.setPosition(n),t.scale=1,e.liulianNode.addChild(t),setTimeout(function(){t.getComponent(u.default).initializeBullet(e)},10),[3,4];case 3:clearInterval(this.ishavetime),this.ishavetime=-1,s.label=4;case 4:return[2]}})})},e.getMonsterDistance=function(e,t){var i=e.node.x,o=e.node.y,a=e.moveindex,n=t.children;switch(a){case 1:(i+=100)>n[0].x&&(i=n[0].x);break;case 2:if((o+=100)>n[1].y){var r=o-n[1].y;o=n[1].y,i=n[1].x+r,a-=1}break;case 3:(i-=100)<n[2].x&&(r=Math.abs(i-n[2].x),i=n[2].x,o=n[2].y+r,a-=1);break;case 4:(o-=100)<n[3].y&&(r=Math.abs(o-n[3].y),i=n[3].x-r,o=n[3].y,a-=1);break;case 5:(i+=100)>n[4].x&&(r=Math.abs(i+n[4].x),i=n[4].x,o=n[4].y-r,a-=1)}return{pos:cc.v2(i,o),tagindex:a}},e.generateEquidistantCoordinates=function(e,t,i,o,a,n,r,s){void 0===n&&(n=1);for(var c=[],l=0;l<a;l++){var u=e,d=t;if(1===n&&(u=e+i*l)>s)break;if(2===n&&(u=e-i*l)<s)break;if(3===n&&(d=t+o*l)>s)break;if(4===n&&(d=t-o*l)<s)break;c.push({pos:cc.v2(u,d),tagindex:r})}return c},e.splitCreateMonster=function(e,t){for(var i=t.children,o=2,a=[],n=e.moveindex;n>0;n--){var r=e.node.x,s=e.node.y,c=0,l=0,u=[];switch(n){case 5:l=i[n].y,c=i[n].x,n===e.moveindex&&(c=r),u=this.generateEquidistantCoordinates(c,l,50,0,o,1,n,i[4].x);break;case 1:l=i[n].y,c=i[n].x,n===e.moveindex&&(c=r),u=this.generateEquidistantCoordinates(c,l,50,0,o,1,n,i[0].x);break;case 2:l=i[n].y,c=i[n].x,n===e.moveindex&&(l=s),u=this.generateEquidistantCoordinates(c,l,0,50,o,3,n,i[1].y);break;case 3:l=i[n].y,c=i[n].x,n===e.moveindex&&(c=r),u=this.generateEquidistantCoordinates(c,l,50,0,o,2,n,i[2].x);break;case 4:l=i[n].y,c=i[n].x,n===e.moveindex&&(l=s),u=this.generateEquidistantCoordinates(c,l,0,50,o,4,n,i[3].y)}if(u.length>=o){a=a.concat(u.slice(0,o));break}o-=u.length,a=a.concat(u)}return a},e.nowlevel=1,e.teshulevel=1,e.nowlevelhuobi=0,e.selfMap={},e.bulletNode=null,e.languaNode=null,e.liulianNode=null,e.mosterNode=null,e.effNode=null,e.paths=null,e.huanyipi=0,e.allhave=0,e.shaodangtilicount=0,e.kaishitilicount=0,e.meirimianfeicount=0,e.houlevelunlock=0,e.wujintilicount=0,e.wujinsaodangcount=0,e.wujinmeirifreecount=0,e.wujinunlockcount=0,e.putongfuhuocount=0,e.wujinfuhuocount=0,e.liulianlanguabomb=0,e.jiasuState=1,e.isPad=!1,e.severdatatime=3,e.addPowerTime=0,e.bagVideoCellCount=0,e.adddimond=0,e.addjinbi=0,e.addpower=0,e.normalMaxLevel=4,e.zaZhongMaxLevel=5,e.viewofftime=0,e.isFirstGuide=!1,e.nowwShangHai={},e.offtime1=0,e.offtimeLiuLian=0,e.offtime=0,e.offbomb1time=0,e.offbomb2time=0,e.movebullets=[],e.ishavetime=-1,e}();i.GameGlobalVariable=p,cc._RF.pop()},{"./AudioManager":"AudioManager","./BundleConfig":"BundleConfig","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./ExcelUtil":"ExcelUtil","./NodePoolMag":"NodePoolMag","./ResLoader":"ResLoader","./UI_BulletMove":"UI_BulletMove","./UI_MosterLogic":"UI_MosterLogic"}],GuideControl:[function(e,t,i){"use strict";cc._RF.push(t,"670b6ZFwFlKL6xl/+0bZ9Jv","GuideControl"),Object.defineProperty(i,"__esModule",{value:!0}),i.GuideCtrlInstance=void 0;var o=e("./BundleConfig"),a=e("./SingletonManager"),n=e("./ResLoader"),r=e("./ResUtil"),s=e("./GuideMask"),c=e("./GuideShou"),l=function(e){function t(){var t=e.call(this)||this;return t.shouNodeArray=[],t.guideShowPrefab=null,t.guideMaskInstance=null,t}return __extends(t,e),t.prototype.showOneFingerGuide=function(e){return __awaiter(this,void 0,Promise,function(){var t,i,a,r;return __generator(this,function(s){switch(s.label){case 0:return t=this,i=function(){t.recycleOneFingerGuide(a),e.parent.off(cc.Node.EventType.TOUCH_START,i)},this.shouNodeArray.length>0?(a=this.shouNodeArray.shift(),[3,4]):[3,1];case 1:return this.guideShowPrefab?[3,3]:(r=this,[4,n.default.loadRes(o.BundleNames.Common,"prefab/GuideShou",cc.Prefab)]);case 2:r.guideShowPrefab=s.sent(),s.label=3;case 3:a=cc.instantiate(this.guideShowPrefab),s.label=4;case 4:return a.parent=e.parent,a.stopAllActions(),a.active=!0,a.setPosition(e.x,e.y),e.isWillClickClose&&e.parent.on(cc.Node.EventType.TOUCH_START,i),e.getFingerCallBack&&e.getFingerCallBack(a),a.getComponent(c.default).initializeSettings(e.isWillClickClose),[2]}})})},t.prototype.recycleOneFingerGuide=function(e){e.active=!1,e.removeFromParent(!1),this.shouNodeArray.push(e)},t.prototype.clearGuide=function(){this.guideMaskInstance&&(this.guideMaskInstance.destroy(),this.guideMaskInstance=null)},t.prototype.showGuide=function(e){return __awaiter(this,void 0,Promise,function(){var t,i,a;return __generator(this,function(c){switch(c.label){case 0:return this.guideMaskInstance?[3,2]:[4,n.default.loadRes(o.BundleNames.Common,"prefab/GuideMask",cc.Prefab)];case 1:t=c.sent(),i=cc.director.getScene().getChildByName("Canvas"),(a=r.ResourceUtil.instantiate(t)).parent=i,this.guideMaskInstance=a.getComponent(s.default),a.setPosition(0,0),c.label=2;case 2:return this.guideMaskInstance.node.zIndex=1e3,this.guideMaskInstance.node.active=!0,this.guideMaskInstance.initializeGuide(e),[2]}})})},t.prototype.showGuideMaskFrame=function(e,t){var i=t.convertToWorldSpaceAR(cc.v2(0,0)),o=cc.size(1e3,1700),a=500+(t.height-1334)/2;this.showGuide({wPos:i,size:o,alwaysShow:!0,sayNodePos:cc.v2(0,a),callBack:null,sayStr:e,isHideBtn:!0,noMaskTween:!0})},t}(a.SingletonBase);i.GuideCtrlInstance=l.getInstance(),cc._RF.pop()},{"./BundleConfig":"BundleConfig","./GuideMask":"GuideMask","./GuideShou":"GuideShou","./ResLoader":"ResLoader","./ResUtil":"ResUtil","./SingletonManager":"SingletonManager"}],GuideMask:[function(e,t,i){"use strict";cc._RF.push(t,"fd087j9rrtFmaE35YP9ahsw","GuideMask"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./AudioManager"),a=e("./EventManager"),n=e("./TipsManager"),r=e("./ResKeeper"),s=e("./AIControl"),c=e("./EvenType"),l=e("./PlayerDataManager"),u=e("./GuideShou"),d=e("./GameDataManager"),h=e("./Const_Common"),p=cc._decorator,_=p.ccclass,g=p.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.MaskNode=null,t.mengBanBtn=null,t.shouZhiNode=null,t.btnNode=null,t.sayNode=null,t.sayLabel=null,t.tipNode=null,t.sanJiaoNode=null,t.blockNode=null,t.breakeBtn=null,t.isTweenTime=!0,t.alwaysShow=!1,t.guideCallback=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.initializeButtonEvents(),this.startNodeActions(),this.breakeBtn.on(cc.Node.EventType.TOUCH_END,this.breakButtonHandler,this)},t.prototype.onClick=function(){n.TipMgr.showToast("\u8bf7\u5148\u8ddf\u968f\u624b\u6307\u6307\u5f15\u64cd\u4f5c")},t.prototype.initializeGuide=function(e){var t=this;this.breakeBtn.active=!1,l.PlayerDataMgr.getGuideIndexByTaskName(h.GuideName.GameBag)!==h.GameBagGuideIndex.GuideCompletion&&(l.PlayerDataMgr.WHITE_NAME_NO_VIDEO||cc.sys.isBrowser)&&(this.breakeBtn.active=!0),this.blockNode.active=!0,this.prepareGuideSetup(e,function(){t.completeGuideSetup(e)})},t.prototype.initializeButtonEvents=function(){this.btnNode.on(cc.Node.EventType.TOUCH_START,this.playButtonEffect,this),this.btnNode.on(cc.Node.EventType.TOUCH_END,this.handleButtonClick,this),this.mengBanBtn.node.on("click",this.onClick,this)},t.prototype.playButtonEffect=function(){o.AudioMgr.playSoundEffect("effect/button")},t.prototype.handleButtonClick=function(){this.isTweenTime||(this.alwaysShow||(this.node.active=!1),this.guideCallback&&this.guideCallback())},t.prototype.startNodeActions=function(){this.tipNode.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.7,1.1,1.1),cc.scaleTo(.7,1,1)))),this.sanJiaoNode.runAction(cc.repeatForever(cc.sequence(cc.moveTo(.5,this.sanJiaoNode.x,this.sanJiaoNode.y+15),cc.moveTo(.5,this.sanJiaoNode.x,this.sanJiaoNode.y))))},t.prototype.breakButtonHandler=function(){l.PlayerDataMgr.setGuideIndex(h.GuideName.GameBag,h.GameBagGuideIndex.GuideCompletion),l.PlayerDataMgr.setGuideIndex(h.GuideName.EquipLevelUp,h.UpEquipLevelGuideIndex.GuideCompletion),d.GameDataMgr.reset(),a.EventMgrInstance.emitEvent(c.EVENT_TYPE.GAME_BackHall),this.node.active=!1},t.prototype.prepareGuideSetup=function(e,t){this.guideCallback=e.callBack,this.shouZhiNode.active=!1,this.sayNode.active=null!=e.sayStr,this.sayLabel.string=e.sayStr,this.alwaysShow=e.alwaysShow||!1,this.tipNode.active=e.showTipNode,e.sayNodePos?(this.sayNode.setPosition(e.sayNodePos),e.noMaskTween||(this.sayNode.scale=0,this.sayNode.runAction(cc.scaleTo(.5,1,1)))):this.sayNode.setPosition(0,0),this.btnNode.active=!1,this.isTweenTime=!0,e.size?this.prepareNodeSize(e,t):this.resetNodeSize()},t.prototype.prepareNodeSize=function(e,t){this.MaskNode.setPosition(this.node.convertToNodeSpaceAR(e.wPos)),this.MaskNode.width=1e3,this.MaskNode.height=1700,cc.Tween.stopAllByTarget(this.MaskNode),e.noMaskTween?(this.MaskNode.width=e.size.width,this.MaskNode.height=e.size.height,t()):cc.tween(this.MaskNode).to(.5,{width:e.size.width,height:e.size.height}).call(t).start()},t.prototype.resetNodeSize=function(){this.MaskNode.width=0,this.MaskNode.height=0,this.MaskNode.setPosition(0,0),this.isTweenTime=!1,this.btnNode.width=1e3,this.btnNode.height=1700,this.btnNode.setPosition(0,0),this.btnNode.active=!0,this.blockNode.active=!1},t.prototype.completeGuideSetup=function(e){var t=this;this.blockNode.active=!1,this.isTweenTime=!1,this.shouZhiNode.active=!e.isHideBtn,e.isHideBtn||this.shouZhiNode.getComponent(u.default).initializeSettings(!0),this.shouZhiNode.setPosition(this.MaskNode.getPosition()),this.btnNode.active=!e.isHideBtn,this.btnNode.setPosition(this.MaskNode.getPosition()),e.btnIsMax?(this.btnNode.width=2e3,this.btnNode.height=3e3):(this.btnNode.width=e.size.width,this.btnNode.height=e.size.height),s.default._instance.isOpen&&s.default._instance.displayClickButton(this.btnNode,function(){t.alwaysShow||(t.node.active=!1),t.guideCallback&&t.guideCallback()})},__decorate([g(cc.Node)],t.prototype,"MaskNode",void 0),__decorate([g(cc.Button)],t.prototype,"mengBanBtn",void 0),__decorate([g(cc.Node)],t.prototype,"shouZhiNode",void 0),__decorate([g(cc.Node)],t.prototype,"btnNode",void 0),__decorate([g(cc.Node)],t.prototype,"sayNode",void 0),__decorate([g(cc.Label)],t.prototype,"sayLabel",void 0),__decorate([g(cc.Node)],t.prototype,"tipNode",void 0),__decorate([g(cc.Node)],t.prototype,"sanJiaoNode",void 0),__decorate([g(cc.Node)],t.prototype,"blockNode",void 0),__decorate([g(cc.Node)],t.prototype,"breakeBtn",void 0),__decorate([_],t)}(r.default);i.default=f,cc._RF.pop()},{"./AIControl":"AIControl","./AudioManager":"AudioManager","./Const_Common":"Const_Common","./EvenType":"EvenType","./EventManager":"EventManager","./GameDataManager":"GameDataManager","./GuideShou":"GuideShou","./PlayerDataManager":"PlayerDataManager","./ResKeeper":"ResKeeper","./TipsManager":"TipsManager"}],GuideShou:[function(e,t,i){"use strict";cc._RF.push(t,"76759+xzodP+ZAc3X1iIkxu","GuideShou"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./EventManager"),a=e("./ResKeeper"),n=e("./EvenType"),r=e("./GuideControl"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=e.call(this)||this;return t.shouNode=null,t.quanNode=null,t}return __extends(t,e),t.prototype.initializeSettings=function(e){var t=this;this.shouNode.stopAllActions(),this.shouNode.children[0].active=!0,this.shouNode.children[1].active=!1,this.quanNode.stopAllActions(),this.quanNode.active=!1,e&&(this.quanNode.active=!0,this.quanNode.runAction(cc.repeatForever(cc.sequence(cc.callFunc(function(){t.quanNode.opacity=255,t.quanNode.scale=1}),cc.spawn(cc.scaleTo(.5,1.5,1.5),cc.fadeOut(1))))),this.shouNode.runAction(cc.repeatForever(cc.sequence(cc.delayTime(.5),cc.callFunc(function(){var e=t.shouNode.children[0],i=t.shouNode.children[1];e.active=!e.active,i.active=!e.active})))))},t.prototype.onEnable=function(){o.EventMgrInstance.addListener(n.EVENT_TYPE.HideGuideShow,this.closeComponent,this)},t.prototype.onDisable=function(){o.EventMgrInstance.removeListener(n.EVENT_TYPE.HideGuideShow,this.closeComponent,this)},t.prototype.closeComponent=function(){r.GuideCtrlInstance.recycleOneFingerGuide(this.node)},__decorate([l(cc.Node)],t.prototype,"shouNode",void 0),__decorate([l(cc.Node)],t.prototype,"quanNode",void 0),__decorate([c],t)}(a.default);i.default=u,cc._RF.pop()},{"./EvenType":"EvenType","./EventManager":"EventManager","./GuideControl":"GuideControl","./ResKeeper":"ResKeeper"}],HallGlobalVariable:[function(e,t,i){"use strict";cc._RF.push(t,"0bba0CEsVRA8bn4upqtfPfP","HallGlobalVariable"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./Const_Game"),a=e("./Excel"),n=e("./PlayerDataManager"),r=function(){function e(){}return Object.defineProperty(e,"getShuiGuoLevelMap",{get:function(){var e=this;return this._shuiGuoLevelMap||(this._shuiGuoLevelMap=new Map,a.Excel.shuiguolevel_all.forEach(function(t){e._shuiGuoLevelMap.has(t.shuiguoId)||e._shuiGuoLevelMap.set(t.shuiguoId,[]),e._shuiGuoLevelMap.get(t.shuiguoId).push(t)})),this._shuiGuoLevelMap},enumerable:!1,configurable:!0}),Object.defineProperty(e,"getShuiGuoCiTiaoMap",{get:function(){var e=this;return this._shuiGuoCiTiaoMap||(this._shuiGuoCiTiaoMap=new Map,a.Excel.shuiguocitiao_all.forEach(function(t){e._shuiGuoCiTiaoMap.has(t.shuiguoId)||e._shuiGuoCiTiaoMap.set(t.shuiguoId,[]),e._shuiGuoCiTiaoMap.get(t.shuiguoId).push(t)})),this._shuiGuoCiTiaoMap},enumerable:!1,configurable:!0}),e.getUnLockCiTiao=function(e){return 1===e.citiaochuxian||0===e.shuiguoId||(console.log("\u6c34\u679cid",e.shuiguoId),n.PlayerDataMgr.getEquipDataById(e.shuiguoId).level>=e.jiesuo)},e.getShuiGuoCurrLevelData=function(e){var t=a.Excel.shuiguo(e),i=this.getShuiGuoLevelMap.get(e),r=n.PlayerDataMgr.getEquipDataById(e),s={atk:t.attack,atkSpeed:t.attackspeed,talent:[],buffIsPercentage:!1},c={atk:t.attack,atkSpeed:t.attackspeed,talent:[],buffIsPercentage:!1},l=a.Excel.shuiguobuff(t.talent);return l&&(l.value.forEach(function(e){s.talent.push(e),c.talent.push(e)}),[o.FruitId.\u7206\u5934\u74dc,o.FruitId.\u69b4\u83b2\u738b,o.FruitId.\u9999\u8549\u5c04\u624b,o.FruitId.\u9ec4\u74dc\u5927\u68d2,o.FruitId.\u8fa3\u59b9\u5b50,o.FruitId.\u51bb\u65af\u68a8,o.FruitId.\u6bd2\u8611\u83c7,o.FruitId.\u5929\u5c71\u96ea\u83b2,o.FruitId.\u5143\u5a74\u679c].includes(e)&&(s.buffIsPercentage=!0,c.buffIsPercentage=!0)),i&&i.forEach(function(e,t){t<r.level-1&&(s.atk+=e.addattack,s.atkSpeed+=e.addAtkSpeed,l&&e.addbeidongbuff.forEach(function(e,t){s.talent[t]+=e||0})),t<=r.level-1&&(c.atk+=e.addattack,c.atkSpeed+=e.addAtkSpeed,l&&e.addbeidongbuff.forEach(function(e,t){c.talent[t]+=e||0}))}),[s,c]},e.getSuiPian=function(e){void 0===e&&(e=[1,0,0]);var t=new Map,i=[[],[],[]];return a.Excel.shuiguo_all.forEach(function(e){n.PlayerDataMgr.getEquipDataById(e.id).isUnLock&&-1!==e.isShow&&i[e.quality-1].push(e)}),e.forEach(function(e,o){if(i[o].length>0)for(var a=0;a<e;a++){var n=Math.floor(Math.random()*i[o].length),r=i[o][n];t.set(r.id,(t.get(r.id)||0)+1)}}),t},e._shuiGuoLevelMap=null,e._shuiGuoCiTiaoMap=null,e.goldId=999999,e.diamondId=999998,e.powerId=999997,e.selfMap={},e.isNeedResetWareHouse=!1,e}();i.default=r,cc._RF.pop()},{"./Const_Game":"Const_Game","./Excel":"Excel","./PlayerDataManager":"PlayerDataManager"}],HallManager:[function(e,t,i){"use strict";cc._RF.push(t,"7fa73OlY1tHA5FL+JlcXsvo","HallManager"),Object.defineProperty(i,"__esModule",{value:!0}),i.HallMgr=void 0;var o,a=e("./DataManager"),n=e("./LogManager"),r=e("./ArrayUtils"),s=e("./PlayerDataManager"),c=e("./Excel"),l=e("./Const_Hall");(function(e){e.shop="shop",e.unLockCiTiao="unLockCiTiao"})(o||(o={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._secretKey="hallSaveData",t._unLockCiTiao=[],t._shopData=null,t}return __extends(t,e),t.prototype.initialize=function(e){void 0===e&&(e=null),this._shopData=new l.ShopSaveData;var t=this.getCurrentData(o.shop,e);this._shopData=__assign(__assign({},this._shopData),t);var i=this.getCurrentData(o.unLockCiTiao,e);i&&(this._unLockCiTiao=i)},t.prototype.getCurrentData=function(e,t){var i=null;return t&&(i=t[e])||(i=this._load(e)),i},Object.defineProperty(t.prototype,"shopData",{get:function(){return this._shopData||(this._shopData=new l.ShopSaveData,n.LogMgr.error("\u51fa\u73b0\u4e25\u91cd\u9519\u8bef\uff0c\u5546\u5e97\u6570\u636e\u53d6\u5230\u4e86\u7a7a\u503c")),this._shopData},set:function(e){this._shopData=e},enumerable:!1,configurable:!0}),t.prototype.saveShopData=function(){this._save(o.shop,this._shopData)},t.prototype.checkNextResetTime=function(){var e=(new Date).getTime();return(0===this.shopData.nextResetTime||e>=this.shopData.nextResetTime)&&this.resetShopData(),Math.floor((this.shopData.nextResetTime-e)/1e3)},t.prototype.resetShopData=function(){var e=c.Excel.shopControl(1),t=0,i=0;this._shopData&&(t=this._shopData.boxExp,i=this._shopData.boxLevel),this._shopData=new l.ShopSaveData,this._shopData.boxExp=t,this._shopData.boxLevel=i;var o=new Date;o.setHours(e.resetTime,0,0,0),this.shopData.nextResetTime=o.getTime(),this.ResetTodayShop()},t.prototype.ResetTodayShop=function(){this.shopData.todayShopArray=this.getNewTodayShopData(),this.saveShopData()},t.prototype.getNewTodayShopData=function(){var e=[2,3],t=[],i=[],o=[[],[]];c.Excel.todayShop_all.forEach(function(e){s.PlayerDataMgr.getEquipDataById(e.shuiguoId).isUnLock&&(i.push(e),o[0].push(e.goldWeight),o[1].push(e.weight))});for(var a=0;a<e.length;a++)for(var n=0;n<e[a];n++){var u=i[r.default.getWeightedRandomIndex(o[a])],d=new l.TodayShopItemData;d.shopId=u.id,d.richType=a+1,d.canBuyCount=1,d.discount=u.discount[Math.floor(Math.random()*u.discount.length)],d.price=a+1===l.RichType.Gold?Math.floor(u.gold*d.discount):Math.floor(u.diamond*d.discount),t.push(d)}return t},t.prototype.isCiTiaoUnlocked=function(e){return-1!==this._unLockCiTiao.indexOf(e)},t.prototype.unlockCiTiao=function(e){-1===this._unLockCiTiao.indexOf(e)&&(this._unLockCiTiao.push(e),this._save(o.unLockCiTiao,this._unLockCiTiao))},t}(a.default);i.HallMgr=u.getInstance(),cc._RF.pop()},{"./ArrayUtils":"ArrayUtils","./Const_Hall":"Const_Hall","./DataManager":"DataManager","./Excel":"Excel","./LogManager":"LogManager","./PlayerDataManager":"PlayerDataManager"}],IpadShiPei:[function(e,t,i){"use strict";cc._RF.push(t,"46eeftVLAxEyrbvMwaNsA2p","IpadShiPei"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./GameGlobalVariable"),a=cc._decorator,n=a.ccclass,r=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){var e=cc.winSize.width,t=cc.winSize.height;console.log("\u5e73\u677f \u5bbd\u5ea6="+e,"\u9ad8\u5ea6="+t);var i=this.node.getComponent(cc.Canvas);i&&(t/e<1334/750?(i.fitHeight=!0,i.fitWidth=!1,o.GameGlobalVariable.isPad=!0,console.log("\u5e73\u677f \u9002\u914d\u540e \u5bbd\u5ea6="+cc.winSize.width,"\u9ad8\u5ea6="+cc.winSize.height)):(o.GameGlobalVariable.isPad=!1,i.fitHeight=!1,i.fitWidth=!0,console.log("\u624b\u673a")))},t.prototype.start=function(){},t.prototype.checkIsMiniGame=function(){},__decorate([n],t)}(cc.Component));i.default=r,cc._RF.pop()},{"./GameGlobalVariable":"GameGlobalVariable"}],Item_Bag_CiTiao_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"dcdd6Cov5ZHo55EXrUhROhp","Item_Bag_CiTiao_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.node_bgFather=null,t.sp_iconSprite=null,t.rtxt_infoLabel=null,t}return __extends(t,e),__decorate([r(cc.Node)],t.prototype,"node_bgFather",void 0),__decorate([r(cc.Sprite)],t.prototype,"sp_iconSprite",void 0),__decorate([r(cc.RichText)],t.prototype,"rtxt_infoLabel",void 0),__decorate([n("Item_Bag_CiTiao_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],Item_Bag_CiTiao:[function(e,t,i){"use strict";cc._RF.push(t,"44bd0YMJTFKf71qf77p11+y","Item_Bag_CiTiao"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./Item_Bag_CiTiao_UIBindings"),a=e("./ResKeeper"),n=e("./Excel"),r=e("./PlayerDataManager"),s=e("./BundleConfig"),c=e("./CommonUtils"),l=e("./BagCiTiaoRichText"),u=e("./UnLockLight"),d=e("./HallManager"),h=cc._decorator,p=h.ccclass,_=h.property,g=(h.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.ciTiaoComp=null,t}return __extends(t,e),t.prototype.initializeSettings=function(e){var t=this,i=r.PlayerDataMgr.getEquipDataById(e.shuiguoId);this.openData=e;var o=this.openData.citiaomiaoshu;n.Excel.shuiguo(e.shuiguoId),this.ciTiaoComp.shuiGuoId=e.shuiguoId,this.ciTiaoComp.ciTiaoId=e.id,o=c.default.replaceStringSymbols(o,"n",[""]);var a=n.Excel.shuiguobuff(this.openData.citiaoshuzhitype),l=a?a.value:null,h=[o];-1!==o.indexOf("X")&&(h=o.split("X"));for(var p="",_=0;_<h.length;_++){var g=h[_];if(-1!==g.indexOf("#")){var f="<img src='player"+(e.shuiguoId-1e3)+"_5' click='ShowZaZhongInfo' />";g=c.default.replaceStringSymbols(g,"#",[f])}p+="<color=#ffffff>"+g+"</c>",_<h.length-1&&l&&(p+="<color=#71ff00>"+l[_]+"</c>")}i.level<this.openData.jiesuo||!i.isUnLock?p="<color=#a3f3ff><size=26>LV"+this.openData.jiesuo+"\u89e3\u9501:</s></c><color=#333333>"+p+"</c>":d.HallMgr.isCiTiaoUnlocked(e.id)||(d.HallMgr.unlockCiTiao(e.id),0!==this.node.getSiblingIndex()&&this._loadRes(s.BundleNames.Common,"prefab/UnLockLight",cc.Prefab).then(function(e){var i=cc.instantiate(e);i.parent=t.node;var o=t.auto_ui.node_bgFather.children[0],a=cc.size(o.width,o.height),n=o.getComponent(cc.Sprite).spriteFrame;i.getComponent(u.default).initialize(a,n,1)})),p="<outline color=#000000 width=3><b>"+p+"</b></outline>",this.auto_ui.node_bgFather.children[0].active=i.level>=this.openData.jiesuo&&i.isUnLock,this.auto_ui.node_bgFather.children[1].active=i.level<this.openData.jiesuo||!i.isUnLock,this.auto_ui.rtxt_infoLabel.string=p,this.loadSprite(e.id)},t.prototype.loadSprite=function(e){return __awaiter(this,void 0,Promise,function(){var t;return __generator(this,function(i){switch(i.label){case 0:return[4,this._loadRes(s.BundleNames.Common,"res/skillicon/skill_"+e,cc.SpriteFrame)];case 1:return t=i.sent(),this.auto_ui.sp_iconSprite.spriteFrame=t,c.default.limitSpriteSize(this.auto_ui.sp_iconSprite,70),[2]}})})},__decorate([_(o.default)],t.prototype,"auto_ui",void 0),__decorate([_(l.default)],t.prototype,"ciTiaoComp",void 0),__decorate([p],t)}(a.default));i.default=g,cc._RF.pop()},{"./BagCiTiaoRichText":"BagCiTiaoRichText","./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Excel":"Excel","./HallManager":"HallManager","./Item_Bag_CiTiao_UIBindings":"Item_Bag_CiTiao_UIBindings","./PlayerDataManager":"PlayerDataManager","./ResKeeper":"ResKeeper","./UnLockLight":"UnLockLight"}],Item_Bag_EquipItem_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"67bd0CW/OZEFYSwHAPEZYyr","Item_Bag_EquipItem_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.txt_unLockInfo=null,t.txt_levelLabel=null,t.txt_expLabel=null,t.txt_nameLabel=null,t.txt_lockLabel=null,t.btn_infoBtn=null,t.node_bgFather=null,t.node_tiaoFather=null,t.node_geZiFather=null,t.node_unLockView=null,t.node_expIconFather=null,t.progress_expBar=null,t.sp_iconSprite=null,t._btnNames=["btn_infoBtn"],t}return __extends(t,e),__decorate([r(cc.Label)],t.prototype,"txt_unLockInfo",void 0),__decorate([r(cc.Label)],t.prototype,"txt_levelLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_expLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_nameLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_lockLabel",void 0),__decorate([r(cc.Button)],t.prototype,"btn_infoBtn",void 0),__decorate([r(cc.Node)],t.prototype,"node_bgFather",void 0),__decorate([r(cc.Node)],t.prototype,"node_tiaoFather",void 0),__decorate([r(cc.Node)],t.prototype,"node_geZiFather",void 0),__decorate([r(cc.Node)],t.prototype,"node_unLockView",void 0),__decorate([r(cc.Node)],t.prototype,"node_expIconFather",void 0),__decorate([r(cc.ProgressBar)],t.prototype,"progress_expBar",void 0),__decorate([r(cc.Sprite)],t.prototype,"sp_iconSprite",void 0),__decorate([n("Item_Bag_EquipItem_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],Item_Bag_EquipItem:[function(e,t,i){"use strict";cc._RF.push(t,"276ba/h+4xENIm6cltjt49H","Item_Bag_EquipItem"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./Item_Bag_EquipItem_UIBindings"),a=e("./ResKeeper"),n=e("./PlayerDataManager"),r=e("./Excel"),s=e("./BundleConfig"),c=e("./CommonUtils"),l=e("./UIManager"),u=e("./UIConfig_Home"),d=e("./Const_Hall"),h=cc._decorator,p=h.ccclass,_=h.property,g=(h.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.spriteMaterial=[],t.isShowExp=!1,t.miaoBianColor=[new cc.Color(5,140,65,255),new cc.Color(32,71,131,255),new cc.Color(126,33,164,255)],t.openData=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.auto_ui.addClickListener(this._clickListener,this)},t.prototype._clickListener=function(e){e===this.auto_ui.btn_infoBtn&&this.openInfo()},t.prototype.openInfo=function(e){void 0===e&&(e=!1),l.default.open(s.BundleNames.Home,u.UIView_Home.UI_EquipInfo,{openData:this.openData,upLevelReset:this.reset.bind(this),isAiDressUp:e})},t.prototype.reset=function(){this.startSet(this.openData)},t.prototype.setCanClick=function(e){this.auto_ui.btn_infoBtn.node.active=e},t.prototype.onEnable=function(){this.isShowExp&&this.resetLevelAndExp()},t.prototype.startSet=function(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=!0),this.setCanClick(t),this.openData=e;var o=this.auto_ui;if(this.node.children[0].active=0!==e.unLockChar,this.node.children[1].active=0===e.unLockChar&&0===e.shuiGuoId,this.node.children[2].active=0===e.unLockChar&&0!==e.shuiGuoId,0!==e.unLockChar)o.txt_unLockInfo.string="\u901a\u5173\u7ae0\u8282"+e.unLockChar+"\u89e3\u9501";else if(0===e.unLockChar&&0!==e.shuiGuoId){var a=r.Excel.shuiguo(e.shuiGuoId),s=n.PlayerDataMgr.getEquipDataById(e.shuiGuoId),c=!!(null==s?void 0:s.isUnLock);o.txt_nameLabel.string=a.name,this.loadSprite(a.id),this.setAllChildGray(!!i&&!c),this.updateBagEquipRule(a.id),this.updateQualityDisplay(a.quality),this.updateLevelAndExpDisplay(c,a.unLock),o.txt_lockLabel.node.active=!c,o.node_tiaoFather.active=c,o.node_unLockView.active=c}},t.prototype.updateBagEquipRule=function(e){var t=this.auto_ui;r.Excel.bagEquipRule_all.forEach(function(i){i.shuiguoId===e&&t.node_geZiFather.children.forEach(function(e){e.active=e.name===i.pfbName})})},t.prototype.updateQualityDisplay=function(e){var t=this.auto_ui;t.node_bgFather.children.forEach(function(t,i){t.active=i===e-1}),t.node_tiaoFather.children.forEach(function(t,i){t.active=i===e-1})},t.prototype.updateLevelAndExpDisplay=function(e,t){var i=this.auto_ui;e?this.resetLevelAndExp():(i.txt_lockLabel.string="\u901a\u8fc7\u7ae0\u8282"+t+"\u89e3\u9501",i.txt_levelLabel.string="",i.node_bgFather.children[3].active=!0)},t.prototype.loadSprite=function(e){return __awaiter(this,void 0,Promise,function(){var t,i,o;return __generator(this,function(a){switch(a.label){case 0:return t="res/player/player"+(e-1e3)+"_1",[4,this._loadRes(s.BundleNames.Common,t,cc.SpriteFrame)];case 1:return i=a.sent(),(o=this.auto_ui.sp_iconSprite).spriteFrame=i,c.default.limitSpriteSize(o,d.equipIconSize),[2]}})})},t.prototype.setAllChildGray=function(e){var t=this,i=this.node.children[2].getComponentsInChildren(cc.Sprite),o=this.node.children[2].getComponentsInChildren(cc.Label);i.forEach(function(i){"4"!==i.name&&i.setMaterial(0,e?t.spriteMaterial[1]:t.spriteMaterial[0])}),o.forEach(function(i){i.setMaterial(0,e?t.spriteMaterial[1]:t.spriteMaterial[0])})},t.prototype.resetLevelAndExp=function(){this.isShowExp=!0;var e=this.openData,t=n.PlayerDataMgr.getEquipDataById(e.shuiGuoId);this.auto_ui,e.shuiGuoId>=1e3&&t&&(this.updateLevelDisplay(t.level),this.updateExpDisplay(t,e.upLevelDatas[t.level-1]))},t.prototype.updateLevelDisplay=function(e){this.auto_ui.txt_levelLabel.string="\u7b49\u7ea7"+e},t.prototype.updateExpDisplay=function(e,t){this.auto_ui,e.level>this.openData.upLevelDatas.length?this.maxExperienceReached(e.fragments):this.updateProgressBar(e.fragments,t.shengjixiaohao)},t.prototype.maxExperienceReached=function(e){var t=this.auto_ui;t.txt_expLabel.string=e+"/MAX",t.progress_expBar.progress=1,t.node_expIconFather.children[0].active=!0,t.node_expIconFather.children[1].stopAllActions(),t.node_expIconFather.children[1].active=!1},t.prototype.updateProgressBar=function(e,t){var i=this.auto_ui,o=e/t;i.txt_expLabel.string=e+"/"+t,i.progress_expBar.progress=o,i.progress_expBar.progress=Math.max(i.progress_expBar.progress,.05),i.progress_expBar.node.children[0].children[0].opacity=o<1?255:0,i.progress_expBar.node.children[0].children[1].opacity=o>=1?255:0,i.node_expIconFather.children[0].active=o<1,i.node_expIconFather.children[1].active=o>=1,o>=1&&this.addFullExpAnimation()},t.prototype.addFullExpAnimation=function(){var e=this.auto_ui;e.node_expIconFather.children[1].stopAllActions(),e.node_expIconFather.children[1].runAction(cc.repeatForever(cc.sequence(cc.moveTo(.5,0,15),cc.moveTo(.5,0,0))))},t.prototype.canUpgrade=function(){var e=n.PlayerDataMgr.getEquipDataById(this.openData.shuiGuoId);if(e.level<=this.openData.upLevelDatas.length){var t=this.openData.upLevelDatas[e.level-1],i=this.openData.upLevelDatas[e.level-1];if(e.fragments>=t.shengjixiaohao&&n.PlayerDataMgr.globalData.gold>=i.money)return!0}return!1},__decorate([_(o.default)],t.prototype,"auto_ui",void 0),__decorate([_([cc.Material])],t.prototype,"spriteMaterial",void 0),__decorate([p],t)}(a.default));i.default=g,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Const_Hall":"Const_Hall","./Excel":"Excel","./Item_Bag_EquipItem_UIBindings":"Item_Bag_EquipItem_UIBindings","./PlayerDataManager":"PlayerDataManager","./ResKeeper":"ResKeeper","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager"}],Item_CellFatherMove:[function(e,t,i){"use strict";cc._RF.push(t,"c0a33ewt/5Hz46YUk6NQ9Vs","Item_CellFatherMove"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./ResKeeper"),a=e("./Logic_ChildMoveEvent"),n=e("./Item_GameBagCell"),r=cc._decorator,s=r.ccclass,c=r.property,l=(r.inspector,function(e){function t(){var t=e.call(this)||this;return t.cellFatherNode=null,t.lastCubeArray=[],t.initialPosition=null,t.checkEndResult=null,t}return __extends(t,e),t.prototype.initializeSettings=function(e){this.uiBag=e,this.childMoveEvent=this.cellFatherNode.getComponent(a.default),this.childMoveEvent||(this.childMoveEvent=this.cellFatherNode.addComponent(a.default)),this.childMoveEvent.startSet(this.handleChildTouchStart.bind(this),this.handleChildTouchMove.bind(this),this.handleChildTouchEnd.bind(this)),this.childMoveEvent.setCantClick(!1)},t.prototype.setMoveability=function(e,t){if(e){if(t){var i=this.uiBag.auto_ui.node_cubeBaseFather.children[this.cellFatherNode.children[0].getComponent(n.default).cellData.cellIndex].convertToWorldSpaceAR(cc.v2(0,0)),o=this.cellFatherNode.children[0].convertToWorldSpaceAR(cc.v2(0,0)),a=cc.v2(i.x-o.x,i.y-o.y);this.node.x+=a.x,this.node.y+=a.y,this.initialPosition=this.node.getPosition(),this.childMoveEvent.setCantClick(!0)}this.checkEndResult=null}else this.childMoveEvent.setCantClick(!1)},t.prototype.handleChildTouchStart=function(){},t.prototype.handleChildTouchMove=function(e){this.node.x+=e.getDeltaX(),this.node.y+=e.getDeltaY(),this.validateCell()},t.prototype.handleChildTouchEnd=function(){var e=this,t=this.validateCell();this.lastCubeArray.forEach(function(t){e.uiBag.baseCellCompArray[t].updateBgNodeColor(cc.Color.WHITE)}),t.isOk?(this.checkEndResult=t,this.node.x+=t.effectPos.x,this.node.y+=t.effectPos.y,this.initialPosition=this.node.getPosition(),this.uiBag.moveChangeBagCellIndex(this.checkEndResult)):(this.node.setPosition(this.initialPosition),this.checkEndResult=null),this.lastCubeArray.length=0},t.prototype.validateCell=function(){var e=this;this.lastCubeArray.forEach(function(t){e.uiBag.baseCellCompArray[t].updateBgNodeColor(cc.Color.WHITE)});var t=this.cellFatherNode.children,i=this.uiBag.auto_ui.node_cubeBaseFather.children,o=[],a=[],n=[];t.forEach(function(e){o.push(e.convertToWorldSpaceAR(cc.v2(0,0)))}),i.forEach(function(e){a.push(e.convertToWorldSpaceAR(cc.v2(0,0)))});var r=!0,s=null;this.lastCubeArray.length=0;for(var c=0;c<t.length;c++){for(var l=o[c],u=!1,d=function(t){var i=!1;if(e.uiBag.currAddCellDataMap.size>0&&e.uiBag.currAddCellDataMap.forEach(function(e){if(e.pickCellArray&&!i)for(var o=0;o<e.pickCellArray.length;o++){var a=e.pickCellArray[o];if(t==a.cellData.cellIndex){i=!0;break}}}),i)return"continue";var o=a[t];return cc.Vec2.distance(l,o)<e.uiBag.effectMax?(u=!0,e.lastCubeArray.push(t),n.push(t),s||(s=cc.v2(o.x-l.x,o.y-l.y)),"break"):void 0},h=0;h<i.length&&"break"!==d(h);h++);u||(r=!1)}return this.lastCubeArray.forEach(function(t){e.uiBag.baseCellCompArray[t].updateBgNodeColor(r?cc.Color.GREEN:cc.Color.RED)}),{isOk:r,effectPos:s,pickCellArray:n}},__decorate([c(cc.Node)],t.prototype,"cellFatherNode",void 0),__decorate([s],t)}(o.default));i.default=l,cc._RF.pop()},{"./Item_GameBagCell":"Item_GameBagCell","./Logic_ChildMoveEvent":"Logic_ChildMoveEvent","./ResKeeper":"ResKeeper"}],Item_GameBagCell_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"a07f0+SsBtNqoSn+1Km24Ey","Item_GameBagCell_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.node_bgNode=null,t}return __extends(t,e),__decorate([r(cc.Node)],t.prototype,"node_bgNode",void 0),__decorate([n("Item_GameBagCell_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],Item_GameBagCell:[function(e,t,i){"use strict";cc._RF.push(t,"4aa76sy3ZlGaodUNPWrITQY","Item_GameBagCell"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./ResKeeper"),a=e("./BundleConfig"),n=e("./GameGlobalVariable"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node_bgNode=null,t._isShow=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,"cellData",{get:function(){return this._cellData},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){var e=this;this._loadRes(a.BundleNames.Game,"res/bg/"+n.GameGlobalVariable.getSceneId(),cc.SpriteFrame).then(function(t){e.node_bgNode.getComponent(cc.Sprite).spriteFrame=t})},t.prototype.initializeSettings=function(e,t){this.updateCellData(e),this.updateBgNodeVisibility(t),this.equipComp=null},t.prototype.updateCellData=function(e){this._cellData=e},t.prototype.updateBgNodeColor=function(e){this.node_bgNode.color=e},t.prototype.dragEndLockThis=function(e){this.equipComp=e},t.prototype.updateBgNodeVisibility=function(e){this.node_bgNode.active=e,this._isShow=e,this.node_bgNode.opacity=255},t.prototype.temporaryShowBgNode=function(e){this._isShow||(this.node_bgNode.opacity=e?100:255,this.node_bgNode.active=e)},__decorate([c(cc.Node)],t.prototype,"node_bgNode",void 0),__decorate([s],t)}(o.default);i.default=l,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./GameGlobalVariable":"GameGlobalVariable","./ResKeeper":"ResKeeper"}],Item_GameEquip:[function(e,t,i){"use strict";cc._RF.push(t,"2c28fTe/+VBDLT/eddn4f1H","Item_GameEquip"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./ResKeeper"),a=e("./Logic_ChildMoveEvent"),n=e("./BundleConfig"),r=e("./Logic_GetEquip"),s=e("./UIManager"),c=e("./GameGlobalVariable"),l=e("./CommonUtils"),u=e("./EventManager"),d=e("./EvenType"),h=e("./QiPaoTween"),p=e("./Excel"),_=e("./PlayerDataManager"),g=e("./Const_Game"),f=e("./UIConfig_Game"),m=cc._decorator,v=m.ccclass,y=m.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node_cellFather=null,t.equipIcon=null,t.qiPaoNode=null,t.level5TipNode=null,t.level5TipLabel=null,t.banTouOpacity=155,t.tipNode=null,t.unLockColor=new cc.Color(247,41,166),t}return __extends(t,e),Object.defineProperty(t.prototype,"equipData",{get:function(){return this._equipData},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){var e=this;this._loadRes(n.BundleNames.Game,"res/bg/"+c.GameGlobalVariable.getSceneId(),cc.SpriteFrame).then(function(t){e.node_cellFather.children.forEach(function(e){e.children[0].getComponent(cc.Sprite).spriteFrame=t})}),this.tipNode=this.node.getChildByName("upLevel5Tip"),this.tipNode&&(this.tipNode.active=!1)},t.prototype.onEnable=function(){u.EventMgrInstance.addListener(d.EVENT_TYPE.Game_Show_Level5Tip,this.displayTipAnimation,this)},t.prototype.onDisable=function(){u.EventMgrInstance.removeListener(d.EVENT_TYPE.Game_Show_Level5Tip,this.displayTipAnimation,this)},t.prototype.initializeSettings=function(e,t,i,o,n,r){var s=this;this._equipData=e,this.isGeZiType=t,this.showPaiZi=r,this.childMoveArray||(this.childMoveArray=[],this.node_cellFather.children.forEach(function(e){var t=e.getComponent(a.default);t||(t=e.addComponent(a.default)),t.startSet(i,o,n),s.childMoveArray.push(t)})),this.resetShow(),this.displayBubble(e.isHaveQiPao),this.tipNode.active=!1},t.prototype.displayBubble=function(e){if(this.qiPaoNode)if(e){if(this.qiPaoNode.active=!0,0===this.qiPaoNode.childrenCount){var t=this;this._loadRes(n.BundleNames.Game,"item/qiPao_"+this.equipData.pfbName,cc.Prefab).then(function(e){var i=cc.instantiate(e);t.qiPaoNode.addChild(i),i.setPosition(0,0),i.getComponent(h.default).startSet(t.isGeZiType)})}}else this.qiPaoNode.active=!1},t.prototype.displayPurchaseView=function(e,t){if(this.qiPaoNode&&this.qiPaoNode.active){var i=this,o=new g.VideoPurchaseData;o.furidSprite=null,this.isGeZiType?(o.titleStr="\u989d\u5916\u80cc\u5305\u683c\u5b50",o.infoStr="\u662f\u5426\u89c2\u770b\u89c6\u9891\uff0c\u83b7\u5f97\u989d\u5916\u7684\u80cc\u5305\u683c\u5b50"):(o.titleStr="\u89c6\u9891\u83b7\u5f973\u7ea7\u6c34\u679c",o.infoStr="\u662f\u5426\u89c2\u770b\u89c6\u9891\uff0c\u89c6\u9891\u83b7\u5f973\u7ea7\u6c34\u679c",o.furidSprite=this.equipIcon.getComponent(cc.Sprite).spriteFrame),o.pfbName=this._equipData.pfbName,o.clickCallBack=function(){i.equipData.isHaveQiPao=!1,i.qiPaoNode.active=!1,i.isGeZiType&&u.EventMgrInstance.emitEvent(d.EVENT_TYPE.ResetGameBagAI),t&&t()},o.failCallBack=function(){e&&e()},s.default.open(n.BundleNames.Game,f.UIView_Game.UI_VideoBuyOne,o)}else t&&t()},t.prototype.dragEndLockCell=function(e){var t=this;this.lockCellArray=e,this._equipData.lockCellIndex=[],e&&e.forEach(function(e){t._equipData.lockCellIndex.push(e.cellData.cellIndex)})},t.prototype.getGridNode=function(){return this.node_cellFather},t.prototype.resetShow=function(){if(this.node.getComponentInChildren(cc.Label).string="",this.loadFruitSpriteFrame(),!this.equipData.lockCellIndex||0===this.equipData.lockCellIndex.length){var e=Math.random();this.node.angle=e>.66?20:e<.33?-20:0}},t.prototype.loadFruitSpriteFrame=function(){return __awaiter(this,void 0,Promise,function(){var e,t,i;return __generator(this,function(o){switch(o.label){case 0:return e=this.equipIcon.getComponent(cc.Sprite),t=this,this.node_cellFather.children.forEach(function(e){e.children[0].getComponent(cc.Sprite).enabled=t.equipData.equipLevel<=-1}),this.itemPaiZi||(this.itemPaiZi=this.showPaiZi(this.equipIcon)),this.equipData.equipLevel<=-1?(e.spriteFrame=null,this.itemPaiZi.node.active=!1,[3,3]):[3,1];case 1:return[4,this._loadRes(n.BundleNames.Common,"res/player/"+r.default.getInstance.getEquipUpData(this.equipData.shuiguoId,this.equipData.equipLevel).shuiguoimg,cc.SpriteFrame)];case 2:i=o.sent(),e.spriteFrame=i,this.itemPaiZi.node.active=!0,this.itemPaiZi.initializeSettings(this.equipData.equipLevel,this.equipData.shuiguoId),o.label=3;case 3:return 4===this.equipData.equipLevel&&l.default.loadLevel5Effect(this.equipData.shuiguoId,void 0,void 0,this._loadRes.bind(this),function(e){e.parent=t.node,e.setPosition(0,0),e.setSiblingIndex(1)},function(e){e.parent=t.node,e.setPosition(0,0),e.setSiblingIndex(3)}),[2]}})})},t.prototype.setClickable=function(e,t){void 0===t&&(t=!1),this.childMoveArray.forEach(function(t){t.setCantClick(e)}),t&&(this.equipIcon.opacity=e?255:this.banTouOpacity)},t.prototype.onDestroy=function(){this&&this.equipIcon&&this.equipIcon.destroy()},t.prototype.displayTipAnimation=function(e){if(this.tipNode&&this.equipData.equipLevel===c.GameGlobalVariable.normalMaxLevel-1)if(e.isShow&&r.default.getInstance.getZaZhongId(this.equipData.shuiguoId)===e.shuiGuoId){var t=r.default.getInstance.getMaxLevel(this.equipData.shuiguoId)===c.GameGlobalVariable.zaZhongMaxLevel||r.default.getInstance.getMaxLevel(e.shuiGuoId)===c.GameGlobalVariable.zaZhongMaxLevel;this.tipNode.active=!0,this.tipNode.color=t?this.unLockColor:cc.Color.WHITE,this.tipNode.children[0].active=!t,this.tipNode.stopAllActions(),this.tipNode.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.1,1.1),cc.scaleTo(.5,1,1))))}else this.tipNode.stopAllActions(),this.tipNode.active=!1},t.prototype.displayUnlockLevel5Tip=function(e,t,i){if(this.level5TipNode&&!this.isGeZiType&&(this.level5TipNode.active=!1,e&&this.equipData.equipLevel===c.GameGlobalVariable.normalMaxLevel-1)){this.level5TipNode.y=this.equipIcon.height/2;var o=r.default.getInstance.getZaZhongId(this.equipData.shuiguoId),a=!1;if(t.forEach(function(e){e.equipData.shuiguoId===o&&e.equipData.equipLevel===c.GameGlobalVariable.normalMaxLevel-1&&(a=!0)}),a||i.forEach(function(e){e.equipData.shuiguoId===o&&e.equipData.equipLevel===c.GameGlobalVariable.normalMaxLevel-1&&(a=!0)}),a){var n=p.Excel.shuiguo(this.equipData.shuiguoId),s=p.Excel.shuiguo(o);n&&0!==n.jinjieShuiGuoId&&_.PlayerDataMgr.getEquipDataById(n.id).level<n.unLock?(this.level5TipNode.active=!0,this.level5TipLabel.string="<color=#ffffff>"+n.name+"\u5916\u56f4\u517b\u6210\u81f3</c><color=#00ff00>"+n.unLock+"</c><color=#ffffff>\u7ea7\u89e3\u9501\u6742\u4ea4</c>"):s&&0!==s.jinjieShuiGuoId&&_.PlayerDataMgr.getEquipDataById(s.id).level<s.unLock&&(this.level5TipNode.active=!0,this.level5TipLabel.string="<color=#ffffff>"+s.name+"\u5916\u56f4\u517b\u6210\u81f3</c><color=#00ff00>"+s.unLock+"</c><color=#ffffff>\u7ea7\u89e3\u9501\u6742\u4ea4</c>")}}},__decorate([y(cc.Node)],t.prototype,"node_cellFather",void 0),__decorate([y(cc.Node)],t.prototype,"equipIcon",void 0),__decorate([y(cc.Node)],t.prototype,"qiPaoNode",void 0),__decorate([y(cc.Node)],t.prototype,"level5TipNode",void 0),__decorate([y(cc.RichText)],t.prototype,"level5TipLabel",void 0),__decorate([v],t)}(o.default);i.default=b,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Const_Game":"Const_Game","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GameGlobalVariable":"GameGlobalVariable","./Logic_ChildMoveEvent":"Logic_ChildMoveEvent","./Logic_GetEquip":"Logic_GetEquip","./PlayerDataManager":"PlayerDataManager","./QiPaoTween":"QiPaoTween","./ResKeeper":"ResKeeper","./UIConfig_Game":"UIConfig_Game","./UIManager":"UIManager"}],Item_Icon_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"14a52npprVJxo2W57mM9ddS","Item_Icon_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.sp_quality=null,t.sp_icon=null,t.dbAnim_quality=null,t.txt_countLabel=null,t}return __extends(t,e),__decorate([r(cc.Sprite)],t.prototype,"sp_quality",void 0),__decorate([r(cc.Sprite)],t.prototype,"sp_icon",void 0),__decorate([r(dragonBones.ArmatureDisplay)],t.prototype,"dbAnim_quality",void 0),__decorate([r(cc.Label)],t.prototype,"txt_countLabel",void 0),__decorate([n("Item_Icon_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],Item_Icon:[function(e,t,i){"use strict";cc._RF.push(t,"42828kPu59Ik4ci9qp80c+s","Item_Icon"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./Item_Icon_UIBindings"),a=e("./ResKeeper"),n=e("./BundleConfig"),r=e("./Excel"),s=e("./CommonUtils"),c=e("./Const_Hall"),l=e("./HallGlobalVariable"),u=cc._decorator,d=u.ccclass,h=u.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t}return __extends(t,e),t.prototype.initialize=function(e,t){var i=this;this.auto_ui.txt_countLabel.string="x"+t;var o=1;switch(e){case l.default.goldId:case l.default.diamondId:case l.default.powerId:var a="goldIcon";e===l.default.diamondId?a="diamondIcon":e===l.default.powerId&&(a="powerIcon"),this._loadRes(n.BundleNames.Common,"res/ui/tu/"+a,cc.SpriteFrame).then(function(e){i.auto_ui.sp_icon.spriteFrame=e,s.default.limitSpriteSize(i.auto_ui.sp_icon,c.equipIconSize)}),this._loadRes(n.BundleNames.Common,"res/quality/quality_m_1",cc.SpriteFrame).then(function(e){i.auto_ui.sp_quality.spriteFrame=e});break;default:o=r.Excel.shuiguo(e).quality,this._loadRes(n.BundleNames.Common,"res/player/player"+(e-1e3)+"_1",cc.SpriteFrame).then(function(e){i.auto_ui.sp_icon.spriteFrame=e,s.default.limitSpriteSize(i.auto_ui.sp_icon,c.equipIconSize)}),this._loadRes(n.BundleNames.Common,"res/quality/quality_"+o,cc.SpriteFrame).then(function(e){i.auto_ui.sp_quality.spriteFrame=e})}},t.prototype._loadRes=function(e,t,i){return new Promise(function(o,a){cc.assetManager.loadBundle(e,function(e,n){e?a(e):n.load(t,i,function(e,t){e?a(e):o(t)})})})},__decorate([h(o.default)],t.prototype,"auto_ui",void 0),__decorate([d],t)}(a.default);i.default=p,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Const_Hall":"Const_Hall","./Excel":"Excel","./HallGlobalVariable":"HallGlobalVariable","./Item_Icon_UIBindings":"Item_Icon_UIBindings","./ResKeeper":"ResKeeper"}],Item_PaiZi_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"c762cg0e4BHzLGn8NGHU25O","Item_PaiZi_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.node_da=null,t.node_xiao=null,t}return __extends(t,e),__decorate([r(cc.Node)],t.prototype,"node_da",void 0),__decorate([r(cc.Node)],t.prototype,"node_xiao",void 0),__decorate([n("Item_PaiZi_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],Item_PaiZi:[function(e,t,i){"use strict";cc._RF.push(t,"6909ee5DbxHFqiV1zRDOZIV","Item_PaiZi"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./Item_PaiZi_UIBindings"),a=e("./ResKeeper"),n=cc._decorator,r=n.ccclass,s=n.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.initialSize=null,t}return __extends(t,e),t.prototype.initializeSettings=function(e,t){this.auto_ui&&(this.auto_ui.node_xiao.active=!0,this.auto_ui.node_da.active=!1,this.auto_ui.node_xiao.children.forEach(function(t,i){t.active=i===e})),1009===t?this.node.setPosition(68,-68):(this.initialSize||(this.initialSize=cc.v2(this.node.parent.parent.width,this.node.parent.parent.height)),this.node.x=this.initialSize.x/2-25,this.node.y=this.initialSize.y/2*-1+25)},__decorate([s(o.default)],t.prototype,"auto_ui",void 0),__decorate([r],t)}(a.default);i.default=c,cc._RF.pop()},{"./Item_PaiZi_UIBindings":"Item_PaiZi_UIBindings","./ResKeeper":"ResKeeper"}],Item_Setting_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"42fcbS3wYBKKaASqvIy9R2B","Item_Setting_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.btn_shake=null,t.btn_music=null,t.node_off_shake=null,t.node_off_music=null,t._btnNames=["btn_shake","btn_music"],t}return __extends(t,e),__decorate([r(cc.Button)],t.prototype,"btn_shake",void 0),__decorate([r(cc.Button)],t.prototype,"btn_music",void 0),__decorate([r(cc.Node)],t.prototype,"node_off_shake",void 0),__decorate([r(cc.Node)],t.prototype,"node_off_music",void 0),__decorate([n("Item_Setting_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],Item_Setting:[function(e,t,i){"use strict";cc._RF.push(t,"e4660eErQlHJpPfPuAeqfvS","Item_Setting"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./Item_Setting_UIBindings"),a=e("./ResKeeper"),n=e("./AudioManager"),r=cc._decorator,s=r.ccclass,c=r.property,l=(r.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t}return __extends(t,e),t.prototype.onEnable=function(){this._refreshUI(),this.auto_ui.addClickListener(this._handleClick,this)},t.prototype._handleClick=function(e){switch(e){case this.auto_ui.btn_music:var t=!n.AudioMgr.isMusicOn;n.AudioMgr.toggleMusic(t);break;case this.auto_ui.btn_shake:this.auto_ui.node_off_shake.active=!this.auto_ui.node_off_shake.active}this._refreshUI()},t.prototype._refreshUI=function(){this.auto_ui.node_off_music.active=!n.AudioMgr.isMusicOn},__decorate([c(o.default)],t.prototype,"auto_ui",void 0),__decorate([s],t)}(a.default));i.default=l,cc._RF.pop()},{"./AudioManager":"AudioManager","./Item_Setting_UIBindings":"Item_Setting_UIBindings","./ResKeeper":"ResKeeper"}],Item_Shop_BoxItem_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"b0b3cslmxpCrL4JHnauFiBg","Item_Shop_BoxItem_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.node_ptBg=null,t.node_jzBg=null,t.txt_nameLabel=null,t.txt_mustGetLabel=null,t.txt_timeLabel=null,t.txt_priceLabel=null,t.btn_showInfoBtn=null,t.btn_videoBuyBtn=null,t.btn_buyBtn=null,t._btnNames=["btn_showInfoBtn","btn_videoBuyBtn","btn_buyBtn"],t}return __extends(t,e),__decorate([r(cc.Node)],t.prototype,"node_ptBg",void 0),__decorate([r(cc.Node)],t.prototype,"node_jzBg",void 0),__decorate([r(cc.Label)],t.prototype,"txt_nameLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_mustGetLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_timeLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_priceLabel",void 0),__decorate([r(cc.Button)],t.prototype,"btn_showInfoBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_videoBuyBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_buyBtn",void 0),__decorate([n("Item_Shop_BoxItem_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],Item_Shop_BoxItem:[function(e,t,i){"use strict";cc._RF.push(t,"36071iqTdhO0KBZ+IH3IFqL","Item_Shop_BoxItem"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./Item_Shop_BoxItem_UIBindings"),a=e("./ResKeeper"),n=e("./Excel"),r=e("./HallManager"),s=e("./PlayerDataManager"),c=e("./EventManager"),l=e("./EvenType"),u=e("./UIManager"),d=e("./BundleConfig"),h=e("./HallGlobalVariable"),p=e("./ADManager"),_=e("./Const_Hall"),g=e("./UIConfig_Home"),f=cc._decorator,m=f.ccclass,v=f.property,y=(f.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.isStart=!0,t.childIndex=0,t.delateTime=0,t.timeLabel=null,t.rewards=[],t}return __extends(t,e),t.prototype.onLoad=function(){var e;null===(e=this.auto_ui)||void 0===e||e.addClickListener(this._clickListener,this)},t.prototype.initialize=function(e,t){t&&(this.timeLabel=t),this.childIndex=e;var i=n.Excel.shopControl(1);this.isStart&&(this.isStart=!1,this.auto_ui.txt_nameLabel.string=0===e?"\u666e\u901a\u793c\u76d2":"\u7cbe\u81f4\u793c\u76d2",this.auto_ui.txt_priceLabel.string=0===e?""+i.boxPrice:""+i.bigBoxPrice,this.auto_ui.node_ptBg.active=0===e,this.auto_ui.node_jzBg.active=0!==e);var o=n.Excel.shopBoxLevel(r.HallMgr.shopData.boxLevel+1);this.rewards=0===e?o.rewards:o.bigRewards;var a=cc.Color.GREEN,s="\u666e\u901a";this.rewards[2]?(a=new cc.Color(223,84,219,255),s="\u7a00\u6709"):this.rewards[1]&&(a=new cc.Color(12,224,255,255),s="\u9ad8\u7ea7"),this.auto_ui.txt_mustGetLabel.string=s,this.auto_ui.txt_mustGetLabel.node.color=a;var c=this.auto_ui.btn_videoBuyBtn;c.interactable=0===e?i.box1BuyCount-r.HallMgr.shopData.box1BuyCount>0:i.box2BuyCount-r.HallMgr.shopData.box2BuyCount>0,this.auto_ui.txt_timeLabel.node.active=!c.interactable},t.prototype._clickListener=function(e){switch(e){case this.auto_ui.btn_videoBuyBtn:this.purchaseBoxWithVideo(null);break;case this.auto_ui.btn_buyBtn:this.purchaseBox(!1);break;case this.auto_ui.btn_showInfoBtn:var t=new _.BoxInfoData;t.type=this.childIndex,t.clickCallBack=this.purchaseBoxWithVideo.bind(this),u.default.open(d.BundleNames.Home,g.UIView_Home.UI_BoxInfo,t)}},t.prototype.purchaseBoxWithVideo=function(e){var t=this,i=0===this.childIndex?"\u5546\u57ce\u89c6\u9891\u8d2d\u4e70\u666e\u901a\u5b9d\u7bb1":"\u5546\u57ce\u89c6\u9891\u8d2d\u4e70\u7cbe\u81f4\u5b9d\u7bb1";p.ADMgr.showRewardedVideoAd(i,function(){t.purchaseBox(!0),e&&e()})},t.prototype.purchaseBox=function(e){var t=n.Excel.shopControl(1),i=0===this.childIndex?t.boxPrice:t.bigBoxPrice;e?(0===this.childIndex?r.HallMgr.shopData.box1BuyCount++:r.HallMgr.shopData.box2BuyCount++,this.retrieveReward(i),this.initialize(this.childIndex)):s.PlayerDataMgr.subtractDiamond(i)&&(this.retrieveReward(i),this.initialize(this.childIndex))},t.prototype.retrieveReward=function(e){var t=this,i=n.Excel.shopBoxLevel(r.HallMgr.shopData.boxLevel+1),o=new _.OpenBoxViewData;o.boxType=this.childIndex,o.boxCount=0;var a=0,c=[];0===this.childIndex?(a=i.moneyCount||0,c=[i.rewards[0]||0,i.rewards[1]||0,i.rewards[2]||0]):(a=i.bigMoneyCount||0,c=[i.bigRewards[0]||0,i.bigRewards[1]||0,i.bigRewards[2]||0]),o.boxCount=c.reduce(function(e,t){return e+t},0),o.clickCallBack=function(){var o=[[],[],[]];n.Excel.shuiguo_all.forEach(function(e){s.PlayerDataMgr.getEquipDataById(e.id).isUnLock&&-1!==e.isShow&&o[e.quality-1].push(e)});var r=new Map;c.forEach(function(e,t){if(o[t].length>0)for(var i=0;i<e;i++){var a=Math.floor(Math.random()*o[t].length),n=o[t][a];r.set(n.id,(r.get(n.id)||0)+1)}});var l=new _.GetItemsData;l.ids=[],l.counts=[],a>0&&(l.ids.push(h.default.goldId),l.counts.push(a)),r.forEach(function(e,t){l.ids.push(t),l.counts.push(e)}),l.clickCallBack=function(){l.ids.forEach(function(e,t){var i=l.counts[t];e===h.default.goldId?s.PlayerDataMgr.addGold(i):s.PlayerDataMgr.addEquipFragments(e,i)}),t.finalizeReward({needDiamond:e,nextExp:i.exp})},u.default.open(d.BundleNames.Home,g.UIView_Home.UI_GetItems,l)},u.default.open(d.BundleNames.Home,g.UIView_Home.UI_OpenBox,o)},t.prototype.finalizeReward=function(e){var t=r.HallMgr.shopData,i=t.boxLevel<n.Excel.shopBoxLevel_all.size-1&&t.boxExp+e.needDiamond>=e.nextExp;t.boxExp+=e.needDiamond,r.HallMgr.saveShopData(),c.EventMgrInstance.emitEvent(l.EVENT_TYPE.HallResetShopBox),i&&u.default.open(d.BundleNames.Home,g.UIView_Home.UI_BoxUpLevel)},t.prototype.update=function(e){this.delateTime+=e,this.delateTime>.2&&(this.delateTime=0,!this.auto_ui.btn_videoBuyBtn.interactable&&this.timeLabel&&(this.auto_ui.txt_timeLabel.string=this.timeLabel.string))},__decorate([v(o.default)],t.prototype,"auto_ui",void 0),__decorate([m],t)}(a.default));i.default=y,cc._RF.pop()},{"./ADManager":"ADManager","./BundleConfig":"BundleConfig","./Const_Hall":"Const_Hall","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./HallGlobalVariable":"HallGlobalVariable","./HallManager":"HallManager","./Item_Shop_BoxItem_UIBindings":"Item_Shop_BoxItem_UIBindings","./PlayerDataManager":"PlayerDataManager","./ResKeeper":"ResKeeper","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager"}],Item_Shop_GoldItem_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"9fe05fiZrxGXIdISUVzx+4l","Item_Shop_GoldItem_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.btn_buyBtn=null,t.sp_iconSprite=null,t.txt_nameLabel=null,t.txt_countLabel=null,t.txt_priceLabel=null,t.node_videoIcon=null,t.node_diamondIcon=null,t._btnNames=["btn_buyBtn"],t}return __extends(t,e),__decorate([r(cc.Button)],t.prototype,"btn_buyBtn",void 0),__decorate([r(cc.Sprite)],t.prototype,"sp_iconSprite",void 0),__decorate([r(cc.Label)],t.prototype,"txt_nameLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_countLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_priceLabel",void 0),__decorate([r(cc.Node)],t.prototype,"node_videoIcon",void 0),__decorate([r(cc.Node)],t.prototype,"node_diamondIcon",void 0),__decorate([n("Item_Shop_GoldItem_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],Item_Shop_GoldItem:[function(e,t,i){"use strict";cc._RF.push(t,"9b621dZ9s9P+bwi6Jvvwo0r","Item_Shop_GoldItem"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./Item_Shop_GoldItem_UIBindings"),a=e("./ResKeeper"),n=e("./Excel"),r=e("./HallManager"),s=e("./PlayerDataManager"),c=e("./TipsManager"),l=e("./Const_Hall"),u=e("./UIManager"),d=e("./BundleConfig"),h=e("./UIConfig_Home"),p=e("./ADManager"),_=e("./EventManager"),g=e("./EvenType"),f=e("./RedPointControl"),m=e("./HallGlobalVariable"),v=cc._decorator,y=v.ccclass,b=v.property,I=(v.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.isStart=!0,t.childIndex=0,t.addCount=0,t.priceNum=0,t}return __extends(t,e),t.prototype.initializeSettings=function(e){var t=this.node.getChildByName("redPoint");t&&(t.active=0===e);var i=n.Excel.shopControl(1);if(this.isStart)switch(this.isStart=!1,this.childIndex=e,e){case 0:this.auto_ui.txt_nameLabel.string="\u4e00\u70b9\u91d1\u5e01",this.auto_ui.txt_countLabel.string="X"+i.gold1Count,this.addCount=i.gold1Count;break;case 1:this.auto_ui.txt_nameLabel.string="\u4e00\u888b\u91d1\u5e01",this.auto_ui.txt_countLabel.string="X"+i.gold2Count,this.auto_ui.txt_priceLabel.string=""+i.gold2Price,this.auto_ui.node_diamondIcon.active=!0,this.addCount=i.gold2Count,this.priceNum=i.gold2Price;break;case 2:this.auto_ui.txt_nameLabel.string="\u4e00\u7bb1\u91d1\u5e01",this.auto_ui.txt_countLabel.string="X"+i.gold3Count,this.auto_ui.txt_priceLabel.string=""+i.gold3Price,this.auto_ui.node_diamondIcon.active=!0,this.addCount=i.gold3Count,this.priceNum=i.gold3Price}if(0===e)if(this.auto_ui.btn_buyBtn.interactable=!0,0===r.HallMgr.shopData.videoBuyGoldCount)this.auto_ui.txt_priceLabel.string="\u514d\u8d39",this.auto_ui.node_videoIcon.active=!1;else{var o=i.gold1Time-r.HallMgr.shopData.videoBuyGoldCount+1;o<=0?(this.auto_ui.txt_priceLabel.string="\u5df2\u552e\u7f44",this.auto_ui.node_videoIcon.active=!1,this.auto_ui.btn_buyBtn.interactable=!1):(this.auto_ui.txt_priceLabel.string="\u514d\u8d39("+o+")",this.auto_ui.node_videoIcon.active=!0)}},t.prototype.onLoad=function(){this.auto_ui.addClickListener(this.handleClickEvent,this)},t.prototype.handleClickEvent=function(e){e===this.auto_ui.btn_buyBtn&&this.purchaseItem()},t.prototype.purchaseItem=function(){var e=this;if(0===this.childIndex){if(n.Excel.shopControl(1).gold1Time-r.HallMgr.shopData.videoBuyGoldCount+1<=0)return void c.TipMgr.showToast("\u5df2\u552e\u7f44");0===r.HallMgr.shopData.videoBuyGoldCount?this.incrementVideoBuyCount():p.ADMgr.showRewardedVideoAd("\u5546\u57ce\u89c6\u9891\u8d2d\u4e70\u91d1\u5e01",function(){e.incrementVideoBuyCount()})}else{var t=new l.ShopItemInfoData;t.iconSpriteFrame=this.auto_ui.sp_iconSprite.spriteFrame,t.qualitySpriteFrame=null,t.titleName=this.auto_ui.txt_nameLabel.string,t.count=this.addCount,t.richType=l.RichType.Diamond,t.price=this.priceNum,t.infoStr="\u91d1\u5e01\u53ef\u7528\u4e8e\u88c5\u5907\u5347\u7ea7\uff0c\u53ef\u901a\u8fc7\u4e3b\u7ebf\u5173\u5361\u83b7\u5f97",t.clickCallBack=function(){s.PlayerDataMgr.subtractDiamond(e.priceNum)&&e.displayReward(e.addCount,function(){s.PlayerDataMgr.addGold(e.addCount),c.TipMgr.showToast("\u8d2d\u4e70\u6210\u529f\uff0c\u83b7\u5f97\u91d1\u5e01"+e.addCount)})},u.default.open(d.BundleNames.Home,h.UIView_Home.UI_ShopItemInfo,t)}},t.prototype.incrementVideoBuyCount=function(){var e=this;this.displayReward(this.addCount,function(){s.PlayerDataMgr.addGold(e.addCount),c.TipMgr.showToast("\u8d2d\u4e70\u6210\u529f\uff0c\u83b7\u5f97\u91d1\u5e01"+e.addCount),r.HallMgr.shopData.videoBuyGoldCount++,1===r.HallMgr.shopData.videoBuyGoldCount&&_.EventMgrInstance.emitEvent(g.EVENT_TYPE.MainRedPointChange,f.RedPointType.freeGold),r.HallMgr.saveShopData(),e.initializeSettings(e.childIndex)})},t.prototype.displayReward=function(e,t){var i=new l.GetItemsData;i.ids=[m.default.goldId],i.counts=[e],i.clickCallBack=t,u.default.open(d.BundleNames.Home,h.UIView_Home.UI_GetItems,i)},__decorate([b(o.default)],t.prototype,"auto_ui",void 0),__decorate([y],t)}(a.default));i.default=I,cc._RF.pop()},{"./ADManager":"ADManager","./BundleConfig":"BundleConfig","./Const_Hall":"Const_Hall","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./HallGlobalVariable":"HallGlobalVariable","./HallManager":"HallManager","./Item_Shop_GoldItem_UIBindings":"Item_Shop_GoldItem_UIBindings","./PlayerDataManager":"PlayerDataManager","./RedPointControl":"RedPointControl","./ResKeeper":"ResKeeper","./TipsManager":"TipsManager","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager"}],Item_Shop_TodayItem_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"02fcfyGYNNDMKpQclFh+76E","Item_Shop_TodayItem_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.node_goldbg=null,t.node_discountNode=null,t.node_videoIcon=null,t.node_goldIcon=null,t.node_diamondIcon=null,t.txt_nameLabel=null,t.txt_countLabel=null,t.txt_discountLabel=null,t.txt_priceLabel=null,t.sp_qualitySprite=null,t.sp_iconSprite=null,t.btn_buyBtn=null,t._btnNames=["btn_buyBtn"],t}return __extends(t,e),__decorate([r(cc.Node)],t.prototype,"node_goldbg",void 0),__decorate([r(cc.Node)],t.prototype,"node_discountNode",void 0),__decorate([r(cc.Node)],t.prototype,"node_videoIcon",void 0),__decorate([r(cc.Node)],t.prototype,"node_goldIcon",void 0),__decorate([r(cc.Node)],t.prototype,"node_diamondIcon",void 0),__decorate([r(cc.Label)],t.prototype,"txt_nameLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_countLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_discountLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_priceLabel",void 0),__decorate([r(cc.Sprite)],t.prototype,"sp_qualitySprite",void 0),__decorate([r(cc.Sprite)],t.prototype,"sp_iconSprite",void 0),__decorate([r(cc.Button)],t.prototype,"btn_buyBtn",void 0),__decorate([n("Item_Shop_TodayItem_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],Item_Shop_TodayItem:[function(e,t,i){"use strict";cc._RF.push(t,"ff72dsgldVCrIl7KFVqQRUD","Item_Shop_TodayItem"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./Item_Shop_TodayItem_UIBindings"),a=e("./ResKeeper"),n=e("./Excel"),r=e("./HallManager"),s=e("./TipsManager"),c=e("./PlayerDataManager"),l=e("./UIManager"),u=e("./UIConfig_Home"),d=e("./BundleConfig"),h=e("./CommonUtils"),p=e("./ADManager"),_=e("./EventManager"),g=e("./EvenType"),f=e("./RedPointControl"),m=e("./HallGlobalVariable"),v=e("./Const_Hall"),y=cc._decorator,b=y.ccclass,I=y.property,E=(y.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.childIndex=0,t.isStart=!0,t}return __extends(t,e),t.prototype.initializeSettings=function(e){var t=this.node.getChildByName("redPoint");t&&(t.active=0===e),this.childIndex=e,this.auto_ui.node_discountNode.active=!1;var i=n.Excel.shopControl(1);if(this.auto_ui.node_goldbg.active=0===e,this.auto_ui.btn_buyBtn.interactable=!0,0===e)if(this.isStart&&(this.isStart=!1,this.auto_ui.txt_nameLabel.string="\u94bb\u77f3",this.auto_ui.txt_countLabel.string="x"+i.todayDiamondCount),0===r.HallMgr.shopData.todayBuyDiamondCount)this.auto_ui.txt_priceLabel.string="\u514d\u8d39",this.auto_ui.node_videoIcon.active=!1;else{var o=i.getDiamondTime-r.HallMgr.shopData.todayBuyDiamondCount+1;o<=0?(this.auto_ui.txt_priceLabel.string="\u5df2\u552e\u7f44",this.auto_ui.node_videoIcon.active=!1,this.auto_ui.btn_buyBtn.interactable=!1):(this.auto_ui.txt_priceLabel.string="\u514d\u8d39("+o+")",this.auto_ui.node_videoIcon.active=!0)}else{var a=r.HallMgr.shopData.todayShopArray[e-1];this.todayShopData=n.Excel.todayShop(a.shopId),this.loadSprite(this.todayShopData.shuiguoId),this.auto_ui.txt_nameLabel.string=this.todayShopData.showName,this.auto_ui.txt_countLabel.string="x"+this.todayShopData.count,1===a.discount?this.auto_ui.node_discountNode.active=!1:(this.auto_ui.node_discountNode.active=!0,this.auto_ui.txt_discountLabel.string=10*a.discount+"\u6298"),a.canBuyCount>0?(this.auto_ui.node_goldIcon.active=a.richType===v.RichType.Gold,this.auto_ui.node_diamondIcon.active=a.richType===v.RichType.Diamond,this.auto_ui.txt_priceLabel.string=""+a.price):(this.auto_ui.node_goldIcon.active=!1,this.auto_ui.node_diamondIcon.active=!1,this.auto_ui.txt_priceLabel.string="\u5df2\u552e\u7f44",this.auto_ui.btn_buyBtn.interactable=!1)}},t.prototype.loadSprite=function(e){return __awaiter(this,void 0,Promise,function(){var t,i;return __generator(this,function(o){switch(o.label){case 0:return[4,this._loadRes(d.BundleNames.Common,"res/player/player"+(e-1e3)+"_1",cc.SpriteFrame)];case 1:return t=o.sent(),this.auto_ui.sp_iconSprite.spriteFrame=t,h.default.limitSpriteSize(this.auto_ui.sp_iconSprite,v.equipIconSize),[4,this._loadRes(d.BundleNames.Common,"res/quality/quality_"+n.Excel.shuiguo(e).quality,cc.SpriteFrame)];case 2:return i=o.sent(),this.auto_ui.sp_qualitySprite.spriteFrame=i,[2]}})})},t.prototype.onLoad=function(){this.auto_ui.addClickListener(this._clickListener,this)},t.prototype._clickListener=function(e){switch(e){case this.auto_ui.btn_buyBtn:this.buyThis()}},t.prototype.buyThis=function(){var e=this;if(0===this.childIndex){var t=n.Excel.shopControl(1);if(t.gold1Time-r.HallMgr.shopData.todayBuyDiamondCount+1==0)return void s.TipMgr.showToast("\u5df2\u552e\u7f44");var i=new v.GetItemsData;i.ids=[m.default.diamondId],i.counts=[t.todayDiamondCount],i.clickCallBack=function(){s.TipMgr.showToast("\u8d2d\u4e70\u6210\u529f\uff0c\u83b7\u5f97\u94bb\u77f3"+t.todayDiamondCount),e.initializeSettings(e.childIndex)},0===r.HallMgr.shopData.todayBuyDiamondCount?(c.PlayerDataMgr.addDiamond(t.todayDiamondCount),r.HallMgr.shopData.todayBuyDiamondCount++,r.HallMgr.saveShopData(),_.EventMgrInstance.emitEvent(g.EVENT_TYPE.MainRedPointChange,f.RedPointType.freeDiamond),l.default.open(d.BundleNames.Home,u.UIView_Home.UI_GetItems,i)):p.ADMgr.showRewardedVideoAd("\u5546\u57ce\u89c6\u9891\u8d2d\u4e70\u94bb\u77f3",function(){c.PlayerDataMgr.addDiamond(t.todayDiamondCount),r.HallMgr.shopData.todayBuyDiamondCount++,r.HallMgr.saveShopData(),l.default.open(d.BundleNames.Home,u.UIView_Home.UI_GetItems,i)})}else{var o=r.HallMgr.shopData.todayShopArray[this.childIndex-1];if(o.canBuyCount<=0)s.TipMgr.showToast("\u5df2\u552e\u7f44");else{var a=new v.ShopItemInfoData;a.titleName=this.auto_ui.txt_nameLabel.string,a.count=this.todayShopData.count,a.richType=o.richType,a.price=o.price,a.infoStr=this.todayShopData.describe,a.iconSpriteFrame=this.auto_ui.sp_iconSprite.spriteFrame,a.qualitySpriteFrame=this.auto_ui.sp_qualitySprite.spriteFrame,a.clickCallBack=function(){if(o.richType===v.RichType.Gold){if(!c.PlayerDataMgr.subtractGold(o.price))return}else if(!c.PlayerDataMgr.subtractDiamond(o.price))return;c.PlayerDataMgr.addEquipFragments(e.todayShopData.shuiguoId,e.todayShopData.count),r.HallMgr.shopData.todayShopArray[e.childIndex-1].canBuyCount--,r.HallMgr.saveShopData();var t=new v.GetItemsData;t.ids=[e.todayShopData.shuiguoId],t.counts=[e.todayShopData.count],t.clickCallBack=function(){s.TipMgr.showToast("\u8d2d\u4e70\u6210\u529f\uff0c\u83b7\u5f97"+e.todayShopData.showName+"\u788e\u7247"+e.todayShopData.count),e.initializeSettings(e.childIndex)},l.default.open(d.BundleNames.Home,u.UIView_Home.UI_GetItems,t)},l.default.open(d.BundleNames.Home,u.UIView_Home.UI_ShopItemInfo,a)}}},__decorate([I(o.default)],t.prototype,"auto_ui",void 0),__decorate([b],t)}(a.default));i.default=E,cc._RF.pop()},{"./ADManager":"ADManager","./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Const_Hall":"Const_Hall","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./HallGlobalVariable":"HallGlobalVariable","./HallManager":"HallManager","./Item_Shop_TodayItem_UIBindings":"Item_Shop_TodayItem_UIBindings","./PlayerDataManager":"PlayerDataManager","./RedPointControl":"RedPointControl","./ResKeeper":"ResKeeper","./TipsManager":"TipsManager","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager"}],LabelDefault:[function(e,t,i){"use strict";cc._RF.push(t,"a8a04z2YThAJKOidqDae4ow","LabelDefault"),Object.defineProperty(i,"__esModule",{value:!0}),e("./EditorAsset");var o=cc._decorator,a=o.ccclass,n=o.menu,r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){this.initLabel()},t.prototype.resetInEditor=function(){this.initLabel()},t.prototype.initLabel=function(){return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2]})})},__decorate([a,n("\u5feb\u6377\u7ec4\u4ef6/Label Default")],t)}(cc.Component);i.default=r,cc._RF.pop()},{"./EditorAsset":"EditorAsset"}],LayoutExtent:[function(e,t,i){"use strict";cc._RF.push(t,"bdf3104gLBGpqvD4vQHpAmZ","LayoutExtent"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./ResUtil"),a=cc._decorator,n=a.ccclass,r=a.property,s=a.menu,c=a.requireComponent,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemEx=null,t.itemPrefabEx=null,t.scale=1,t._templateItem=null,t._initialized=!1,t._itemsMap=new Map,t._currentId=0,t._activeExecutions=new Map,t._renderFunction=null,t._renderContext=null,t}return __extends(t,e),t.prototype.start=function(){this._initialize()},t.prototype._initialize=function(){this._initialized||(this.itemEx?(this._templateItem=o.ResourceUtil.instantiate(this.itemEx),this.scale=this.itemEx.scale,this.itemEx.active=!1):this.itemPrefabEx&&(this._templateItem=o.ResourceUtil.instantiate(this.itemPrefabEx)),this._initialized=!0)},t.prototype.setItemRenderer=function(e,t){this._renderFunction=e,this._renderContext=t},t.prototype.setNumItems=function(e,t,i,a,n){var r=this;void 0===t&&(t=0),void 0===n&&(n=!0),o.ResourceUtil.removeAllChildrenAndRelease(this.node,n),this._itemsMap.clear(),this._initialize();var s=[],c=e.length;if(t<=0){for(var l=0;l<c;l++){var u=this._generateItem(l,e[l]);s.push(u)}this._initialized=!0,i&&i.call(a)}else this.stopLastExecutePerFrame(),this._executePerFrame(this._getItemGenerator(e,c),t,function(){r._initialized=!0,i&&i.call(a)},this,s);return s},t.prototype.getItems=function(){return this._itemsMap},t.prototype._getItemGenerator=function(e,t){var i;return __generator(this,function(o){switch(o.label){case 0:t=t||e.length,i=0,o.label=1;case 1:return i<t?[4,this._generateItem(i,e[i])]:[3,4];case 2:o.sent(),o.label=3;case 3:return i++,[3,1];case 4:return[2]}})},t.prototype._generateItem=function(e,t){var i=this._createItem(e);return this._renderFunction&&this._renderFunction.call(this._renderContext,i,t,e),i},t.prototype._createItem=function(e){var t=o.ResourceUtil.instantiate(this._templateItem);return t.name=e.toString(),t.active=!0,t.parent=this.node,t.scale=this.scale,this._itemsMap.set(e,t),t},t.prototype._executePerFrame=function(e,t,i,o,a){var n=this,r=this._currentId++;this._activeExecutions.set(r,!0);var s=function(){if(n._activeExecutions.get(r)){for(var c=Date.now(),l=e.next();!l.done;){if(a&&l.value&&a.push(l.value),Date.now()-c>t)return void n.scheduleOnce(s);l=e.next()}i&&i.call(o,a),n._activeExecutions.delete(r)}};s()},t.prototype.stopLastExecutePerFrame=function(){var e=this._currentId-1;this.stopExecutePerFrame(e)},t.prototype.stopExecutePerFrame=function(e){this._activeExecutions.has(e)&&this._activeExecutions.set(e,!1)},__decorate([r(cc.Node)],t.prototype,"itemEx",void 0),__decorate([r(cc.Prefab)],t.prototype,"itemPrefabEx",void 0),__decorate([r({type:cc.Float})],t.prototype,"scale",void 0),__decorate([n,s("UI\u7ec4\u4ef6/Layout Extent"),c(cc.Layout)],t)}(cc.Component);i.default=l,cc._RF.pop()},{"./ResUtil":"ResUtil"}],ListItem:[function(e,t,i){"use strict";cc._RF.push(t,"f05bcBeutFOuJpv0Ags2USv","ListItem"),Object.defineProperty(i,"__esModule",{value:!0});var o,a=cc._decorator,n=a.ccclass,r=a.property,s=a.disallowMultiple,c=a.menu,l=a.executionOrder;(function(e){e[e.NONE=0]="NONE",e[e.TOGGLE=1]="TOGGLE",e[e.SWITCH=2]="SWITCH"})(o||(o={}));var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.title=null,t.selectedMode=o.NONE,t.selectedFlag=null,t.selectedSpriteFrame=null,t.adaptiveSize=!1,t._unselectedSpriteFrame=null,t._isSelected=!1,t._isEventRegistered=!1,t._buttonComponent=null,t.list=null,t.listId=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"selected",{get:function(){return this._isSelected},set:function(e){if(this._isSelected=e,this.selectedFlag)switch(this.selectedMode){case o.TOGGLE:this.selectedFlag.active=e;break;case o.SWITCH:var t=this.selectedFlag.getComponent(cc.Sprite);t&&(t.spriteFrame=e?this.selectedSpriteFrame:this._unselectedSpriteFrame)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"btnCom",{get:function(){return this._buttonComponent||(this._buttonComponent=this.node.getComponent(cc.Button)),this._buttonComponent},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){if(this.selectedMode===o.SWITCH){var e=this.selectedFlag.getComponent(cc.Sprite);this._unselectedSpriteFrame=e.spriteFrame}},t.prototype.onDestroy=function(){this.node.off(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this)},t.prototype.registerEvent=function(){this._isEventRegistered||(this.btnCom&&this.list.selectedMode>0&&this.btnCom.clickEvents.unshift(this.createEvent(this,"onClickThis")),this.adaptiveSize&&this.node.on(cc.Node.EventType.SIZE_CHANGED,this._onSizeChange,this),this._isEventRegistered=!0)},t.prototype._onSizeChange=function(){this.list._onItemAdaptive(this.node)},t.prototype.createEvent=function(e,t,i){if(void 0===i&&(i=null),e.isValid){e.comName=e.comName||e.name.match(/\<(.*?)\>/g).pop().replace(/\<|>/g,"");var o=new cc.Component.EventHandler;return o.target=i||e.node,o.component=e.comName,o.handler=t,o}},t.prototype.showAnimation=function(e,t,i){var o,a=this,n=this.node;switch(e){case 0:o=cc.tween(n).to(.2,{scale:.7}).by(.3,{y:2*n.height});break;case 1:o=cc.tween(n).to(.2,{scale:.7}).by(.3,{x:2*n.width});break;case 2:o=cc.tween(n).to(.2,{scale:.7}).by(.3,{y:-2*n.height});break;case 3:o=cc.tween(n).to(.2,{scale:.7}).by(.3,{x:-2*n.width});break;default:o=cc.tween(n).to(.3,{scale:.1})}(t||i)&&o.call(function(){if(i){a.list._delSingleItem(n);for(var e=a.list.displayData.length-1;e>=0;e--)if(a.list.displayData[e].id===a.listId){a.list.displayData.splice(e,1);break}}t&&t()}),o.start()},t.prototype.onClickThis=function(){this.list.selectedId=this.listId},__decorate([r(cc.Sprite)],t.prototype,"icon",void 0),__decorate([r(cc.Node)],t.prototype,"title",void 0),__decorate([r({type:cc.Enum(o)})],t.prototype,"selectedMode",void 0),__decorate([r({type:cc.Node,visible:function(){return this.selectedMode>o.NONE}})],t.prototype,"selectedFlag",void 0),__decorate([r({type:cc.SpriteFrame,visible:function(){return this.selectedMode===o.SWITCH}})],t.prototype,"selectedSpriteFrame",void 0),__decorate([r],t.prototype,"adaptiveSize",void 0),__decorate([n,s(),c("UI\u7ec4\u4ef6/List Item"),l(-5001)],t)}(cc.Component);i.default=u,cc._RF.pop()},{}],List:[function(e,t,i){"use strict";cc._RF.push(t,"f671bSyfCNG7ayLaZ4l7OZy","List"),Object.defineProperty(i,"__esModule",{value:!0});var o,a,n,r=e("./ListItem"),s=e("./ResUtil"),c=cc._decorator,l=c.ccclass,u=c.property,d=c.disallowMultiple,h=c.menu,p=c.executionOrder,_=c.requireComponent;(function(e){e[e.NODE=1]="NODE",e[e.PREFAB=2]="PREFAB"})(o||(o={})),function(e){e[e.NORMAL=1]="NORMAL",e[e.ADHERING=2]="ADHERING",e[e.PAGE=3]="PAGE"}(a||(a={})),function(e){e[e.NONE=0]="NONE",e[e.SINGLE=1]="SINGLE",e[e.MULT=2]="MULT"}(n||(n={}));var g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.templateType=o.NODE,t.tmpNode=null,t.tmpPrefab=null,t._slideMode=a.NORMAL,t.pageDistance=.3,t.pageChangeEvent=new cc.Component.EventHandler,t._virtual=!0,t.cyclic=!1,t.lackCenter=!1,t.lackSlide=!1,t._updateRate=0,t.frameByFrameRenderNum=0,t.renderEvent=new cc.Component.EventHandler,t.selectedMode=n.NONE,t.repeatEventSingle=!1,t.selectedEvent=new cc.Component.EventHandler,t._numItems=0,t._selectedId=-1,t._forceUpdate=!1,t._updateDone=!0,t._inited=!1,t._needUpdateWidget=!1,t._aniDelRuning=!1,t._doneAfterUpdate=!1,t.adhering=!1,t._adheringBarrier=!1,t.curPageNum=0,t._scrollView=null,t.content=null,t._layout=null,t._align=cc.Layout.Type.HORIZONTAL,t._resizeMode=cc.Layout.ResizeMode.NONE,t._startAxis=cc.Layout.AxisDirection.HORIZONTAL,t._topGap=0,t._rightGap=0,t._bottomGap=0,t._leftGap=0,t._columnGap=0,t._lineGap=0,t._colLineNum=0,t._verticalDir=cc.Layout.VerticalDirection.TOP_TO_BOTTOM,t._horizontalDir=cc.Layout.HorizontalDirection.LEFT_TO_RIGHT,t._itemTmp=null,t._itemSize=cc.size(0,0),t._pool=new cc.NodePool,t._lastDisplayData=[],t.displayData=[],t._updateCounter=0,t._scrollItem=null,t._beganPos=null,t._scrollPos=null,t._scrollToListId=null,t._scrollToEndTime=null,t._scrollToSo=null,t._customSize=null,t._actualNumItems=0,t._cyclicNum=0,t._cyclicPos1=0,t._cyclicPos2=0,t._cyclicAllItemSize=0,t._cycilcAllItemSizeNoEdge=0,t._allItemSize=0,t._allItemSizeNoEdge=0,t._alignCalcType=0,t._lastSelectedId=null,t.multSelected=[],t.nearestListId=null,t.elasticTop=0,t.elasticRight=0,t.elasticBottom=0,t.elasticLeft=0,t.viewTop=0,t.viewRight=0,t.viewBottom=0,t.viewLeft=0,t.displayItemNum=0,t.firstListId=0,t._aniDelItem=null,t._aniDelBeforePos=null,t._aniDelBeforeScale=1,t._aniDelCB=null,t._sizeType=!1,t._lack=!1,t.frameCount=0,t.curScrollIsTouch=!1,t.scrollToListId=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"slideMode",{get:function(){return this._slideMode},set:function(e){this._slideMode=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"virtual",{get:function(){return this._virtual},set:function(e){null!=e&&(this._virtual=e),0!==this._numItems&&this._onScrolling()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"updateRate",{get:function(){return this._updateRate},set:function(e){e>=0&&e<=6&&(this._updateRate=e)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedId",{get:function(){return this._selectedId},set:function(e){var t;switch(this.selectedMode){case n.SINGLE:if(!this.repeatEventSingle&&e===this._selectedId)return;t=this.getItemByListId(e);var i=void 0;if(this._selectedId>=0?this._lastSelectedId=this._selectedId:this._lastSelectedId=null,this._selectedId=e,t&&(i=t.getComponent(r.default))&&(i.selected=!0),this._lastSelectedId>=0&&this._lastSelectedId!==this._selectedId){var o=this.getItemByListId(this._lastSelectedId);o&&(o.getComponent(r.default).selected=!1)}this.selectedEvent&&cc.Component.EventHandler.emitEvents([this.selectedEvent],t,e%this._actualNumItems,null==this._lastSelectedId?null:this._lastSelectedId%this._actualNumItems);break;case n.MULT:if(!(t=this.getItemByListId(e)))return;i=t.getComponent(r.default),this._selectedId>=0&&(this._lastSelectedId=this._selectedId),this._selectedId=e;var a=!i.selected;i.selected=a;var s=this.multSelected.indexOf(e);a&&s<0?this.multSelected.push(e):!a&&s>=0&&this.multSelected.splice(s,1),this.selectedEvent&&cc.Component.EventHandler.emitEvents([this.selectedEvent],t,e%this._actualNumItems,null==this._lastSelectedId?null:this._lastSelectedId%this._actualNumItems,a)}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"numItems",{get:function(){return this._actualNumItems},set:function(e){if(this.checkInited(!1))if(null==e||e<0)cc.error("numItems set the wrong::",e);else if(this._actualNumItems=this._numItems=e,this._forceUpdate=!0,this._virtual)this._resizeContent(),this.cyclic&&(this._numItems=this._cyclicNum*this._numItems),this._onScrolling(),this.frameByFrameRenderNum||this.slideMode!==a.PAGE||(this.curPageNum=this.nearestListId);else{this.cyclic&&(this._resizeContent(),this._numItems=this._cyclicNum*this._numItems);var t=this.content.getComponent(cc.Layout);if(t&&(t.enabled=!0),this._delRedundantItem(),this.firstListId=0,this.frameByFrameRenderNum>0){for(var i=this.frameByFrameRenderNum>this._numItems?this._numItems:this.frameByFrameRenderNum,o=0;o<i;o++)this._createOrUpdateItem2(o);this.frameByFrameRenderNum<this._numItems&&(this._updateCounter=this.frameByFrameRenderNum,this._updateDone=!1)}else{for(o=0;o<this._numItems;o++)this._createOrUpdateItem2(o);this.displayItemNum=this._numItems}}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"scrollView",{get:function(){return this._scrollView},enumerable:!1,configurable:!0}),t.prototype.onLoad=function(){this._init()},t.prototype.onDestroy=function(){cc.isValid(this._itemTmp)&&this._itemTmp.destroy(),cc.isValid(this.tmpNode)&&this.tmpNode.destroy(),this._pool&&this._pool.clear()},t.prototype.onEnable=function(){this._registerEvent(),this._init(),this._aniDelRuning&&(this._aniDelRuning=!1,this._aniDelItem&&(this._aniDelBeforePos&&(this._aniDelItem.position=this._aniDelBeforePos,delete this._aniDelBeforePos),this._aniDelBeforeScale&&(this._aniDelItem.scale=this._aniDelBeforeScale,delete this._aniDelBeforeScale),delete this._aniDelItem),this._aniDelCB&&(this._aniDelCB(),delete this._aniDelCB))},t.prototype.onDisable=function(){this._unregisterEvent()},t.prototype._registerEvent=function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchStart,this,!0),this.node.on("touch-up",this._onTouchUp,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0),this.node.on("scroll-began",this._onScrollBegan,this,!0),this.node.on("scroll-ended",this._onScrollEnded,this,!0),this.node.on("scrolling",this._onScrolling,this,!0),this.node.on(cc.Node.EventType.SIZE_CHANGED,this._onSizeChanged,this)},t.prototype._unregisterEvent=function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchStart,this,!0),this.node.off("touch-up",this._onTouchUp,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0),this.node.off("scroll-began",this._onScrollBegan,this,!0),this.node.off("scroll-ended",this._onScrollEnded,this,!0),this.node.off("scrolling",this._onScrolling,this,!0),this.node.off(cc.Node.EventType.SIZE_CHANGED,this._onSizeChanged,this)},t.prototype._init=function(){if(!this._inited)if(this._scrollView=this.node.getComponent(cc.ScrollView),this.content=this._scrollView.content,this.content){switch(this._layout=this.content.getComponent(cc.Layout),this._align=this._layout.type,this._resizeMode=this._layout.resizeMode,this._startAxis=this._layout.startAxis,this._topGap=this._layout.paddingTop,this._rightGap=this._layout.paddingRight,this._bottomGap=this._layout.paddingBottom,this._leftGap=this._layout.paddingLeft,this._columnGap=this._layout.spacingX,this._lineGap=this._layout.spacingY,this._colLineNum=0,this._verticalDir=this._layout.verticalDirection,this._horizontalDir=this._layout.horizontalDirection,this.setTemplateItem(s.ResourceUtil.instantiate(this.templateType===o.PREFAB?this.tmpPrefab:this.tmpNode)),this._slideMode!==a.ADHERING&&this._slideMode!==a.PAGE||(this._scrollView.inertia=!1,this._scrollView._onMouseWheel=function(){}),this.virtual||(this.lackCenter=!1),this._lastDisplayData=[],this.displayData=[],this._pool=new cc.NodePool,this._forceUpdate=!1,this._updateCounter=0,this._updateDone=!0,this.curPageNum=0,this.cyclic&&(this._scrollView._processAutoScrolling=this._processAutoScrolling.bind(this),this._scrollView._startBounceBackIfNeeded=function(){return!1}),this._align){case cc.Layout.Type.HORIZONTAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:this._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:this._alignCalcType=2}break;case cc.Layout.Type.VERTICAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:this._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:this._alignCalcType=4}break;case cc.Layout.Type.GRID:switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:this._alignCalcType=3;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:this._alignCalcType=4}break;case cc.Layout.AxisDirection.VERTICAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:this._alignCalcType=1;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:this._alignCalcType=2}}}s.ResourceUtil.removeAllChildrenAndRelease(this.content),this._inited=!0}else cc.error(this.node.name+"'s cc.ScrollView unset content!")},t.prototype._processAutoScrolling=function(e){this._scrollView._autoScrollAccumulatedTime+=e;var t=Math.min(1,this._scrollView._autoScrollAccumulatedTime/this._scrollView._autoScrollTotalTime);if(this._scrollView._autoScrollAttenuate){var i=t-1;t=i*i*i*i*i+1}var o=this._scrollView._autoScrollStartPosition.add(this._scrollView._autoScrollTargetDelta.mul(t)),a=this._scrollView.getScrollEndedEventTiming(),n=Math.abs(t-1)<=a;n&&!this._scrollView._isScrollEndedWithThresholdEventFired&&(this._scrollView._dispatchEvent("scroll-ended-with-threshold"),this._scrollView._isScrollEndedWithThresholdEventFired=!0),n&&(this._scrollView._autoScrolling=!1);var r=o.sub(this._scrollView.getContentPosition());this._scrollView._moveContent(this._scrollView._clampDelta(r),n),this._scrollView._dispatchEvent("scrolling"),this._scrollView._autoScrolling||(this._scrollView._isBouncing=!1,this._scrollView._scrolling=!1,this._scrollView._dispatchEvent("scroll-ended"))},t.prototype.setTemplateItem=function(e){if(e){this._itemTmp=e,this._resizeMode===cc.Layout.ResizeMode.CHILDREN?this._itemSize=this._layout.cellSize:this._itemSize=cc.size(e.width,e.height),e.getComponent(r.default)||(this.selectedMode=n.NONE);var t=e.getComponent(cc.Widget);switch(t&&t.enabled&&(this._needUpdateWidget=!0),this.selectedMode===n.MULT&&(this.multSelected=[]),this._align){case cc.Layout.Type.HORIZONTAL:this._colLineNum=1,this._sizeType=!1;break;case cc.Layout.Type.VERTICAL:this._colLineNum=1,this._sizeType=!0;break;case cc.Layout.Type.GRID:if(this._startAxis===cc.Layout.AxisDirection.HORIZONTAL){var i=this.content.width-this._leftGap-this._rightGap;this._colLineNum=Math.floor((i+this._columnGap)/(this._itemSize.width+this._columnGap)),this._sizeType=!0}else{var o=this.content.height-this._topGap-this._bottomGap;this._colLineNum=Math.floor((o+this._lineGap)/(this._itemSize.height+this._lineGap)),this._sizeType=!1}}}},t.prototype.checkInited=function(e){return void 0===e&&(e=!0),!this._inited&&e&&cc.error("List initialization not completed!"),this._inited},t.prototype._resizeContent=function(){var e;switch(this._align){case cc.Layout.Type.HORIZONTAL:if(this._customSize){var t=this._getFixedSize(null);e=this._leftGap+t.val+this._itemSize.width*(this._numItems-t.count)+this._columnGap*(this._numItems-1)+this._rightGap}else e=this._leftGap+this._itemSize.width*this._numItems+this._columnGap*(this._numItems-1)+this._rightGap;break;case cc.Layout.Type.VERTICAL:this._customSize?(t=this._getFixedSize(null),e=this._topGap+t.val+this._itemSize.height*(this._numItems-t.count)+this._lineGap*(this._numItems-1)+this._bottomGap):e=this._topGap+this._itemSize.height*this._numItems+this._lineGap*(this._numItems-1)+this._bottomGap;break;case cc.Layout.Type.GRID:if(this._startAxis===cc.Layout.AxisDirection.HORIZONTAL){var i=Math.ceil(this._numItems/this._colLineNum);e=this._topGap+this._itemSize.height*i+this._lineGap*(i-1)+this._bottomGap}else{var o=Math.ceil(this._numItems/this._colLineNum);e=this._leftGap+this._itemSize.width*o+this._columnGap*(o-1)+this._rightGap}}var a=this.content.getComponent(cc.Layout);if(a&&(a.enabled=!1),this._allItemSize=e,this._allItemSizeNoEdge=this._allItemSize-(this._sizeType?this._topGap+this._bottomGap:this._leftGap+this._rightGap),this.cyclic){var n=this._sizeType?this.node.height:this.node.width;this._cyclicPos1=0;var r=n-this._cyclicPos1;this._cyclicNum=Math.ceil(r/this._allItemSizeNoEdge)+1;var s=this._sizeType?this._lineGap:this._columnGap;this._cyclicPos2=this._cyclicPos1+this._allItemSizeNoEdge+s,this._cyclicAllItemSize=this._allItemSize+this._allItemSizeNoEdge*(this._cyclicNum-1)+s*(this._cyclicNum-1),this._cycilcAllItemSizeNoEdge=this._allItemSizeNoEdge*this._cyclicNum+s*(this._cyclicNum-1)}this._lack=!this.cyclic&&this._allItemSize<(this._sizeType?this.node.height:this.node.width);var c=this._lack&&this.lackCenter?.1:0,l=this._lack?(this._sizeType?this.node.height:this.node.width)-c:this.cyclic?this._cyclicAllItemSize:this._allItemSize;l<0&&(l=0),this._sizeType?this.content.height=l:this.content.width=l},t.prototype._onScrolling=function(e){if(void 0===e&&(e=null),null==this.frameCount&&(this.frameCount=this._updateRate),!this._forceUpdate&&e&&"scroll-ended"!==e.type&&this.frameCount>0)this.frameCount--;else if(this.frameCount=this._updateRate,!this._aniDelRuning){if(this.cyclic){var t=this.content.getPosition();t=this._sizeType?t.y:t.x;var i=this._allItemSizeNoEdge+(this._sizeType?this._lineGap:this._columnGap),o=this._sizeType?cc.v2(0,i):cc.v2(i,0);switch(this._alignCalcType){case 1:t>-this._cyclicPos1?(this.content.x=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(o))):t<-this._cyclicPos2&&(this.content.x=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o)));break;case 2:t<this._cyclicPos1?(this.content.x=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o))):t>this._cyclicPos2&&(this.content.x=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(o)));break;case 3:t<this._cyclicPos1?(this.content.y=this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o))):t>this._cyclicPos2&&(this.content.y=this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(o)));break;case 4:t>-this._cyclicPos1?(this.content.y=-this._cyclicPos2,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.sub(o))):t<-this._cyclicPos2&&(this.content.y=-this._cyclicPos1,this._scrollView.isAutoScrolling()&&(this._scrollView._autoScrollStartPosition=this._scrollView._autoScrollStartPosition.add(o)))}}if(this._calcViewPos(),this._sizeType?(this.viewTop=this.viewTop,this.viewBottom=this.viewBottom):(this.viewRight=this.viewRight,this.viewLeft=this.viewLeft),this._virtual){this.displayData=[];var a=void 0,n=0,r=this._numItems-1;if(this._customSize)for(var s=!1,c=n;c<=r&&!s;c++)switch(a=this._calcItemPos(c),this._align){case cc.Layout.Type.HORIZONTAL:a.right>=this.viewLeft&&a.left<=this.viewRight?this.displayData.push(a):0!==c&&this.displayData.length>0&&(s=!0);break;case cc.Layout.Type.VERTICAL:a.bottom<=this.viewTop&&a.top>=this.viewBottom?this.displayData.push(a):0!==c&&this.displayData.length>0&&(s=!0);break;case cc.Layout.Type.GRID:this._startAxis===cc.Layout.AxisDirection.HORIZONTAL?a.bottom<=this.viewTop&&a.top>=this.viewBottom?this.displayData.push(a):0!==c&&this.displayData.length>0&&(s=!0):a.right>=this.viewLeft&&a.left<=this.viewRight?this.displayData.push(a):0!==c&&this.displayData.length>0&&(s=!0)}else{var l=this._itemSize.width+this._columnGap,u=this._itemSize.height+this._lineGap;switch(this._alignCalcType){case 1:n=Math.floor((this.viewLeft-this._leftGap)/l)*this._colLineNum,r=Math.ceil((this.viewRight-this._leftGap)/l)*this._colLineNum;break;case 2:n=Math.floor((-this.viewRight-this._rightGap)/l)*this._colLineNum,r=Math.ceil((-this.viewLeft-this._rightGap)/l)*this._colLineNum;break;case 3:n=Math.floor((-this.viewTop-this._topGap)/u)*this._colLineNum,r=Math.ceil((-this.viewBottom-this._topGap)/u)*this._colLineNum;break;case 4:n=Math.floor((this.viewBottom-this._bottomGap)/u)*this._colLineNum,r=Math.ceil((this.viewTop-this._bottomGap)/u)*this._colLineNum}for(n=Math.max(0,n),r=Math.min(this._numItems-1,r),c=n;c<=r;c++)this.displayData.push(this._calcItemPos(c))}if(this._delRedundantItem(),this.displayData.length<=0||!this._numItems)return void(this._lastDisplayData=[]);this.firstListId=this.displayData[0].id,this.displayItemNum=this.displayData.length;var d=this._lastDisplayData.length,h=this.displayItemNum!==d;if(h&&(this.frameByFrameRenderNum>0&&this._lastDisplayData.sort(function(e,t){return e-t}),h=this.firstListId!==this._lastDisplayData[0]||this.displayData[this.displayItemNum-1].id!==this._lastDisplayData[d-1]),this._forceUpdate||h)if(this.frameByFrameRenderNum>0)this._numItems>0?(this._updateDone?this._updateCounter=0:this._doneAfterUpdate=!0,this._updateDone=!1):(this._updateCounter=0,this._updateDone=!0);else{for(this._lastDisplayData=[],c=0;c<this.displayItemNum;c++)this._createOrUpdateItem(this.displayData[c]);this._forceUpdate=!1}this._calcNearestItem()}}},t.prototype._calcViewPos=function(){var e=this.content.getPosition();switch(this._alignCalcType){case 1:this.elasticLeft=e.x>0?e.x:0,this.viewLeft=(e.x<0?-e.x:0)-this.elasticLeft,this.viewRight=this.viewLeft+this.node.width,this.elasticRight=this.viewRight>this.content.width?Math.abs(this.viewRight-this.content.width):0,this.viewRight+=this.elasticRight;break;case 2:this.elasticRight=e.x<0?-e.x:0,this.viewRight=(e.x>0?-e.x:0)+this.elasticRight,this.viewLeft=this.viewRight-this.node.width,this.elasticLeft=this.viewLeft<-this.content.width?Math.abs(this.viewLeft+this.content.width):0,this.viewLeft-=this.elasticLeft;break;case 3:this.elasticTop=e.y<0?Math.abs(e.y):0,this.viewTop=(e.y>0?-e.y:0)+this.elasticTop,this.viewBottom=this.viewTop-this.node.height,this.elasticBottom=this.viewBottom<-this.content.height?Math.abs(this.viewBottom+this.content.height):0,this.viewBottom+=this.elasticBottom;break;case 4:this.elasticBottom=e.y>0?Math.abs(e.y):0,this.viewBottom=(e.y<0?-e.y:0)-this.elasticBottom,this.viewTop=this.viewBottom+this.node.height,this.elasticTop=this.viewTop>this.content.height?Math.abs(this.viewTop-this.content.height):0,this.viewTop-=this.elasticTop}},t.prototype._calcItemPos=function(e){var t,i,o,a,n,r;switch(this._align){case cc.Layout.Type.HORIZONTAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:if(this._customSize){var s=this._getFixedSize(e);i=(t=this._leftGap+(this._itemSize.width+this._columnGap)*(e-s.count)+(s.val+this._columnGap*s.count))+((c=this._customSize[e])>0?c:this._itemSize.width)}else i=(t=this._leftGap+(this._itemSize.width+this._columnGap)*e)+this._itemSize.width;return this.lackCenter&&(t-=this._leftGap,t+=this.content.width/2-this._allItemSizeNoEdge/2),{id:e,left:t,right:i,x:n=t+this._itemTmp.anchorX*this._itemSize.width,y:r=this._itemTmp.y};case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:var c;if(this._customSize)s=this._getFixedSize(e),t=(i=-this._rightGap-(this._itemSize.width+this._columnGap)*(e-s.count)-(s.val+this._columnGap*s.count))-((c=this._customSize[e])>0?c:this._itemSize.width);else t=(i=-this._rightGap-(this._itemSize.width+this._columnGap)*e)-this._itemSize.width;return this.lackCenter&&(i+=this._rightGap,i-=this.content.width/2-this._allItemSizeNoEdge/2),{id:e,left:t,right:i,x:n=t+this._itemTmp.anchorX*this._itemSize.width,y:r=this._itemTmp.y}}break;case cc.Layout.Type.VERTICAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:return this._customSize?(s=this._getFixedSize(e),a=(o=-this._topGap-(this._itemSize.height+this._lineGap)*(e-s.count)-(s.val+this._lineGap*s.count))-((l=this._customSize[e])>0?l:this._itemSize.height)):a=(o=-this._topGap-(this._itemSize.height+this._lineGap)*e)-this._itemSize.height,this.lackCenter&&(o+=this._topGap,o-=this.content.height/2-this._allItemSizeNoEdge/2),{id:e,top:o,bottom:a,x:n=this._itemTmp.x,y:r=a+this._itemTmp.anchorY*this._itemSize.height};case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:var l;if(this._customSize)s=this._getFixedSize(e),o=(a=this._bottomGap+(this._itemSize.height+this._lineGap)*(e-s.count)+(s.val+this._lineGap*s.count))+((l=this._customSize[e])>0?l:this._itemSize.height);else o=(a=this._bottomGap+(this._itemSize.height+this._lineGap)*e)+this._itemSize.height;return this.lackCenter&&(a-=this._bottomGap,a+=this.content.height/2-this._allItemSizeNoEdge/2),{id:e,top:o,bottom:a,x:n=this._itemTmp.x,y:r=a+this._itemTmp.anchorY*this._itemSize.height}}break;case cc.Layout.Type.GRID:var u=Math.floor(e/this._colLineNum);switch(this._startAxis){case cc.Layout.AxisDirection.HORIZONTAL:switch(this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:r=(a=(o=-this._topGap-(this._itemSize.height+this._lineGap)*u)-this._itemSize.height)+this._itemTmp.anchorY*this._itemSize.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:o=(a=this._bottomGap+(this._itemSize.height+this._lineGap)*u)+this._itemSize.height,r=a+this._itemTmp.anchorY*this._itemSize.height}switch(t=this._leftGap+e%this._colLineNum*(this._itemSize.width+this._columnGap),this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:n=t+this._itemTmp.anchorX*this._itemSize.width,n-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:n=t+(1-this._itemTmp.anchorX)*this._itemSize.width,n-=(1-this.content.anchorX)*this.content.width,n*=-1}return{id:e,top:o,bottom:a,x:n,y:r};case cc.Layout.AxisDirection.VERTICAL:switch(this._horizontalDir){case cc.Layout.HorizontalDirection.LEFT_TO_RIGHT:i=(t=this._leftGap+(this._itemSize.width+this._columnGap)*u)+this._itemSize.width,n=t+this._itemTmp.anchorX*this._itemSize.width,n-=this.content.anchorX*this.content.width;break;case cc.Layout.HorizontalDirection.RIGHT_TO_LEFT:n=(t=(i=-this._rightGap-(this._itemSize.width+this._columnGap)*u)-this._itemSize.width)+this._itemTmp.anchorX*this._itemSize.width,n+=(1-this.content.anchorX)*this.content.width}switch(r=-this._topGap-e%this._colLineNum*(this._itemSize.height+this._lineGap),this._verticalDir){case cc.Layout.VerticalDirection.TOP_TO_BOTTOM:r-=(1-this._itemTmp.anchorY)*this._itemSize.height,r+=(1-this.content.anchorY)*this.content.height;break;case cc.Layout.VerticalDirection.BOTTOM_TO_TOP:r-=this._itemTmp.anchorY*this._itemSize.height,r+=this.content.anchorY*this.content.height,r*=-1}return{id:e,left:t,right:i,x:n,y:r}}}},t.prototype._calcExistItemPos=function(e){var t=this.getItemByListId(e);if(!t)return null;var i={id:e,x:t.x,y:t.y,top:0,bottom:0,left:0,right:0};return this._sizeType?(i.top=t.y+t.height*(1-t.anchorY),i.bottom=t.y-t.height*t.anchorY):(i.left=t.x-t.width*t.anchorX,i.right=t.x+t.width*(1-t.anchorX)),i},t.prototype.getItemPos=function(e){return this._virtual||this.frameByFrameRenderNum?this._calcItemPos(e):this._calcExistItemPos(e)},t.prototype._getFixedSize=function(e){if(!this._customSize)return null;null==e&&(e=this._numItems);var t=0,i=0;for(var o in this._customSize)parseInt(o)<e&&(t+=this._customSize[o],i++);return{val:t,count:i}},t.prototype._onScrollBegan=function(){this._beganPos=this._sizeType?this.viewTop:this.viewLeft},t.prototype._onScrollEnded=function(){if(this.curScrollIsTouch=!1,null!=this.scrollToListId){var e=this.getItemByListId(this.scrollToListId);this.scrollToListId=null,e&&cc.tween(e).to(.1,{scale:1.06}).to(.1,{scale:1}).start()}this._onScrolling(),this._slideMode!==a.ADHERING||this.adhering?this._slideMode===a.PAGE&&(null!=this._beganPos&&this.curScrollIsTouch?this._pageAdhere():this.adhere()):this.adhere()},t.prototype._onTouchStart=function(e,t){if(!this._scrollView.hasNestedViewGroup(e,t)&&e.eventPhase===cc.Event.AT_TARGET&&e.target===this.node){for(var i=e.target;null==i._listId&&i.parent;)i=i.parent;null!=i._listId?this._scrollItem=i:this._scrollItem=e.target}},t.prototype._onTouchUp=function(){this._scrollPos=null,this._slideMode===a.ADHERING?(this.adhering&&(this._adheringBarrier=!0),this.adhere()):this._slideMode===a.PAGE&&(null!=this._beganPos?this._pageAdhere():this.adhere()),this._scrollItem=null},t.prototype._onTouchCancelled=function(e,t){this._scrollView.hasNestedViewGroup(e,t)||e.simulate||(this._scrollPos=null,this._slideMode===a.ADHERING?(this.adhering&&(this._adheringBarrier=!0),this.adhere()):this._slideMode===a.PAGE&&(null!=this._beganPos?this._pageAdhere():this.adhere()),this._scrollItem=null)},t.prototype._onSizeChanged=function(){this.checkInited(!1)&&this._onScrolling()},t.prototype._onItemAdaptive=function(e){if(!this._sizeType&&e.width!==this._itemSize.width||this._sizeType&&e.height!==this._itemSize.height){this._customSize||(this._customSize={});var t=this._sizeType?e.height:e.width;this._customSize[e._listId]!==t&&(this._customSize[e._listId]=t,this._resizeContent(),this.updateAll(),null!=this._scrollToListId&&(this._scrollPos=null,this.unschedule(this._scrollToSo),this.scrollTo(this._scrollToListId,Math.max(0,this._scrollToEndTime-(new Date).getTime()/1e3))))}},t.prototype._pageAdhere=function(){if(this.cyclic||!(this.elasticTop>0||this.elasticRight>0||this.elasticBottom>0||this.elasticLeft>0)){var e=this._sizeType?this.viewTop:this.viewLeft,t=(this._sizeType?this.node.height:this.node.width)*this.pageDistance;if(Math.abs(this._beganPos-e)>t)switch(this._alignCalcType){case 1:case 4:this._beganPos>e?this.prePage(.5):this.nextPage(.5);break;case 2:case 3:this._beganPos<e?this.prePage(.5):this.nextPage(.5)}else this.elasticTop<=0&&this.elasticRight<=0&&this.elasticBottom<=0&&this.elasticLeft<=0&&this.adhere();this._beganPos=null}},t.prototype.adhere=function(){if(this.checkInited()&&!(this.elasticTop>0||this.elasticRight>0||this.elasticBottom>0||this.elasticLeft>0)){this.adhering=!0,this._calcNearestItem();var e=(this._sizeType?this._topGap:this._leftGap)/(this._sizeType?this.node.height:this.node.width);this.scrollTo(this.nearestListId,.7,e)}},t.prototype.update=function(){if(this.frameByFrameRenderNum>0&&!this._updateDone)if(this._virtual){for(var e=this._updateCounter+this.frameByFrameRenderNum>this.displayItemNum?this.displayItemNum:this._updateCounter+this.frameByFrameRenderNum,t=this._updateCounter;t<e;t++){var i=this.displayData[t];i&&this._createOrUpdateItem(i)}this._updateCounter>=this.displayItemNum-1?this._doneAfterUpdate?(this._updateCounter=0,this._updateDone=!1,this._doneAfterUpdate=!1):(this._updateDone=!0,this._delRedundantItem(),this._forceUpdate=!1,this._calcNearestItem(),this.slideMode===a.PAGE&&(this.curPageNum=this.nearestListId)):this._updateCounter+=this.frameByFrameRenderNum}else if(this._updateCounter<this._numItems){for(e=this._updateCounter+this.frameByFrameRenderNum>this._numItems?this._numItems:this._updateCounter+this.frameByFrameRenderNum,t=this._updateCounter;t<e;t++)this._createOrUpdateItem2(t);this._updateCounter+=this.frameByFrameRenderNum}else this._updateDone=!0,this._calcNearestItem(),this.slideMode===a.PAGE&&(this.curPageNum=this.nearestListId)},t.prototype._createOrUpdateItem=function(e){var t=this.getItemByListId(e.id);if(t)this._forceUpdate&&this.renderEvent&&(t.setPosition(cc.v2(e.x,e.y)),this._resetItemSize(t),cc.Component.EventHandler.emitEvents([this.renderEvent],t,e.id%this._actualNumItems));else{var i=this._pool.size()>0;if(t=i?this._pool.get():s.ResourceUtil.instantiate(this._itemTmp),i&&cc.isValid(t)||(t=s.ResourceUtil.instantiate(this._itemTmp)),t._listId!==e.id&&(t._listId=e.id,t.setContentSize(this._itemSize)),t.setPosition(cc.v2(e.x,e.y)),this._resetItemSize(t),this.content.addChild(t),i&&this._needUpdateWidget){var o=t.getComponent(cc.Widget);o&&o.updateAlignment()}t.setSiblingIndex(this.content.childrenCount-1);var a=t.getComponent(r.default);t.listItem=a,a&&(a.listId=e.id,a.list=this,a._registerEvent()),cc.Component.EventHandler.emitEvents([this.renderEvent],t,e.id%this._actualNumItems)}this._resetItemSize(t),this._updateListItem(t.listItem),this._lastDisplayData.indexOf(e.id)<0&&this._lastDisplayData.push(e.id)},t.prototype._createOrUpdateItem2=function(e){var t=this.content.children[e];if(t)this._forceUpdate&&this.renderEvent&&(t._listId=e,(i=t.getComponent(r.default))&&(i.listId=e),cc.Component.EventHandler.emitEvents([this.renderEvent],t,e%this._actualNumItems));else{(t=s.ResourceUtil.instantiate(this._itemTmp))._listId=e,this.content.addChild(t);var i=t.getComponent(r.default);t.listItem=i,i&&(i.listId=e,i.list=this,i.registerEvent()),cc.Component.EventHandler.emitEvents([this.renderEvent],t,e%this._actualNumItems)}this._updateListItem(t.listItem),this._lastDisplayData.indexOf(e)<0&&this._lastDisplayData.push(e)},t.prototype._updateListItem=function(e){if(e&&this.selectedMode>n.NONE){var t=e.node;switch(this.selectedMode){case n.SINGLE:e.selected=this.selectedId===t._listId;break;case n.MULT:e.selected=this.multSelected.indexOf(t._listId)>=0}}},t.prototype._resetItemSize=function(){},t.prototype._updateItemPos=function(e){var t="number"==typeof e?this.getItemByListId(e):e;if(t){var i=this.getItemPos(t._listId);t.setPosition(i.x,i.y)}},t.prototype.setMultSelected=function(e,t){var i=this;this.checkInited()&&(Array.isArray(e)||(e=[e]),null==t?this.multSelected=e:e.forEach(function(e){var o=i.multSelected.indexOf(e);t&&o<0?i.multSelected.push(e):!t&&o>=0&&i.multSelected.splice(o,1)}),this._forceUpdate=!0,this._onScrolling())},t.prototype.getMultSelected=function(){return this.multSelected},t.prototype.hasMultSelected=function(e){return this.multSelected&&this.multSelected.indexOf(e)>=0},t.prototype.updateItem=function(e){var t=this;this.checkInited()&&(Array.isArray(e)||(e=[e]),e.forEach(function(e){var i=t.getItemByListId(e);i&&cc.Component.EventHandler.emitEvents([t.renderEvent],i,e%t._actualNumItems)}))},t.prototype.updateAll=function(){this.checkInited()&&(this.numItems=this.numItems)},t.prototype.getItemByListId=function(e){if(this.content)return this.content.children.find(function(t){return t._listId===e})},t.prototype._getOutsideItem=function(){var e=this;return this.content.children.filter(function(t){return!e.displayData.some(function(e){return e.id===t._listId})})},t.prototype._delRedundantItem=function(){var e=this;if(this._virtual)this._getOutsideItem().forEach(function(t){if(!e._scrollItem||t._listId!==e._scrollItem._listId){t.isCached=!0,e._pool.put(t);var i=e._lastDisplayData.indexOf(t._listId);i>=0&&e._lastDisplayData.splice(i,1)}});else for(;this.content.childrenCount>this._numItems;)this._delSingleItem(this.content.children[this.content.childrenCount-1])},t.prototype._delSingleItem=function(e){s.ResourceUtil.removeFromParentAndRelease(e),e.destroy&&e.destroy()},t.prototype.aniDelItem=function(e,t,i){var o=this;if(!this.checkInited()||this.cyclic||!this._virtual)return cc.error("This function is not allowed to be called!");if(!t)return cc.error("CallFunc are not allowed to be NULL, You need to delete the corresponding index in the data array in the CallFunc!");if(this._aniDelRuning)return cc.warn("Please wait for the current deletion to finish!");var a=this.getItemByListId(e);if(a){var s=a.getComponent(r.default);this._aniDelRuning=!0,this._aniDelCB=t,this._aniDelItem=a,this._aniDelBeforePos=a.position,this._aniDelBeforeScale=a.scale;var c=this.displayData[this.displayData.length-1].id,l=s.selected;s.showAnimation(i,function(){var i;if(c<o._numItems-2&&(i=c+1),null!=i){var a=o._calcItemPos(i);o.displayData.push(a),o._virtual?o._createOrUpdateItem(a):o._createOrUpdateItem2(i)}else o._numItems--;if(o.selectedMode===n.SINGLE)l?o._selectedId=-1:o._selectedId-1>=0&&o._selectedId--;else if(o.selectedMode===n.MULT&&o.multSelected.length){var r=o.multSelected.indexOf(e);r>=0&&o.multSelected.splice(r,1),o.multSelected=o.multSelected.map(function(t){return t>=e?t-1:t})}if(o._customSize){o._customSize[e]&&delete o._customSize[e];var s={};for(var u in o._customSize){var d=o._customSize[u];s[parseInt(u)-(parseInt(u)>=e?1:0)]=d}o._customSize=s}null==i&&(i=c),o._aniDelRuning=!1,t(e),o._aniDelCB=null},!0)}else t(e)},t.prototype.scrollTo=function(e,t,i,o){var a=this;if(void 0===t&&(t=.5),void 0===i&&(i=null),void 0===o&&(o=!1),this.checkInited(!1)){t<0&&(t=0),e<0?e=0:e>=this._numItems&&(e=this._numItems-1),!this._virtual&&this._layout&&this._layout.enabled&&this._layout.updateLayout();var n=this.getItemPos(e);if(!n)return!1;var r=void 0;switch(this._alignCalcType){case 1:r=cc.v2(n.left-(null!=i?this.node.width*i:this._leftGap),0);break;case 2:r=cc.v2(n.right-this.node.width+(null!=i?this.node.width*i:this._rightGap)+this.content.width,0);break;case 3:r=cc.v2(0,-n.top+(null!=i?this.node.height*i:this._topGap));break;case 4:r=cc.v2(0,-n.bottom-this.node.height-(null!=i?this.node.height*i:this._bottomGap)+this.content.height)}var s=this.content.getPosition(),c=Math.abs(this._sizeType?s.y:s.x),l=this._sizeType?r.y:r.x;Math.abs((null!=this._scrollPos?this._scrollPos:c)-l)>.5&&(this._scrollView.scrollToOffset(r,t),this._scrollToListId=e,this._scrollToEndTime=(new Date).getTime()/1e3+t,this._scrollToSo=this.scheduleOnce(function(){if(a._adheringBarrier||(a.adhering=a._adheringBarrier=!1),a._scrollPos=a._scrollToListId=a._scrollToEndTime=a._scrollToSo=null,o){var t=a.getItemByListId(e);t&&cc.tween(t).to(.1,{scale:1.05}).to(.1,{scale:1}).start()}},t+.1),t<=0&&this._onScrolling())}},t.prototype._calcNearestItem=function(){this.nearestListId=null,this._virtual&&this._calcViewPos();for(var e=this.viewTop,t=this.viewRight,i=this.viewBottom,o=this.viewLeft,a=!1,n=0;n<this.content.childrenCount&&!a;n+=this._colLineNum){var r=this._virtual?this.displayData[n]:this._calcExistItemPos(n);if(r){var s=this._sizeType?(r.top+r.bottom)/2:(r.left+r.right)/2;switch(this._alignCalcType){case 1:r.right>=o&&(this.nearestListId=r.id,o>s&&(this.nearestListId+=this._colLineNum),a=!0);break;case 2:r.left<=t&&(this.nearestListId=r.id,t<s&&(this.nearestListId+=this._colLineNum),a=!0);break;case 3:r.bottom<=e&&(this.nearestListId=r.id,e<s&&(this.nearestListId+=this._colLineNum),a=!0);break;case 4:r.top>=i&&(this.nearestListId=r.id,i>s&&(this.nearestListId+=this._colLineNum),a=!0)}}}var c=this._virtual?this.displayData[this.displayItemNum-1]:this._calcExistItemPos(this._numItems-1);if(c&&c.id===this._numItems-1){var l=this._sizeType?(c.top+c.bottom)/2:(c.left+c.right)/2;switch(this._alignCalcType){case 1:t>l&&(this.nearestListId=c.id);break;case 2:o<l&&(this.nearestListId=c.id);break;case 3:i<l&&(this.nearestListId=c.id);break;case 4:e>l&&(this.nearestListId=c.id)}}},t.prototype.prePage=function(e){void 0===e&&(e=.5),this.checkInited()&&this.skipPage(this.curPageNum-1,e)},t.prototype.nextPage=function(e){void 0===e&&(e=.5),this.checkInited()&&this.skipPage(this.curPageNum+1,e)},t.prototype.skipPage=function(e,t){if(this.checkInited()){if(this._slideMode!==a.PAGE)return cc.error("This function is not allowed to be called, Must SlideMode = PAGE!");if(e<0||e>=this._numItems||this.curPageNum===e)return;this.curPageNum=e,this.pageChangeEvent&&cc.Component.EventHandler.emitEvents([this.pageChangeEvent],e),this.scrollTo(e,t)}},t.prototype.calcCustomSize=function(e){if(this.checkInited()){if(!this._itemTmp)return cc.error("Unset template item!");if(!this.renderEvent)return cc.error("Unset Render-Event!");this._customSize={};var t=s.ResourceUtil.instantiate(this._itemTmp);this.content.addChild(t);for(var i=0;i<e;i++)cc.Component.EventHandler.emitEvents([this.renderEvent],t,i),t.height===this._itemSize.height&&t.width===this._itemSize.width||(this._customSize[i]=this._sizeType?t.height:t.width);return Object.keys(this._customSize).length||(this._customSize=null),s.ResourceUtil.removeFromParentAndRelease(t),t.destroy&&t.destroy(),this._customSize}},__decorate([u({type:cc.Enum(o)})],t.prototype,"templateType",void 0),__decorate([u({type:cc.Node,visible:function(){return this.templateType===o.NODE}})],t.prototype,"tmpNode",void 0),__decorate([u({type:cc.Prefab,visible:function(){return this.templateType===o.PREFAB}})],t.prototype,"tmpPrefab",void 0),__decorate([u({type:cc.Enum(a)})],t.prototype,"_slideMode",void 0),__decorate([u({type:cc.Float,range:[0,1,.1],slide:!0,visible:function(){return this._slideMode===a.PAGE}})],t.prototype,"pageDistance",void 0),__decorate([u({type:cc.Component.EventHandler,visible:function(){return this._slideMode===a.PAGE}})],t.prototype,"pageChangeEvent",void 0),__decorate([u()],t.prototype,"_virtual",void 0),__decorate([u({visible:function(){return this.slideMode===a.NORMAL}})],t.prototype,"cyclic",void 0),__decorate([u({visible:function(){return this.virtual}})],t.prototype,"lackCenter",void 0),__decorate([u({visible:function(){return this.virtual&&!this.lackCenter}})],t.prototype,"lackSlide",void 0),__decorate([u({type:cc.Integer,range:[0,6,1],slide:!0})],t.prototype,"_updateRate",void 0),__decorate([u({type:cc.Integer,range:[0,12,1],slide:!0})],t.prototype,"frameByFrameRenderNum",void 0),__decorate([u({type:cc.Component.EventHandler})],t.prototype,"renderEvent",void 0),__decorate([u({type:cc.Enum(n)})],t.prototype,"selectedMode",void 0),__decorate([u({visible:function(){return this.selectedMode===n.SINGLE}})],t.prototype,"repeatEventSingle",void 0),__decorate([u({type:cc.Component.EventHandler,visible:function(){return this.selectedMode>n.NONE}})],t.prototype,"selectedEvent",void 0),__decorate([u({serializable:!1})],t.prototype,"_numItems",void 0),__decorate([l,d,h("UI\u7ec4\u4ef6/List Extent"),_(cc.ScrollView),p(-5e3)],t)}(cc.Component);i.default=g,cc._RF.pop()},{"./ListItem":"ListItem","./ResUtil":"ResUtil"}],LiuHaiShiPei:[function(e,t,i){"use strict";cc._RF.push(t,"18cbdtJE8VN175qmS7H6rRk","LiuHaiShiPei"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./ResKeeper"),a=cc._decorator,n=a.ccclass,r=a.property,s=(a.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lenpinvalue=0,t}return __extends(t,e),t.prototype.onEnable=function(){if(cc.winSize.height/cc.winSize.width>=2){var e=this.node.getComponent(cc.Widget);e&&(e.top+=this.lenpinvalue,this.scheduleOnce(function(){e.updateAlignment()}))}},__decorate([r],t.prototype,"lenpinvalue",void 0),__decorate([n],t)}(o.default));i.default=s,cc._RF.pop()},{"./ResKeeper":"ResKeeper"}],LoadingManager:[function(e,t,i){"use strict";cc._RF.push(t,"da850gG7atKP5xMhRbpdH0M","LoadingManager"),Object.defineProperty(i,"__esModule",{value:!0}),i.LoadingMgr=void 0;var o=e("./BundleConfig"),a=e("./ResLoader"),n=e("./ResUtil"),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._loadingNode=null,t._shouldHide=!1,t._isResourceLoaded=!1,t}return __extends(t,e),t.prototype.show=function(){this._shouldHide=!0,this._loadingNode?this._executeLoading():this._fetchLoadingResource()},t.prototype.hide=function(){this._loadingNode?(this._shouldHide=!0,this._loadingNode.active=!1):this._shouldHide=!1},t.prototype._fetchLoadingResource=function(){var e=this;this._isResourceLoaded||(this._isResourceLoaded=!0,a.default.loadRes(o.BundleNames.Resouce,"common/UI_Loading",cc.Prefab).then(function(t){var i,o;e._loadingNode=n.ResourceUtil.instantiate(t),null===(o=null===(i=cc.director.getScene().getChildByName("Canvas"))||void 0===i?void 0:i.getChildByName("UILoading"))||void 0===o||o.addChild(e._loadingNode),e._executeLoading()}))},t.prototype._executeLoading=function(){this._loadingNode&&(this._loadingNode.active=this._shouldHide)},t}(e("./SingletonManager").SingletonBase);i.LoadingMgr=r.getInstance(),cc._RF.pop()},{"./BundleConfig":"BundleConfig","./ResLoader":"ResLoader","./ResUtil":"ResUtil","./SingletonManager":"SingletonManager"}],LodingGuodu_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"54dfdMBa6NPCom6PYSSmDkY","LodingGuodu_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node_img=null,t}return __extends(t,e),__decorate([r(cc.Node)],t.prototype,"node_img",void 0),__decorate([n("LodingGuodu_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],LodingGuodu:[function(e,t,i){"use strict";cc._RF.push(t,"71237pk2XpDzaXDhWTLOlQW","LodingGuodu"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./EventManager"),a=e("./ResKeeper"),n=e("./LodingGuodu_UIBindings"),r=e("./EvenType"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t}return __extends(t,e),t.prototype.onEnable=function(){cc.game.addPersistRootNode(this.node),this.auto_ui&&(this.auto_ui.node_img.opacity=0),o.EventMgrInstance.addListener(r.EVENT_TYPE.Game_Load_View,this.handleViewLoad,this)},t.prototype.handleViewLoad=function(e){if(this.auto_ui){var t=cc.tween(this.auto_ui.node_img);e?t.to(.2,{opacity:255}).start():t.to(.2,{opacity:0}).start()}},t.prototype.onDisable=function(){o.EventMgrInstance.removeListener(r.EVENT_TYPE.Game_Load_View,this.handleViewLoad,this)},__decorate([l(n.default)],t.prototype,"auto_ui",void 0),__decorate([c],t)}(a.default);i.default=u,cc._RF.pop()},{"./EvenType":"EvenType","./EventManager":"EventManager","./LodingGuodu_UIBindings":"LodingGuodu_UIBindings","./ResKeeper":"ResKeeper"}],LogManager:[function(e,t,i){"use strict";cc._RF.push(t,"a7bc2kYwlJBlZcJKpDQxAnG","LogManager"),Object.defineProperty(i,"__esModule",{value:!0}),i.LogMgr=void 0;var o=e("./SingletonManager"),a=e("./GameConfig"),n=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._logTag="[game-logger]",t}return __extends(t,e),t.prototype.debug=function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];(null===(e=a.default.appConfig)||void 0===e?void 0:e.Publish)||console.log.apply(console,__spreadArrays([this._logTag],t))},t.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.info.apply(console,__spreadArrays([this._logTag],e))},t.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.warn.apply(console,__spreadArrays([this._logTag],e))},t.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,__spreadArrays([this._logTag],e))},t}(o.SingletonBase);i.LogMgr=n.getInstance(),cc._RF.pop()},{"./GameConfig":"GameConfig","./SingletonManager":"SingletonManager"}],Logic_ChildMoveEvent:[function(e,t,i){"use strict";cc._RF.push(t,"ee4adeBSLNGN7M9ofk2tXVI","Logic_ChildMoveEvent"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,n=(o.property,o.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.canClick=!0,t.onTouchStart=null,t.onTouchMove=null,t.onTouchEnd=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.registerEventListeners()},t.prototype.registerEventListeners=function(){this.node.on(cc.Node.EventType.TOUCH_START,this.handleTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.handleTouchMove,this),this.node.on(cc.Node.EventType.TOUCH_END,this.handleTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.handleTouchEnd,this)},t.prototype.startSet=function(e,t,i){this.onTouchStart=e,this.onTouchMove=t,this.onTouchEnd=i},t.prototype.handleTouchStart=function(e){this.canClick&&this.onTouchStart&&this.onTouchStart(e)},t.prototype.handleTouchMove=function(e){this.canClick&&this.onTouchMove&&this.onTouchMove(e)},t.prototype.handleTouchEnd=function(e){this.canClick&&this.onTouchEnd&&this.onTouchEnd(e)},t.prototype.removeEventListeners=function(){this.node.targetOff(this)},t.prototype.setDelayCantClick=function(e){var t=this;this.canClick=!1,this.scheduleOnce(function(){t.canClick=!0},e)},t.prototype.setCantClick=function(e){this.canClick=e,this.removeEventListeners(),e&&this.registerEventListeners()},__decorate([a],t)}(cc.Component));i.default=n,cc._RF.pop()},{}],Logic_GetEquip:[function(e,t,i){"use strict";cc._RF.push(t,"9391esz/2FAMrudx9L3fEGo","Logic_GetEquip"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./LogManager"),a=e("./ArrayUtils"),n=e("./ObjectUtils"),r=e("./PlayerDataManager"),s=e("./Excel"),c=e("./GameDataManager"),l=e("./GameGlobalVariable"),u=e("./Const_Game"),d=cc._decorator,h=d.ccclass,p=(d.property,d.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.geZiBiChuCount=5,t.oneGeZiId=1,t.zaZhongMap=new Map,t.equipPool=[],t.equipWeights=[],t.videoEquipWeights=[],t.geZiIdArray=[],t.geZiWeights=[],t.shuiGuoLevelMap=new Map,t}var i;return __extends(t,e),i=t,Object.defineProperty(t,"getInstance",{get:function(){return this._instance||(this._instance=new i,this._instance.startCheckData(),this._instance.startSetShuiGuoLevel()),this._instance},enumerable:!1,configurable:!0}),t.prototype.getEquip=function(e,t,i,r){var s=this,l=c.GameDataMgr.getGameBag;l.pickCardCount++,t&&l.videoCount++;var d=[];this.equipWeights.forEach(function(e,t){var i=s.equipPool[t];2===i.level||3===i.level?d.push(e+0):d.push(e)}),i<=1&&this.geZiIdArray.forEach(function(e){1===i&&e===s.oneGeZiId?d[e-1]=d[e-1]:d[e-1]=0}),l.geZiBaoDi++,o.LogMgr.debug("\u683c\u5b50\u4fdd\u5e95\u6570\u91cf:",l.geZiBaoDi);for(var h=[],p=0;p<e;p++){var _=void 0;if(0===p&&t)_=a.default.getWeightedRandomIndex(this.videoEquipWeights);else if(l.geZiBaoDi>=this.geZiBiChuCount&&i>0)_=1===i?this.oneGeZiId-1:this.geZiIdArray[a.default.getWeightedRandomIndex(this.geZiWeights)]-1;else{var g=void 0;do{_=a.default.getWeightedRandomIndex(d),g=this.equipPool[_]}while(1===r&&g&&(g.shuiguoId===u.FruitId.\u6768\u6843\u5fcd\u8005||g.shuiguoId===u.FruitId.\u67e0\u6aac\u7cbe||g.shuiguoId===u.FruitId.\u8fa3\u59b9\u5b50||g.shuiguoId===u.FruitId.\u62db\u8d22\u6a59\u5b50))}h.push(n.default.deepClone(this.equipPool[_])),-1===this.equipPool[_].level&&(l.geZiBaoDi=0,o.LogMgr.debug("\u89e6\u53d1\u683c\u5b50\u4fdd\u5e95:",l.geZiBaoDi))}return h},t.prototype.getOneCell=function(e,t,i){var o=[];if(l.GameGlobalVariable.nowlevel>=1&&l.GameGlobalVariable.nowlevel<=4){var r=[];switch(i){case 1:r=[2,3];break;case 2:r=[1];break;case 3:r=[4,5,6,7]}if(r.length>0){var s=r[Math.floor(Math.random()*r.length)];return o.push(n.default.deepClone(this.equipPool[s-1])),o}}for(var c=0;c<e;c++){var u=-1;t>0&&(u=1===t?this.oneGeZiId-1:this.geZiIdArray[a.default.getWeightedRandomIndex(this.geZiWeights)]-1),-1!==u&&o.push(n.default.deepClone(this.equipPool[u]))}return o},t.prototype.startCheckData=function(){var e=this;this.equipPool.length||(this.equipPool=[],this.equipWeights=[],this.videoEquipWeights=[],this.geZiIdArray=[],this.geZiWeights=[],s.Excel.bagEquipRule_all.forEach(function(t){(-1===t.level||r.PlayerDataMgr.dressUpArray.includes(t.shuiguoId)||-1===s.Excel.shuiguo(t.shuiguoId).isShow&&2===l.GameGlobalVariable.isSpecialLevel())&&(e.equipPool.push(t),e.equipWeights.push(t.weight),e.videoEquipWeights.push(t.videoWidget),-1===t.level&&(e.geZiIdArray.push(t.id),e.geZiWeights.push(t.weight)))}))},t.prototype.startSetShuiGuoLevel=function(){var e=this;this.shuiGuoLevelMap.size||(this.shuiGuoLevelMap=new Map,s.Excel.shuiguohecheng_all.forEach(function(t){e.shuiGuoLevelMap.has(t.shuiguoId)||e.shuiGuoLevelMap.set(t.shuiguoId,[]),e.shuiGuoLevelMap.get(t.shuiguoId).push(t)}))},t.prototype.getEquipUpData=function(e,t){var i;return null===(i=this.shuiGuoLevelMap.get(e))||void 0===i?void 0:i[t]},t.prototype.getMaxLevel=function(e){var t=-1,i=s.Excel.shuiguo(e);if(0!==i.jinjieShuiGuoId)t=i.id;else{var o=s.Excel.shuiguo(this.getZaZhongId(e));o&&0!==o.jinjieShuiGuoId&&(t=o.id)}if(-1!==t){var a=s.Excel.shuiguo(t),n=r.PlayerDataMgr.getEquipDataById(t);if(a.jinJieLv<=n.level)return l.GameGlobalVariable.zaZhongMaxLevel}return l.GameGlobalVariable.normalMaxLevel},t.prototype.resetThis=function(){this.equipPool=[],this.startCheckData()},t.prototype.getZaZhongId=function(e){var t,i=this;return 0===this.zaZhongMap.size&&s.Excel.shuiguo_all.forEach(function(e){0!==e.jinjieShuiGuoId&&(i.zaZhongMap.set(e.id,e.jinjieShuiGuoId),i.zaZhongMap.set(e.jinjieShuiGuoId,e.id))}),null!==(t=this.zaZhongMap.get(e))&&void 0!==t?t:-1},t.prototype.getMustGetGeZi=function(){return null},i=__decorate([h],t)}(cc.Component));i.default=p,cc._RF.pop()},{"./ArrayUtils":"ArrayUtils","./Const_Game":"Const_Game","./Excel":"Excel","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./LogManager":"LogManager","./ObjectUtils":"ObjectUtils","./PlayerDataManager":"PlayerDataManager"}],MiniGameSdk:[function(e,t,i){"use strict";cc._RF.push(t,"ecb50t6ftlN4Y0AsTiTf1PC","MiniGameSdk"),Object.defineProperty(i,"__esModule",{value:!0}),i.MiniGameSdk=void 0,function(e){var t;function i(){return null!==window.wx&&void 0!==window.wx}function o(){return null!==window.tt&&void 0!==window.tt}function a(){return i()?t.WECHAT:o()?t.BYTEDANCE:t.DEVELOP}function n(){var e,i=a();i===t.WECHAT?e=wx.getSystemInfoSync():i===t.BYTEDANCE&&(e=tt.getSystemInfoSync());var o={width:0,height:0};return e&&(o.width=e.windowWidth,o.height=e.windowHeight),o}(function(e){e[e.DEVELOP=0]="DEVELOP",e[e.WECHAT=1]="WECHAT",e[e.BYTEDANCE=2]="BYTEDANCE"})(t||(t={})),e.isWechat=i,e.isBytedance=o;var r,s=function(){function e(e){this._adUid=e}return Object.defineProperty(e.prototype,"aduid",{get:function(){return this._adUid},enumerable:!1,configurable:!0}),e.prototype.show=function(){var e,n,r=this,s=a();if(s!==t.DEVELOP)return i()&&!wx.createInterstitialAd?(console.warn("wechat unsupport interstitial AD!"),void(this._interstitialAd=null)):o()&&!tt.createInterstitialAd?(console.warn("bytedance unsupport interstitial AD!"),void(this._interstitialAd=null)):void(this._interstitialAd?this._interstitialAd.load():(s===t.WECHAT?this._interstitialAd=wx.createInterstitialAd({adUnitId:this._adUid}):s===t.BYTEDANCE?this._interstitialAd=tt.createInterstitialAd({adUnitId:this._adUid}):this._interstitialAd=null,null===(e=this._interstitialAd)||void 0===e||e.onLoad(function(){console.log("load interstitial ad success"),r._interstitialAd.show().catch(function(e){console.log("catch interstitial ad error:",e)})}),null===(n=this._interstitialAd)||void 0===n||n.onError(function(e){console.log("interstitial ad on error:",e)})));this._interstitialAd=null},e.prototype.destory=function(){var e;null===(e=this._interstitialAd)||void 0===e||e.destroy()},e}(),c=function(){function e(e,t,i,o){void 0===i&&(i=300),void 0===o&&(o=!1),this._adUid=e,this.create(o,i,t)}return Object.defineProperty(e.prototype,"aduid",{get:function(){return this._adUid},enumerable:!1,configurable:!0}),e.prototype.create=function(e,i,o){var r,s,c=this,l=a();if(l!==t.DEVELOP){this.destroy();var u=n(),d=.4*i,h=0,p=0;"boolean"==typeof o?(p=(u.width-i)/2,h=o?5:u.height-d):(p=o.left,h=o.top);var _={adUnitId:this._adUid,adIntervals:30,style:{left:p,top:h+20,width:i}};l===t.WECHAT?this._bannerAd=wx.createBannerAd(_):l===t.BYTEDANCE?this._bannerAd=tt.createBannerAd(_):this._bannerAd=null,null===(r=this._bannerAd)||void 0===r||r.onError(function(e){console.log("ad banner error:",e)}),null===(s=this._bannerAd)||void 0===s||s.onLoad(function(){e&&c._bannerAd.show()})}else this._bannerAd=null},e.prototype.show=function(){var e;null===(e=this._bannerAd)||void 0===e||e.show()},e.prototype.hide=function(){var e;null===(e=this._bannerAd)||void 0===e||e.hide()},e.prototype.destroy=function(){var e;null===(e=this._bannerAd)||void 0===e||e.destroy()},e}(),l=function(){function e(e,t,i,o){void 0===t&&(t=0),void 0===i&&(i=0),void 0===o&&(o=1),this._adUid=e,this.createCustomAd(t,i,o)}return Object.defineProperty(e.prototype,"aduid",{get:function(){return this._adUid},enumerable:!1,configurable:!0}),e.prototype.createCustomAd=function(e,i){var o,n=a();if(n===t.DEVELOP||n===t.BYTEDANCE)return this._customAd=null,void console.log("develop or bytedance env not support custom Ad:",n);this.destroy(),this._customAd=wx.createCustomAd({adUnitId:this._adUid,style:{left:i,top:e,fixed:!0}}),null===(o=this._customAd)||void 0===o||o.onError(function(e){console.log("ad custom error:",e)})},e.prototype.show=function(){var e;null===(e=this._customAd)||void 0===e||e.show()},e.prototype.hide=function(){var e;null===(e=this._customAd)||void 0===e||e.hide()},e.prototype.destroy=function(){var e;null===(e=this._customAd)||void 0===e||e.destroy()},e}();(function(e){e[e.ACCEPT=0]="ACCEPT",e[e.REJECT=1]="REJECT",e[e.ERROR=2]="ERROR"})(r=e.EAdVideoResult||(e.EAdVideoResult={}));var u,d=function(){function e(e){this._videoAd=null,this._adUid=e}return Object.defineProperty(e.prototype,"aduid",{get:function(){return this._adUid},enumerable:!1,configurable:!0}),e.prototype.show=function(e,i,o){var n,s,c,l,u,d=this;void 0===o&&(o=3);var h=function(t,o){null==e||e.call(i,t,o)},p=a();if(p===t.DEVELOP)return h(r.ACCEPT,1),void(this._videoAd=null);var _=function(e){var i;if(null===(i=d._videoAd)||void 0===i||i.offClose(_),p===t.WECHAT)e&&e.isEnded||void 0===e?h(r.ACCEPT,1):h(r.REJECT,0);else if(p===t.BYTEDANCE){var o=e;o&&o.count>0?h(r.ACCEPT,o.count):h(r.REJECT,0)}};null===(n=this._videoAd)||void 0===n||n.offClose(_),p===t.WECHAT?this._videoAd=wx.createRewardedVideoAd({adUnitId:this._adUid}):p===t.BYTEDANCE?this._videoAd=tt.createRewardedVideoAd({adUnitId:this._adUid,multiton:!0,multitonRewardMsg:["\u591a1\u6b21\u5956\u52b1","\u518d\u591a\u4e00\u6b21\u5956\u52b1","\u518d\u591a\u4e00\u6b21\u5956\u52b1"],multitonRewardTimes:o}):this._videoAd=null,null===(s=this._videoAd)||void 0===s||s.onLoad(function(){console.log("ad video load success")}),null===(c=this._videoAd)||void 0===c||c.onError(function(e){console.log("ad video error:",e),h(r.ERROR,0)}),null===(l=this._videoAd)||void 0===l||l.onClose(_),null===(u=this._videoAd)||void 0===u||u.show().catch(function(){var e;null===(e=d._videoAd)||void 0===e||e.load().then(function(){var e;return null===(e=d._videoAd)||void 0===e?void 0:e.show()}).catch(function(e){console.log("catch video ad error:",e),h(r.ERROR,0)})})},e.prototype.destory=function(){var e;null===(e=this._videoAd)||void 0===e||e.destory()},e}();(function(e){e[e.TOP=0]="TOP",e[e.BOTTOM=1]="BOTTOM"})(u=e.EAdBannerLocation||(e.EAdBannerLocation={}));var h,p=function(){function e(){this.blnFromShare=!1}return Object.defineProperty(e,"instance",{get:function(){return e._instance||(e._instance=new e),e._instance},enumerable:!1,configurable:!0}),e.prototype.loadBanner=function(e,t,i){var o;void 0===t&&(t=u.TOP),void 0===i&&(i=1),null===(o=this._bannerAd)||void 0===o||o.destroy();var a=n(),r=a.width*i;r=(r=r<300?300:r)>a.width?a.width:r,r=300,this._bannerAd=new c(e,"number"==typeof t?t===u.TOP:t,r,!1)},e.prototype.showBanner=function(){this._bannerAd?this._bannerAd.show():console.error("MiniGameSDK: banner is null, you must call loadBanner(...) first!")},e.prototype.hideBanner=function(){var e;null===(e=this._bannerAd)||void 0===e||e.hide()},e.prototype.showInterstitial=function(e){var t;this._interstitialAd&&this._interstitialAd.aduid===e?this._interstitialAd.show():(null===(t=this._interstitialAd)||void 0===t||t.destory(),this._interstitialAd=new s(e),this._interstitialAd.show())},e.prototype.loadCustom=function(e,t,i){var o;void 0===t&&(t={top:0,left:0}),void 0===i&&(i=1),null===(o=this._customAd)||void 0===o||o.destroy(),this._customAd=new l(e,t.top,t.left,i)},e.prototype.loadCustomOne1=function(e,t,i){void 0===t&&(t={top:0,left:0}),void 0===i&&(i=1)},e.prototype.loadCustomOne2=function(e,t,i){void 0===t&&(t={top:0,left:0}),void 0===i&&(i=1)},e.prototype.loadCustomOne3=function(e,t,i){void 0===t&&(t={top:0,left:0}),void 0===i&&(i=1)},e.prototype.loadCustomOne4=function(e,t,i){void 0===t&&(t={top:0,left:0}),void 0===i&&(i=1)},e.prototype.showCustom=function(){this._customAd?this._customAd.show():console.error("MiniGameSDK: custom is null, you must call loadCustom(...) first!")},e.prototype.hideCustom=function(){var e;null===(e=this._customAd)||void 0===e||e.hide()},e.prototype.showCustomOne2=function(){},e.prototype.showCustomOne3=function(){},e.prototype.showVideo=function(e,t,i,o){var a;void 0===o&&(o=3),this._videoAd&&this._videoAd.aduid===e?this._videoAd.show(t,i,o):(null===(a=this._videoAd)||void 0===a||a.destory(),this._videoAd=new d(e),this._videoAd.show(t,i,o))},e.prototype.destroyAll=function(){var e,t,i,o;null===(e=this._bannerAd)||void 0===e||e.destroy(),this._bannerAd=null,null===(t=this._interstitialAd)||void 0===t||t.destory(),this._interstitialAd=null,null===(i=this._videoAd)||void 0===i||i.destory(),this._videoAd=null,null===(o=this._customAd)||void 0===o||o.destroy(),this._customAd=null},e}();e.AdvertManager=p,function(e){e[e.SHORT=0]="SHORT",e[e.LONG=1]="LONG"}(h=e.EVirbrateType||(e.EVirbrateType={}));var _=function(){function o(){}return o.autoCheckCallback=function(e,i){switch(a()){case t.DEVELOP:console.log("develop env not support!");break;case t.WECHAT:null==e||e();break;case t.BYTEDANCE:null==i||i()}},o.shareAppToFriendsNew=function(e,t,i,a,n){var r=this;void 0===t&&(t=""),window.tt?tt.shareAppMessage({title:e,desc:t,imageUrl:null!=i?i:"",query:null!=a?a:"",success:function(e){console.log("share success:",e),null==n||n(!0)},fail:function(e){console.log("share fail:",e),null==n||n(!1)}}):window.wx&&(this._onShowCallback=function(){window.wx.offShow(r._onShowCallback);var e=Date.now();n&&(r._failedShareCount<2?e-r._lastShareTime>2e3?Math.random()<.3?(n(!1),o.showToast("\u5206\u4eab\u5931\u8d25,\u8bf7\u5206\u4eab\u81f3\u7fa4\u804a"),r._failedShareCount++):(o.showToast("\u5206\u4eab\u6210\u529f"),n(!0)):(r._failedShareCount++,n(!1),o.showToast("\u5206\u4eab\u5931\u8d25,\u8bf7\u91cd\u65b0\u5206\u4eab")):(o.showToast("\u5206\u4eab\u6210\u529f"),r._failedShareCount=0,n(!0)))},window.wx.onShow(this._onShowCallback),this._lastShareTime=Date.now(),window.wx.shareAppMessage({imageUrlId:"",imageUrl:"https://mmocgame.qpic.cn/wechatgame/bSAKPPBBQFUN44PHyDL1mOY72Z1pA2eT0x3QtvGFxdL0ZPob1wej1Dy32ttBtt5y/0",title:"\u4f60\u6562\u6765\u5403\u6211\u5417"}))},o.showToast=function(e,t){void 0===t&&(t=2),this.autoCheckCallback(function(){wx.showToast({title:e,icon:"success",duration:1e3*t})},function(){tt.showToast({title:e,duration:1e3*t,success:function(e){console.log(""+e)},fail:function(){console.log("showToast\u8c03\u7528\u5931\u8d25")}})})},o.vibrate=function(e){void 0===e&&(e=h.SHORT),this.autoCheckCallback(function(){switch(e){case h.SHORT:wx.vibrateShort({success:function(e){console.log("vibrate success:",e)},fail:function(e){console.log("vibrateShort failed",e)}});break;case h.LONG:wx.vibrateLong({success:function(e){console.log("vibrate success",e)},fail:function(e){console.log("vibrateLong failed",e)}})}},function(){switch(e){case h.SHORT:tt.vibrateShort({success:function(e){console.log("vibrate success:",e)},fail:function(e){console.log("vibrateShort failed",e)}});break;case h.LONG:tt.vibrateLong({success:function(e){console.log("vibrate success",e)},fail:function(e){console.log("vibrateLong failed",e)}})}})},o.createWxGameHub=function(){if(cc.sys.platform==cc.sys.WECHAT_GAME){var t=cc.view.getVisibleSize(),i=(t.width,t.height,wx.getSystemInfoSync()),o=i.screenWidth,a=i.screenHeight;console.log("\u5c4f\u5e55\u5bbd:"+o),console.log("\u5c4f\u5e55\u9ad8:"+a),i.windowWidth,i.windowHeight,e.API.gameClubButton=wx.createGameClubButton({icon:"light",style:{left:10,top:60,width:40,height:40,backgroundColor:"#00000000"}})}},o.reboot=function(){this.autoCheckCallback(function(){wx.restartMiniProgram({success:function(){console.log("restart success")},fail:function(){console.log("restart failed")}})},function(){try{tt.restartMiniProgramSync()}catch(e){console.log("restartMiniProgramSync",e)}})},o.exit=function(){this.autoCheckCallback(function(){wx.exitMiniProgram({success:function(){console.log("exit success")},fail:function(){console.log("exit failed")}})},function(){tt.exitMiniProgram({success:function(e){console.log("exit success:",null==e?void 0:e.data)},fail:function(e){console.log("exit fail:",null==e?void 0:e.errMsg)}})})},o.randomIntNum=function(t,i){return Math.round(e.API.randomFloatNum(t,i))},o.randomFloatNum=function(e,t){var i=Date.now();return t=t||0,e=e||0,t=Math.max(t,e),(e=Math.min(t,e))+(i=(9301*i+49297)%233280)/233280*(t-e)},o.showShareMenu=function(){this.autoCheckCallback(function(){wx.showShareMenu({withShareTicket:!0,menus:["shareAppMessage","shareTimeline"],success:function(){},fail:function(){},complete:function(){}});var t=["\u9b54\u6027\u5c0f\u6e38\u620f\uff0c\u65e0\u9700\u4e0b\u8f7d\uff0c\u70b9\u51fb\u5373\u73a9\uff01","\u8c01\u8bbe\u8ba1\u7684\u7b2c\u4e8c\u5173\uff0c\u5b8c\u5168\u8fc7\u4e0d\u53bb\u554a\uff01","\u89e3\u538b\uff0c\u5b9e\u5728\u662f\u592a\u89e3\u538b\u4e86\uff01","\u6211\u8001\u516c\u79d2\u8fc7\u7b2c\u4e8c\u5173\uff01\u4f60\u884c\u4e0d\u884c\u5440","\u542c\u54e5\u4e00\u53e5\u529d\uff0c\u8fd9\u6e38\u620f\u4f60\u522b\u78b0\uff0c\u6015\u4f60\u628a\u63e1\u4e0d\u4f4f\uff01","\u8fd9\u5173\u80fd\u4e0d\u80fd\u4e00\u6b21\u8fc7\u5c31\u770b\u4f60\u4e86","\u6709\u672c\u4e8b\u4f60\u6765\u628a\u7b2c\u4e8c\u5173\u8fc7\u4e86\u5440[\u65fa\u67f4]","\u8be5\u4e0d\u4f1a\u6709\u4eba\u8fc7\u4e0d\u4e86\u7b2c\u4e8c\u5173\u5427\uff1f","\u80fd\u8fc7\u7b2c\u4e8c\u5173\u7684\u4eba\uff0c\u667a\u5546\u90fd\u4e0d\u4f4e\u4e8e150[\u563f\u54c8]","\u8c01\u80fd\u8fc7\u53bb\u7b2c2\u5173\u6211\u5c31\u670d\u5979\uff01[\u5de6\u54fc\u54fc]","\u996d\u524d\u73a9\u4e00\u628a\uff0c\u5f00\u5fc3\u53c8\u89e3\u538b[\u673a\u667a][\u5472\u7259]","\u7b11\u6b7b\uff0c\u8001\u5a46\u6765\u4e86\u4e5f\u8fc7\u4e0d\u4e86\u7b2c\u4e8c\u5173[\u5472\u7259]","\u8c01\u80fd\u8fc7\u5173\u6211\u5c31\u670d\u5979\uff01","\u636e\u8bf4\u8fd9\u6e38\u620f\u4ec50.2%\u7684\u4eba\u80fd\u901a\u8fc7\u7b2c\u4e8c\u5173\uff0c\u4f60\u6562\u6765\u8bd5...","\u8fd9\u6e38\u620f\u4f60\u80fd\u8fc7\u4e86\u7b2c\u4e8c\u5173\uff0c\u7b97\u4f60\u5389\u5bb3\uff01"],i=["https://mmocgame.qpic.cn/wechatgame/oxByTG5ibhWjHwM4OPKyhf5vJSZictFSZdspMiccic3uo3tYdPpNnFokzC19MYLQUGcP/0","https://mmocgame.qpic.cn/wechatgame/kVz9DdkicmVg8tFWHCV80uNTaH4tIuxfZpAcyz2iaSSY7rmEOM7wsCgHgXWjjN1uhU/0","https://mmocgame.qpic.cn/wechatgame/4Nvoic6orqLonquA5DKR5MzLYNnSpicqD2XdO45MHY10bibsMFusmPhpfibJ1WXMXHhA/0","https://mmocgame.qpic.cn/wechatgame/icwicFxXAiaFTyHWWGlMC9PTG1WeTS2f4UJzI1SFBhk2SUyLInMmb9drX3XMxGUQ1KL/0","https://mmocgame.qpic.cn/wechatgame/ibVyxNISGA75TsSGaOmBp3dqSWD4yd9lznHe0Qq0ZG6DcTOuDllmHSV2dhA5300p9/0","https://mmocgame.qpic.cn/wechatgame/cmT3ulLfYrlcDWiakgibawib4aUiaWRuy2eEV64qrUO00PiaPbzacNPIlBjOIia6B1AKxC/0","https://mmocgame.qpic.cn/wechatgame/XqtEbkfpjbQ7LEpmDjTl1z4hzeUNNCIdRckDZuhYy7yrcLQZ9vaLIdDrXfTQLG2t/0","https://mmocgame.qpic.cn/wechatgame/WohhvAj4g78IJY2Yn64f6TsjY25nCNlibHIfHH8AlnmJuCsS51GySNHsbRzveibicicG/0"];window.wx.onShareAppMessage(function(){return{title:t[e.API.randomIntNum(0,t.length-1)],imageUrl:i[e.API.randomIntNum(0,i.length-1)],query:"shareid=100"}}),window.wx.onShareTimeline(function(){return{title:t[e.API.randomIntNum(0,t.length-1)],imageUrl:i[e.API.randomIntNum(0,i.length-1)],query:"shareid=200"}}),window.wx.onShow(function(){console.log("onShow"),e.AdvertManager.instance.blnFromShare?e.AdvertManager.instance.blnFromShare=!1:e.AdvertManager.instance.showInterstitial("adunit-203b3a122ff3e583"),cc.audioEngine.pauseMusic(),cc.audioEngine.pauseAllEffects(),cc.audioEngine.resumeMusic(),cc.audioEngine.resumeAllEffects()})},function(){tt.showShareMenu({success:function(){console.log("show menu is showing")},fail:function(e){console.log("showShareMenu:",e.errMsg)},complete:function(){console.log("showShareMenu complete")}})})},o.navigateTo=function(e,t){this.autoCheckCallback(function(){wx.navigateToMiniProgram({appId:e,extraData:{foo:"bar"},envVersion:"develop",success:function(){null==t||t()}})},function(){tt.navigateToVideoView({videoId:e,success:function(){null==t||t()},fail:function(e){console.log("bytedance navigateToVideoView fail",e)}})})},o.login=function(e){var i=a(),n=function(){i===t.WECHAT?wx.login({success:function(t){t.code?(o._loginCode=t.code,o._loginAnonymousCode=null,null==e||e(o._loginCode,o._loginAnonymousCode)):console.log("login error:",t.errMsg)},fail:function(){o._loginCode=null,o._loginAnonymousCode=null,null==e||e(o._loginCode,o._loginAnonymousCode),console.log("login fail")}}):i===t.BYTEDANCE?tt.login({force:!0,success:function(t){var i,a;console.log("login "+t.code+" "+t.anonymousCode),t.code?(o._loginCode=null===(i=t.code)||void 0===i?void 0:i.toString(),o._loginAnonymousCode=null===(a=t.anonymousCode)||void 0===a?void 0:a.toString(),null==e||e(o._loginCode,o._loginAnonymousCode)):console.log("login error:",t.errMsg)},fail:function(t){o._loginCode=null,o._loginAnonymousCode=null,null==e||e(o._loginCode,o._loginAnonymousCode),console.log("login fail",t)}}):(o._loginCode=null,o._loginAnonymousCode=null,null==e||e(o._loginCode,o._loginAnonymousCode),console.log("not mini game platform, login codes are all null"))};o._loginCode?i===t.WECHAT?wx.checkSession({success:function(){console.log("session is valid, use current code:",o._loginCode),null==e||e(o._loginCode,o._loginAnonymousCode)},fail:function(){console.log("session expired"),n()}}):i===t.BYTEDANCE?tt.checkSession({success:function(){console.log("session is valid, user current code: "+o._loginCode+", "+o._loginAnonymousCode),null==e||e(o._loginCode,o._loginAnonymousCode)},fail:function(){console.log("session expired"),n()}}):(console.log("not mini game platform, login null"),null==e||e(null,null)):n()},o.callWechatCloudFunction=function(e,t,a){i()?this.login(function(){o._hasInitWechatCloudFunction||(wx.cloud.init(),o._hasInitWechatCloudFunction=!0),wx.cloud.callFunction({name:t,data:a,success:function(t){return null==e?void 0:e(t)},fail:function(t){console.log("wechat cloud function error:",t),null==e||e(null)}})}):console.log("Not wechat platform, not support callWechatCloudFunction")},o.setUserCloudStorage=function(e,t){this.autoCheckCallback(function(){wx.setUserCloudStorage({KVDataList:[{key:e,value:t}],success:function(){return console.log("set cloud storage success:"+e+", value:"+t)},fail:function(e){return console.log("set cloud storage error:",e)}})},function(){tt.setUserCloudStorage({KVDataList:[{key:e,value:t}],success:function(){return console.log("set cloud storage success:"+e+", value:"+t)},fail:function(e){return console.log("set cloud storage error:",e)}})})},o._loginCode=null,o._loginAnonymousCode=null,o._hasInitWechatCloudFunction=!1,o._onShowCallback=null,o._lastShareTime=0,o._failedShareCount=0,o.gameClubButton=null,o}();e.API=_;var g=function(){function e(){}return e.listenFromSidebar=function(e,t){if(o()){tt.onShow(function(i){console.log("onShow launch res:",i),"021036"===i.scene?(null==e||e.call(t,!0),console.log("launch from sidebar")):(null==e||e.call(t,!1),console.log("NOT launch from douyin sidebar!"))});var i=tt.getLaunchOptionsSync();i&&"021036"===i.scene&&(null==e||e.call(t,!0))}else null==e||e.call(t,!1)},e.checkSideBar=function(e,t){o()?tt.checkScene({scene:"sidebar",success:function(i){console.log("check scene success: ",i.isExist),null==e||e.call(t,i.isExist)},fail:function(i){console.log("check scene fail:",i),null==e||e.call(t,!1)}}):null==e||e.call(t,!1)},e.navigateToSidebar=function(e,t){if(!o())return console.log("not douyin platform!"),void(null==e||e.call(t,!1));tt.navigateToScene({scene:"sidebar",success:function(){console.log("navigate success"),null==e||e.call(t,!0)},fail:function(i){console.log("navigate failed reason:",i),null==e||e.call(t,!1)}})},e}();e.BytedanceSidebar=g}(i.MiniGameSdk||(i.MiniGameSdk={})),cc._RF.pop()},{}],MiniGame:[function(e,t,i){"use strict";cc._RF.push(t,"68263d/po1Mw7R+W49p69Fw","MiniGame"),Object.defineProperty(i,"__esModule",{value:!0}),i.isMiniGame=void 0,i.isMiniGame=function(){return[cc.sys.WECHAT_GAME,cc.sys.ALIPAY_GAME,cc.sys.QTT_GAME,cc.sys.BYTEDANCE_GAME,cc.sys.HUAWEI_GAME,cc.sys.OPPO_GAME,cc.sys.VIVO_GAME,cc.sys.XIAOMI_GAME,cc.sys.BAIDU_GAME,cc.sys.JKW_GAME,cc.sys.LINKSURE].includes(cc.sys.platform)},cc._RF.pop()},{}],ModuleManager:[function(e,t,i){"use strict";cc._RF.push(t,"3429br0D0BIqpSXdGfDW/2d","ModuleManager"),Object.defineProperty(i,"__esModule",{value:!0}),i.ModuleMgr=void 0;var o=e("./BundleConfig"),a=e("./EventManager"),n=e("./SingletonManager"),r=e("./ResLoader"),s=e("./ResUtil"),c=e("./EvenType"),l=e("./BaseModule"),u=function(e){function t(){var t=e.call(this)||this;return t._modules=new Map,t._isLoading=!1,t}return __extends(t,e),t.prototype.show=function(e,t,i){return void 0===i&&(i={}),__awaiter(this,void 0,Promise,function(){var n,u,d;return __generator(this,function(h){switch(h.label){case 0:return n=null,a.EventMgrInstance.emitEvent(c.EVENT_TYPE.Game_Load_View,!0),this._isLoading?[2]:(this._isLoading=!0,this._modules.has(e)?(n=this._modules.get(e)||null,[3,3]):[3,1]);case 1:return u="module/"+e,[4,r.default.loadRes(o.BundleNames.Home,u,cc.Prefab)];case 2:d=h.sent(),n=s.ResourceUtil.instantiate(d),t.addChild(n),n.getComponent(l.default).show(i),this._modules.set(e,n),h.label=3;case 3:return this._modules.forEach(function(e){e.active=e===n}),this._isLoading=!1,a.EventMgrInstance.emitEvent(c.EVENT_TYPE.Game_Load_View,!1),[2]}})})},t.prototype.clearAllModules=function(){this._modules.clear()},t}(n.SingletonBase);i.ModuleMgr=u.getInstance(),cc._RF.pop()},{"./BaseModule":"BaseModule","./BundleConfig":"BundleConfig","./EvenType":"EvenType","./EventManager":"EventManager","./ResLoader":"ResLoader","./ResUtil":"ResUtil","./SingletonManager":"SingletonManager"}],Module_Fighting_RedPoint:[function(e,t,i){"use strict";cc._RF.push(t,"c2998WOE8pFjKIZ3j195MWO","Module_Fighting_RedPoint"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./EventManager"),a=e("./ResKeeper"),n=e("./EvenType"),r=e("./PlayerDataManager"),s=e("./Excel"),c=e("./GameDataManager"),l=cc._decorator,u=l.ccclass,d=l.property,h=(l.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.huangdong=null,t.type=1,t.huangtw=null,t}return __extends(t,e),t.prototype.onEnable=function(){switch(this.type){case 1:o.EventMgrInstance.addListener(n.EVENT_TYPE.Game_Update_Level_Award,this.updateUI,this),this.updateUI();break;case 2:o.EventMgrInstance.addListener(n.EVENT_TYPE.HOME_QIANDAO_UPDATE,this.handleQianDao,this),this.handleQianDao()}},t.prototype.handleQianDao=function(){r.PlayerDataMgr.resetQianDaoCount(),1===r.PlayerDataMgr.globalData.isqiandaocode?(this.node.children[0].active=!0,this.startHuangDongAnimation()):(this.huangtw&&(this.huangtw.stop(),this.huangdong&&(this.huangdong.angle=0,cc.Tween.stopAllByTarget(this.huangdong))),this.node.children[0].active=!1)},t.prototype.startHuangDongAnimation=function(){if(this.huangdong){var e=cc.tween(this.huangdong).to(.1,{angle:-10}).to(.1,{angle:10}).to(.1,{angle:-5}).to(.1,{angle:5}).to(.1,{angle:0}).delay(.2);this.huangtw=cc.tween(this.huangdong).repeatForever(e).start()}},t.prototype.updateUI=function(){for(var e=s.Excel.shuiguolevel_all.size,t=!1,i=0;i<e;i++)if(c.GameDataMgr.hasLevelAward(i+1)){t=!0;break}this.node.children[0].active=t},t.prototype.onDisable=function(){o.EventMgrInstance.removeListener(n.EVENT_TYPE.Game_Update_Level_Award,this.updateUI,this),o.EventMgrInstance.removeListener(n.EVENT_TYPE.HOME_QIANDAO_UPDATE,this.handleQianDao,this)},__decorate([d(cc.Node)],t.prototype,"huangdong",void 0),__decorate([d],t.prototype,"type",void 0),__decorate([u],t)}(a.default));i.default=h,cc._RF.pop()},{"./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GameDataManager":"GameDataManager","./PlayerDataManager":"PlayerDataManager","./ResKeeper":"ResKeeper"}],Module_Fighting_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"ed71b7LQy9M0Ys97Bz7c/VY","Module_Fighting_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.txt_title=null,t.txt_levelstate=null,t.txt_zhangjielb=null,t.node_rightNode=null,t.node_leftNode=null,t.btn_qiandao=null,t.btn_rankBtn=null,t.btn_saodang=null,t.btn_startgame=null,t.btn_setting=null,t.btn_sidebar=null,t._btnNames=["btn_qiandao","btn_rankBtn","btn_saodang","btn_startgame","btn_setting","btn_sidebar"],t}return __extends(t,e),__decorate([r(cc.Label)],t.prototype,"txt_title",void 0),__decorate([r(cc.Label)],t.prototype,"txt_levelstate",void 0),__decorate([r(cc.Label)],t.prototype,"txt_zhangjielb",void 0),__decorate([r(cc.Node)],t.prototype,"node_rightNode",void 0),__decorate([r(cc.Node)],t.prototype,"node_leftNode",void 0),__decorate([r(cc.Button)],t.prototype,"btn_qiandao",void 0),__decorate([r(cc.Button)],t.prototype,"btn_rankBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_saodang",void 0),__decorate([r(cc.Button)],t.prototype,"btn_startgame",void 0),__decorate([r(cc.Button)],t.prototype,"btn_setting",void 0),__decorate([r(cc.Button)],t.prototype,"btn_sidebar",void 0),__decorate([n("Module_Fighting_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],Module_Fighting:[function(e,t,i){"use strict";cc._RF.push(t,"f6f1fAq5dFOJa5aG1PX9rMz","Module_Fighting"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./Module_Fighting_UIBindings"),a=e("./EventManager"),n=e("./EvenType"),r=e("./Excel"),s=e("./BaseModule"),c=e("./GameDataManager"),l=e("./TipsManager"),u=e("./BundleConfig"),d=e("./UIManager"),h=e("./PlayerDataManager"),p=e("./UIRotate"),_=e("./HallGlobalVariable"),g=e("./LogManager"),f=e("./GameGlobalVariable"),m=e("./ADManager"),v=e("./UI_BoxAward"),y=e("./AIControl"),b=e("./UIConfig_Game"),I=e("./UIConfig_Home"),E=e("./Const_Hall"),M=cc._decorator,C=M.ccclass,B=M.property,x=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.qiehuanNode=null,t.boshuaward=null,t.awardNode=null,t.saodangLb=null,t.playicon=null,t.shaodanglb=null,t.kaishilb=null,t.zhangjieLb=null,t.nowviewid=0,t.ismove=!1,t.changId=0,t}return __extends(t,e),t.prototype.onEnable=function(){a.EventMgrInstance.addListener(n.EVENT_TYPE.Game_Value_Fei,this.handleFeiQian,this),a.EventMgrInstance.addListener(n.EVENT_TYPE.Game_PASS,this.updateUI,this),this.handleFeiQian(),this.updateUI(),this.checkAI(),this.updateSweepUI()},t.prototype.updateStamina=function(){this.kaishilb.string="\xd7"+f.GameGlobalVariable.kaishitilicount,this.shaodanglb.string="\xd7"+f.GameGlobalVariable.shaodangtilicount},t.prototype.updateSweepUI=function(){var e=h.PlayerDataMgr.getSaoDangCount();e<=0?(this.playicon.active=!0,this.saodangLb.node.active=!1):(this.playicon.active=!1,this.saodangLb.node.active=!0,this.saodangLb.string="\u4eca\u65e5\u514d\u8d39\u5269\u4f59"+e+"\u6b21")},t.prototype.updateUI=function(){var e=c.GameDataMgr.getCurrentMaxLevel();this.setChapterId(0===e?0:e)},t.prototype.handleFeiQian=function(){var e=f.GameGlobalVariable.adddimond,t=f.GameGlobalVariable.addjinbi,i=f.GameGlobalVariable.addpower;0!==e&&(a.EventMgrInstance.emitEvent(n.EVENT_TYPE.Home_Add_Gold,3,e),f.GameGlobalVariable.adddimond=0),0!==t&&(a.EventMgrInstance.emitEvent(n.EVENT_TYPE.Home_Add_Gold,2,t),f.GameGlobalVariable.addjinbi=0),0!==i&&(a.EventMgrInstance.emitEvent(n.EVENT_TYPE.Home_Add_Gold,1,i),f.GameGlobalVariable.addpower=0)},t.prototype.onDisable=function(){a.EventMgrInstance.removeListener(n.EVENT_TYPE.Game_Value_Fei,this.handleFeiQian,this),a.EventMgrInstance.removeListener(n.EVENT_TYPE.Game_PASS,this.updateUI,this)},t.prototype.show=function(){this.auto_ui.addClickListener(this._clickListener,this);var e=this.auto_ui,t=e.btn_sidebar,i=e.btn_rankBtn;t.node.active=!1,cc.sys.platform,cc.sys.BYTEDANCE_GAME,i.node.active=cc.sys.platform===cc.sys.BYTEDANCE_GAME},t.prototype.hide=function(){},t.prototype._clickListener=function(e){var t=this.auto_ui;switch(e){case t.btn_saodang:this._handleSweepClick();break;case t.btn_startgame:this.onClickStartGame();break;case t.btn_setting:this.showSettings();break;case t.btn_qiandao:this.showSignIn();break;case t.btn_sidebar:d.default.open(u.BundleNames.Home,I.UIView_Home.UI_Sidebar);break;case t.btn_rankBtn:cc.sys.platform,cc.sys.BYTEDANCE_GAME}},t.prototype._handleSweepClick=function(){h.PlayerDataMgr.globalData.power>=f.GameGlobalVariable.shaodangtilicount?h.PlayerDataMgr.getSaoDangCount()>0?this._consumeSweepResources():m.ADMgr.showRewardedVideoAd("\u89c6\u9891\u626b\u8361",this._consumeSweepResources.bind(this)):l.TipMgr.showToast("\u4f53\u529b\u4e0d\u8db3")},t.prototype._consumeSweepResources=function(){h.PlayerDataMgr.subtractPower(f.GameGlobalVariable.shaodangtilicount),h.PlayerDataMgr.subSaoDangCount(1),this.updateSweepUI(),f.GameGlobalVariable.nowlevel=this.changId+1,d.default.open(u.BundleNames.Game,b.UIView_Game.UI_GameOver,{type:2,back:function(){}})},t.prototype.showSignIn=function(){d.default.open(u.BundleNames.Home,I.UIView_Home.UI_QianDao)},t.prototype.showSettings=function(){d.default.open(u.BundleNames.Home,I.UIView_Home.UI_Setting)},t.prototype.onClickStartGame=function(){if(h.PlayerDataMgr.dressUpArray.every(function(e){return 0!==e})){var e=r.Excel.shuiguoguanqia(this.changId+1),t=c.GameDataMgr.getCurrentLevelPassState(e.id,2);1===t||2===t?a.EventMgrInstance.emitEvent(n.EVENT_TYPE.Hall_StartGame,this.changId+1):l.TipMgr.showToast("\u6682\u672a\u89e3\u9501")}else l.TipMgr.showToast("\u80cc\u5305\u4e2d\u6709\u7a7a\u4f4d\u672a\u4e0a\u9635\u6c34\u679c")},t.prototype.setCurrentView=function(e){var t=this,i=this.qiehuanNode.children[this.nowviewid],o=this.qiehuanNode.children[0===this.nowviewid?1:0];this.ismove=!0;var a=1===e?375+i.width:-(375+i.width),n=1===e?-(375+o.width):375+o.width;cc.tween(i).to(.25,{x:a}).start(),o.x=n,cc.tween(o).to(.25,{x:0}).call(function(){t.ismove=!1}).start(),this.nowviewid=0===this.nowviewid?1:0,this._updateRightLeftNode(),this.updateCharacterData()},t.prototype._updateRightLeftNode=function(){var e=c.GameDataMgr.getCurrentMaxLevel()+f.GameGlobalVariable.houlevelunlock,t=r.Excel.shuiguoguanqia_all.size,i=Math.min(e,t-1);this.auto_ui.node_rightNode.active=this.changId+1<=i,this.auto_ui.node_leftNode.active=this.changId-1>=0},t.prototype.updateCharacterData=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i,o;return __generator(this,function(a){switch(a.label){case 0:return e=r.Excel.shuiguoguanqia(this.changId+1),t=c.GameDataMgr.getCurrentLevelData(this.changId+1),g.LogMgr.debug("\u5f53\u524d\u5173\u5361\u672c\u5730\u6570\u636e",t),i=this.qiehuanNode.children[this.nowviewid],[4,this._loadRes(u.BundleNames.Home,"res/\u521d\u59cb\u4e4b\u5730/levelicon"+e.dipicture,cc.SpriteFrame)];case 1:return o=a.sent(),i.getComponent(cc.Sprite).spriteFrame=o,i.children[0].getComponent(cc.Sprite).spriteFrame=o,this._updateUIElements(e),[2]}})})},t.prototype._updateUIElements=function(e){switch(this.auto_ui.txt_title.string=e.id+"."+e.levelname,c.GameDataMgr.getCurrentLevelPassState(e.id,2)){case-1:this._handleLockedLevel();break;case 1:this._handleCompletedLevel();break;case 2:this._handleCurrentLevel(e)}this._updateBoshuAwards(e)},t.prototype._handleLockedLevel=function(){this.auto_ui.btn_startgame.node.active=!1,this.auto_ui.txt_zhangjielb.node.active=!0,this.auto_ui.txt_zhangjielb.string="\u901a\u8fc7\u7b2c"+this.changId+"\u7ae0\u8282\u89e3\u9501",this.auto_ui.txt_levelstate.string="\u672a\u89e3\u9501",this.auto_ui.btn_saodang.node.active=!1,this.qiehuanNode.children[this.nowviewid].children[0].active=!0},t.prototype._handleCompletedLevel=function(){this.auto_ui.txt_zhangjielb.node.active=!1,this.auto_ui.btn_startgame.node.active=!0,this.auto_ui.txt_levelstate.string="\u5df2\u901a\u5173",this.auto_ui.btn_saodang.node.active=!0,this.qiehuanNode.children[this.nowviewid].children[0].active=!1},t.prototype._handleCurrentLevel=function(e){this.auto_ui.btn_startgame.node.active=!0,this.auto_ui.txt_zhangjielb.node.active=!1,this.auto_ui.txt_levelstate.string="\u6700\u9ad8\u7eaa\u5f55:"+c.GameDataMgr.getMaxLevelWaveState(this.changId+1,2)+"/"+e.levelboshuid.length,this.auto_ui.btn_saodang.node.active=!1,this.qiehuanNode.children[this.nowviewid].children[0].active=!1},t.prototype._updateBoshuAwards=function(e){for(var t=this.boshuaward.children,i=0;i<t.length;i++){var o=t[i],a=e.awardboshuid[i];o.children[1].getComponent(cc.Label).string="\u7b2c"+a+"\u6ce2",this._updateBoshuAwardNode(o,a)}this._updateRedPoints()},t.prototype._updateBoshuAwardNode=function(e,t){var i=c.GameDataMgr.getMaxLevelWaveState(this.changId+1,2)>=t,o=i&&c.GameDataMgr.getLevelAwardRecord(this.changId+1,t),a=e.children[0].getChildByName("unlockimg"),n=e.children[0].getChildByName("lockimg"),r=e.children[0].getChildByName("redpoint"),s=e.children[0].getComponent(p.default);a.active=o,n.active=!o,r.active=!o&&i,o?s.stopRotateTween():s.startRotateTween()},t.prototype._updateRedPoints=function(){this.auto_ui.node_leftNode.getChildByName("redpoint").active=this._hasLeftRedPoint(),this.auto_ui.node_rightNode.getChildByName("redpoint").active=this._hasRightRedPoint()},t.prototype._hasLeftRedPoint=function(){for(var e=this.changId;e>=0;e--)if(c.GameDataMgr.hasLevelAward(e))return!0;return!1},t.prototype._hasRightRedPoint=function(){for(var e=this.changId+2;e<r.Excel.shuiguoguanqia_all.size;e++)if(c.GameDataMgr.hasLevelAward(e))return!0;return!1},t.prototype.onAwardBoxClick=function(e,t){var i=r.Excel.shuiguoguanqia(this.changId+1),o=i.awardboshuid[Number(t)-1];c.GameDataMgr.getMaxLevelWaveState(this.changId+1,2)>=o?c.GameDataMgr.getLevelAwardRecord(this.changId+1,o)?l.TipMgr.showToast("\u5df2\u9886\u53d6"):(this._handleAwardAcquisition(t,i),c.GameDataMgr.updateLevelAwardRecord(this.changId+1,o),this.updateCharacterData()):this._displayAwardNode(e,i,t)},t.prototype._handleAwardAcquisition=function(e,t){switch(l.TipMgr.showToast("\u606d\u559c\u83b7\u5f97\u5956\u52b1"),e){case"1":this.getAwardData(t.awardbox1);break;case"2":this.getAwardData(t.awardbox2);break;case"3":this.getAwardData(t.awardbox3)}},t.prototype._displayAwardNode=function(e,t,i){var o=e.getCurrentTarget();this.awardNode.getComponent(v.default).displayAward(o,t,i)},t.prototype.onHideAwradTip=function(){this.awardNode.active&&(this.awardNode.active=!1)},t.prototype.getAwardData=function(e){var t=new E.GetItemsData;t.ids=[],t.counts=[];for(var i=0,o=e;i<o.length;i++){var a=o[i];this._handleAwardDistribution(a,t)}t.clickCallBack=this._getAwardsCallback.bind(this,t),d.default.open(u.BundleNames.Home,I.UIView_Home.UI_GetItems,t)},t.prototype._handleAwardDistribution=function(e,t){var i=e[0],o=e[1],a=e[2];switch(i){case 1:t.ids.push(_.default.goldId),t.counts.push(o);break;case 2:t.ids.push(_.default.diamondId),t.counts.push(o);break;case 3:t.ids.push(_.default.powerId),t.counts.push(o);break;case 5:this._distributeFragments(o,a,t)}},t.prototype._distributeFragments=function(e,t,i){var o=null;1===e?o=_.default.getSuiPian([t,0,0]):2===e?o=_.default.getSuiPian([0,t,0]):3===e&&(o=_.default.getSuiPian([0,0,t])),o.forEach(function(e,t){i.ids.push(t),i.counts.push(e)})},t.prototype._getAwardsCallback=function(e){e.ids.forEach(function(t,i){var o=e.counts[i];switch(t){case _.default.goldId:a.EventMgrInstance.emitEvent(n.EVENT_TYPE.Home_Add_Gold,2,o);break;case _.default.diamondId:a.EventMgrInstance.emitEvent(n.EVENT_TYPE.Home_Add_Gold,3,o);break;case _.default.powerId:a.EventMgrInstance.emitEvent(n.EVENT_TYPE.Home_Add_Gold,1,o);break;default:l.TipMgr.showToast("\u606d\u559c\u83b7\u5f97\u6c34\u679c\u788e\u7247"),h.PlayerDataMgr.addEquipFragments(t,o)}})},t.prototype.setChapterId=function(e){this.changId=e,this.auto_ui.node_rightNode.active=!0,this.auto_ui.node_leftNode.active=!0,this.updateCharacterData(),this._updateRightLeftNode()},t.prototype.nextLevel=function(){this.ismove||(this.changId+=1,this.setCurrentView(2))},t.prototype.lastLevel=function(){this.ismove||(this.changId-=1,this.setCurrentView(1))},t.prototype.checkAI=function(){var e=this;y.default._instance.isOpen&&y.default._instance.displayClickButton(this.auto_ui.btn_startgame.node,function(){e.onClickStartGame()})},t.prototype._loadRes=function(e,t,i){return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,new Promise(function(o,a){cc.assetManager.loadBundle(e,function(e,n){e?a(e):n.load(t,i,function(e,t){e?a(e):o(t)})})})]})})},__decorate([B(o.default)],t.prototype,"auto_ui",void 0),__decorate([B(cc.Node)],t.prototype,"qiehuanNode",void 0),__decorate([B(cc.Node)],t.prototype,"boshuaward",void 0),__decorate([B(cc.Node)],t.prototype,"awardNode",void 0),__decorate([B(cc.Label)],t.prototype,"saodangLb",void 0),__decorate([B(cc.Node)],t.prototype,"playicon",void 0),__decorate([B(cc.Label)],t.prototype,"shaodanglb",void 0),__decorate([B(cc.Label)],t.prototype,"kaishilb",void 0),__decorate([B(cc.Label)],t.prototype,"zhangjieLb",void 0),__decorate([C],t)}(s.default);i.default=x,cc._RF.pop()},{"./ADManager":"ADManager","./AIControl":"AIControl","./BaseModule":"BaseModule","./BundleConfig":"BundleConfig","./Const_Hall":"Const_Hall","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./HallGlobalVariable":"HallGlobalVariable","./LogManager":"LogManager","./Module_Fighting_UIBindings":"Module_Fighting_UIBindings","./PlayerDataManager":"PlayerDataManager","./TipsManager":"TipsManager","./UIConfig_Game":"UIConfig_Game","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager","./UIRotate":"UIRotate","./UI_BoxAward":"UI_BoxAward"}],Module_News_RedPoint:[function(e,t,i){"use strict";cc._RF.push(t,"1deecG8l11ILYuGkJzNgrKi","Module_News_RedPoint"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./EventManager"),a=e("./ResKeeper"),n=e("./EvenType"),r=e("./PlayerDataManager"),s=e("./GameDataManager"),c=cc._decorator,l=c.ccclass,u=(c.property,c.inspector,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEnable=function(){o.EventMgrInstance.addListener(n.EVENT_TYPE.GAME_TIAOZHAN_COUNT,this.updateUI,this),o.EventMgrInstance.addListener(n.EVENT_TYPE.Game_PASS,this.updateUI,this),this.updateUI()},t.prototype.onDisable=function(){o.EventMgrInstance.removeListener(n.EVENT_TYPE.GAME_TIAOZHAN_COUNT,this.updateUI,this),o.EventMgrInstance.removeListener(n.EVENT_TYPE.Game_PASS,this.updateUI,this)},t.prototype.updateUI=function(){var e=s.GameDataMgr.getCurrentMaxLevel(),t=r.PlayerDataMgr.getWuJinCount();this.node.children[0].active=e>=4&&t>0},__decorate([l],t)}(a.default));i.default=u,cc._RF.pop()},{"./EvenType":"EvenType","./EventManager":"EventManager","./GameDataManager":"GameDataManager","./PlayerDataManager":"PlayerDataManager","./ResKeeper":"ResKeeper"}],Module_News:[function(e,t,i){"use strict";cc._RF.push(t,"8e920nBVzVItZud5jPSBcM7","Module_News"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./BundleConfig"),a=e("./EventManager"),n=e("./UIManager"),r=e("./TimeUtils"),s=e("./EvenType"),c=e("./PlayerDataManager"),l=e("./GameDataManager"),u=e("./GameGlobalVariable"),d=e("./UIConfig_Home"),h=e("./BaseModule"),p=cc._decorator,_=p.ccclass,g=p.property,f=(p.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.wujintime=null,t.wujincount=null,t.wujinLock=null,t.jiesuoTip=null,t}return __extends(t,e),t.prototype.onEnable=function(){a.EventMgrInstance.addListener(s.EVENT_TYPE.GAME_TIAOZHAN_COUNT,this.initializeWuJinUI,this),this.initializeWuJinUI(),-1===u.GameGlobalVariable.nowlevel&&(this.displayTiaoZhan(),u.GameGlobalVariable.nowlevel=1)},t.prototype.onDisable=function(){a.EventMgrInstance.removeListener(s.EVENT_TYPE.GAME_TIAOZHAN_COUNT,this.initializeWuJinUI,this)},t.prototype.show=function(){this.initializeWuJinUI()},t.prototype.hide=function(){},t.prototype.initializeWuJinUI=function(){this.jiesuoTip&&(this.jiesuoTip.string="\u901a\u5173\u7b2c"+u.GameGlobalVariable.wujinunlockcount+"\u7ae0\u89e3\u9501"),this.wujinLock&&(this.wujinLock.active=l.GameDataMgr.getCurrentMaxLevel()<u.GameGlobalVariable.wujinunlockcount);var e=c.PlayerDataMgr.getWuJinCount();this.wujincount&&(this.wujincount.string="\u4eca\u65e5\u5269\u4f59"+e+"\u6b21")},t.prototype.displayTiaoZhan=function(){n.default.open(o.BundleNames.Home,d.UIView_Home.UI_WuJinTiaoZhan)},t.prototype.displayTip=function(){n.default.open(o.BundleNames.Home,d.UIView_Home.UI_ShuoMing)},t.prototype.update=function(){this.wujintime&&(this.wujintime.string=r.default.convertSecondsToHMS(r.default.getMillisecondsUntilMidnight()/1e3))},__decorate([g(cc.Label)],t.prototype,"wujintime",void 0),__decorate([g(cc.Label)],t.prototype,"wujincount",void 0),__decorate([g(cc.Node)],t.prototype,"wujinLock",void 0),__decorate([g(cc.Label)],t.prototype,"jiesuoTip",void 0),__decorate([_],t)}(h.default));i.default=f,cc._RF.pop()},{"./BaseModule":"BaseModule","./BundleConfig":"BundleConfig","./EvenType":"EvenType","./EventManager":"EventManager","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./PlayerDataManager":"PlayerDataManager","./TimeUtils":"TimeUtils","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager"}],Module_Shop_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"10a9eqXQzlIVZ+4YQAWziSE","Module_Shop_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.txt_todayResetTimeLabel=null,t.txt_todayLastCountLabel=null,t.txt_boxLevelLabel=null,t.txt_boxExpLabel=null,t.btn_ResetTodayBtn=null,t.btn_boxExpInfoBtn=null,t.node_todayFather=null,t.node_boxFather=null,t.node_goldFather=null,t.progress_boxExpBar=null,t._btnNames=["btn_ResetTodayBtn","btn_boxExpInfoBtn"],t}return __extends(t,e),__decorate([r(cc.Label)],t.prototype,"txt_todayResetTimeLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_todayLastCountLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_boxLevelLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_boxExpLabel",void 0),__decorate([r(cc.Button)],t.prototype,"btn_ResetTodayBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_boxExpInfoBtn",void 0),__decorate([r(cc.Node)],t.prototype,"node_todayFather",void 0),__decorate([r(cc.Node)],t.prototype,"node_boxFather",void 0),__decorate([r(cc.Node)],t.prototype,"node_goldFather",void 0),__decorate([r(cc.ProgressBar)],t.prototype,"progress_boxExpBar",void 0),__decorate([n("Module_Shop_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],Module_Shop:[function(e,t,i){"use strict";cc._RF.push(t,"2e583j3h4NKD4Q4Ya9n3v1I","Module_Shop"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./BundleConfig"),a=e("./ADManager"),n=e("./EventManager"),r=e("./ResLoader"),s=e("./UIManager"),c=e("./TimeUtils"),l=e("./Module_Shop_UIBindings"),u=e("./EvenType"),d=e("./Excel"),h=e("./HallManager"),p=e("./Item_Shop_BoxItem"),_=e("./Item_Shop_GoldItem"),g=e("./Item_Shop_TodayItem"),f=e("./BaseModule"),m=e("./UIConfig_Home"),v=cc._decorator,y=v.ccclass,b=v.property,I=(v.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.formattedTimeString="",t}return __extends(t,e),t.prototype.onLoad=function(){n.EventMgrInstance.addListener(u.EVENT_TYPE.HallResetShopBox,this.resetBoxLevelAndExp,this),n.EventMgrInstance.addListener(u.EVENT_TYPE.HallScrollShop,this.handleEventScroll,this)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),n.EventMgrInstance.removeListener(u.EVENT_TYPE.HallResetShopBox,this.resetBoxLevelAndExp,this),n.EventMgrInstance.removeListener(u.EVENT_TYPE.HallScrollShop,this.handleEventScroll,this)},t.prototype.show=function(e){this.auto_ui.addClickListener(this._clickListener,this),this.initializeSettings(e)},t.prototype.handleEventScroll=function(e){e&&(e.isUp?this.node.getChildByName("ScrollView_Main").getComponent(cc.ScrollView).scrollToTop(.2):e.isBottom&&this.node.getChildByName("ScrollView_Main").getComponent(cc.ScrollView).scrollToBottom(.2))},t.prototype.hide=function(){},t.prototype.initializeSettings=function(e){var t=this;void 0===e&&(e=null);var i=d.Excel.shopControl(1),o=this.auto_ui,a=h.HallMgr.checkNextResetTime();this.showTimeLabel(a),o.btn_ResetTodayBtn.interactable=i.lastResetCount-h.HallMgr.shopData.todayResetCount>0,o.txt_todayResetTimeLabel.node.stopAllActions(),o.txt_todayResetTimeLabel.node.runAction(cc.repeat(cc.sequence(cc.delayTime(1),cc.callFunc(function(){a--,t.showTimeLabel(a),a<0&&t.initializeSettings()})),a)),o.txt_todayLastCountLabel.string=""+(i.lastResetCount-h.HallMgr.shopData.todayResetCount),this.resetBoxLevelAndExp(),this.showTodayItem().then(function(){t.showBoxItem().then(function(){t.showGoldItem().then(function(){e&&t.scheduleOnce(function(){t.handleEventScroll(e)})})})})},t.prototype.showTodayItem=function(){return __awaiter(this,void 0,Promise,function(){var e,t,i;return __generator(this,function(a){switch(a.label){case 0:return 0!==(e=this.auto_ui.node_todayFather).childrenCount?[3,2]:[4,r.default.loadRes(o.BundleNames.Home,"item/item_shop_todayItem",cc.Prefab)];case 1:for(t=a.sent(),i=0;i<6;i++)e.addChild(cc.instantiate(t));a.label=2;case 2:return e.children.forEach(function(e,t){e.getComponent(g.default).initializeSettings(t)}),[2]}})})},t.prototype.showBoxItem=function(){return __awaiter(this,void 0,Promise,function(){var e,t,i,a=this;return __generator(this,function(n){switch(n.label){case 0:return 0!==(e=this.auto_ui.node_boxFather).childrenCount?[3,2]:[4,r.default.loadRes(o.BundleNames.Home,"item/item_shop_boxItem",cc.Prefab)];case 1:for(t=n.sent(),i=0;i<2;i++)e.addChild(cc.instantiate(t));n.label=2;case 2:return e.children.forEach(function(e,t){e.getComponent(p.default).initialize(t,a.auto_ui.txt_todayResetTimeLabel)}),[2]}})})},t.prototype.showGoldItem=function(){return __awaiter(this,void 0,Promise,function(){var e,t,i;return __generator(this,function(a){switch(a.label){case 0:return 0!==(e=this.auto_ui.node_goldFather).childrenCount?[3,2]:[4,r.default.loadRes(o.BundleNames.Home,"item/item_shop_goldItem",cc.Prefab)];case 1:for(t=a.sent(),i=0;i<3;i++)e.addChild(cc.instantiate(t));a.label=2;case 2:return e.children.forEach(function(e,t){e.getComponent(_.default).initializeSettings(t)}),[2]}})})},t.prototype.showTimeLabel=function(e){this.formattedTimeString=c.default.convertSecondsToHMS(e),this.auto_ui.txt_todayResetTimeLabel.string=this.formattedTimeString},t.prototype._clickListener=function(e){switch(e){case this.auto_ui.btn_ResetTodayBtn:this.resetTodayShop();break;case this.auto_ui.btn_boxExpInfoBtn:s.default.open(o.BundleNames.Home,m.UIView_Home.UI_BoxLevelInfo)}},t.prototype.resetTodayShop=function(){var e=this,t=d.Excel.shopControl(1);t.lastResetCount-h.HallMgr.shopData.todayResetCount>0?a.ADMgr.showRewardedVideoAd("\u5546\u57ce\u89c6\u9891\u5237\u65b0\u6bcf\u65e5\u5546\u5e97",function(){h.HallMgr.shopData.todayResetCount++,h.HallMgr.ResetTodayShop(),e.showTodayItem();var i=t.lastResetCount-h.HallMgr.shopData.todayResetCount;e.auto_ui.txt_todayLastCountLabel.string=""+i,e.auto_ui.btn_ResetTodayBtn.interactable=i>0}):this.auto_ui.btn_ResetTodayBtn.interactable=!1},t.prototype.resetBoxLevelAndExp=function(){for(var e=d.Excel.shopBoxLevel(h.HallMgr.shopData.boxLevel+1);h.HallMgr.shopData.boxExp>=e.exp&&e.exp>0;)h.HallMgr.shopData.boxLevel++,h.HallMgr.shopData.boxExp-=e.exp,e=d.Excel.shopBoxLevel(h.HallMgr.shopData.boxLevel+1);this.auto_ui.txt_boxLevelLabel.string="LV."+(h.HallMgr.shopData.boxLevel+1),e&&e.exp?(this.auto_ui.txt_boxExpLabel.string=h.HallMgr.shopData.boxExp+"/"+e.exp,this.auto_ui.progress_boxExpBar.progress=h.HallMgr.shopData.boxExp/e.exp):(this.auto_ui.txt_boxExpLabel.string="MAX",this.auto_ui.progress_boxExpBar.progress=1)},__decorate([b(l.default)],t.prototype,"auto_ui",void 0),__decorate([y],t)}(f.default));i.default=I,cc._RF.pop()},{"./ADManager":"ADManager","./BaseModule":"BaseModule","./BundleConfig":"BundleConfig","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./HallManager":"HallManager","./Item_Shop_BoxItem":"Item_Shop_BoxItem","./Item_Shop_GoldItem":"Item_Shop_GoldItem","./Item_Shop_TodayItem":"Item_Shop_TodayItem","./Module_Shop_UIBindings":"Module_Shop_UIBindings","./ResLoader":"ResLoader","./TimeUtils":"TimeUtils","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager"}],Module_WareHouse_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"c5294f5X9REn4IxWuNoEbRh","Module_WareHouse_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txt_allCountLabel=null,t.node_dressupFather=null,t.node_scrollView=null,t.node_unLockFather=null,t.node_lockFather=null,t.node_clickCardNode=null,t.node_dragView=null,t.node_dragFather=null,t}return __extends(t,e),__decorate([r(cc.Label)],t.prototype,"txt_allCountLabel",void 0),__decorate([r(cc.Node)],t.prototype,"node_dressupFather",void 0),__decorate([r(cc.Node)],t.prototype,"node_scrollView",void 0),__decorate([r(cc.Node)],t.prototype,"node_unLockFather",void 0),__decorate([r(cc.Node)],t.prototype,"node_lockFather",void 0),__decorate([r(cc.Node)],t.prototype,"node_clickCardNode",void 0),__decorate([r(cc.Node)],t.prototype,"node_dragView",void 0),__decorate([r(cc.Node)],t.prototype,"node_dragFather",void 0),__decorate([n("Module_WareHouse_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],Module_WareHouse:[function(e,t,i){"use strict";cc._RF.push(t,"03b78n6L8hHULuOjOq/Xt1C","Module_WareHouse"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./EventManager"),a=e("./Module_WareHouse_UIBindings"),n=e("./AIControl"),r=e("./GuideControl"),s=e("./RedPointControl"),c=e("./EvenType"),l=e("./PlayerDataManager"),u=e("./Excel"),d=e("./Logic_ChildMoveEvent"),h=e("./HallGlobalVariable"),p=e("./Item_Bag_EquipItem"),_=e("./UI_Hall"),g=e("./BaseModule"),f=e("./Const_Common"),m=e("./Const_Hall"),v=cc._decorator,y=v.ccclass,b=v.property,I=(v.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.equipItem=null,t.dragnode=null,t.dragStartPos=null,t.dragShuiGuoId=null,t.shuiGuoArray=[],t.upLevelMap=null,t.aiCurrUnLockArray=[],t.aiCurrDressUpArray=[],t}return __extends(t,e),t.prototype.onLoad=function(){o.EventMgrInstance.addListener(c.EVENT_TYPE.HallBagShowDrag,this.showDrag,this),o.EventMgrInstance.addListener(c.EVENT_TYPE.HallBagRemoveId,this.removeHero,this),o.EventMgrInstance.addListener(c.EVENT_TYPE.HallResetBag,this.resetThis,this),o.EventMgrInstance.addListener(c.EVENT_TYPE.ResetWareHouseAI,this.resetAIEvent,this)},t.prototype.onDestroy=function(){e.prototype.onDestroy.call(this),o.EventMgrInstance.removeListener(c.EVENT_TYPE.HallBagShowDrag,this.showDrag,this),o.EventMgrInstance.removeListener(c.EVENT_TYPE.HallBagRemoveId,this.removeHero,this),o.EventMgrInstance.removeListener(c.EVENT_TYPE.HallResetBag,this.resetThis,this),o.EventMgrInstance.removeListener(c.EVENT_TYPE.ResetWareHouseAI,this.resetAIEvent,this)},t.prototype.show=function(){var e=this;this.initialize(),this.scheduleOnce(function(){if(l.PlayerDataMgr.getGuideIndexByTaskName(f.GuideName.EquipLevelUp)==f.UpEquipLevelGuideIndex.GuideClickWarehouseFruit2){var t=e.auto_ui.node_dressupFather.children[0];if(t){var i=t.convertToWorldSpaceAR(cc.v2(0,0)),o=cc.size(t.width,t.height);r.GuideCtrlInstance.showGuide({callBack:function(){l.PlayerDataMgr.setGuideIndex(f.GuideName.EquipLevelUp,f.UpEquipLevelGuideIndex.GuideClickUpgrade3),t.getComponent(p.default).openInfo()},wPos:i,size:o})}}else l.PlayerDataMgr.getGuideIndexByTaskName(f.GuideName.FruitDressUpEquip)==f.DressUpEquipGuideIndex.SelectFruit?e.scheduleOnce(function(){var t=e.auto_ui.node_unLockFather.children[0];if(t){var i=t.convertToWorldSpaceAR(cc.v2(0,0)),o=cc.size(t.width,t.height);r.GuideCtrlInstance.showGuide({callBack:function(){l.PlayerDataMgr.setGuideIndex(f.GuideName.FruitDressUpEquip,f.DressUpEquipGuideIndex.GuideDressing),t.getComponent(p.default).openInfo()},wPos:i,size:o})}},.15):e.checkAI()})},t.prototype.hide=function(){},t.prototype.onEnable=function(){h.default.isNeedResetWareHouse&&this.upLevelMap&&this.resetThis()},t.prototype.resetThis=function(){h.default.isNeedResetWareHouse=!1,this.ShowDragView(!1),this.resetDressUp(),this.resetUnLock(),this.checkAI(),this.resetLock()},t.prototype.initialize=function(){var e=this;this.upLevelMap||(this.shuiGuoArray=[],u.Excel.shuiguo_all.forEach(function(t){-1!==t.isShow&&e.shuiGuoArray.push(t)}),this.upLevelMap=new Map,u.Excel.shuiguo_all.forEach(function(t){-1!==t.isShow&&e.upLevelMap.set(t.id,[])}),u.Excel.shuiguolevel_all.forEach(function(t){e.upLevelMap.get(t.shuiguoId).push(t)})),this.ShowDragView(!1),this.resetDressUp(),this.resetUnLock(),this.resetLock()},t.prototype.resetDressUp=function(){this.auto_ui.node_dressupFather.children.forEach(function(e){e.active=!1});for(var e=0,t=l.PlayerDataMgr.dressUpArray,i=u.Excel.wareHouseControl(1).unLockArray,o=0;o<t.length;o++){var a=t[o],n=void 0;o<this.auto_ui.node_dressupFather.childrenCount?n=this.auto_ui.node_dressupFather.children[o]:(n=cc.instantiate(this.equipItem)).parent=this.auto_ui.node_dressupFather,n.active=!0;var r=n.getComponent(p.default),s=new m.BagEquipShowData;s.shuiGuoId=a,-1===a&&(s.unLockChar=i[o]),a>0&&(e++,s.upLevelDatas=this.upLevelMap.get(a)),r.startSet(s)}this.auto_ui.txt_allCountLabel.string=e+"/"+t.length},t.prototype.resetUnLock=function(){this.auto_ui.node_unLockFather.children.forEach(function(e){e.active=!1}),this.shuiGuoArray.sort(function(e,t){return t.quality-e.quality});for(var e=l.PlayerDataMgr.dressUpArray,t=0,i=0;i<this.shuiGuoArray.length;i++){var o=this.shuiGuoArray[i].id;if(l.PlayerDataMgr.getEquipDataById(o).isUnLock&&-1===e.indexOf(o)){var a=void 0;t<this.auto_ui.node_unLockFather.childrenCount?a=this.auto_ui.node_unLockFather.children[t]:(a=cc.instantiate(this.equipItem)).parent=this.auto_ui.node_unLockFather,a.active=!0;var n=a.getComponent(p.default),r=new m.BagEquipShowData;r.shuiGuoId=o,r.upLevelDatas=this.upLevelMap.get(o),n.startSet(r),t++}}this.auto_ui.node_unLockFather.active=t>0,this.auto_ui.node_unLockFather.parent.getChildByName("\u5df2\u89e3\u9501").active=t>0},t.prototype.resetLock=function(){this.auto_ui.node_lockFather.children.forEach(function(e){e.active=!1});for(var e=0,t=[],i=0;i<this.shuiGuoArray.length;i++){var o=(a=this.shuiGuoArray[i]).id;l.PlayerDataMgr.getEquipDataById(o).isUnLock||t.push(a)}for(t.sort(function(e,t){return e.unLock-t.unLock}),i=0;i<t.length;i++){var a=t[i],n=void 0;e<this.auto_ui.node_lockFather.childrenCount?n=this.auto_ui.node_lockFather.children[e]:(n=cc.instantiate(this.equipItem)).parent=this.auto_ui.node_lockFather,n.active=!0;var r=n.getComponent(p.default),s=new m.BagEquipShowData;s.shuiGuoId=a.id,s.upLevelDatas=this.upLevelMap.get(a.id),r.startSet(s),e++}this.auto_ui.node_lockFather.active=e>0,this.auto_ui.node_lockFather.parent.getChildByName("\u672a\u89e3\u9501").active=e>0},t.prototype.showDrag=function(e){this.ShowDragView(!0),this.dragnode||(this.dragnode=cc.instantiate(this.equipItem),this.dragnode.parent=this.auto_ui.node_dragFather,this.dragnode.setPosition(0,0),this.auto_ui.node_dragFather.addComponent(d.default).startSet(this.onChildTouchStart.bind(this),this.onChildTouchMove.bind(this),this.onChildTouchUp.bind(this)),this.auto_ui.node_clickCardNode.addComponent(d.default).startSet(this.onChildTouchStart.bind(this),this.onChildTouchMove.bind(this),this.onChildTouchUp.bind(this)),this.dragStartPos=this.auto_ui.node_dragFather.getPosition()),this.dragnode.active=!0;var t=new m.BagEquipShowData;t.shuiGuoId=e,t.upLevelDatas=this.upLevelMap.get(e),this.dragnode.getComponent(p.default).startSet(t,!1),this.dragShuiGuoId=e,n.default._instance.isOpen&&this.changeOneItem()},t.prototype.onChildTouchStart=function(e){e.target===this.auto_ui.node_dragFather&&this.auto_ui.node_dragFather.setPosition(this.auto_ui.node_dragFather.parent.convertToNodeSpaceAR(e.getLocation()))},t.prototype.onChildTouchMove=function(e){e.target===this.auto_ui.node_dragFather&&this.auto_ui.node_dragFather.setPosition(this.auto_ui.node_dragFather.parent.convertToNodeSpaceAR(e.getLocation()))},t.prototype.onChildTouchUp=function(e){for(var t=this.auto_ui.node_dressupFather.convertToNodeSpaceAR(e.getLocation()),i=0;i<this.auto_ui.node_dressupFather.children.length;i++){var a=this.auto_ui.node_dressupFather.children[i];if(cc.Vec2.distance(t,a.getPosition())<100){var n=a.getComponent(p.default);if(-1===l.PlayerDataMgr.globalData.dressUpArray[i])break;n.openData.shuiGuoId>0&&l.PlayerDataMgr.removeDressUpEquip(n.openData.shuiGuoId,i),l.PlayerDataMgr.addDressUpEquip(this.dragShuiGuoId,i),o.EventMgrInstance.emitEvent(c.EVENT_TYPE.MainRedPointChange,s.RedPointType.upEquip),this.resetDressUp(),this.resetUnLock(),this.ShowDragView(!1);break}}e.target===this.auto_ui.node_dragFather&&this.auto_ui.node_dragFather.setPosition(this.dragStartPos)},t.prototype.removeHero=function(e){e>0&&l.PlayerDataMgr.removeDressUpEquip(e),this.resetDressUp(),this.resetUnLock()},t.prototype.ShowDragView=function(e){this.auto_ui.node_scrollView.active=!e,this.auto_ui.node_dragView.active=e,this.auto_ui.node_clickCardNode.active=e,this.showScaleTween(e)},t.prototype.showScaleTween=function(e){this.auto_ui.node_dressupFather.children.forEach(function(t){t.stopAllActions(),t.scale=1,e&&t.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.8,1.1,1.1),cc.scaleTo(.8,.9,.9))))})},t.prototype.resetAIEvent=function(){var e=this;o.EventMgrInstance.emitEvent(c.EVENT_TYPE.MainRedPointChange,s.RedPointType.upEquip),this.scheduleOnce(function(){e.checkAI()},n.default._instance.aiCDTime)},t.prototype.checkAI=function(){var e=this;n.default._instance.isOpen&&this.scheduleOnce(function(){e.checkNeedDressUp()?e.dressUpOneItem():e.upgradeOneItem()||n.default._instance.displayClickButton(_.default._instance.auto_ui.btn_fightingBtn.node,function(){_.default._instance.showViewByType(2)})})},t.prototype.checkNeedDressUp=function(){if(l.PlayerDataMgr.dressUpArray.filter(function(e){return 0===e}).length>0){this.aiCurrUnLockArray=[];for(var e=0,t=null,i=0;i<this.auto_ui.node_unLockFather.children.length;i++){var o=this.auto_ui.node_unLockFather.children[i],a=u.Excel.shuiguo(o.getComponent(p.default).openData.shuiGuoId);a.quality>e&&(t=a,e=a.quality)}return this.aiCurrUnLockArray=[t],!0}this.aiCurrDressUpArray=[],this.aiCurrUnLockArray=[],this.shuiGuoArray.sort(function(e,t){return t.quality-e.quality});var n=l.PlayerDataMgr.dressUpArray;for(i=0;i<this.shuiGuoArray.length;i++){var r=this.shuiGuoArray[i],s=r.id;l.PlayerDataMgr.getEquipDataById(s).isUnLock&&(-1===n.indexOf(s)?this.aiCurrUnLockArray.push(r):this.aiCurrDressUpArray.push(r))}return this.aiCurrDressUpArray[this.aiCurrDressUpArray.length-1].quality<this.aiCurrUnLockArray[0].quality},t.prototype.dressUpOneItem=function(){for(var e=this,t=function(t){var i=e.auto_ui.node_unLockFather.children[t];if(i.getComponent(p.default).openData.shuiGuoId===e.aiCurrUnLockArray[0].id)return n.default._instance.displayClickButton(i,function(){i.getComponent(p.default).openInfo(!0)}),{value:void 0}},i=0;i<this.auto_ui.node_unLockFather.children.length;i++){var o=t(i);if(o)return o.value}},t.prototype.changeOneItem=function(){for(var e=function(e){var t=this.auto_ui.node_dressupFather.children[e];if(t.getComponent(p.default).openData.shuiGuoId==this.aiCurrDressUpArray[this.aiCurrDressUpArray.length-1].id){var i=t.getComponent(p.default);return-1==l.PlayerDataMgr.globalData.dressUpArray[e]?"break":(n.default._instance.displayClickButton(t,function(){i.openData.shuiGuoId>0&&l.PlayerDataMgr.removeDressUpEquip(i.openData.shuiGuoId,e),l.PlayerDataMgr.addDressUpEquip(this.dragShuiGuoId,e),this.ResetDressUp(),this.ResetUnLock(),this.ShowDragView(!1),this.AICheck()}),{value:void 0})}},t=0;t<this.auto_ui.node_dressupFather.children.length;t++){var i=e(t);if("object"==typeof i)return i.value;if("break"===i)break}},t.prototype.upgradeOneItem=function(){for(var e=function(e){n.default._instance.displayClickButton(e.node,function(){e.openInfo()})},t=0;t<this.auto_ui.node_dressupFather.children.length;t++)if((i=this.auto_ui.node_dressupFather.children[t].getComponent(p.default)).canUpgrade())return e(i),!0;for(t=0;t<this.auto_ui.node_unLockFather.children.length;t++){var i;if((i=this.auto_ui.node_unLockFather.children[t].getComponent(p.default)).canUpgrade())return e(i),!0}return!1},__decorate([b(a.default)],t.prototype,"auto_ui",void 0),__decorate([b(cc.Prefab)],t.prototype,"equipItem",void 0),__decorate([y],t)}(g.default));i.default=I,cc._RF.pop()},{"./AIControl":"AIControl","./BaseModule":"BaseModule","./Const_Common":"Const_Common","./Const_Hall":"Const_Hall","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GuideControl":"GuideControl","./HallGlobalVariable":"HallGlobalVariable","./Item_Bag_EquipItem":"Item_Bag_EquipItem","./Logic_ChildMoveEvent":"Logic_ChildMoveEvent","./Module_WareHouse_UIBindings":"Module_WareHouse_UIBindings","./PlayerDataManager":"PlayerDataManager","./RedPointControl":"RedPointControl","./UI_Hall":"UI_Hall"}],NodePoolMag:[function(e,t,i){"use strict";cc._RF.push(t,"35d9cwnEtZLALmSvPRIpWvy","NodePoolMag"),Object.defineProperty(i,"__esModule",{value:!0}),i.NodePoolMag=void 0;var o=e("./LogManager"),a=function(){function e(){this.nodePools={},this.prefabs={}}return Object.defineProperty(e,"instance",{get:function(){return this._instance},enumerable:!1,configurable:!0}),e.prototype.createNodePool=function(e,t,i,a){var n=this.nodePools[e];if(n)o.LogMgr.debug("\u5bf9\u8c61\u6c60\u5df2\u7ecf\u521b\u5efa");else{n=new cc.NodePool(a),this.nodePools[e]=n,this.prefabs[e]=i;for(var r=0;r<t;r++){var s=cc.instantiate(i);n.put(s)}}},e.prototype.getNodeFromPool=function(e){var t=this.nodePools[e];if(t&&t.size()>0)return t.get();var i=this.prefabs[e];return i&&i.isValid?cc.instantiate(i):null},e.prototype.recycleNodeToPool=function(e,t){var i=this.nodePools[e];i&&t.isValid?i.put(t):o.LogMgr.debug("\u8282\u70b9\u6c60\u4e0d\u5b58\u5728",e)},e.prototype.clearAllNodePools=function(){for(var e in this.nodePools)this.clearNodePool(e)},e.prototype.clearNodePool=function(e){var t=this.nodePools[e];t&&(t.clear(),delete this.nodePools[e],delete this.prefabs[e])},e._instance=new e,e}();i.NodePoolMag=a,cc._RF.pop()},{"./LogManager":"LogManager"}],ObjectUtils:[function(e,t,i){"use strict";cc._RF.push(t,"66fd19PujBM77bdzEHjLpR3","ObjectUtils"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(){}return e.deepClone=function(e){var t=new WeakMap,i=function(e){if(null===e)return null;var i,a,n=e.constructor;switch(n){case Array:return i=e,a=[],t.set(i,a),i.forEach(function(e){return a.push(o(e))}),a;case Map:return function(e){var i=new Map;return t.set(e,i),e.forEach(function(e,t){return i.set(t,o(e))}),i}(e);case Set:return function(e){var i=new Set;return t.set(e,i),e.forEach(function(e){return i.add(o(e))}),i}(e);case Date:case Number:case String:return new n(e);case Boolean:return new n(e.valueOf());case RegExp:return function(e){var t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}(e)}var r=Object.create(Object.getPrototypeOf(e));return t.set(e,r),Reflect.ownKeys(e).forEach(function(t){var i=Reflect.getOwnPropertyDescriptor(e,t);if(i){var a=__assign({},i);"value"in i&&(a.value=o(e[t])),Reflect.defineProperty(r,t,a)}}),r},o=function(e){return"object"!=typeof e||null===e?e:t.has(e)?t.get(e):i(e)};return o(e)},e.mapToObj=function(e){var t={};return e.forEach(function(e,i){t[i]=e}),t},e.objToMap=function(e){var t=new Map;return Object.keys(e||{}).forEach(function(i){t.set(i,e[i])}),t},e.calculateDiff=function(e,t){var i={};return Object.keys(e).forEach(function(o){e[o]!==t[o]&&(i[o]=t[o])}),i},e}();i.default=o,cc._RF.pop()},{}],PlatformManager:[function(e,t,i){"use strict";cc._RF.push(t,"89aabDoDGhDj42qHnnOSH7n","PlatformManager"),Object.defineProperty(i,"__esModule",{value:!0}),i.PlatformMgr=void 0;var o=e("./SingletonManager"),a=[cc.sys.WECHAT_GAME,cc.sys.ALIPAY_GAME,cc.sys.QTT_GAME,cc.sys.BYTEDANCE_GAME,cc.sys.HUAWEI_GAME,cc.sys.OPPO_GAME,cc.sys.VIVO_GAME,cc.sys.XIAOMI_GAME,cc.sys.BAIDU_GAME,cc.sys.JKW_GAME,cc.sys.LINKSURE],n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.isMiniGame=function(){return a.includes(cc.sys.platform)},t.prototype.isWxGame=function(){return cc.sys.platform===cc.sys.WECHAT_GAME},t.prototype.isDyGame=function(){return cc.sys.platform===cc.sys.BYTEDANCE_GAME},t.prototype.isBrowser=function(){return cc.sys.isBrowser},t}(o.SingletonBase);i.PlatformMgr=n.getInstance(),cc._RF.pop()},{"./SingletonManager":"SingletonManager"}],PlayerDataManager:[function(e,t,i){"use strict";cc._RF.push(t,"1c4d9ifkhtAkYyoZ5hweWCx","PlayerDataManager"),Object.defineProperty(i,"__esModule",{value:!0}),i.PlayerDataMgr=void 0;var o,a=e("./Const_Common"),n=e("./DataManager"),r=e("./EventManager"),s=e("./EvenType"),c=e("./Excel"),l=e("./GameDataManager"),u=e("./GameGlobalVariable"),d=e("./LogManager"),h=e("./RedPointControl"),p=e("./TimeUtils"),_=e("./TipsManager");(function(e){e.global="global"})(o||(o={}));var g=function(){this.power=30,this.maxPower=30,this.gold=0,this.diamond=0,this.equipSaveData={},this.dressUpArray=[0,0,0,0,0,0,-1,-1],this.saveCount=0,this.nextResetTime=0,this.lastAddPowerTime=0,this.addPowerTime=0,this.videoAddPowerTime=0,this.guideMap={},this.guideSendIndex=0,this.wujincount=3,this.wujintime=0,this.saodangcount=3,this.saodangtime=0,this.qiandaocount=0,this.isqiandaocode=1,this.qiandaotime=0},f=function(){this.level=1,this.isUnLock=!1,this.fragments=0},m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._secret_key="playerData",t.globalData=new g,t.WHITE_NAME_NO_VIDEO=!1,t.OPEN_GM=!0,t}return __extends(t,e),Object.defineProperty(t.prototype,"chapter",{get:function(){return l.GameDataMgr.getCurrentMaxLevel()||1},enumerable:!1,configurable:!0}),t.prototype.getGuideIndexByTaskName=function(e){var t=this.globalData.guideMap;return t[e]||(t[e]=0),t[e]},t.prototype.setGuideIndex=function(e,t){var i=this.globalData,o=i.guideMap,n=i.guideSendIndex;if(o[e]||(o[e]=0),t>o[e]){switch(o[e]=t,this.saveGlobalData(),e){case a.GuideName.GameBag:case a.GuideName.EquipLevelUp:break;case a.GuideName.FruitDressUpEquip:}if(e===a.GuideName.GameBag&&t<=n)return;this.globalData.guideSendIndex=t}},t.prototype.gmSetGuideIndex=function(e,t){this.globalData.guideMap[e]=t,this.saveGlobalData()},t.prototype.initialize=function(e){void 0===e&&(e=null),console.log("\u8fdc\u7a0b\u6570\u636e",e),this.globalData=new g;var t=this.getCurrentData(o.global,e);this.globalData=__assign(__assign({},this.globalData),t),console.log("\u672c\u5730\u6570\u636e",this.globalData,t),this.startCheckEquip(),this.checkIfTimeToReset(),this.performOtherChecks(),t||this.playerFirstTime()},t.prototype.getCurrentData=function(e,t){var i=null;return t&&(i=t[e])||(i=this._load(e)),i},t.prototype.performOtherChecks=function(){var e=this,t=c.Excel.wareHouseControl(1).unLockArray,i=this.globalData.dressUpArray;t.forEach(function(t,o){o>=i.length?e.globalData.dressUpArray.push(-1):e.chapter<t?e.globalData.dressUpArray[o]=-1:e.chapter>=t&&-1===i[o]&&(i[o]=0)})},t.prototype.checkIfTimeToReset=function(){var e=Date.now();if(!this.globalData.nextResetTime||e>=this.globalData.nextResetTime){var t=new Date;t.setHours(24,0,0,0),this.globalData.nextResetTime=t.getTime(),this.resetAllDataByTime()}},t.prototype.resetAllDataByTime=function(){this.globalData.addPowerTime=0,this.globalData.videoAddPowerTime=0,this.saveGlobalData()},t.prototype.saveGlobalData=function(){this._save(o.global,this.globalData)},t.prototype.addPower=function(e){this.globalData.power+=e,this.changeWealth()},t.prototype.subtractPower=function(e){return this.globalData.power<e?(_.TipMgr.showToast("\u4f53\u529b\u4e0d\u8db3"),!1):(this.globalData.power>=this.globalData.maxPower&&this.globalData.power-e<this.globalData.maxPower&&(this.globalData.lastAddPowerTime=Date.now()),this.globalData.power-=e,this.changeWealth(),!0)},t.prototype.addGold=function(e){this.globalData.gold+=e,this.changeWealth()},t.prototype.subtractGold=function(e){return this.globalData.gold<e?(_.TipMgr.showToast("\u91d1\u5e01\u4e0d\u8db3"),!1):(this.globalData.gold-=e,this.changeWealth(),!0)},t.prototype.addDiamond=function(e){this.globalData.diamond+=e,this.changeWealth()},t.prototype.subtractDiamond=function(e){return this.globalData.diamond<e?(_.TipMgr.showToast("\u94bb\u77f3\u4e0d\u8db3"),!1):(this.globalData.diamond-=e,this.changeWealth(),!0)},t.prototype.changeWealth=function(){this.saveGlobalData(),r.EventMgrInstance.emitEvent(s.EVENT_TYPE.Hall_ResetRich)},t.prototype.playerFirstTime=function(){var e=this,t=this.chapter;c.Excel.shuiguo_all.forEach(function(i){-1!==i.isShow&&i.unLock<=t&&e.addDressUpEquip(i.id)})},t.prototype.startCheckEquip=function(){var e=this,t=!1,i=this.chapter;c.Excel.shuiguo_all.forEach(function(o){e.globalData.equipSaveData[o.id]||(e.globalData.equipSaveData[o.id]=new f,t=!0),e.globalData.equipSaveData[o.id].isUnLock=i>=o.unLock}),t&&(d.LogMgr.debug("StartCheckEquip \u4fdd\u5b58\u6570\u636e"),this.saveGlobalData())},t.prototype.gameWinCheckUnlock=function(){var e=this,t=[],i=!1,o=this.chapter;return c.Excel.shuiguo_all.forEach(function(a){!e.globalData.equipSaveData[a.id].isUnLock&&o>=a.unLock&&(e.globalData.equipSaveData[a.id].isUnLock=!0,i=!0,t.push(a.id))}),i&&(this.saveGlobalData(),this.performOtherChecks()),t},Object.defineProperty(t.prototype,"dressUpArray",{get:function(){return this.globalData.dressUpArray},enumerable:!1,configurable:!0}),t.prototype.hallGetEquipIsDressUp=function(e){return!!c.Excel.shuiguo(e)&&this.dressUpArray.includes(e)},t.prototype.getEquipIsDressUp=function(e){var t=c.Excel.shuiguo(e);return!t||this.dressUpArray.includes(e)||-1===t.isShow},t.prototype.addDressUpEquip=function(e,t){void 0===t&&(t=-1);var i=this.globalData.dressUpArray;if(-1===t){for(var o=0;o<i.length;o++)if(0===i[o]){t=o;break}if(-1===t)return}i[t]=e,this.saveGlobalData(),r.EventMgrInstance.emitEvent(s.EVENT_TYPE.MainRedPointChange,h.RedPointType.upEquip)},t.prototype.removeDressUpEquip=function(e,t){void 0===t&&(t=-1);var i=this.globalData.dressUpArray;if(-1===t){for(var o=0;o<i.length;o++)if(i[o]===e){t=o;break}if(-1===t)return}i[t]=0,this.saveGlobalData(),r.EventMgrInstance.emitEvent(s.EVENT_TYPE.MainRedPointChange,h.RedPointType.upEquip)},t.prototype.addEquipLevel=function(e){var t=this.globalData.equipSaveData[e];t&&t.isUnLock&&(t.level++,this.saveGlobalData())},t.prototype.addEquipFragments=function(e,t){this.globalData.equipSaveData[e].fragments+=t,this.saveGlobalData(),h.RedPointCtrl.getRedPointStatusByType(h.RedPointType.upEquip)&&r.EventMgrInstance.emitEvent(s.EVENT_TYPE.MainRedPointChange,h.RedPointType.upEquip)},t.prototype.useEquipFragments=function(e,t){var i=this.globalData.equipSaveData[e];return i.fragments<t?(_.TipMgr.showToast("\u788e\u7247\u4e0d\u8db3"),!1):(i.fragments-=t,this.saveGlobalData(),!0)},t.prototype.getEquipDataById=function(e){return this.globalData.equipSaveData[e]},t.prototype.getWuJinCount=function(){return this.resetWuJinCount(),this.globalData.wujincount},t.prototype.subtractWuJinCount=function(e){this.globalData.wujincount-=e,this.saveGlobalData(),r.EventMgrInstance.emitEvent(s.EVENT_TYPE.GAME_TIAOZHAN_COUNT)},t.prototype.resetWuJinCount=function(e){void 0===e&&(e=!1);var t=this.globalData.wujintime;0===t||e?(l.GameDataMgr.clearChallengeLevel(1),this.globalData.wujincount=u.GameGlobalVariable.wujinmeirifreecount,this.globalData.wujintime=Date.now(),this.saveGlobalData()):p.default.areTimestampsOnSameDay(t,Date.now())||(this.globalData.wujincount=u.GameGlobalVariable.wujinmeirifreecount,this.globalData.wujintime=Date.now(),l.GameDataMgr.clearChallengeLevel(1),this.saveGlobalData())},t.prototype.getSaoDangCount=function(){return this.resetSaoDangCount(),this.globalData.saodangcount},t.prototype.subSaoDangCount=function(e){this.globalData.saodangcount-=e,this.saveGlobalData()},t.prototype.resetSaoDangCount=function(){var e=this.globalData.saodangtime;0===e?(this.globalData.saodangcount=u.GameGlobalVariable.meirimianfeicount,this.globalData.saodangtime=Date.now(),this.saveGlobalData()):p.default.areTimestampsOnSameDay(e,Date.now())||(this.globalData.saodangcount=u.GameGlobalVariable.meirimianfeicount,this.globalData.saodangtime=Date.now(),this.saveGlobalData())},t.prototype.getQianDaoCount=function(){return this.globalData.qiandaocount},t.prototype.addQianDaoCount=function(e){this.globalData.qiandaocount+=e,this.globalData.qiandaocount>c.Excel.shuiguoqiandao_all.size&&(this.globalData.qiandaocount=0),this.saveGlobalData(),r.EventMgrInstance.emitEvent(s.EVENT_TYPE.GAME_QianDao_COUNT)},t.prototype.setQianDaoState=function(){this.globalData.isqiandaocode=2,this.addQianDaoCount(1),this.globalData.qiandaotime=Date.now(),this.saveGlobalData(),r.EventMgrInstance.emitEvent(s.EVENT_TYPE.HOME_QIANDAO_UPDATE)},t.prototype.resetData=function(){this._clear()},t.prototype.resetQianDaoCount=function(){var e=this.globalData.qiandaotime;0===e?(this.globalData.isqiandaocode=1,this.saveGlobalData()):p.default.areTimestampsOnSameDay(e,Date.now())||(this.globalData.isqiandaocode=1,this.saveGlobalData())},t}(n.default);i.PlayerDataMgr=m.getInstance(),cc._RF.pop()},{"./Const_Common":"Const_Common","./DataManager":"DataManager","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./LogManager":"LogManager","./RedPointControl":"RedPointControl","./TimeUtils":"TimeUtils","./TipsManager":"TipsManager"}],PosController:[function(e,t,i){"use strict";cc._RF.push(t,"bfb3fc30jZGU6vmFQVQXv9O","PosController"),Object.defineProperty(i,"__esModule",{value:!0}),i.ControllerNode=i.PosNode=void 0;var o=cc._decorator,a=o.ccclass,n=o.property,r=o.menu,s=function(){function e(){this._node=null,this.position=new cc.Vec2(0,0)}return Object.defineProperty(e.prototype,"node",{get:function(){return this._node},set:function(e){this._node=e},enumerable:!1,configurable:!0}),__decorate([n({type:cc.Node,visible:!1})],e.prototype,"_node",void 0),__decorate([n({displayName:"\u8282\u70b9\u5750\u6807"})],e.prototype,"position",void 0),__decorate([n({type:cc.Node,displayName:"\u63a7\u5236\u8282\u70b9"})],e.prototype,"node",null),__decorate([a("PosNode")],e)}();i.PosNode=s;var c=function(){function e(){this.name="",this.nodes=[]}return __decorate([n({displayName:"\u63a7\u5236\u540d\u79f0"})],e.prototype,"name",void 0),__decorate([n({type:[s],displayName:"\u8282\u70b9&\u5750\u6807"})],e.prototype,"nodes",void 0),__decorate([a("ControllerNode")],e)}();i.ControllerNode=c;var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.controllerNodes=[],t._currentIndex=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"choiceIndex",{get:function(){return this._currentIndex},set:function(){},enumerable:!1,configurable:!0}),t.prototype.setSelectionIndex=function(e){if(e>=0&&e<this.controllerNodes.length){this._currentIndex=e;for(var t=0,i=this.controllerNodes[e].nodes;t<i.length;t++){var o=i[t];o.node&&(o.node.x=o.position.x,o.node.y=o.position.y)}}},t.prototype.setSelectionName=function(e){for(var t=0;t<this.controllerNodes.length;t++)if(this.controllerNodes[t].name===e){this._currentIndex=t;for(var i=0,o=this.controllerNodes[t].nodes;i<o.length;i++){var a=o[i];a.node&&(a.node.x=a.position.x,a.node.y=a.position.y)}break}},t.prototype.getSelectionIndex=function(){return this._currentIndex},t.prototype.getSelectionName=function(){return this.controllerNodes[this._currentIndex].name},t.prototype.getControllersByName=function(e){for(var t=0,i=this.controllerNodes;t<i.length;t++){var o=i[t];if(o.name===e)return o.nodes}},__decorate([n({type:[c],displayName:"Controller"})],t.prototype,"controllerNodes",void 0),__decorate([n({type:cc.Integer})],t.prototype,"_currentIndex",void 0),__decorate([n({type:cc.Integer})],t.prototype,"choiceIndex",null),__decorate([a,r("Controller/Position Controller")],t)}(cc.Component);i.default=l,cc._RF.pop()},{}],Province:[function(e,t,i){"use strict";cc._RF.push(t,"c2843BZ5u9HI7BaC0DzoT3D","Province"),Object.defineProperty(i,"__esModule",{value:!0}),i.ProvinceMgr=i.ProvinceMapping=void 0,i.ProvinceMapping={2:"\u5317\u4eac",3:"\u5b89\u5fbd",4:"\u798f\u5efa",5:"\u7518\u8083",6:"\u5e7f\u4e1c",7:"\u5e7f\u897f",8:"\u8d35\u5dde",9:"\u6d77\u5357",10:"\u6cb3\u5317",11:"\u6cb3\u5357",12:"\u9ed1\u9f99\u6c5f",13:"\u6e56\u5317",14:"\u6e56\u5357",15:"\u5409\u6797",16:"\u6c5f\u82cf",17:"\u6c5f\u897f",18:"\u8fbd\u5b81",19:"\u5185\u8499\u53e4",20:"\u5b81\u590f",21:"\u9752\u6d77",22:"\u5c71\u4e1c",23:"\u5c71\u897f",24:"\u9655\u897f",25:"\u4e0a\u6d77",26:"\u56db\u5ddd",27:"\u5929\u6d25",28:"\u897f\u85cf",29:"\u65b0\u7586",30:"\u4e91\u5357",31:"\u6d59\u6c5f",32:"\u91cd\u5e86",33:"\u9999\u6e2f",34:"\u6fb3\u95e8",35:"\u53f0\u6e7e",3409:"\u672a\u77e5"};var o=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.getName=function(e){return i.ProvinceMapping[e]||"\u672a\u77e5"},e}();i.ProvinceMgr=o.getInstance(),cc._RF.pop()},{}],QiPaoTween:[function(e,t,i){"use strict";cc._RF.push(t,"f3e57QSm3JPk6Thi4rC7OMs","QiPaoTween"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./BundleConfig"),a=e("./ResKeeper"),n=e("./GameGlobalVariable"),r=cc._decorator,s=r.ccclass,c=(r.property,r.inspector,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.startSet=function(e){var t=this;e&&this._loadRes(o.BundleNames.Game,"res/bg/"+n.GameGlobalVariable.getSceneId(),cc.SpriteFrame).then(function(e){t.node.getChildByName("node_cellFather").children.forEach(function(t){t.getComponent(cc.Sprite).spriteFrame=e})})},t.prototype._loadRes=function(e,t,i){return new Promise(function(o,a){cc.assetManager.loadBundle(e,function(e,n){e?a(e):n.load(t,i,function(e,t){e?a(e):o(t)})})})},__decorate([s],t)}(a.default));i.default=c,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./GameGlobalVariable":"GameGlobalVariable","./ResKeeper":"ResKeeper"}],RedPointControl:[function(e,t,i){"use strict";cc._RF.push(t,"7f335BguPNLQK98KIkPf7ET","RedPointControl"),Object.defineProperty(i,"__esModule",{value:!0}),i.RedPointCtrl=i.RedPointController=i.RedPointLevel=i.RedPointType=void 0;var o,a=e("./SingletonManager"),n=e("./PlayerDataManager"),r=e("./Excel"),s=e("./HallGlobalVariable"),c=e("./HallManager");(function(e){e[e.freeDiamond=1]="freeDiamond",e[e.freeGold=2]="freeGold",e[e.upEquip=3]="upEquip",e[e.type4=4]="type4",e[e.type5=5]="type5",e[e.type6=6]="type6",e[e.type7=7]="type7"})(o=i.RedPointType||(i.RedPointType={})),function(e){e[e.little=0]="little",e[e.all=1]="all"}(i.RedPointLevel||(i.RedPointLevel={}));var l=function(e){function t(){var t=e.call(this)||this;return t.redPointStatusMap=new Map,t}return __extends(t,e),t.prototype.getRedPointStatusByType=function(e){return this.updateRedPointStatusByType(e),!!this.redPointStatusMap.get(e)&&this.redPointStatusMap.get(e)},t.prototype.updateRedPointStatusByType=function(e){var t=this;switch(e){case o.freeDiamond:this.redPointStatusMap.set(e,0==c.HallMgr.shopData.todayBuyDiamondCount);break;case o.freeGold:this.redPointStatusMap.set(e,0==c.HallMgr.shopData.videoBuyGoldCount);break;case o.upEquip:this.redPointStatusMap.set(e,!1);var i=n.PlayerDataMgr.dressUpArray.filter(function(e){return 0==e});i&&i.length>0?this.redPointStatusMap.set(e,!0):r.Excel.shuiguo_all.forEach(function(i){var o=n.PlayerDataMgr.getEquipDataById(i.id);if(o&&o.isUnLock){var a=s.default.getShuiGuoLevelMap.get(i.id);a&&o.level<=a.length&&o.fragments>=a[o.level-1].shengjixiaohao&&t.redPointStatusMap.set(e,!0)}})}},t}(a.SingletonBase);i.RedPointController=l,i.RedPointCtrl=l.getInstance(),cc._RF.pop()},{"./Excel":"Excel","./HallGlobalVariable":"HallGlobalVariable","./HallManager":"HallManager","./PlayerDataManager":"PlayerDataManager","./SingletonManager":"SingletonManager"}],RedPointItem:[function(e,t,i){"use strict";cc._RF.push(t,"1f3914JiT5AZ7UGVcVS/4lR","RedPointItem"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./EventManager"),a=e("./ResKeeper"),n=e("./EvenType"),r=e("./RedPointControl"),s=cc._decorator,c=s.ccclass,l=s.property,u=(s.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.redPoints=[],t.redPointNode=null,t}return __extends(t,e),t.prototype.onEnable=function(){this.displayRedPoint(),o.EventMgrInstance.addListener(n.EVENT_TYPE.MainRedPointChange,this.handleRedPointChange,this)},t.prototype.onDisable=function(){o.EventMgrInstance.removeListener(n.EVENT_TYPE.MainRedPointChange,this.handleRedPointChange,this)},t.prototype.displayRedPoint=function(){var e=this.redPoints.some(function(e){return r.RedPointCtrl.getRedPointStatusByType(e)});this.redPointNode.active=e},t.prototype.handleRedPointChange=function(e){e&&this.redPoints.includes(e)&&this.displayRedPoint()},__decorate([l({type:[cc.Enum(r.RedPointType)],tooltip:"\u9700\u8981\u5b8c\u6210\u7684\u7ea2\u70b9\u7c7b\u578b"})],t.prototype,"redPoints",void 0),__decorate([l(cc.Node)],t.prototype,"redPointNode",void 0),__decorate([c],t)}(a.default));i.default=u,cc._RF.pop()},{"./EvenType":"EvenType","./EventManager":"EventManager","./RedPointControl":"RedPointControl","./ResKeeper":"ResKeeper"}],ResKeeper:[function(e,t,i){"use strict";cc._RF.push(t,"e7548uPzG1IHbJAG5JOhIeu","ResKeeper"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./LogManager"),a=e("./ResLoader"),n=cc._decorator.ccclass,r=function(e){function t(){var t=e.call(this)||this;return t._autoResList=[],t}return __extends(t,e),t.prototype._loadRes=function(e,t,i){var o=this;return new Promise(function(n){a.default.loadRes(e,t,i).then(function(e){e&&o.autoReleaseRes(e),n(e)})})},t.prototype.onDestroy=function(){var e=this._autoResList.map(function(e){return e.name});o.LogMgr.debug("auto release all resources: "+JSON.stringify(e)),this._releaseAutoResList()},t.prototype._releaseAutoResList=function(){for(var e=0,t=this._autoResList;e<t.length;e++)t[e].decRef();this._autoResList.length=0},t.prototype.autoReleaseRes=function(e){e.addRef(),this._autoResList.push(e)},__decorate([n],t)}(cc.Component);i.default=r,cc._RF.pop()},{"./LogManager":"LogManager","./ResLoader":"ResLoader"}],ResLoader:[function(e,t,i){"use strict";cc._RF.push(t,"6bb26tYPddGS7YfeSGyasL8","ResLoader"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./BundleConfig"),a=e("./LogManager"),n=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.loadBundle=function(e){return new Promise(function(t){var i=cc.assetManager.getBundle(e);e===o.BundleNames.Resouce&&(i=cc.resources),i?t(i):cc.assetManager.loadBundle(e,function(i,o){i?(a.LogMgr.error("Failed to load bundle: "+e),t(null)):t(o)})})},t.prototype.loadRes=function(e,t,i){var o=this;return new Promise(function(n){return __awaiter(o,void 0,void 0,function(){var o,r;return __generator(this,function(s){switch(s.label){case 0:return"string"!=typeof e?[3,2]:[4,this.loadBundle(e)];case 1:return r=s.sent(),[3,3];case 2:r=e,s.label=3;case 3:return(o=r)?o.load(t,i,function(i,o){i?(a.LogMgr.error("Failed to load res: bundle: "+e+", url: "+t),n(null)):n(o)}):n(null),[2]}})})})},t.prototype.loadDir=function(e,t,i){var o=this;return new Promise(function(n){return __awaiter(o,void 0,void 0,function(){var o,r;return __generator(this,function(s){switch(s.label){case 0:return"string"!=typeof e?[3,2]:[4,this.loadBundle(e)];case 1:return r=s.sent(),[3,3];case 2:r=e,s.label=3;case 3:return(o=r)?o.loadDir(t,i,function(i,o){i?(a.LogMgr.error("Failed to load dir: "+e+", "+t),n(null)):n(o)}):n(null),[2]}})})})},t.prototype.loadRemote=function(e,t){var i=t||{};return new Promise(function(t){e?(console.log("loadRemote: "+e),cc.assetManager.loadRemote(e,i,function(e,i){t(e?null:i)})):t(null)})},t}(e("./SingletonManager").SingletonBase);i.default=n.getInstance(),cc._RF.pop()},{"./BundleConfig":"BundleConfig","./LogManager":"LogManager","./SingletonManager":"SingletonManager"}],ResUtil:[function(e,t,i){"use strict";cc._RF.push(t,"8f503HZlhxLTY5UPaFTxC1e","ResUtil"),Object.defineProperty(i,"__esModule",{value:!0}),i.ResourceUtil=void 0;var o=e("./LogManager"),a=e("./ResKeeper"),n=function(){function e(){}return e.getResKeeper=function(t,i){return t?t.getComponent(a.default)||(i?t.addComponent(a.default):e.getResKeeper(t.parent,i)):null},e.assignResourceWith=function(t,i,a){var n=e.getResKeeper(i,a);return n&&t?(n.autoReleaseRes(t),t):(o.LogMgr.error("AssignWith "+t+" to "+i+" failed"),null)},e.instantiate=function(t){var i=cc.instantiate(t),a=e.getResKeeper(i,!0);if(a){var n=i._prefab;if(n){var r=n.asset;a.autoReleaseRes(r)}else o.LogMgr.warn("instantiate "+t+", autoRelease failed, not found asset")}else o.LogMgr.warn("instantiate "+t+", autoRelease failed, not found ResKeeper");return i},e.removeAllChildrenAndRelease=function(e,t){if(void 0===t&&(t=!0),t)for(var i=e.getComponentsInChildren(a.default),o=0;o<i.length;o++)i[o].node.destroy();e.removeAllChildren(t)},e.removeFromParentAndRelease=function(e,t){if(void 0===t&&(t=!0),t)for(var i=e.getComponentsInChildren(a.default),o=0;o<i.length;o++)i[o].node.destroy();e.removeFromParent(t)},e}();i.ResourceUtil=n,cc._RF.pop()},{"./LogManager":"LogManager","./ResKeeper":"ResKeeper"}],RichTextLink:[function(e,t,i){"use strict";cc._RF.push(t,"1ae3e3pY8pI/4pMD15FL/bQ","RichTextLink"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./EvenType"),a=e("./EventManager"),n=cc._decorator,r=n.ccclass,s=(n.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onClick=function(e,t){a.EventMgrInstance.emitEvent(o.EVENT_TYPE.RichText_Click,t)},__decorate([r],t)}(cc.Component));i.default=s,cc._RF.pop()},{"./EvenType":"EvenType","./EventManager":"EventManager"}],ScheduleManage:[function(e,t,i){"use strict";cc._RF.push(t,"96b49NUJvpK3qILhwellwC7","ScheduleManage"),Object.defineProperty(i,"__esModule",{value:!0}),i.ScheduleMgr=void 0;var o=e("./SingletonManager"),a=e("./EvenType"),n=e("./EventManager"),r=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.update=function(e){n.EventMgrInstance.emitEvent(a.EVENT_TYPE.Game_Update,e)},t}(o.SingletonBase);i.ScheduleMgr=r.getInstance(),cc._RF.pop()},{"./EvenType":"EvenType","./EventManager":"EventManager","./SingletonManager":"SingletonManager"}],SingletonManager:[function(e,t,i){"use strict";cc._RF.push(t,"b2bbfO1wZREuYFng5b/Dhex","SingletonManager"),Object.defineProperty(i,"__esModule",{value:!0}),i.SingletonBase=void 0;var o=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new this),this._instance},e}();i.SingletonBase=o,cc._RF.pop()},{}],TimeUtils:[function(e,t,i){"use strict";cc._RF.push(t,"9412aiznsJBfaAxOkcesAno","TimeUtils"),Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(){}return e.convertSecondsToMinutesSeconds=function(e,t){void 0===t&&(t=!1);var i=Math.floor(e/60),o=Math.floor(e%60),a=o<10?"0"+o:""+o;return t?i+"\uff1a"+a:i+":"+a},e.convertSecondsToHMS=function(e){var t=Math.floor(e/3600),i=Math.floor(e%3600/60),o=Math.floor(e%60);return(t<10?"0"+t:""+t)+":"+(i<10?"0"+i:""+i)+":"+(o<10?"0"+o:""+o)},e.getDayOfYear=function(){var e=new Date,t=new Date(e.getFullYear(),0,0),i=e.getTime()-t.getTime();return Math.floor(i/864e5)},e.getCurrentTimestamp=function(){return Date.now()},e.convertTimestampToDate=function(e){var t=new Date(e);return t.getFullYear()+"\u5e74"+(t.getMonth()+1)+"\u6708"+t.getDate()+"\u65e5"},e.getCurrentTimeString=function(){var e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},e.formatTimestampToHMS=function(e){var t=Math.floor(e/36e5),i=Math.floor(e%36e5/6e4),o=Math.floor(e%6e4/1e3);return t.toString().padStart(2,"0")+":"+i.toString().padStart(2,"0")+":"+o.toString().padStart(2,"0")},e.areTimestampsOnSameDay=function(e,t){var i=new Date(e),o=new Date(t);return i.getFullYear()===o.getFullYear()&&i.getMonth()===o.getMonth()&&i.getDate()===o.getDate()},e.getMillisecondsUntilMidnight=function(){var e=new Date;return new Date(e.getFullYear(),e.getMonth(),e.getDate()+1,0,0,0,0).getTime()-e.getTime()},e}();i.default=o,cc._RF.pop()},{}],TipsManager:[function(e,t,i){"use strict";cc._RF.push(t,"3b8e8SJSwVNIps4tVTCDTIx","TipsManager"),Object.defineProperty(i,"__esModule",{value:!0}),i.TipMgr=void 0;var o=e("./BundleConfig"),a=e("./UI_Toast"),n=e("./ResLoader"),r=e("./ResUtil"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._toastNode=null,t._isResourceLoaded=!1,t}return __extends(t,e),t.prototype.showToast=function(e){e&&(this._toastNode?this._executeToast(e):this._fetchToast(e))},t.prototype._fetchToast=function(e){var t=this;this._isResourceLoaded||(this._isResourceLoaded=!0,n.default.loadRes(o.BundleNames.Resouce,"common/UI_Toast",cc.Prefab).then(function(i){var o,a;t._toastNode=r.ResourceUtil.instantiate(i),null===(a=null===(o=cc.director.getScene().getChildByName("Canvas"))||void 0===o?void 0:o.getChildByName("UITips"))||void 0===a||a.addChild(t._toastNode),t._executeToast(e)}))},t.prototype._executeToast=function(e){var t,i;null===(i=null===(t=this._toastNode)||void 0===t?void 0:t.getComponent(a.default))||void 0===i||i.show(e)},t}(e("./SingletonManager").SingletonBase);i.TipMgr=s.getInstance(),cc._RF.pop()},{"./BundleConfig":"BundleConfig","./ResLoader":"ResLoader","./ResUtil":"ResUtil","./SingletonManager":"SingletonManager","./UI_Toast":"UI_Toast"}],UIAdaptive:[function(e,t,i){"use strict";cc._RF.push(t,"209ceBWM1lFTqqxECyNXWJ/","UIAdaptive"),Object.defineProperty(i,"__esModule",{value:!0});var o,a=cc._decorator,n=a.ccclass,r=a.property,s=a.disallowMultiple,c=a.menu;(function(e){e[e.None=0]="None",e[e.Top=1]="Top",e[e.Down=2]="Down",e[e.LEFT=3]="LEFT",e[e.RIGHT=4]="RIGHT"})(o||(o={}));var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.dir=o.None,t}return __extends(t,e),t.prototype.onLoad=function(){var e=0,t=0;switch(this.dir){case o.Top:t=this._calculateAdaptOffsetY();break;case o.Down:t=-this._calculateAdaptOffsetY();break;case o.LEFT:e=-this._calculateAdaptOffsetX();break;case o.RIGHT:e=this._calculateAdaptOffsetX()}this.node.x+=e,this.node.y+=t},t.prototype._calculateAdaptOffsetX=function(){var e=cc.view.getDesignResolutionSize();return(cc.winSize.width-e.width)/2},t.prototype._calculateAdaptOffsetY=function(){var e=cc.view.getDesignResolutionSize();return(cc.winSize.height-e.height)/2},__decorate([r({type:cc.Enum(o)})],t.prototype,"dir",void 0),__decorate([n,s(),c("\u8282\u70b9\u9002\u914d\u7ec4\u4ef6/adaptive")],t)}(cc.Component);i.default=l,cc._RF.pop()},{}],UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"e792bkQd2JEQJSTjZijF9u3","UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./AudioManager"),a=function(){function e(){this._btnNames=[],this._buttons=[],this._clickFastMap=new Map,this._clickInterval=500,this._clickTimeMap=new Map}return e.prototype.addClickListener=function(e,t){var i=this;this._callfunc=e,this._target=t,this._buttons=[],this._btnNames.forEach(function(e){var t=i[e];t&&t instanceof cc.Button&&i._buttons.push(t)});for(var o=0,a=this._buttons;o<a.length;o++){var n=a[o];n&&this._addClickListener(n)}},e.prototype.setClickFast=function(e){this._buttons.includes(e)&&this._clickFastMap.set(e,!0)},e.prototype._addClickListener=function(e){var t=e.node;t.targetOff(this),t.on("click",this._clickListener,this),t.on(cc.Node.EventType.TOUCH_START,function(){o.AudioMgr.playSoundEffect("effect/button")},this)},e.prototype._clickListener=function(e){var t=this._clickTimeMap.get(e),i=(new Date).getTime(),o=0;this._clickFastMap.has(e)||(o=this._clickInterval),(!t||i-t>=o)&&(this._clickTimeMap.set(e,i),this._callfunc.apply(this._target,[e]))},e}();i.default=a,cc._RF.pop()},{"./AudioManager":"AudioManager"}],UIConfig_Entry:[function(e,t,i){"use strict";cc._RF.push(t,"c8fdaxNtO5NWbmG8JmhJf+k","UIConfig_Entry"),Object.defineProperty(i,"__esModule",{value:!0}),i.UIConfigEntry=void 0;var o=e("./BundleConfig"),a=e("./UIManager");(function(e){var t,i;(function(e){e.UI_Entry="UI_Entry",e.UI_Toast="UI_Toast",e.UI_Loading="UI_Loading",e.UI_Debug="UI_Debug"})(i=e.UIView_Entry||(e.UIView_Entry={})),e.UIConfig_Entry=((t={})[i.UI_Entry]={prefab:"common/UI_Entry",block:!0},t[i.UI_Toast]={prefab:"common/UI_Toast",block:!1},t[i.UI_Loading]={prefab:"common/UI_Loading",block:!0},t[i.UI_Debug]={prefab:"common/UI_Debug",block:!1},t),a.default.registerUIConfig(o.BundleNames.Resouce,e.UIConfig_Entry)})(i.UIConfigEntry||(i.UIConfigEntry={})),cc._RF.pop()},{"./BundleConfig":"BundleConfig","./UIManager":"UIManager"}],UIConfig_Game:[function(e,t,i){"use strict";var o;cc._RF.push(t,"48cb1sLCVxLFaKqKlSR5ZDh","UIConfig_Game"),Object.defineProperty(i,"__esModule",{value:!0}),i.UIConfig_Game=i.UIView_Game=void 0;var a=e("./BundleConfig"),n=e("./UIManager");i.UIView_Game={UI_GameView:"UI_GameView",UI_Bag:"UI_Bag",UI_ChiTiao:"UI_ChiTiao",UI_GameOver:"UI_GameOver",UI_PlayerInfo:"UI_PlayerInfo",UI_GameFail:"UI_GameFail",UI_GameEquipInfo:"UI_GameEquipInfo",UI_VideoBuyOne:"UI_VideoBuyOne",UI_GamePuase:"UI_GamePuase",UI_GetZaZhong:"UI_GetZaZhong",UI_AttackTongJi:"UI_AttackTongJi",UI_TuJian:"UI_TuJian"},i.UIConfig_Game=((o={})[i.UIView_Game.UI_GameView]={prefab:"prefabs/UI_GameView",block:!0},o[i.UIView_Game.UI_Bag]={prefab:"prefabs/hecheng/UI_Bag",block:!0},o[i.UIView_Game.UI_ChiTiao]={prefab:"prefabs/UI_ChiTiao",block:!0},o[i.UIView_Game.UI_GameOver]={prefab:"prefabs/UI_GameOver",block:!0},o[i.UIView_Game.UI_PlayerInfo]={prefab:"prefabs/UI_PlayerInfo",block:!0,mask:!0},o[i.UIView_Game.UI_GameFail]={prefab:"prefabs/UI_GameFail",block:!0,mask:!0},o[i.UIView_Game.UI_GameEquipInfo]={prefab:"prefabs/UI_GameEquipInfo",block:!0,mask:!1},o[i.UIView_Game.UI_VideoBuyOne]={prefab:"prefabs/UI_VideoBuyOne",block:!0,mask:!0},o[i.UIView_Game.UI_GamePuase]={prefab:"prefabs/UI_GamePuase",block:!0,mask:!0},o[i.UIView_Game.UI_GetZaZhong]={prefab:"prefabs/UI_GetZaZhong",block:!0,mask:!1},o[i.UIView_Game.UI_AttackTongJi]={prefab:"prefabs/UI_AttackTongJi",block:!0,mask:!0},o[i.UIView_Game.UI_TuJian]={prefab:"prefabs/UI_TuJian",block:!0,mask:!0},o),n.default.registerUIConfig(a.BundleNames.Game,i.UIConfig_Game),cc._RF.pop()},{"./BundleConfig":"BundleConfig","./UIManager":"UIManager"}],UIConfig_Home:[function(e,t,i){"use strict";var o;cc._RF.push(t,"422778V+lhF5Kj6qZMo4TN3","UIConfig_Home"),Object.defineProperty(i,"__esModule",{value:!0}),i.UIConfig_Home=i.UIView_Home=void 0;var a=e("./BundleConfig"),n=e("./UIManager");i.UIView_Home={UI_Hall:"UI_Hall",UI_Setting:"UI_Setting",UI_Sidebar:"UI_Sidebar",UI_AddPower:"UI_AddPower",UI_ShopItemInfo:"UI_ShopItemInfo",UI_OpenBox:"UI_OpenBox",UI_GetItems:"UI_GetItems",UI_BoxUpLevel:"UI_BoxUpLevel",UI_BoxLevelInfo:"UI_BoxLevelInfo",UI_BoxInfo:"UI_BoxInfo",UI_BoxItemInfo:"UI_BoxItemInfo",UI_EquipInfo:"UI_EquipInfo",UI_JiXuGame:"UI_JiXuGame",UI_UnlockNewEquip:"UI_UnlockNewEquip",UI_ShowZaZhong:"UI_ShowZaZhong",UI_DeBug:"UI_DeBug",UI_WuJinTiaoZhan:"UI_WuJinTiaoZhan",UI_QianDao:"UI_QianDao",UI_ShuoMing:"UI_ShuoMing"},i.UIConfig_Home=((o={})[i.UIView_Home.UI_Hall]={prefab:"prefabs/UI_Hall",block:!0},o[i.UIView_Home.UI_Setting]={prefab:"prefabs/UI_Setting",block:!0,mask:!0},o[i.UIView_Home.UI_Sidebar]={prefab:"prefabs/UI_Sidebar",block:!0,mask:!0},o[i.UIView_Home.UI_AddPower]={prefab:"prefabs/UI_AddPower",block:!0,mask:!0},o[i.UIView_Home.UI_ShopItemInfo]={prefab:"prefabs/UI_ShopItemInfo",block:!0,mask:!0},o[i.UIView_Home.UI_OpenBox]={prefab:"prefabs/UI_OpenBox",block:!0,mask:!0},o[i.UIView_Home.UI_GetItems]={prefab:"prefabs/UI_GetItems",block:!0,mask:!1},o[i.UIView_Home.UI_BoxUpLevel]={prefab:"prefabs/UI_BoxUpLevel",block:!0,mask:!0},o[i.UIView_Home.UI_BoxLevelInfo]={prefab:"prefabs/UI_BoxLevelInfo",block:!0,mask:!0},o[i.UIView_Home.UI_BoxInfo]={prefab:"prefabs/UI_BoxInfo",block:!0,mask:!0},o[i.UIView_Home.UI_BoxItemInfo]={prefab:"prefabs/UI_BoxItemInfo",block:!0,mask:!0},o[i.UIView_Home.UI_EquipInfo]={prefab:"prefabs/UI_EquipInfo",block:!0,mask:!1},o[i.UIView_Home.UI_JiXuGame]={prefab:"prefabs/UI_JiXuGame",block:!0,mask:!0},o[i.UIView_Home.UI_UnlockNewEquip]={prefab:"prefabs/UI_UnlockNewEquip",block:!0,mask:!1},o[i.UIView_Home.UI_ShowZaZhong]={prefab:"prefabs/UI_ShowZaZhong",block:!0,mask:!0},o[i.UIView_Home.UI_DeBug]={prefab:"prefabs/UI_DeBug",block:!0,mask:!0},o[i.UIView_Home.UI_WuJinTiaoZhan]={prefab:"huodong/UI_WuJinTiaoZhan",block:!0,mask:!0},o[i.UIView_Home.UI_QianDao]={prefab:"prefabs/UI_QianDao",block:!0,mask:!0},o[i.UIView_Home.UI_ShuoMing]={prefab:"prefabs/UI_ShuoMing",block:!0,mask:!0},o),n.default.registerUIConfig(a.BundleNames.Home,i.UIConfig_Home),cc._RF.pop()},{"./BundleConfig":"BundleConfig","./UIManager":"UIManager"}],UIFuDong:[function(e,t,i){"use strict";cc._RF.push(t,"b9088jF1T5GKaSygqIO3xD+","UIFuDong"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,n=o.property,r=o.menu,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.time=.5,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.start=function(){this.playFloatingAnimation()},t.prototype.playFloatingAnimation=function(){var e=cc.tween(this.node).to(this.time,{y:this.node.y+10}).to(this.time,{y:this.node.y});cc.tween(this.node).repeatForever(e).start()},__decorate([n],t.prototype,"time",void 0),__decorate([a,r("UI\u7ec4\u4ef6/UIFuDong")],t)}(cc.Component);i.default=s,cc._RF.pop()},{}],UIHomeAddCoin:[function(e,t,i){"use strict";cc._RF.push(t,"7b54dIE9vVMXY2iWJqIHreO","UIHomeAddCoin"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./BundleConfig"),a=e("./EventManager"),n=e("./ResKeeper"),r=e("./UIManager"),s=e("./CommonUtils"),c=e("./EvenType"),l=e("./PlayerDataManager"),u=e("./UIConfig_Home"),d=cc._decorator,h=d.ccclass,p=d.property,_=(d.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icontag=null,t.count=null,t.addtype=1,t.clickCount=0,t}return __extends(t,e),t.prototype.onEnable=function(){a.EventMgrInstance.addListener(c.EVENT_TYPE.Home_Add_Gold,this.handleAddGold,this),a.EventMgrInstance.addListener(c.EVENT_TYPE.Hall_ResetRich,this.refreshUI,this),this.refreshUI()},t.prototype.refreshUI=function(){if(this.count)switch(this.addtype){case 1:this.count.string=l.PlayerDataMgr.globalData.power+"/"+l.PlayerDataMgr.globalData.maxPower;break;case 2:this.count.string=""+l.PlayerDataMgr.globalData.gold;break;case 3:this.count.string=""+l.PlayerDataMgr.globalData.diamond}},t.prototype.handleAddGold=function(e,t){var i;if(this.addtype===e){var o=null===(i=this.icontag)||void 0===i?void 0:i.convertToWorldSpaceAR(cc.v2(0,0)),a=this.getCoinType(e);a&&o&&s.default.showCoinAnimation(o,null,t,a)}},t.prototype.getCoinType=function(e){switch(e){case 1:return"power";case 2:return"jinbi";case 3:return"zuanshi";default:return null}},t.prototype.onDisable=function(){a.EventMgrInstance.removeListener(c.EVENT_TYPE.Home_Add_Gold,this.handleAddGold,this),a.EventMgrInstance.removeListener(c.EVENT_TYPE.Hall_ResetRich,this.refreshUI,this)},t.prototype.showDeBug=function(){l.PlayerDataMgr.OPEN_GM&&cc.sys.isBrowser&&(this.clickCount+=1,console.log("\u70b9\u51fb\u6b21\u6570",this.clickCount),this.clickCount>5&&r.default.open(o.BundleNames.Home,u.UIView_Home.UI_DeBug),this.unschedule(this.resetClickCount),this.scheduleOnce(this.resetClickCount,.4))},t.prototype.resetClickCount=function(){this.clickCount=0},__decorate([p(cc.Node)],t.prototype,"icontag",void 0),__decorate([p(cc.Label)],t.prototype,"count",void 0),__decorate([p()],t.prototype,"addtype",void 0),__decorate([h],t)}(n.default));i.default=_,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./EvenType":"EvenType","./EventManager":"EventManager","./PlayerDataManager":"PlayerDataManager","./ResKeeper":"ResKeeper","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager"}],UIManager:[function(e,t,i){"use strict";cc._RF.push(t,"53550gvXOhBFrnzqMfqR5v9","UIManager"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./LogManager"),a=e("./SingletonManager"),n=e("./ResKeeper"),r=e("./ResLoader"),s=e("./ResUtil"),c=e("./UIView"),l=e("./BundleConfig"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._isOpening=!1,t._openQueue=[],t._uiConf=new Map,t._uiList=new Map,t}return __extends(t,e),t.prototype.open=function(e,t,i){var a=this,n=this._uiConf.get(e);if(n){var r=n[t];if(r)if(r.args=i,this._isOpening){o.LogMgr.warn("\u6b63\u5728\u6253\u5f00\u5176\u4ed6\u754c\u9762, "+t+" \u52a0\u5165\u7b49\u5f85\u961f\u5217");var s={bundleName:e,uiName:t,uiInfo:r};this._openQueue.push(s)}else{var c=e+"_"+t,l=this._uiList.get(c);if(cc.isValid(l,!0)){var u=l.node.zIndex;this._uiList.forEach(function(e){e.node.zIndex>u&&a.close(e)}),l.onResume.apply(l,i)}else this._show(e,t,r)}else o.LogMgr.warn("Bundle: "+e+" UI: "+t+" \u672a\u6ce8\u518c UI\u914d\u7f6e")}else o.LogMgr.warn("Bundle: "+e+" \u672a\u6ce8\u518c UI\u914d\u7f6e")},t.prototype.close=function(e){var t=e.bundleName,i=e.uiName;if(e.showHideViews(),e.rmEvents(),e.onClose(),this._uiList.delete(t+"_"+i),!e.isCache)for(var o=e.node.getComponentsInChildren(n.default),a=0;a<o.length;a++)o[a].node.destroy();e.node.removeFromParent(!0)},t.prototype.closeView=function(e,t){var i=e+"_"+t,a=this._uiList.get(i);a?this.close(a):o.LogMgr.warn("UIManager close view error: bundle: "+e+", view: "+t)},t.prototype.closeAllViews=function(){var e=this;this._uiList.forEach(function(t){e.close(t)})},t.prototype.registerUIConfig=function(e,t){this._uiConf.has(e)&&o.LogMgr.warn("Bundle: "+e+" \u91cd\u590d\u6ce8\u518c UI\u914d\u7f6e"),this._uiConf.set(e,t)},t.prototype.unregisterUIConfig=function(e){this._uiConf.delete(e)},t.prototype.unregisterAllUIConfigs=function(){this._uiConf.clear()},t.prototype.getViewByName=function(e,t){var i=e+"_"+t;return this._uiList.get(i)},t.prototype.getAllViews=function(){return Array.from(this._uiList.values())},t.prototype._show=function(e,t,i){return __awaiter(this,void 0,Promise,function(){var a,n,u,d,h,p,_,g,f,m;return __generator(this,function(v){switch(v.label){case 0:return this._isOpening=!0,a=null,i.block?(a=this._getBlockInputNode(e,t),i.mask?((n=a.addComponent(cc.Sprite)).sizeMode=cc.Sprite.SizeMode.CUSTOM,[4,r.default.loadRes(l.BundleNames.Resouce,"texture/singleColor",cc.SpriteFrame)]):[3,2]):[3,2];case 1:u=v.sent(),n.spriteFrame=u,a.color=cc.color(0,0,0),a.opacity=230,v.label=2;case 2:return[4,r.default.loadBundle(e)];case 3:return(d=v.sent())?(h=i.prefab,[4,r.default.loadRes(d,h,cc.Prefab)]):[3,5];case 4:return(p=v.sent())?(_=cc.director.getScene().getChildByName("Canvas"),g=_.getChildByName("UIRoot"),f=s.ResourceUtil.instantiate(p),m=f.getComponent(c.default),g.addChild(f),this._adaptiveCenter(f),f.zIndex=this._uiList.size+1,f.name=e+"_"+t,m?(this._autoExecNext(a,f),m.init(e,t,i.args),this._uiList.set(e+"_"+t,m),o.LogMgr.debug("UIManager open view: "+t)):(o.LogMgr.warn("UI: "+t+" \u672a\u6ce8\u518c UIView"),this._autoExecNext(a))):(o.LogMgr.error("Unable to find bundle "+e+" prefab "+h),this._autoExecNext(a)),[3,6];case 5:o.LogMgr.error("Unable to find bundle "+e),this._autoExecNext(a),v.label=6;case 6:return[2]}})})},t.prototype._autoExecNext=function(e,t){if(this._isOpening=!1,t&&e?(e.parent=t,e.zIndex=-1,e.setPosition(cc.v2(0,0))):e&&e.removeFromParent(),this._openQueue.length>0){var i=this._openQueue.shift();this._show(i.bundleName,i.uiName,i.uiInfo)}},t.prototype._getBlockInputNode=function(e,t){var i=new cc.Node(e+"_"+t+"_block");return i.setContentSize(cc.winSize),i.addComponent(cc.BlockInputEvents),cc.director.getScene().getChildByName("Canvas").getChildByName("UIBlock").addChild(i),i.zIndex=999,i},t.prototype._adaptiveCenter=function(){},t}(a.SingletonBase);i.default=u.getInstance(),cc._RF.pop()},{"./BundleConfig":"BundleConfig","./LogManager":"LogManager","./ResKeeper":"ResKeeper","./ResLoader":"ResLoader","./ResUtil":"ResUtil","./SingletonManager":"SingletonManager","./UIView":"UIView"}],UIRotate:[function(e,t,i){"use strict";cc._RF.push(t,"24c9eXoQ0tM2a5oJOkAL1HW","UIRotate"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,n=o.property,r=o.menu,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.rotate=5,t.time=.5,t.delayTime=0,t.isCircle=!1,t.isAuto=!1,t}return __extends(t,e),t.prototype.onLoad=function(){this.isAuto||this.startRotateTween()},t.prototype.startRotateTween=function(){this.node.stopAllActions(),this.node.angle=0,this.isCircle||this.node.runAction(cc.repeatForever(cc.sequence(cc.rotateBy(this.time,this.rotate),cc.rotateBy(this.time,-this.rotate),cc.rotateBy(this.time,-this.rotate),cc.rotateBy(this.time,this.rotate),cc.rotateBy(this.time,this.rotate),cc.rotateBy(this.time,-this.rotate),cc.rotateBy(this.time,-this.rotate),cc.rotateBy(this.time,this.rotate),cc.rotateBy(this.time,0),cc.delayTime(this.delayTime))))},t.prototype.stopRotateTween=function(){this.isCircle||this.node.stopAllActions(),this.node.angle=0},t.prototype.update=function(){this.isCircle&&(this.node.angle+=this.rotate)},__decorate([n({type:cc.Float})],t.prototype,"rotate",void 0),__decorate([n({type:cc.Float})],t.prototype,"time",void 0),__decorate([n({type:cc.Float})],t.prototype,"delayTime",void 0),__decorate([n({tooltip:"\u662f\u5426\u4e00\u76f4\u8f6c\u5708"})],t.prototype,"isCircle",void 0),__decorate([n()],t.prototype,"isAuto",void 0),__decorate([a,r("UI\u7ec4\u4ef6/UIRotate")],t)}(cc.Component);i.default=s,cc._RF.pop()},{}],UIScale:[function(e,t,i){"use strict";cc._RF.push(t,"e8402IFP+tMzbFuibCRgSYh","UIScale"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,n=o.property,r=o.menu,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.toScale=1.1,t.time=.5,t.delay=.5,t.normalScale=1,t}return __extends(t,e),t.prototype.onLoad=function(){this.node.tss=this,this.normalScale=this.node.scale,this.node.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(this.time,this.normalScale*this.toScale),cc.scaleTo(this.time,this.normalScale),cc.delayTime(this.delay))))},__decorate([n({type:cc.Float})],t.prototype,"toScale",void 0),__decorate([n({type:cc.Float})],t.prototype,"time",void 0),__decorate([n({type:cc.Float})],t.prototype,"delay",void 0),__decorate([a,r("UI\u7ec4\u4ef6/UIScale")],t)}(cc.Component);i.default=s,cc._RF.pop()},{}],UIScene:[function(e,t,i){"use strict";cc._RF.push(t,"dc87fL9P2NDv5LdC33ut2PN","UIScene"),Object.defineProperty(i,"__esModule",{value:!0});var o,a=e("./DebugManager"),n=e("./UIView"),r=cc._decorator,s=r.ccclass,c=(r.property,r.menu);(function(e){e[e.UIRoot=999]="UIRoot",e[e.UIBlock=1e3]="UIBlock",e[e.UILoading=1001]="UILoading",e[e.UITips=1002]="UITips"})(o||(o={}));var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sceneRootName="scene_root",t.isSceneRoot=!0,t}return __extends(t,e),t.prototype.onLoad=function(){for(var e in o)if(Object.prototype.hasOwnProperty.call(o,e)&&!this.node.getChildByName(e)){var t=o[e],i=new cc.Node(e);i.setContentSize(cc.winSize),i.zIndex=t,this.node.addChild(i)}this.init()},t.prototype.init=function(){var t=cc.director.getScene(),i=cc.assetManager.bundles.find(function(e){return!!e.getSceneInfo(t.name)}),o=i?i.name:void 0;a.DebugMgr.clearLogs(),e.prototype.init.call(this,o,this.sceneRootName,null)},__decorate([s,c("view/UIScene")],t)}(n.default);i.default=l,cc._RF.pop()},{"./DebugManager":"DebugManager","./UIView":"UIView"}],UITools:[function(e,t,i){"use strict";cc._RF.push(t,"e579aU058RCPL1/YcE3Cx5D","UITools"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./LogManager"),a=e("./ResLoader"),n=e("./ResUtil"),r=function(){function e(){}return e.addClickEvent=function(e,t,i,a){void 0===a&&(a=500),(null==e?void 0:e.node)?(e.node.off("click"),e.node.on("click",function(o){if(a>0){var n=e.lastclickTime,r=(new Date).getTime();if(n&&r-n<a)return;e.lastclickTime=r,t.apply(i,[o])}else t.apply(i,[o])},i)):o.LogMgr.error("add click event error: "+e)},e.rmClickEvent=function(e){(null==e?void 0:e.node)?e.node.off("click"):o.LogMgr.error("remove click event error: "+e)},e.shake=function(e,t){var i=cc.tween(e),o=[{position:cc.v2(t.x,t.y),duration:.05},{position:cc.v2(-t.x,-t.y),duration:.05},{position:cc.v2(t.x,t.y),duration:.05},{position:cc.v2(-t.x,-t.y),duration:.05},{position:cc.v2(0,0),duration:.05}];i.by(0,{position:cc.v3(0,0)});for(var a=0,n=o;a<n.length;a++){var r=n[a];i.by(r.duration,{position:cc.v3(r.position)})}i.start()},e.loadTexture=function(e,t){a.default.loadRes(t,t,cc.SpriteFrame).then(function(t){t&&(e.spriteFrame=t,n.ResourceUtil.assignResourceWith(t,e.node))})},e.loadDragonBones=function(e,t,i){return new Promise(function(o,r){var s=cc.path.basename(i),c=cc.path.dirname(i),l=c+"/"+s+"_ske",u=c+"/"+s+"_tex";a.default.loadRes(t,l,dragonBones.DragonBonesAsset).then(function(i){i?(n.ResourceUtil.assignResourceWith(i,e.node),a.default.loadRes(t,u,dragonBones.DragonBonesAtlasAsset).then(function(t){t?(e.dragonAsset=i,e.dragonAtlasAsset=t,n.ResourceUtil.assignResourceWith(i,e.node),o(!0)):r(!1)})):r(!1)})})},e.addTouchEventListener=function(e,t,i){e.on(cc.Node.EventType.TOUCH_START,t,i),e.on(cc.Node.EventType.TOUCH_MOVE,t,i),e.on(cc.Node.EventType.TOUCH_END,t,i),e.on(cc.Node.EventType.TOUCH_CANCEL,t,i)},e.rmTouchEventListener=function(e){e.off(cc.Node.EventType.TOUCH_START),e.off(cc.Node.EventType.TOUCH_MOVE),e.off(cc.Node.EventType.TOUCH_END),e.off(cc.Node.EventType.TOUCH_CANCEL)},e.fadeOut=function(e,t,i,o){void 0===i&&(i=!1),void 0===o&&(o=!0),cc.Tween.stopAllByTarget(e),cc.tween(e).to(t,{opacity:0}).call(function(){i&&n.ResourceUtil.removeFromParentAndRelease(e,o)}).start()},e.scaleTo=function(e,t){var i=t/Math.max(e.width,e.height);e.scale=i},e}();i.default=r,cc._RF.pop()},{"./LogManager":"LogManager","./ResLoader":"ResLoader","./ResUtil":"ResUtil"}],UIView:[function(e,t,i){"use strict";cc._RF.push(t,"743a8DSuqhBr4IQgN4a26Ii","UIView"),Object.defineProperty(i,"__esModule",{value:!0}),i.UIViewShowType=void 0;var o,a=e("./EventManager"),n=e("./LogManager"),r=e("./ResKeeper"),s=e("./UIManager"),c=e("./UITools"),l=cc._decorator,u=l.ccclass,d=l.property,h=l.menu;(function(e){e[e.Normal=0]="Normal",e[e.Sclae=1]="Sclae",e[e.Opacity=2]="Opacity"})(o=i.UIViewShowType||(i.UIViewShowType={}));var p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isCache=!1,t.isFull=!1,t.showType=o.Normal,t._scene=!1,t._params=null,t._eventMap=new Map,t._hideViews=[],t._actTime=.2,t.auto_ui=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"params",{get:function(){return this._params},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bundleName",{get:function(){return this._bundleName},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"uiName",{get:function(){return this._uiName},enumerable:!1,configurable:!0}),t.prototype.init=function(e,t,i){this._bundleName=e,this._uiName=t,this._params=i,this._addClickListener(),this._addEventListener(),this._show(i),this._showOpenAnim()},t.prototype._show=function(){},t.prototype._close=function(){s.default.close(this)},t.prototype.onResume=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i]},t.prototype.onClose=function(){},t.prototype._showOpenAnim=function(){var e=this,t=this.node,i=t.getChildByName("root")||t;if(this.showType===o.Sclae){var a=i.scale;i.scale=.1,cc.tween(i).to(this._actTime,{scale:a},{easing:""}).call(function(){e._onOpenAnimOver()}).start()}else this.showType===o.Opacity?(i.opacity=0,cc.tween(i).to(this._actTime,{opacity:255}).call(function(){e._onOpenAnimOver()}).start()):this._onOpenAnimOver()},t.prototype._onOpenAnimOver=function(){this.isFull&&this._hideOtherViews()},t.prototype._clickListener=function(){},t.prototype._addEventListener=function(){},t.prototype._hideOtherViews=function(){for(var e=s.default.getAllViews(),t=e.indexOf(this),i=0;i<e.length;i++){var o=e[i],a=o.node,n=a.zIndex;o!==this&&a.active&&t>n&&(o.node.active=!1,this._hideViews.push(o))}},t.prototype.showHideViews=function(){if(this._hideViews&&this._hideViews.length>0)for(var e=0;e<this._hideViews.length;e++){var t=this._hideViews[e];t&&t.node&&(t.node.active=!0)}},t.prototype._addClickListener=function(){this.auto_ui&&this.auto_ui.addClickListener(this._clickListener,this);var e=this._bundleName+"_"+this._uiName+"_block",t=this.node.getChildByName(e);if(t){var i=t.addComponent(cc.Button);c.default.addClickEvent(i,this._clickBlock,this)}},t.prototype._addEvent=function(e,t,i){i||(i=this);var o=this._eventMap.get(e);o&&i===o.target&&t===o.callBack?n.LogMgr.error("\u91cd\u590d\u6ce8\u518c\u4e8b\u4ef6: "+e):(a.EventMgrInstance.addListener(e,t,i),this._eventMap.set(e,{callBack:t,target:i}))},t.prototype.rmEvents=function(){this._eventMap&&(this._eventMap.forEach(function(e,t){var i=e.callBack,o=e.target;a.EventMgrInstance.removeListener(t,i,o)}),this._eventMap.clear())},t.prototype._clickBlock=function(){},__decorate([d({displayName:"\u662f\u5426\u5e38\u9a7b",visible:function(){return!this._scene}})],t.prototype,"isCache",void 0),__decorate([d({displayName:"\u662f\u5426\u5168\u5c4f",visible:function(){return!this._scene}})],t.prototype,"isFull",void 0),__decorate([d({type:cc.Enum(o),displayName:"\u6253\u5f00\u65b9\u5f0f",visible:function(){return!this._scene}})],t.prototype,"showType",void 0),__decorate([u,h("view/UIView")],t)}(r.default);i.default=p,cc._RF.pop()},{"./EventManager":"EventManager","./LogManager":"LogManager","./ResKeeper":"ResKeeper","./UIManager":"UIManager","./UITools":"UITools"}],UI_AddPower_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"93f4d9OCFNFIaACWYfuR5gd","UI_AddPower_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.btn_addBtn=null,t.btn_videoAddBtn=null,t.btn_closeBtn=null,t.txt_addCountLabel=null,t.txt_lastCountLabel=null,t.txt_priceLabel=null,t.txt_videoAddCountLabel=null,t.txt_videoLastCountLabel=null,t._btnNames=["btn_addBtn","btn_videoAddBtn","btn_closeBtn"],t}return __extends(t,e),__decorate([r(cc.Button)],t.prototype,"btn_addBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_videoAddBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_closeBtn",void 0),__decorate([r(cc.Label)],t.prototype,"txt_addCountLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_lastCountLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_priceLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_videoAddCountLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_videoLastCountLabel",void 0),__decorate([n("UI_AddPower_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_AddPower:[function(e,t,i){"use strict";cc._RF.push(t,"97fb8WRvT1CIbcaExgY2dwQ","UI_AddPower"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UI_AddPower_UIBindings"),a=e("./UIView"),n=e("./Excel"),r=e("./PlayerDataManager"),s=e("./TipsManager"),c=e("./ADManager"),l=e("./Const_Hall"),u=e("./HallGlobalVariable"),d=e("./UIManager"),h=e("./BundleConfig"),p=e("./UIConfig_Home"),_=cc._decorator,g=_.ccclass,f=_.property,m=(_.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype._show=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var o=this.auto_ui;this.addPowerData||(this.addPowerData=n.Excel.addPower(1),o.txt_addCountLabel.string="X"+this.addPowerData.addCount,o.txt_priceLabel.string=""+this.addPowerData.price,o.txt_videoAddCountLabel.string="X"+this.addPowerData.videoAddCount),o.txt_lastCountLabel.string="\u4eca\u65e5\u5269\u4f59"+(this.addPowerData.maxTime-r.PlayerDataMgr.globalData.addPowerTime)+"\u6b21",o.txt_videoLastCountLabel.string="\u4eca\u65e5\u5269\u4f59"+(this.addPowerData.videoMaxTime-r.PlayerDataMgr.globalData.videoAddPowerTime)+"\u6b21"},t.prototype._clickListener=function(e){var t=this.auto_ui;switch(e){case t.btn_closeBtn:this._close();break;case t.btn_addBtn:this.buyThis(!1);break;case t.btn_videoAddBtn:this.buyThis(!0)}},t.prototype.buyThis=function(e){var t=this,i=function(e){var i=new l.GetItemsData;i.ids=[u.default.powerId],i.counts=[e?t.addPowerData.videoAddCount:t.addPowerData.addCount],i.clickCallBack=function(){e?(r.PlayerDataMgr.globalData.videoAddPowerTime++,r.PlayerDataMgr.addPower(t.addPowerData.videoAddCount),t.auto_ui.txt_videoLastCountLabel.string="\u4eca\u65e5\u5269\u4f59"+(t.addPowerData.videoMaxTime-r.PlayerDataMgr.globalData.videoAddPowerTime)+"\u6b21"):(r.PlayerDataMgr.globalData.addPowerTime++,r.PlayerDataMgr.addPower(t.addPowerData.addCount),t.auto_ui.txt_lastCountLabel.string="\u4eca\u65e5\u5269\u4f59"+(t.addPowerData.maxTime-r.PlayerDataMgr.globalData.addPowerTime)+"\u6b21"),s.TipMgr.showToast("\u4f53\u529b +"+(e?t.addPowerData.videoAddCount:t.addPowerData.addCount))},d.default.open(h.BundleNames.Home,p.UIView_Home.UI_GetItems,i)};e&&this.addPowerData.videoMaxTime-r.PlayerDataMgr.globalData.videoAddPowerTime<=0||!e&&this.addPowerData.maxTime-r.PlayerDataMgr.globalData.addPowerTime<=0?s.TipMgr.showToast("\u4eca\u65e5\u5269\u4f59\u6b21\u6570\u4e0d\u8db3"):e?c.ADMgr.showRewardedVideoAd("\u89c6\u9891\u8d2d\u4e70\u4f53\u529b",function(){i(e)}):r.PlayerDataMgr.subtractDiamond(this.addPowerData.price)&&i(e)},__decorate([f(o.default)],t.prototype,"auto_ui",void 0),__decorate([g],t)}(a.default));i.default=m,cc._RF.pop()},{"./ADManager":"ADManager","./BundleConfig":"BundleConfig","./Const_Hall":"Const_Hall","./Excel":"Excel","./HallGlobalVariable":"HallGlobalVariable","./PlayerDataManager":"PlayerDataManager","./TipsManager":"TipsManager","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager","./UIView":"UIView","./UI_AddPower_UIBindings":"UI_AddPower_UIBindings"}],UI_AttackInfo:[function(e,t,i){"use strict";cc._RF.push(t,"5feb3EKLbZGeLacreiRj2QK","UI_AttackInfo"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./ResKeeper"),a=cc._decorator,n=a.ccclass,r=a.property,s=(a.inspector,function(e){function t(){var t=e.call(this)||this;return t.baojiNode=null,t.zhongduNode=null,t.putongNode=null,t}return __extends(t,e),t.prototype.onEnable=function(){},t.prototype.updateValue=function(e,t){var i=(e+"").split("."),o=null;switch(t){case 2:this.baojiNode.active=!0,this.zhongduNode.active=!1,this.putongNode.active=!1,o=this.baojiNode.getChildByName("value").getComponent(cc.Label);break;case 3:this.baojiNode.active=!1,this.zhongduNode.active=!0,this.putongNode.active=!1,o=this.zhongduNode.getChildByName("value").getComponent(cc.Label);break;default:this.baojiNode.active=!1,this.zhongduNode.active=!1,this.putongNode.active=!0,o=this.putongNode.getChildByName("value").getComponent(cc.Label)}o.string=i[0],this.scheduleOnce(function(){o.node.parent.width=o.node.width})},__decorate([r(cc.Node)],t.prototype,"baojiNode",void 0),__decorate([r(cc.Node)],t.prototype,"zhongduNode",void 0),__decorate([r(cc.Node)],t.prototype,"putongNode",void 0),__decorate([n],t)}(o.default));i.default=s,cc._RF.pop()},{"./ResKeeper":"ResKeeper"}],UI_AttackTongJi:[function(e,t,i){"use strict";cc._RF.push(t,"76712VzO/9MUqZOevmFSSSG","UI_AttackTongJi"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./BundleConfig"),a=e("./EventManager"),n=e("./ResKeeper"),r=e("./CommonUtils"),s=e("./EvenType"),c=e("./Excel"),l=e("./GameGlobalVariable"),u=cc._decorator,d=u.ccclass,h=u.property,p=(u.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.scroll=null,t.tipTongji=null,t.maxvalue=1e4,t.ids=0,t}return __extends(t,e),t.prototype._show=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i]},t.prototype.onEnable=function(){a.EventMgrInstance.addListener(s.EVENT_TYPE.GAME_SHANGHAI_TONGJI,this.onDamageTongJi,this),this.hideStatistics()},t.prototype.onDisable=function(){a.EventMgrInstance.removeListener(s.EVENT_TYPE.GAME_SHANGHAI_TONGJI,this.onDamageTongJi,this)},t.prototype.displayStatistics=function(){this.tipTongji.active?this.hideStatistics():(this.tipTongji.active=!0,this.tipTongji.scale=0,cc.tween(this.tipTongji).to(.1,{scale:1}).start(),this.onDamageTongJi())},t.prototype.hideStatistics=function(){var e=this;this.tipTongji.active&&cc.tween(this.tipTongji).to(.1,{scale:0}).call(function(){e.tipTongji.active=!1}).start()},t.prototype.onDamageTongJi=function(){return __awaiter(this,void 0,Promise,function(){var e,t,i,a,n,s,u,d,h,p,_,g,f,m,v,y,b,I,E,M;return __generator(this,function(C){switch(C.label){case 0:for(e=this.scroll.content.children,t=Object.keys(l.GameGlobalVariable.nowwShangHai).sort(function(e,t){return l.GameGlobalVariable.nowwShangHai[t]-l.GameGlobalVariable.nowwShangHai[e]}),this.ids=0,i=0,a=0,n=t;a<n.length;a++)u=n[a],i+=l.GameGlobalVariable.nowwShangHai[u];s=0,C.label=1;case 1:return s<5?(u=t[s],d=e[s],u?(d||(d=cc.instantiate(e[0]),this.scroll.content.addChild(d)),d.active=!0,h=d.children[0].getComponent(cc.Sprite),p=c.Excel.shuiguo(1e3+Number(u)),[4,this._loadRes(o.BundleNames.Game,"res/tongji"+p.quality,cc.SpriteFrame)]):[3,6]):[3,8];case 2:return _=C.sent(),h.spriteFrame=_,g=d.children[2].getComponent(cc.Sprite),[4,this._loadRes(o.BundleNames.Game,"res/tongjipro"+(s+1),cc.SpriteFrame)];case 3:return f=C.sent(),g.spriteFrame=f,(m=d.children[1].getComponent(cc.Sprite)).name===u?[3,5]:[4,this._loadRes(o.BundleNames.Common,"res/player/player"+u+"_1",cc.SpriteFrame)];case 4:v=C.sent(),m.spriteFrame=v,m.node.name=u,r.default.limitSpriteSize(m,60),C.label=5;case 5:return y=d.children[3].getComponent(cc.Label),b=l.GameGlobalVariable.nowwShangHai[u],I=this.formatNumberWithChineseUnit(b),y.string=I,E=d.children[2],M=250*l.GameGlobalVariable.nowwShangHai[u]/i,E.width=M,[3,7];case 6:d&&(d.active=!1),C.label=7;case 7:return s++,[3,1];case 8:return[2]}})})},t.prototype.formatNumberWithChineseUnit=function(e){return e>=1e8?(e/1e8).toFixed(1)+"E":e>=1e4?(e/1e4).toFixed(1)+"W":e.toString().split(".")[0]},__decorate([h(cc.ScrollView)],t.prototype,"scroll",void 0),__decorate([h(cc.Node)],t.prototype,"tipTongji",void 0),__decorate([d],t)}(n.default));i.default=p,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GameGlobalVariable":"GameGlobalVariable","./ResKeeper":"ResKeeper"}],UI_Bag_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"c96b4a1xARBR6xrbCEHAD8r","UI_Bag_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node_viewNode=null,t.node_cubeItem=null,t.node_EquipFather=null,t.node_diTuNode=null,t.node_cubeBaseFather=null,t.node_DragEndNode=null,t.node_cubeFather=null,t.node_DragTempNode=null,t.node_DragFather=null,t.node_videoLastCount=null,t.node_bottomBtn=null,t.node_sliverLabelNode=null,t.node_jiantou=null,t.node_upBuffEffect=null,t.node_upBuffFather=null,t.node_upTipNode=null,t.node_useGeZiTip=null,t.btn_UseGeZiBtn=null,t.btn_VideoGetCell=null,t.btn_VideoResetBtn=null,t.btn_ResetBtn=null,t.btn_start=null,t.dbAnim_heChengEffect=null,t.rtxt_upTipLabel=null,t._btnNames=["btn_UseGeZiBtn","btn_VideoGetCell","btn_VideoResetBtn","btn_ResetBtn","btn_start"],t}return __extends(t,e),__decorate([r(cc.Node)],t.prototype,"node_viewNode",void 0),__decorate([r(cc.Node)],t.prototype,"node_cubeItem",void 0),__decorate([r(cc.Node)],t.prototype,"node_EquipFather",void 0),__decorate([r(cc.Node)],t.prototype,"node_diTuNode",void 0),__decorate([r(cc.Node)],t.prototype,"node_cubeBaseFather",void 0),__decorate([r(cc.Node)],t.prototype,"node_DragEndNode",void 0),__decorate([r(cc.Node)],t.prototype,"node_cubeFather",void 0),__decorate([r(cc.Node)],t.prototype,"node_DragTempNode",void 0),__decorate([r(cc.Node)],t.prototype,"node_DragFather",void 0),__decorate([r(cc.Node)],t.prototype,"node_videoLastCount",void 0),__decorate([r(cc.Node)],t.prototype,"node_bottomBtn",void 0),__decorate([r(cc.Node)],t.prototype,"node_sliverLabelNode",void 0),__decorate([r(cc.Node)],t.prototype,"node_jiantou",void 0),__decorate([r(cc.Node)],t.prototype,"node_upBuffEffect",void 0),__decorate([r(cc.Node)],t.prototype,"node_upBuffFather",void 0),__decorate([r(cc.Node)],t.prototype,"node_upTipNode",void 0),__decorate([r(cc.Node)],t.prototype,"node_useGeZiTip",void 0),__decorate([r(cc.Button)],t.prototype,"btn_UseGeZiBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_VideoGetCell",void 0),__decorate([r(cc.Button)],t.prototype,"btn_VideoResetBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_ResetBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_start",void 0),__decorate([r(dragonBones.ArmatureDisplay)],t.prototype,"dbAnim_heChengEffect",void 0),__decorate([r(cc.RichText)],t.prototype,"rtxt_upTipLabel",void 0),__decorate([n("UI_Bag_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_Bag:[function(e,t,i){"use strict";cc._RF.push(t,"b2b4fBG8c5G+oqWcOPCtn1/","UI_Bag"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./ADManager"),a=e("./AIControl"),n=e("./AudioManager"),r=e("./BuffMag"),s=e("./BundleConfig"),c=e("./EvenType"),l=e("./EventManager"),u=e("./Excel"),d=e("./GameDataManager"),h=e("./GameGlobalVariable"),p=e("./GuideControl"),_=e("./Item_CellFatherMove"),g=e("./Item_GameBagCell"),f=e("./Item_GameEquip"),m=e("./Item_PaiZi"),v=e("./LogManager"),y=e("./Logic_GetEquip"),b=e("./PlayerDataManager"),I=e("./UIManager"),E=e("./UIView"),M=e("./UI_Bag_UIBindings"),C=e("./TipsManager"),B=e("./Const_Common"),x=e("./Const_Game"),w=e("./UIConfig_Game"),G=cc._decorator,T=G.ccclass,N=G.property,U=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.paiZiPfb=null,t.maxX=5,t.maxY=7,t.startX=3,t.startY=3,t.effectMax=60,t.oneBuyMoney=15,t.videoGetMoney=30,t.xifuTime=.15,t.moveTime=.22,t.viewNodePosY=100,t.lastPickArray=[],t.cellCompMap=new Map,t.equipPool=new Map,t.dressUpEquipMap=new Map,t.baseCellCompArray=[],t.currAddCellDataMap=new Map,t.selfMap={},t.firstUseArray=[],t.childPosMap=new Map,t.currPickNode=null,t.currPickNodeComp=null,t.moveLength=0,t.guide4Time=-1,t.isUpBuffCdTime=!1,t.upBuffArray=[],t.jianTouArray=[],t.mustResetTime=-1,t}return __extends(t,e),t.prototype._show=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];y.default.getInstance.resetThis()},t.prototype.gameOpenMoveTween=function(e,t){var i=e?this.viewNodePosY:0;this.auto_ui.node_viewNode.y=i,t&&t()},t.prototype.start=function(){var e=this;this.scheduleOnce(function(){v.LogMgr.debug(e.node.height),e.auto_ui.node_DragFather.y=cc.winSize.height/cc.winSize.width>2?-540:-500})},t.prototype._addEventListener=function(){this._addEvent(c.EVENT_TYPE.ResetGameBagAI,this.checkAI,this)},t.prototype.openView=function(e){var t=this;this.auto_ui.btn_VideoResetBtn.node.active=!0,this.gameOpenMoveTween(!0,function(){t.scheduleOnce(function(){t.checkBottomBtnScale()},.15),e&&e.isGameEnd&&(b.PlayerDataMgr.getGuideIndexByTaskName(B.GuideName.GameBag)===B.GameBagGuideIndex.EntryGuide7Completion?b.PlayerDataMgr.setGuideIndex(B.GuideName.GameBag,B.GameBagGuideIndex.GridGuide8):t.scheduleOnce(function(){t.checkAI()},a.default._instance.fightDelayTime),r.BuffMgr.getSecondaryFruitBuff()?(v.LogMgr.debug("\u6709\u4e8c\u7ea7\u5fc5\u5f97buff\uff0c\u5fc5\u51fa\u4e8c\u7ea7\u6c34\u679c"),t.resetEquip(!0,!0,!0)):t.resetEquip(!0,!1,!0),t.checkGuide(),t.scheduleOnce(function(){t.dressUpEquipMap.forEach(function(e){if(1002===e.equipData.shuiguoId){var t=r.BuffMgr.getFruitBuff(1002,e.equipData.equipLevel);l.EventMgrInstance.emitEvent(c.EVENT_TYPE.Game_Add_YinBi,t.nowvalue,e.node.convertToWorldSpaceAR(cc.v2(0,0)))}})},.5))})},t.prototype.onEnable=function(){this.changeSliderLabelColor()},t.prototype.changeSliderLabelColor=function(){var e=d.GameDataMgr.getSilverCoin;this.auto_ui.node_sliverLabelNode.color=e>=this.oneBuyMoney?cc.Color.WHITE:cc.Color.RED},t.prototype.onLoad=function(){var e=this;this.init("","",null),this.auto_ui.dbAnim_heChengEffect.addEventListener(dragonBones.EventObject.COMPLETE,function(){e.auto_ui.dbAnim_heChengEffect.node.active=!1},this),this._loadRes(s.BundleNames.Game,"res/bg/gezibg"+h.GameGlobalVariable.getSceneId(),cc.SpriteFrame).then(function(t){e.auto_ui.node_diTuNode.getComponent(cc.Sprite).spriteFrame=t}),this.auto_ui.btn_VideoGetCell.node.active=!1,b.PlayerDataMgr.getGuideIndexByTaskName(B.GuideName.GameBag)===B.GameBagGuideIndex.GuideCompletion&&(this.auto_ui.btn_VideoGetCell.node.active=this.maxX*this.maxY-this.cellCompMap.size>0&&d.GameDataMgr.getGameBag.videoCellCount<h.GameGlobalVariable.bagVideoCellCount),this.gameOpenMoveTween(!0,function(){e.startSet(),e.scheduleOnce(function(){e.checkBottomBtnScale()},.15)})},t.prototype.startSet=function(){var e=this;this.auto_ui.btn_UseGeZiBtn.node.active=!1,this.auto_ui.node_useGeZiTip.active=!1,this.cellFatherMove=this.auto_ui.node_DragEndNode.getComponent(_.default),this.cellFatherMove.initializeSettings(this);for(var t=this.auto_ui.node_DragFather.childrenCount-1;t>=0;t--)this.recycleEquip(this.auto_ui.node_DragFather.children[t]);var i=!1;if(!d.GameDataMgr.getGameBag.bagArray){d.GameDataMgr.getGameBag.bagArray=[],i=!0;for(var o=(this.maxX-this.startX)/2,a=(this.maxY-this.startY)/2,n=Math.floor(o),r=Math.ceil(o),s=Math.floor(a),c=Math.ceil(a),l=0;l<this.maxY;l++)for(var u=0;u<this.maxX;u++){var h=0;(u<n||u>=this.maxX-r||l<s||l>=this.maxY-c)&&(h=-1),d.GameDataMgr.getGameBag.bagArray.push(h)}}var p=this.auto_ui.node_cubeFather;if(0===p.childrenCount){this.auto_ui.node_diTuNode.active=!0;var f=this.auto_ui.node_cubeBaseFather;for(t=0;t<this.maxX*this.maxY;t++){var m=void 0;t<f.childrenCount?m=f.children[t]:(m=cc.instantiate(this.auto_ui.node_cubeItem)).parent=f,m.active=!0,(y=m.getComponent(g.default)).initializeSettings({cellIndex:t},!1),y.temporaryShowBgNode(!0),this.baseCellCompArray.push(y)}for(f.opacity=0,this.cellCompMap.clear(),l=0;l<this.maxY;l++)for(u=0;u<this.maxX;u++){var v=l*this.maxX+u;if(-1!==(h=d.GameDataMgr.getGameBag.bagArray[v])){var y=(m=cc.instantiate(this.auto_ui.node_cubeItem)).getComponent(g.default);this.cellCompMap.set(v,y),m.name="\u65b9\u5757"+v,m.parent=p,m.active=!0,y.initializeSettings({cellIndex:v},-1!==h)}}this.scheduleOnce(function(){e.cellCompMap.forEach(function(e){e.node.setPosition(p.convertToNodeSpaceAR(f.children[e.cellData.cellIndex].convertToWorldSpaceAR(cc.v2(0,0))))});var t=cc.v2(44,32);e.changeSizeByChild(e.auto_ui.node_cubeFather,t),e.setBgNodeSize(!1)})}this.startShowEquip(i),d.GameDataMgr.getGameBag.cellWposArray&&0!==d.GameDataMgr.getGameBag.cellWposArray.length||this.SaveCellWpos(),b.PlayerDataMgr.getGuideIndexByTaskName(B.GuideName.GameBag)===B.GameBagGuideIndex.EntryGuide7Completion&&b.PlayerDataMgr.gmSetGuideIndex(B.GuideName.GameBag,B.GameBagGuideIndex.StartBattleGuide6),b.PlayerDataMgr.getGuideIndexByTaskName(B.GuideName.GameBag)!==B.GameBagGuideIndex.GuideCompletion?this.checkGuide():this.scheduleOnce(function(){e.checkAI()})},t.prototype.startShowEquip=function(e){var t=this;this.dressUpEquipMap.clear(),this.equipPool.clear();var i=d.GameDataMgr.getGameBag;if(i.dressUpEquips){var o=[],a=[];i.dressUpEquips.forEach(function(e){var i=t.getEquipNode(e.pfbName);i.parent=t.auto_ui.node_DragEndNode,i.active=!0,o.push(e.wPostion),a.push(i);var n=i.getComponent(f.default),r=-1===e.equipLevel;n.initializeSettings(e,r,t.onChildTouchStart.bind(t),t.onChildTouchMove.bind(t),t.onChildTouchUp.bind(t),t.makePaiZi.bind(t)),t.dressUpEquipMap.set(i.uuid,n);var s=[];e.lockCellIndex.forEach(function(e){t.cellCompMap.get(e).dragEndLockThis(n),s.push(t.cellCompMap.get(e))}),n.dragEndLockCell(s)}),this.scheduleOnce(function(){o.forEach(function(e,i){var o=a[i].parent.convertToNodeSpaceAR(e);a[i].setPosition(cc.v2(o.x,o.y+t.viewNodePosY))})})}i.equipPool&&i.equipPool.length>0?i.equipPool.forEach(function(e){var i=t.getEquipNode(e.pfbName);i.parent=t.auto_ui.node_DragFather,i.active=!0,i.setPosition(0,0);var o=i.getComponent(f.default),a=-1===e.equipLevel;o.initializeSettings(e,a,t.onChildTouchStart.bind(t),t.onChildTouchMove.bind(t),t.onChildTouchUp.bind(t),t.makePaiZi.bind(t)),t.equipPool.set(o.node.uuid,o)}):e&&this.resetEquip(!0,!1,!0),this.checkDragFatherLayout()},t.prototype.sliderResetClick=function(){var e=this;if(d.GameDataMgr.getSilverCoin>=this.oneBuyMoney)this.resetEquip(!1,!1,!1);else{var t=new x.VideoPurchaseData;t.titleStr="\u94f6\u5e01\u4e0d\u8db3",t.coinCount=this.videoGetMoney,t.infoStr="\u662f\u5426\u89c2\u770b\u89c6\u9891\uff0c\u83b7\u5f97"+this.videoGetMoney+"\u94f6\u5e01",t.clickCallBack=function(){d.GameDataMgr.addSilverCoin(e.videoGetMoney),e.changeSliderLabelColor(),l.EventMgrInstance.emitEvent(c.EVENT_TYPE.Game_Add_YinBi,e.videoGetMoney,e.node.convertToWorldSpaceAR(cc.v2(0,0)),null,!1)},I.default.open(s.BundleNames.Game,w.UIView_Game.UI_VideoBuyOne,t)}},t.prototype._clickListener=function(e){var t=this,i=this.auto_ui;switch(e){case i.btn_ResetBtn:this.sliderResetClick();break;case i.btn_VideoResetBtn:var a="\u80cc\u5305\u89c6\u9891\u5237\u65b0";if(1===h.GameGlobalVariable.isSpecialLevel())a="\u65e0\u5c3d\u6a21\u5f0f\u80cc\u5305\u89c6\u9891\u5237\u65b0";else{var n=d.GameDataMgr.getCurrentLevelWaveState(h.GameGlobalVariable.nowlevel,2);a=h.GameGlobalVariable.nowlevel+"\u7ae0_"+(n+1)+"\u6ce2_"+a}o.ADMgr.showRewardedVideoAd(a,function(){t.resetEquip(!1,!0,!1),i.btn_VideoResetBtn.node.active=!1,t.checkBottomBtnScale()});break;case i.btn_start:this.gameStart();break;case i.btn_UseGeZiBtn:this.setCellFatherMove(!1);break;case i.btn_VideoGetCell:this.videoGetCell()}},t.prototype.videoGetCell=function(){var e=this,t="\u80cc\u5305\u89c6\u9891\u83b7\u53d6\u6269\u5c55\u683c\u5b50";if(1===h.GameGlobalVariable.isSpecialLevel())t="\u65e0\u5c3d\u6a21\u5f0f\u80cc\u5305\u89c6\u9891\u83b7\u53d6\u6269\u5c55\u683c\u5b50";else{var i=d.GameDataMgr.getCurrentLevelWaveState(h.GameGlobalVariable.nowlevel,2);t=h.GameGlobalVariable.nowlevel+"\u7ae0_"+(i+1)+"\u6ce2_"+t}o.ADMgr.showRewardedVideoAd(t,function(){var t=h.GameGlobalVariable.bagVideoCellCount;d.GameDataMgr.getGameBag.videoCellCount++;var i=""+(t-d.GameDataMgr.getGameBag.videoCellCount);e.auto_ui.node_videoLastCount.children.forEach(function(e){e.active=e.name===i}),e.auto_ui.btn_VideoGetCell.node.active=e.maxX*e.maxY-e.cellCompMap.size>0&&d.GameDataMgr.getGameBag.videoCellCount<t,console.log(e.maxX*e.maxY-e.cellCompMap.size,d.GameDataMgr.getGameBag.videoCellCount,t),d.GameDataMgr.saveGameBagData(),e.checkBottomBtnScale();for(var o=y.default.getInstance.getOneCell(1,e.maxX*e.maxY-e.cellCompMap.size,d.GameDataMgr.getGameBag.videoCellCount),a=0;a<o.length;a++){var r=o[a];if(r){var c=e.getEquipNode(r.pfbName);if(!c)continue;c.parent=e.auto_ui.node_DragFather,e.auto_ui.node_DragFather.childrenCount>1&&c.setSiblingIndex(Math.floor(e.auto_ui.node_DragFather.childrenCount/2)),c.active=!0;var l=c.getComponent(f.default),u=-1===r.level,p=u?r.level:r.level-1,_={shuiguoId:r.shuiguoId,equipLevel:p,lockCellIndex:[],pfbName:r.pfbName,isHaveQiPao:1===r.isHaveQiPao};l.initializeSettings(_,u,e.onChildTouchStart.bind(e),e.onChildTouchMove.bind(e),e.onChildTouchUp.bind(e),e.makePaiZi.bind(e)),e.addEquipPoolData(l)}}n.AudioMgr.playSoundEffect("sound/resetEquip",!1,s.BundleNames.Game)})},t.prototype.gameStart=function(){if(this.dressUpEquipMap.size>0){l.EventMgrInstance.emitEvent(c.EVENT_TYPE.Game_OpenGame),d.GameDataMgr.getGameBag.equipPool.length=0;for(var e=this.auto_ui.node_DragFather.childrenCount-1;e>=0;e--)this.recycleEquip(this.auto_ui.node_DragFather.children[e]);this.gameOpenMoveTween(!1,null)}else C.TipMgr.showToast("\u8bf7\u5148\u4e0a\u9635\u6c34\u679c")},t.prototype.resetEquip=function(e,t,i){if(!e&&!t){if(!d.GameDataMgr.subtractSilverCoin(this.oneBuyMoney))return;this.changeSliderLabelColor()}this.makeEquip(t?4:3,t,i),this.saveData(),this.checkDragFatherLayout()},t.prototype.makeEquip=function(e,t,i){n.AudioMgr.playSoundEffect("sound/resetEquip",!1,s.BundleNames.Game);var o=d.GameDataMgr.getCurrentLevelWaveState(h.GameGlobalVariable.nowlevel,2)+1;1!==h.GameGlobalVariable.isSpecialLevel()&&i||(o=2);var a=y.default.getInstance.getEquip(e,t,this.maxX*this.maxY-this.cellCompMap.size,o);if(1===o&&i){for(var r=void 0,c=0;c<a.length;c++)if(1===(l=a[c]).level&&l.shuiguoId!==x.FruitId.\u6768\u6843\u5fcd\u8005&&l.shuiguoId!==x.FruitId.\u67e0\u6aac\u7cbe&&l.shuiguoId!==x.FruitId.\u8fa3\u59b9\u5b50&&l.shuiguoId!==x.FruitId.\u62db\u8d22\u6a59\u5b50){r=l;break}if(r)for(c=0;c<a.length;c++){var l;if(1===(l=a[c]).level&&l.shuiguoId!==r.shuiguoId){a[c]=r;break}}}if(b.PlayerDataMgr.getGuideIndexByTaskName(B.GuideName.GameBag)===B.GameBagGuideIndex.InitialGuide1?a=[u.Excel.bagEquipRule(14),u.Excel.bagEquipRule(32),u.Excel.bagEquipRule(12)]:b.PlayerDataMgr.getGuideIndexByTaskName(B.GuideName.GameBag)===B.GameBagGuideIndex.RefreshButtonGuide3?a=[u.Excel.bagEquipRule(14),u.Excel.bagEquipRule(32),u.Excel.bagEquipRule(10)]:b.PlayerDataMgr.getGuideIndexByTaskName(B.GuideName.GameBag)===B.GameBagGuideIndex.GridGuide8&&(a=[u.Excel.bagEquipRule(2),u.Excel.bagEquipRule(30),u.Excel.bagEquipRule(10)]),i&&this.maxX*this.maxY-this.cellCompMap.size>0){var p=y.default.getInstance.getMustGetGeZi();p&&(a[Math.floor(Math.random()*a.length)]=p)}for(c=this.auto_ui.node_DragFather.childrenCount-1;c>=0;c--)this.recycleEquip(this.auto_ui.node_DragFather.children[c]);for(this.equipPool.clear(),d.GameDataMgr.getGameBag.equipPool=[],c=0;c<e;c++){var _=a[c],g=this.getEquipNode(_.pfbName);if(g){g.parent=this.auto_ui.node_DragFather,g.active=!0;var m=g.getComponent(f.default),v=-1===_.level,I=v?_.level:_.level-1,E={shuiguoId:_.shuiguoId,equipLevel:I,lockCellIndex:[],pfbName:_.pfbName,isHaveQiPao:1===_.isHaveQiPao};m.initializeSettings(E,v,this.onChildTouchStart.bind(this),this.onChildTouchMove.bind(this),this.onChildTouchUp.bind(this),this.makePaiZi.bind(this)),this.addEquipPoolData(m)}}this.childPosMap.clear()},t.prototype.onChildTouchStart=function(e){if(!this.currPickNode){var t=e.target.parent.parent;this.setTouchStartNode(t)}},t.prototype.setTouchStartNode=function(e){this.childPosMap.set(e.uuid,e.getPosition()),this.currPickNode=e,this.currPickNodeComp=e.getComponent(f.default);var t=this.currPickNode.convertToWorldSpaceAR(cc.v2(0,0));this.currPickNode.parent=this.auto_ui.node_DragTempNode,this.currPickNode.setPosition(this.auto_ui.node_DragTempNode.convertToNodeSpaceAR(t)),this.currPickNodeComp.isGeZiType&&this.setCellFatherMove(!0),this.currPickNode.angle=0,this.moveLength=0,-1==this.guide4Time&&b.PlayerDataMgr.getGuideIndexByTaskName(B.GuideName.GameBag)!=B.GameBagGuideIndex.GridGuide8||!this.guideShou||(this.guideShou.active=!1),this.currPickNodeComp.lockCellArray&&0!==this.currPickNodeComp.lockCellArray.length||this.checkDragFatherLayout(this.currPickNode.uuid,-1),n.AudioMgr.playSoundEffect("effect/dianEquip"),this.currPickNodeComp&&this.currPickNodeComp.equipData.equipLevel===h.GameGlobalVariable.normalMaxLevel-1&&l.EventMgrInstance.emitEvent(c.EVENT_TYPE.Game_Show_Level5Tip,{isShow:!0,shuiGuoId:this.currPickNodeComp.equipData.shuiguoId}),this.currPickNodeComp.displayUnlockLevel5Tip(!0,this.equipPool,this.dressUpEquipMap)},t.prototype.onChildTouchMove=function(e){if(this.currPickNode){var t=this.currPickNode.parent.convertToNodeSpaceAR(e.getLocation());if(this.currPickNode.setPosition(t),Math.abs(e.getDeltaX())+Math.abs(e.getDeltaY())>3){var i=this.checkCellIsOk(!1);if(this.moveLength+=Math.abs(e.getDeltaX())+Math.abs(e.getDeltaY()),this.currPickNodeComp.equipData.shuiguoId===x.FruitId.\u67e0\u6aac\u7cbe)if(i.pickCellArray){var o=[];i.pickCellArray.forEach(function(e){o.push(e.cellData.cellIndex)}),this.checkUpBuff(o,!1)}else this.hideJianTou()}}},t.prototype.onChildTouchUp=function(){var e=this;if(this.currPickNode){this.currPickNodeComp.displayUnlockLevel5Tip(!1,null,null),l.EventMgrInstance.emitEvent(c.EVENT_TYPE.Game_Show_Level5Tip,{isShow:!1,shuiGuoId:0}),this.hideJianTou(),this.moveLength<10&&!this.currPickNodeComp.isGeZiType&&!this.currPickNodeComp.qiPaoNode.active&&I.default.open(s.BundleNames.Game,w.UIView_Game.UI_GameEquipInfo,{shuiGuoId:this.currPickNodeComp.equipData.shuiguoId,level:this.currPickNodeComp.equipData.equipLevel}),this.moveLength=0,this.currPickNode.angle=0;var t=this.currPickNodeComp;t.displayPurchaseView(function(){e.lastPickArray.length>0&&e.lastPickArray.forEach(function(e){e.updateBgNodeColor(cc.Color.WHITE)}),t.lockCellArray&&(t.lockCellArray.forEach(function(e){e.dragEndLockThis(null)}),t.dragEndLockCell(null),e.removeDressUplData(t.node.uuid),e.addEquipPoolData(t)),e.currAddCellDataMap.delete(t.node.uuid),e.backToDady(t),e.currPickNode=null},function(){e.touchUpEndCall()})}},t.prototype.touchUpEndCall=function(){var e=this,t=this.checkCellIsOk(!0);this.lastPickArray.length>0&&this.lastPickArray.forEach(function(e){e.updateBgNodeColor(cc.Color.WHITE)}),this.lastPickArray.length=0;var i=this.currPickNodeComp;b.PlayerDataMgr.getGuideIndexByTaskName(B.GuideName.GameBag)===B.GameBagGuideIndex.SynthesisGuide4&&(2===this.guide4Time?t.otherEquip&&(t.isOk=!1):-1!==this.guide4Time&&0===this.currPickNodeComp.equipData.equipLevel&&t.otherEquip&&t.otherEquip.equipData.shuiguoId===this.currPickNodeComp.equipData.shuiguoId||(t.isOk=!1)),!t.isOk||t.otherEquip&&t.otherEquip.equipData.isHaveQiPao?this.handleCheckIsNotOk(i):this.handleCheckIsOk(i,t),this.currPickNode=null,this.saveData(),this.scheduleOnce(function(){e.checkAI()},a.default._instance.startDelayTime)},t.prototype.handleCheckIsNotOk=function(){this.currPickNodeComp.isGeZiType&&this.currAddCellDataMap.delete(this.currPickNodeComp.node.uuid),this.currPickNodeComp.lockCellArray&&(this.currPickNodeComp.lockCellArray.forEach(function(e){e.dragEndLockThis(null)}),this.currPickNodeComp.dragEndLockCell(null),this.removeDressUplData(this.currPickNode.uuid),this.addEquipPoolData(this.currPickNodeComp)),-1!==this.guide4Time&&this.guideShou&&(this.guideShou.active=!0,this.currPickNode.setSiblingIndex(0)),this.backToDady(this.currPickNodeComp)},t.prototype.handleCheckIsOk=function(e,t){var i=this;n.AudioMgr.playSoundEffect("effect/fangEquip"),this.guideShou&&b.PlayerDataMgr.getGuideIndexByTaskName(B.GuideName.GameBag)!==B.GameBagGuideIndex.GridGuide8&&(p.GuideCtrlInstance.recycleOneFingerGuide(this.guideShou),this.guideShou=null,this.scheduleOnce(function(){i.checkGuide()},.5)),b.PlayerDataMgr.getGuideIndexByTaskName(B.GuideName.GameBag)===B.GameBagGuideIndex.GridGuide8&&this.currPickNodeComp.isGeZiType&&this.guideCheckCell(t.pickCellArray)&&this.showGuide8_1(),t.pickCellArray?this.handlePickCell(t,e):t.otherEquip&&this.handleOtherEquip(t,e),this.currPickNodeComp.equipData.shuiguoId===x.FruitId.\u67e0\u6aac\u7cbe&&this.checkUpBuff(this.currPickNodeComp.equipData.lockCellIndex,!0)},t.prototype.handlePickCell=function(e,t){var i=this;if(this.currPickNodeComp.isGeZiType)this.currAddCellDataMap.set(this.currPickNode.uuid,{cellNode:this.currPickNode,pickCellArray:e.pickCellArray}),this.currPickNode.runAction(cc.moveTo(this.xifuTime,this.currPickNode.x+e.effectPos.x,this.currPickNode.y+e.effectPos.y));else{this.currPickNodeComp.lockCellArray?(this.currPickNodeComp.lockCellArray.forEach(function(e){d.GameDataMgr.getGameBag.bagArray[e.cellData.cellIndex]=0,e.dragEndLockThis(null)}),this.removeDressUplData(this.currPickNode.uuid)):this.removeEquipPoolData(this.currPickNode.uuid),e.pickCellArray.forEach(function(e){if(e.equipComp&&i.dressUpEquipMap.has(e.equipComp.node.uuid)){i.removeDressUplData(e.equipComp.node.uuid);var t=e.equipComp;t.lockCellArray.forEach(function(e){d.GameDataMgr.getGameBag.bagArray[e.cellData.cellIndex]=0,e.dragEndLockThis(null)}),t.dragEndLockCell(null),i.addEquipPoolData(t),i.backToDady(t)}}),this.currPickNode.parent=this.auto_ui.node_DragEndNode;var o=cc.v2(this.currPickNode.x+e.effectPos.x,this.currPickNode.y+e.effectPos.y);this.currPickNode.runAction(cc.sequence(cc.moveTo(this.xifuTime,o.x,o.y),cc.delayTime(.15),cc.callFunc(function(){i.checkDressUpLabel(t)}))),this.currPickNodeComp.dragEndLockCell(e.pickCellArray),e.pickCellArray.forEach(function(e){d.GameDataMgr.getGameBag.bagArray[e.cellData.cellIndex]=1,e.dragEndLockThis(i.currPickNodeComp)}),this.addDressUpData(this.currPickNodeComp,o)}},t.prototype.handleOtherEquip=function(e,t){var i=this,o=e.otherEquip.lockCellArray,a=this.currPickNodeComp.lockCellArray,r=!1,c=null;if(this.currPickNodeComp.equipData.equipLevel<h.GameGlobalVariable.normalMaxLevel-1)this.currPickNodeComp.equipData.equipLevel++;else if(this.currPickNodeComp.equipData.equipLevel<h.GameGlobalVariable.zaZhongMaxLevel-1){r=!0;var l=u.Excel.shuiguo(this.currPickNodeComp.equipData.shuiguoId),p=e.otherEquip,_=this.currPickNodeComp;if(0===l.jinjieShuiGuoId){c=p.node.convertToWorldSpaceAR(cc.v2(0,0));var g=this.currPickNodeComp.node.convertToWorldSpaceAR(cc.v2(0,0));e.otherEquip=_,e.otherEquip.node.setPosition(e.otherEquip.node.parent.convertToNodeSpaceAR(g)),this.currPickNodeComp=p,this.currPickNodeComp.node.setPosition(this.currPickNodeComp.node.parent.convertToNodeSpaceAR(c)),t=this.currPickNodeComp,e.zaZhongPickCells=o}this.removeDressUplData(p.node.uuid),this.removeDressUplData(_.node.uuid),this.removeEquipPoolData(p.node.uuid),this.removeEquipPoolData(_.node.uuid),this.currPickNodeComp.equipData.equipLevel++,I.default.open(s.BundleNames.Game,w.UIView_Game.UI_GetZaZhong,{shuiGuoId:this.currPickNodeComp.equipData.shuiguoId})}if(r?n.AudioMgr.playSoundEffect("sound/upLevel5",!1,s.BundleNames.Game):n.AudioMgr.playSoundEffect("effect/gameBagHeCheng"),this.currPickNodeComp.resetShow(),this.showDragBone(e.otherEquip.node.convertToWorldSpaceAR(cc.v2(0,0))),this.currPickNode.angle=0,o&&e.otherEquip.equipData.pfbName===this.currPickNodeComp.equipData.pfbName){a?(a.forEach(function(e){d.GameDataMgr.getGameBag.bagArray[e.cellData.cellIndex]=0,e.dragEndLockThis(null)}),this.removeDressUplData(this.currPickNode.uuid)):this.removeEquipPoolData(this.currPickNode.uuid),this.currPickNodeComp.dragEndLockCell(o),this.currPickNodeComp.lockCellArray.forEach(function(e){e.dragEndLockThis(i.currPickNodeComp)}),this.currPickNode.parent=this.auto_ui.node_DragEndNode;var f=e.otherEquip.node.getPosition();this.currPickNode.runAction(cc.sequence(cc.moveTo(this.xifuTime,f.x,f.y),cc.delayTime(.15),cc.callFunc(function(){i.checkUpLevelLabel(t)}))),this.removeDressUplData(e.otherEquip.node.uuid),this.addDressUpData(this.currPickNodeComp,f)}else if(o&&o.forEach(function(e){d.GameDataMgr.getGameBag.bagArray[e.cellData.cellIndex]=0,e.dragEndLockThis(null)}),r)if(a&&a.forEach(function(e){d.GameDataMgr.getGameBag.bagArray[e.cellData.cellIndex]=0,e.dragEndLockThis(null)}),e.zaZhongPickCells&&e.zaZhongPickCells.length>0){e.zaZhongPickCells.forEach(function(e){d.GameDataMgr.getGameBag.bagArray[e.cellData.cellIndex]=1,e.dragEndLockThis(i.currPickNodeComp)}),this.currPickNodeComp.dragEndLockCell(e.zaZhongPickCells),this.currPickNode.parent=this.auto_ui.node_DragEndNode;var m=e.zaZhongPickCells[0].node.convertToWorldSpaceAR(cc.v2(0,0)),v=this.currPickNodeComp.getGridNode().children[0].convertToWorldSpaceAR(cc.v2(0,0)),y=cc.v2(m.x-v.x,m.y-v.y);f=cc.v2(this.currPickNode.x+y.x,this.currPickNode.y+y.y),c&&(f.set(this.currPickNodeComp.node.parent.convertToNodeSpaceAR(c)),console.error(f)),this.currPickNode.runAction(cc.moveTo(this.xifuTime,f.x,f.y)),this.addDressUpData(this.currPickNodeComp,f)}else this.addEquipPoolData(this.currPickNodeComp),this.backToDady(this.currPickNodeComp,function(){i.checkUpLevelLabel(t)});else a&&(a.forEach(function(e){d.GameDataMgr.getGameBag.bagArray[e.cellData.cellIndex]=0,e.dragEndLockThis(null)}),this.currPickNodeComp.dragEndLockCell(null),this.removeDressUplData(this.currPickNode.uuid),this.addEquipPoolData(this.currPickNodeComp)),this.removeEquipPoolData(e.otherEquip.node.uuid),this.backToDady(this.currPickNodeComp,function(){i.checkUpLevelLabel(t)});this.recycleEquip(e.otherEquip.node)},t.prototype.checkCellIsOk=function(e){var t,i,o=this,a=this.currPickNodeComp.getGridNode(),n=!0,r=null,s=[],c=[],l=this.auto_ui.node_cubeFather,u=d.GameDataMgr.getGameBag.bagArray;this.currPickNodeComp.isGeZiType&&(l=this.auto_ui.node_cubeBaseFather);for(var p=[],_=0;_<l.childrenCount;_++){var f=l.children[_];p.push(f.convertToWorldSpaceAR(cc.v2(0,0)))}var m=function(e){for(var t=a.children[e].convertToWorldSpaceAR(cc.v2(0,0)),i=!1,s=function(e){var a;if(a=o.currPickNodeComp.isGeZiType?e:l.children[e].getComponent(g.default).cellData.cellIndex,o.currPickNodeComp.isGeZiType){var n=!1;if(o.currAddCellDataMap.size>0&&o.currAddCellDataMap.forEach(function(e){if(e.cellNode!==o.currPickNode&&e.pickCellArray&&!n)for(var t=0;t<e.pickCellArray.length;t++){var i=e.pickCellArray[t];if(a===i.cellData.cellIndex){n=!0;break}}}),n)return"continue"}var s=-1!==u[a]&&!o.currPickNodeComp.isGeZiType,d=-1===u[a]&&o.currPickNodeComp.isGeZiType;if((s||d)&&cc.Vec2.distance(t,p[e])<o.effectMax)return i=!0,c.push(a),r||(r=cc.v2(p[e].x-t.x,p[e].y-t.y)),"break"},d=0;d<l.childrenCount&&"break"!==s(d);d++);i||(n=!1)};for(_=0;_<a.childrenCount;_++)m(_);this.lastPickArray.length>0&&this.lastPickArray.forEach(function(e){e.updateBgNodeColor(cc.Color.WHITE)}),this.lastPickArray.length=0,c.forEach(function(e){var t=o.currPickNodeComp.isGeZiType?o.baseCellCompArray[e]:o.cellCompMap.get(e);t.updateBgNodeColor(n?cc.Color.GREEN:cc.Color.RED),o.lastPickArray.push(t),s.push(t)});var v,b=this.currPickNodeComp.equipData.equipLevel===h.GameGlobalVariable.normalMaxLevel-1;if(n&&!this.currPickNodeComp.isGeZiType&&s.length>0&&this.currPickNodeComp.equipData.equipLevel<y.default.getInstance.getMaxLevel(this.currPickNodeComp.equipData.shuiguoId)-1){var I=!0;if(b){I=!1;var E=function(a){var n=s[a];if(n.equipComp&&n.equipComp.equipData.equipLevel===o.currPickNodeComp.equipData.equipLevel&&y.default.getInstance.getZaZhongId(n.equipComp.equipData.shuiguoId)===o.currPickNodeComp.equipData.shuiguoId){if(I=!0,t=n.equipComp,e&&s&&s.length>0){var r=[];s.forEach(function(e){e&&e.equipComp&&e.equipComp!==o.currPickNodeComp&&e.equipComp!==t&&!r.includes(e.equipComp)&&r.push(e.equipComp)}),r.forEach(function(e){o.removeDressUplData(e.node.uuid),o.addEquipPoolData(e),o.backToDady(e),e.lockCellArray&&e.lockCellArray.forEach(function(e){d.GameDataMgr.getGameBag.bagArray[e.cellData.cellIndex]=0,e.dragEndLockThis(null)}),e.dragEndLockCell(null)})}return i=s,s=null,"break"}};for(_=0;_<s.length&&"break"!==E(_);_++);}else for(_=0;_<s.length;_++){var M=s[_];if(!M.equipComp||M.equipComp.uuid===this.currPickNodeComp.uuid||M.equipComp.equipData.equipLevel!==this.currPickNodeComp.equipData.equipLevel){I=!1;break}if(M.equipComp.equipData.shuiguoId!==this.currPickNodeComp.equipData.shuiguoId&&M.equipComp.equipData.equipLevel<h.GameGlobalVariable.normalMaxLevel-1){I=!1;break}}I&&!t&&(t=s[0].equipComp,s=null)}if(v=b?200:100,!n&&!this.currPickNodeComp.isGeZiType){s=null;var C=this.currPickNode.convertToWorldSpaceAR(cc.v2(0,0));this.equipPool.forEach(function(e){if(!t){var i=e.node.convertToWorldSpaceAR(cc.v2(0,0));e.node.uuid!==o.currPickNode.uuid&&o.currPickNodeComp.equipData.equipLevel<y.default.getInstance.getMaxLevel(o.currPickNodeComp.equipData.shuiguoId)-1&&e.equipData.equipLevel===o.currPickNodeComp.equipData.equipLevel&&cc.Vec2.distance(i,C)<v&&(e.equipData.shuiguoId!==o.currPickNodeComp.equipData.shuiguoId&&e.equipData.equipLevel<h.GameGlobalVariable.normalMaxLevel-1||y.default.getInstance.getZaZhongId(e.equipData.shuiguoId)!==o.currPickNodeComp.equipData.shuiguoId&&e.equipData.equipLevel===h.GameGlobalVariable.normalMaxLevel-1||(t=e,n=!0,r=cc.v2(i.x-C.x,i.y-C.y)))}}),t||this.dressUpEquipMap.forEach(function(e,i){if(!t){var a=e.node.convertToWorldSpaceAR(cc.v2(0,0));i!==o.currPickNode.uuid&&o.currPickNodeComp.equipData.equipLevel<y.default.getInstance.getMaxLevel(o.currPickNodeComp.equipData.shuiguoId)-1&&e.equipData.equipLevel===o.currPickNodeComp.equipData.equipLevel&&cc.Vec2.distance(a,C)<v&&(e.equipData.shuiguoId!==o.currPickNodeComp.equipData.shuiguoId&&e.equipData.equipLevel<h.GameGlobalVariable.normalMaxLevel-1||y.default.getInstance.getZaZhongId(e.equipData.shuiguoId)!==o.currPickNodeComp.equipData.shuiguoId&&e.equipData.equipLevel===h.GameGlobalVariable.normalMaxLevel-1||(t=e,n=!0,r=cc.v2(a.x-C.x,a.y-C.y)))}})}return{isOk:n,effectPos:r,pickCellArray:s,otherEquip:t,zaZhongPickCells:i}},t.prototype.recycleEquip=function(e){e.destroy()},t.prototype.getEquipNode=function(e){var t=this.auto_ui.node_EquipFather.getChildByName(e);return t?cc.instantiate(t):null},t.prototype.removeEquipPoolData=function(e){var t=this.equipPool.get(e);if(t){for(var i=t.equipData,o=0;o<d.GameDataMgr.getGameBag.equipPool.length;o++){var a=d.GameDataMgr.getGameBag.equipPool[o];if(a.equipLevel===i.equipLevel&&a.shuiguoId===i.shuiguoId&&this.comparisonArray(a.lockCellIndex,i.lockCellIndex)){d.GameDataMgr.getGameBag.equipPool.splice(o,1);break}}this.equipPool.delete(e)}},t.prototype.addEquipPoolData=function(e){e.equipData.wPostion=null,this.equipPool.set(e.node.uuid,e),d.GameDataMgr.getGameBag.equipPool.push(e.equipData)},t.prototype.removeDressUplData=function(e){var t=this.dressUpEquipMap.get(e);if(t){for(var i=t.equipData,o=0;o<d.GameDataMgr.getGameBag.dressUpEquips.length;o++){var a=d.GameDataMgr.getGameBag.dressUpEquips[o];if(a.equipLevel===i.equipLevel&&a.shuiguoId===i.shuiguoId&&this.comparisonArray(a.lockCellIndex,i.lockCellIndex)){d.GameDataMgr.getGameBag.dressUpEquips.splice(o,1);break}}this.dressUpEquipMap.delete(e)}},t.prototype.addDressUpData=function(e,t){e.equipData.wPostion=this.auto_ui.node_DragEndNode.convertToWorldSpaceAR(cc.v2(t.x,t.y-this.viewNodePosY)),v.LogMgr.debug(e.equipData.wPostion,t),this.dressUpEquipMap.set(e.node.uuid,e),d.GameDataMgr.getGameBag.dressUpEquips.push(e.equipData)},t.prototype.comparisonArray=function(e,t){return null===e&&null===t||null!==e&&null!==t&&e.length===t.length&&e.every(function(e){return-1!==t.indexOf(e)})},t.prototype.saveData=function(){d.GameDataMgr.saveGameBagData(),l.EventMgrInstance.emitEvent(c.EVENT_TYPE.GAME_UPDATE_BAG)},t.prototype.setCellFatherMove=function(e){var t=this;if(this.cellFatherMove.setMoveability(e,this.auto_ui.node_bottomBtn.active),this.auto_ui.node_bottomBtn.active=!e,this.auto_ui.btn_UseGeZiBtn.node.active=e,this.auto_ui.node_useGeZiTip.active=e,this.auto_ui.btn_VideoGetCell.node.active=!e,e&&(this.auto_ui.node_useGeZiTip.stopAllActions(),this.auto_ui.node_useGeZiTip.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(1,.8,.8),cc.scaleTo(1,.7,.7))))),b.PlayerDataMgr.getGuideIndexByTaskName(B.GuideName.GameBag)===B.GameBagGuideIndex.GridGuide8&&e?this.auto_ui.btn_UseGeZiBtn.interactable=!1:this.auto_ui.btn_UseGeZiBtn.interactable=!0,this.equipPool.forEach(function(t){t.isGeZiType||t.setClickable(!e,!0)}),this.dressUpEquipMap.forEach(function(t){t.setClickable(!e,!0)}),e)this.auto_ui.node_cubeBaseFather.opacity=255;else if(this.auto_ui.node_cubeBaseFather.opacity=0,this.currAddCellDataMap.size>0){this.checkDragCellIsOk(),this.currAddCellDataMap.forEach(function(e){e.pickCellArray.forEach(function(e){d.GameDataMgr.getGameBag.bagArray[e.cellData.cellIndex]=0;var i=t.baseCellCompArray[e.cellData.cellIndex].node,o=cc.instantiate(i);o.parent=t.auto_ui.node_cubeFather,o.setPosition(o.parent.convertToNodeSpaceAR(i.convertToWorldSpaceAR(cc.v2(0,0)))),t.cellCompMap.set(e.cellData.cellIndex,o.getComponent(g.default)),t.cellCompMap.get(e.cellData.cellIndex).initializeSettings(e.cellData,!0),o.name="\u65b9\u5757"+e.cellData.cellIndex}),t.removeEquipPoolData(e.cellNode.uuid),t.recycleEquip(e.cellNode)});var i=cc.v2(44,32),o=this.changeSizeByChild(this.auto_ui.node_cubeFather,i);this.dressUpEquipMap.forEach(function(e){e.node.x+=o.x,e.node.y+=o.y}),this.currAddCellDataMap.clear()}if(this.setBgNodeSize(e),!e){var a=h.GameGlobalVariable.bagVideoCellCount;this.auto_ui.btn_VideoGetCell.node.active=this.maxX*this.maxY-this.cellCompMap.size>0&&d.GameDataMgr.getGameBag.videoCellCount<a}},t.prototype.moveChangeBagCellIndex=function(e){var t=this;if(e&&e.isOk){var i=[];this.auto_ui.node_cubeFather.children.forEach(function(t,o){var a=t.getComponent(g.default);e.pickCellArray[o]||e.pickCellArray[o],t.name="\u65b9\u5757"+e.pickCellArray[o],a.updateCellData({cellIndex:e.pickCellArray[o]}),a.equipComp&&-1===i.indexOf(a.equipComp)&&i.push(a.equipComp)}),d.GameDataMgr.getGameBag.equipPool=[],i.forEach(function(e){var t=e.lockCellArray,i=[];t.forEach(function(e){i.push(e.cellData.cellIndex)}),e.equipData.lockCellIndex=i,d.GameDataMgr.getGameBag.equipPool.push(e.equipData)});var o=[];this.cellCompMap.forEach(function(e){o.push(e)}),this.cellCompMap.clear(),o.forEach(function(e){t.cellCompMap.set(e.cellData.cellIndex,e)});for(var a=d.GameDataMgr.getGameBag.bagArray,n=0;n<a.length;n++)this.cellCompMap.has(n)?d.GameDataMgr.getGameBag.bagArray[n]=this.cellCompMap.get(n).equipComp?1:0:d.GameDataMgr.getGameBag.bagArray[n]=-1}},t.prototype.checkDragCellIsOk=function(){var e=this,t=[],i=[];this.currAddCellDataMap.forEach(function(e,o){var a=[];e.pickCellArray.forEach(function(e){a.push(e.cellData.cellIndex)}),t.push(a),i.push(o)});for(var o=d.GameDataMgr.getGameBag.bagArray,a=0;a<t.length;a++)for(var n=0;n<t.length;n++){var r=t[n];r&&this.checkOneCellArrayIsOk(r,o)&&(r.forEach(function(e){o[e]=0}),t[n]=null,i[n]=null)}i.every(function(e){return null===e})||C.TipMgr.showToast("\u8bf7\u5c06\u6269\u5c55\u683c\u653e\u7f6e\u5728\u76f8\u90bb\u5730\u5757"),i.forEach(function(t){if(t){var i=e.equipPool.get(t);e.backToDady(i),i.lockCellArray&&(i.lockCellArray.forEach(function(e){e.dragEndLockThis(null)}),i.dragEndLockCell(null))}e.currAddCellDataMap.delete(t)})},t.prototype.checkOneCellArrayIsOk=function(e,t){for(var i=!1,o=0;o<e.length;o++){var a=e[o],n=!1;if((a-1>=0&&(a-1)%this.maxX!=this.maxX-1&&t[a-1]>=0||a-this.maxX>=0&&t[a-this.maxX]>=0||a+1<t.length&&(a+1)%this.maxX!=0&&t[a+1]>=0||a+this.maxX<t.length&&t[a+this.maxX]>=0)&&(n=!0),n){i=!0;break}}return i},t.prototype.setBgNodeSize=function(e){var t=this;this.scheduleOnce(function(){if(t.auto_ui.node_diTuNode.active=!0,e)t.auto_ui.node_diTuNode.width=t.auto_ui.node_cubeBaseFather.width,t.auto_ui.node_diTuNode.height=t.auto_ui.node_cubeBaseFather.height,t.auto_ui.node_diTuNode.setAnchorPoint(t.auto_ui.node_cubeBaseFather.getAnchorPoint()),t.auto_ui.node_diTuNode.setPosition(t.auto_ui.node_cubeBaseFather.getPosition());else{t.auto_ui.node_cubeFather.setPosition(0,0);var i=t.auto_ui.node_cubeFather.width,o=t.auto_ui.node_cubeFather.height;t.auto_ui.node_diTuNode.width=i,t.auto_ui.node_diTuNode.height=o,t.auto_ui.node_diTuNode.setPosition(0,0),t.auto_ui.node_DragEndNode.setPosition(0,0),t.dressUpEquipMap.forEach(function(e){e.equipData.wPostion=e.node.convertToWorldSpaceAR(cc.v2(0,-1*t.viewNodePosY))}),t.SaveCellWpos()}})},t.prototype.changeSizeByChild=function(e,t){for(var i=1e4,o=-1e4,a=1e4,n=-1e4,r=[],s=0;s<e.children.length;s++){var c=(p=e.children[s]).convertToWorldSpaceAR(cc.v2(0,0));c.x-p.width/2<i&&(i=c.x-p.width/2),c.x+p.width/2>o&&(o=c.x+p.width/2),c.y-p.height/2<a&&(a=c.y-p.height/2),c.y+p.height/2>n&&(n=c.y+p.height/2),r.push(c)}var l=o-i+t.x,u=n-a+t.y;e.width=l,e.height=u;var d=e.convertToWorldSpaceAR(cc.v2(0,0)),h=cc.v2((o+i)/2,(n+a)/2);for(e.setPosition(e.parent.convertToNodeSpaceAR(h)),s=0;s<e.children.length;s++){var p;(p=e.children[s]).setPosition(e.convertToNodeSpaceAR(r[s]))}return cc.v2(d.x-h.x,d.y-h.y)},t.prototype.SaveCellWpos=function(){var e=this,t=[];this.auto_ui.node_cubeFather.children.forEach(function(i){t.push(i.convertToWorldSpaceAR(cc.v2(0,-1*e.viewNodePosY)))}),d.GameDataMgr.getGameBag.cellWposArray=t,d.GameDataMgr.saveGameBagData(),l.EventMgrInstance.emitEvent(c.EVENT_TYPE.GAME_UPDATE_BAG)},t.prototype.backToDady=function(e,t){for(var i=this,o=e.node.convertToWorldSpaceAR(cc.v2(0,0)),a=this.auto_ui.node_DragFather.children.length,n=0;n<this.auto_ui.node_DragFather.children.length;n++){var r=this.auto_ui.node_DragFather.children[n].convertToWorldSpaceAR(cc.v2(0,0));if(o.x<r.x){a=n;break}}var s=e.equipIcon;s.parent=this.auto_ui.node_DragTempNode,s.setPosition(s.parent.convertToNodeSpaceAR(o)),e.node.parent=this.auto_ui.node_DragFather,e.node.setSiblingIndex(a),e.node.setPosition(0,0),e.setClickable(!1),e.scheduleOnce(function(){s.parent=e.node,s.setPosition(s.parent.convertToNodeSpaceAR(o));var a=Math.random(),n=0;a>.66?n=20:a<.33&&(n=-20),s.runAction(cc.sequence(cc.spawn(cc.moveTo(i.moveTime,0,0),cc.rotateTo(i.moveTime,n)),cc.delayTime(.15),cc.callFunc(function(){e.setClickable(!0),e.node.angle=s.angle,s.angle=0,t&&t()})))}),this.checkDragFatherLayout()},t.prototype.showDragBone=function(e){var t=this.auto_ui.dbAnim_heChengEffect.node;t.setPosition(t.parent.convertToNodeSpaceAR(e)),t.active=!0,this.auto_ui.dbAnim_heChengEffect.playAnimation("newAnimation",1)},t.prototype.makePaiZi=function(e){var t=cc.instantiate(this.paiZiPfb);return t.parent=e,t.getComponent(m.default)},t.prototype.checkDragFatherLayout=function(e,t){void 0===t&&(t=0);var i=30,o=this.auto_ui.node_DragFather.getComponent(cc.Layout),a=this.equipPool.size+t;if(a>=3){var n=0;this.equipPool.forEach(function(t){e&&e===t.node.uuid||(n+=t.node.width)}),n>700&&(i=Math.floor((700-n)/(a-1)))}o.spacingX!==i&&(o.spacingX=i,o.updateLayout())},t.prototype.checkDressUpLabel=function(e){if(-1===this.firstUseArray.indexOf(e.equipData.shuiguoId)){this.firstUseArray.push(e.equipData.shuiguoId);var t=u.Excel.shuiguo(e.equipData.shuiguoId),i=e.node.convertToWorldSpaceAR(cc.v2(0,0));i.y+=.7*e.node.height;var o="<color=#ffffff>"+t.starWord+"</c>";this.showTipNode(o,i,1.5);var a=Math.floor(5*Math.random());n.AudioMgr.playSoundEffect("sound/dressUp"+(a+1),!1,s.BundleNames.Game)}},t.prototype.checkUpLevelLabel=function(e){if(e.equipData.equipLevel!==h.GameGlobalVariable.normalMaxLevel){var t="",i=e.equipData.shuiguoId,o=1.5;if(y.default.getInstance.getMaxLevel(i)===h.GameGlobalVariable.zaZhongMaxLevel&&e.equipData.equipLevel===h.GameGlobalVariable.normalMaxLevel-1&&y.default.getInstance.getMaxLevel(this.currPickNodeComp.equipData.shuiguoId)===h.GameGlobalVariable.zaZhongMaxLevel){var a=u.Excel.shuiguo(i),n=u.Excel.shuiguo(y.default.getInstance.getZaZhongId(i)),r="player"+((0!==a.jinjieShuiGuoId?a:n).id-1e3)+"_5";t="<color=#ffffff>\u53ef\u4e0e4\u9636"+n.name+"\u6742\u4ea4\u5408\u6210\u81f35\u9636</c><img src='"+r+"'/>",o=3.5}else{var s=y.default.getInstance.getEquipUpData(i,e.equipData.equipLevel);0!==s.addattack&&(i===x.FruitId.\u8fa3\u59b9\u5b50?t+="<color=#ffffff>\u653b\u51fb\u901f\u5ea6\u5149\u73af + </c><color=#00ff00>100</c> <color=#ffffff>%</c>":t+="<color=#ffffff>\u653b\u51fb\u529b + </c><color=#00ff00>100</c> <color=#ffffff>%</c>"),0!==s.addattackspeed&&(t+="<color=#ffffff>\u6280\u80fd\u901f\u5ea6 + </c><color=#00ff00>100</c> <color=#ffffff>%</c>"),s.addbeidongbuff.length>0&&0!==s.addbeidongbuff[0]&&(i===x.FruitId.\u62db\u8d22\u6a59\u5b50?t+="<color=#ffffff>\u4ea7\u51fa\u94f6\u5e01\u7ffb\u500d</c>":i===x.FruitId.\u67e0\u6aac\u7cbe?t+="<color=#ffffff>\u653b\u51fb\u529b\u5149\u73af + </c><color=#00ff00>100 <color=#ffffff>%</c>":t+="<color=#ffffff>\u5929\u8d4b\u52a0\u6210\u6548\u679c\u7ffb\u500d</c>")}if(t){var c=e.node.convertToWorldSpaceAR(cc.v2(0,0));c.y+=.7*e.node.height,this.showTipNode(t,c,o)}}},t.prototype.showTipNode=function(e,t,i){e="<outline color=#000000 width=3>"+e+"</outline>",this.auto_ui.rtxt_upTipLabel.string=e;var o=this.auto_ui.node_upTipNode;o.stopAllActions(),o.opacity=255,o.active=!0,o.setPosition(o.parent.convertToNodeSpaceAR(t)),o.children[0].x=0,o.x>215?o.children[0].x=215-o.x:o.x<-215&&(o.children[0].x=-215-o.x),o.runAction(cc.sequence(cc.delayTime(i),cc.fadeOut(.25),cc.callFunc(function(){o.active=!1})))},t.prototype.checkGuide=function(){var e=this;b.PlayerDataMgr.getGuideIndexByTaskName(B.GuideName.GameBag)!==B.GameBagGuideIndex.GuideCompletion&&(this.auto_ui.btn_VideoGetCell.node.active=!1,this.auto_ui.node_bottomBtn.children.forEach(function(e){return e.scale=1}),h.GameGlobalVariable.isFirstGuide=!0),this.scheduleOnce(function(){switch(b.PlayerDataMgr.getGuideIndexByTaskName(B.GuideName.GameBag)){case B.GameBagGuideIndex.InitialGuide1:e.showGuide1();break;case B.GameBagGuideIndex.DragFruitGuide2:e.showGuide2();break;case B.GameBagGuideIndex.RefreshButtonGuide3:e.showGuide3();break;case B.GameBagGuideIndex.SynthesisGuide4:e.showGuide4();break;case B.GameBagGuideIndex.StartBattleGuide6:e.showGuide6();break;case B.GameBagGuideIndex.GridGuide8:e.showGuide8();break;case B.GameBagGuideIndex.OtherFruitsGuide9:e.showGuide9();break;case B.GameBagGuideIndex.GuideEnd10:e.showGuide10()}})},t.prototype.showGuide1=function(){var e=this;p.GuideCtrlInstance.showGuide({callBack:function(){b.PlayerDataMgr.setGuideIndex(B.GuideName.GameBag,B.GameBagGuideIndex.DragFruitGuide2),e.showGuide2()},sayStr:"\u602a\u7269\u5927\u519b\u5373\u5c06\u5230\u6765\uff0c\u8d76\u5feb\u5e03\u7f6e\u6c34\u679c\u52c7\u58eb\uff0c\u51c6\u5907\u8fce\u6218\u5427\uff01",showTipNode:!0}),this.auto_ui.node_bottomBtn.active=!1},t.prototype.showGuide2=function(){var e=this;if(this.auto_ui.node_bottomBtn.active=!1,this.equipPool.size>0){var t=this.auto_ui.node_DragFather.children[0];t||this.equipPool.forEach(function(e){t=e.node});var i=t.convertToWorldSpaceAR(cc.v2(0,0)),o=this.node.convertToNodeSpaceAR(i);p.GuideCtrlInstance.showOneFingerGuide({parent:this.node,isWillClickClose:!1,x:o.x,y:o.y,getFingerCallBack:function(t){e.guideShou=t,o.x*=-1,o.y*=-1,o.normalizeSelf(),t.runAction(cc.repeatForever(cc.sequence(cc.moveTo(1.5,t.x+200*o.x,t.y+500*o.y),cc.moveTo(.02,t.x,t.y))))}}),this.selfMap["\u663e\u793a\u5f15\u5bfc2\u7684\u6846"]||(this.selfMap["\u663e\u793a\u5f15\u5bfc2\u7684\u6846"]=!0,p.GuideCtrlInstance.showGuideMaskFrame("\u5c06\u5546\u5e97\u4e2d\u5237\u65b0\u51fa\u7684\u88c5\u5907\uff0c\u653e\u5165\u80cc\u5305",this.node))}else b.PlayerDataMgr.setGuideIndex(B.GuideName.GameBag,B.GameBagGuideIndex.RefreshButtonGuide3),this.auto_ui.node_bottomBtn.active=!0,this.auto_ui.btn_VideoResetBtn.node.active=!1,this.auto_ui.btn_start.node.active=!1,this.auto_ui.btn_ResetBtn.node.active=!0,this.checkBottomBtnScale(),this.auto_ui.btn_ResetBtn.node.children[0].y=-35,this.auto_ui.btn_ResetBtn.node.children[1].active=!1,p.GuideCtrlInstance.showGuide({callBack:function(){e.checkGuide()},sayStr:"\u5237\u65b0\u5546\u5e97\u83b7\u5f97\u66f4\u591a\u6c34\u679c"})},t.prototype.showGuide3=function(){var e=this;this.auto_ui.node_bottomBtn.active=!0,this.auto_ui.btn_VideoResetBtn.node.active=!1,this.auto_ui.btn_start.node.active=!1,this.auto_ui.btn_ResetBtn.node.active=!0,this.checkBottomBtnScale(),this.auto_ui.btn_ResetBtn.node.children[0].y=-35,this.auto_ui.btn_ResetBtn.node.children[1].active=!1,this.scheduleOnce(function(){var t=e.auto_ui.btn_ResetBtn.node.convertToWorldSpaceAR(cc.v2(0,0)),i=cc.size(e.auto_ui.btn_ResetBtn.node.width,e.auto_ui.btn_ResetBtn.node.height);p.GuideCtrlInstance.showGuide({callBack:function(){e.resetEquip(!0,!1,!1),b.PlayerDataMgr.setGuideIndex(B.GuideName.GameBag,B.GameBagGuideIndex.SynthesisGuide4),e.auto_ui.btn_ResetBtn.node.active=!1,e.checkGuide(),e.auto_ui.btn_ResetBtn.node.children[0].y=-12,e.auto_ui.btn_ResetBtn.node.children[1].active=!0},wPos:t,size:i})})},t.prototype.showGuide4=function(){var e=this;if(this.auto_ui.node_bottomBtn.active=!1,this.equipPool.size>0){if(this.guide4Time=-1,this.guideSGComp=null,this.dressUpEquipMap.forEach(function(e){return e.setClickable(!1)}),this.equipPool.forEach(function(t){if(t.setClickable(!1),!e.guideSGComp)switch(t.equipData.shuiguoId){case x.FruitId.\u6bd2\u8611\u83c7:e.guide4Time=0,e.guideSGComp=t,t.setClickable(!0);break;case x.FruitId.\u7206\u5934\u74dc:e.guide4Time=1,e.guideSGComp=t,t.setClickable(!0)}}),this.guideSGComp||(this.equipPool.forEach(function(t){t.setClickable(!0),e.guideSGComp=t}),this.guide4Time=2),this.guideSGComp){var t;this.dressUpEquipMap.forEach(function(i){i.equipData.shuiguoId===e.guideSGComp.equipData.shuiguoId&&(t=i.node.convertToWorldSpaceAR(cc.v2(0,0)))});var i=this.guideSGComp.node.convertToWorldSpaceAR(cc.v2(0,0)),o=this.node.convertToNodeSpaceAR(i);t||this.cellCompMap.forEach(function(e){e.equipComp||(t=e.node.convertToWorldSpaceAR(cc.v2(0,0)))}),t.x-=i.x,t.y-=i.y,p.GuideCtrlInstance.showOneFingerGuide({parent:this.node,isWillClickClose:!1,x:o.x,y:o.y,getFingerCallBack:function(i){e.guideShou=i,i.runAction(cc.repeatForever(cc.sequence(cc.moveTo(1.5,i.x+t.x,i.y+t.y),cc.moveTo(.02,i.x,i.y))))}})}this.selfMap["\u663e\u793a\u5f15\u5bfc4\u7684\u6846"]||(this.selfMap["\u663e\u793a\u5f15\u5bfc4\u7684\u6846"]=!0,p.GuideCtrlInstance.showGuideMaskFrame("\u76f8\u540c\u7684\u88c5\u5907\u53ef\u4ee5\u5408\u6210\u5347\u7ea7",this.node))}else this.showGuide4_2()},t.prototype.showGuide4_2=function(){var e,t=this;if(this.dressUpEquipMap.forEach(function(t){t.equipData.shuiguoId===x.FruitId.\u62db\u8d22\u6a59\u5b50&&(e=t.node)}),e){var i=e.convertToWorldSpaceAR(cc.v2(0,0)),o=cc.size(e.width,e.height);p.GuideCtrlInstance.showGuide({callBack:function(){b.PlayerDataMgr.setGuideIndex(B.GuideName.GameBag,B.GameBagGuideIndex.StartBattleGuide6),t.checkGuide()},sayStr:"\u6a58\u5b50\u4f1a\u5728\u6bcf\u6ce2\u7ed3\u675f\u540e\uff0c\u989d\u5916\u4ea7\u51fa\u94f6\u5e01",sayNodePos:cc.v2(0,400),wPos:i,size:o,btnIsMax:!0})}},t.prototype.showGuide6=function(){var e=this;this.auto_ui.node_bottomBtn.active=!0,this.auto_ui.btn_ResetBtn.node.active=!1,this.auto_ui.btn_start.node.active=!0,this.auto_ui.btn_VideoResetBtn.node.active=!1,this.checkBottomBtnScale(),p.GuideCtrlInstance.showGuide({callBack:function(){var t=e.auto_ui.btn_start.node.convertToWorldSpaceAR(cc.v2(0,0)),i=cc.size(e.auto_ui.btn_start.node.width,e.auto_ui.btn_start.node.height);p.GuideCtrlInstance.showGuide({wPos:t,size:i,callBack:function(){e.dressUpEquipMap.forEach(function(e){return e.setClickable(!0)}),e.equipPool.forEach(function(e){return e.setClickable(!0)}),e.auto_ui.btn_ResetBtn.node.active=!0,e.auto_ui.btn_start.node.active=!0,e.auto_ui.btn_VideoResetBtn.node.active=!0,e.auto_ui.node_bottomBtn.active=!0,e.checkBottomBtnScale(),b.PlayerDataMgr.setGuideIndex(B.GuideName.GameBag,B.GameBagGuideIndex.EntryGuide7),e.gameStart()}})},sayStr:"\u5df2\u7b79\u5907\u9f50\u5168\uff0c\u5feb\u8ba9\u6c34\u679c\u52c7\u58eb\u4eec\u53c2\u6218\u5427\uff01"})},t.prototype.showGuide8=function(){var e=this;this.equipPool.forEach(function(e){e.isGeZiType||e.setClickable(!1)}),this.dressUpEquipMap.forEach(function(e){e.setClickable(!1)}),this.equipPool.forEach(function(t){if(t.isGeZiType){var i=t.node.convertToWorldSpaceAR(cc.v2(0,0)),o=e.node.convertToNodeSpaceAR(i),a=e.node.convertToWorldSpaceAR(cc.v2(0,0)),n=cc.v2(a.x-i.x,a.y-i.y);p.GuideCtrlInstance.showOneFingerGuide({parent:e.node,isWillClickClose:!1,x:o.x,y:o.y,getFingerCallBack:function(t){e.guideShou=t,t.runAction(cc.repeatForever(cc.sequence(cc.moveTo(1.5,t.x+n.x,t.y+n.y),cc.moveTo(.02,t.x,t.y))))}})}}),p.GuideCtrlInstance.showGuideMaskFrame("\u51fa\u73b0\u6269\u5c55\u683c\u5b50\uff0c\u8d76\u7d27\u5c06\u5176\u62d6\u653e\u81f3\u76f8\u90bb\u7684\u7a7a\u5730\u5904\u83b7\u5f97\u66f4\u5927\u7684\u7a7a\u95f4\u5427\uff01",this.node),this.auto_ui.node_bottomBtn.active=!1},t.prototype.showGuide8_1=function(){var e=this;this.auto_ui.btn_UseGeZiBtn.interactable=!0;var t=this.auto_ui.btn_UseGeZiBtn.node.convertToWorldSpaceAR(cc.v2(0,0)),i=cc.size(this.auto_ui.btn_UseGeZiBtn.node.width,this.auto_ui.btn_UseGeZiBtn.node.height);p.GuideCtrlInstance.showGuide({wPos:t,size:i,callBack:function(){e.setCellFatherMove(!1),b.PlayerDataMgr.setGuideIndex(B.GuideName.GameBag,B.GameBagGuideIndex.OtherFruitsGuide9),e.checkGuide()}})},t.prototype.guideCheckCell=function(e){for(var t=d.GameDataMgr.getGameBag.bagArray,i=!1,o=0;o<e.length;o++){var a=e[o].cellData.cellIndex,n=!1;if((a-1>=0&&(a-1)%this.maxX!=this.maxX-1&&t[a-1]>=0||a-this.maxX>=0&&t[a-this.maxX]>=0||a+1<t.length&&(a+1)%this.maxX!=0&&t[a+1]>=0||a+this.maxX<t.length&&t[a+this.maxX]>=0)&&(n=!0),n){i=!0;break}}return i},t.prototype.showGuide9=function(){var e=this;if(this.auto_ui.node_bottomBtn.active=!1,this.equipPool.size>0){var t=this.auto_ui.node_DragFather.children[0];t||this.equipPool.forEach(function(e){t=e.node});var i=t.convertToWorldSpaceAR(cc.v2(0,0)),o=this.node.convertToNodeSpaceAR(i);p.GuideCtrlInstance.showOneFingerGuide({parent:this.node,isWillClickClose:!1,x:o.x,y:o.y,getFingerCallBack:function(t){e.guideShou=t,o.x*=-1,o.y*=-1,o.normalizeSelf(),t.runAction(cc.repeatForever(cc.sequence(cc.moveTo(1.5,t.x+200*o.x,t.y+500*o.y),cc.moveTo(.02,t.x,t.y))))}})}else b.PlayerDataMgr.setGuideIndex(B.GuideName.GameBag,B.GameBagGuideIndex.GuideEnd10),this.checkGuide()},t.prototype.showGuide10=function(){var e=this;this.auto_ui.btn_VideoResetBtn.node.active=!0,this.auto_ui.btn_ResetBtn.node.active=!0,this.auto_ui.btn_start.node.active=!0,this.auto_ui.node_bottomBtn.active=!0,this.checkBottomBtnScale();var t=this.auto_ui.btn_ResetBtn.node.convertToWorldSpaceAR(cc.v2(0,0)),i=cc.size(this.auto_ui.btn_ResetBtn.node.width,this.auto_ui.btn_ResetBtn.node.height);p.GuideCtrlInstance.showGuide({callBack:function(){e.resetEquip(!1,!1,!1),p.GuideCtrlInstance.showGuide({callBack:function(){b.PlayerDataMgr.setGuideIndex(B.GuideName.GameBag,B.GameBagGuideIndex.GuideCompletion),e.auto_ui.btn_VideoGetCell.node.active=!0,e.scheduleOnce(function(){e.checkBottomBtnScale()},.15)},sayStr:"\u5145\u5206\u5229\u7528\u5b89\u6392\u7a7a\u5730\uff0c\u505a\u4e00\u4e2a\u6574\u7406\u5927\u5e08\u5427\uff01"})},sayStr:"\u4f7f\u7528\u94f6\u5e01\u5237\u65b0\u5546\u5e97\uff0c\u83b7\u5f97\u66f4\u591a\u6c34\u679c\u52a0\u5f3a\u5b9e\u529b",wPos:t,size:i})},t.prototype.checkUpBuff=function(e,t){var i=this;if(!this.isUpBuffCdTime&&e&&0!==e.length){this.isUpBuffCdTime=!0,this.scheduleOnce(function(){i.isUpBuffCdTime=!1},t?.2:0);for(var o=d.GameDataMgr.getGameBag.bagArray,a=[],n=0;n<e.length;n++){var r=e[n];if(r-1>=0&&(r-1)%this.maxX!=this.maxX-1&&o[r-1]>0||r-this.maxX>=0&&o[r-this.maxX]>0){var s=r-1;-1===e.indexOf(s)&&a.push(s)}r-this.maxX>=0&&o[r-this.maxX]>0&&(s=r-this.maxX,-1===e.indexOf(s)&&a.push(s)),r+1<o.length&&(r+1)%this.maxX!=0&&o[r+1]>0&&(s=r+1,-1===e.indexOf(s)&&a.push(s)),r+this.maxX<o.length&&o[r+this.maxX]>0&&(s=r+this.maxX,-1===e.indexOf(s)&&a.push(s))}var c=[],l=a.reduce(function(e,t){var o=i.cellCompMap.get(t);if(o&&o.equipComp){var a=u.Excel.shuiguo(o.equipComp.equipData.shuiguoId);5===a.attackstate||8===a.attackstate||9===a.attackstate||c.includes(o.equipComp)||(c.push(o.equipComp),e.push(o.equipComp.node))}return e},[]);l.length>0&&(t?this.showBuff(l):this.showJianTou(l))}},t.prototype.showBuff=function(e){for(var t=0;t<e.length;t++){var i=e[t];this.showOneUpBuff(i.convertToWorldSpaceAR(cc.v2(0,0)))}},t.prototype.showOneUpBuff=function(e){var t,i=this;(t=this.upBuffArray.length>0?this.upBuffArray.shift():cc.instantiate(this.auto_ui.node_upBuffEffect)).parent=this.auto_ui.node_upBuffFather,t.setPosition(t.parent.convertToNodeSpaceAR(e)),t.active=!0,t.getChildByName("1").getComponent(cc.ParticleSystem).resetSystem(),t.getChildByName("3").getComponent(cc.ParticleSystem).resetSystem(),this.scheduleOnce(function(){i.removeOneUpBuff(t)},2)},t.prototype.removeOneUpBuff=function(e){e.removeFromParent(),e.active=!1,this.upBuffArray.push(e)},t.prototype.showJianTou=function(e){var t=this;this.hideJianTou(),e.forEach(function(e,i){var o=e.convertToWorldSpaceAR(cc.v2(0,0));if(i<t.jianTouArray.length)t.jianTouArray[i].active=!0,t.jianTouArray[i].setPosition(t.jianTouArray[i].parent.convertToNodeSpaceAR(o));else{var a=cc.instantiate(t.auto_ui.node_jiantou);a.parent=t.auto_ui.node_upBuffFather,a.active=!0,a.children[0].runAction(cc.repeatForever(cc.sequence(cc.moveTo(.75,0,30),cc.moveTo(.75,0,0)))),t.jianTouArray.push(a),a.setPosition(a.parent.convertToNodeSpaceAR(o))}})},t.prototype.hideJianTou=function(){this.jianTouArray.forEach(function(e){return e.active=!1})},t.prototype.checkBottomBtnScale=function(){},t.prototype.checkAI=function(){var e=this;a.default._instance.isOpen&&this.scheduleOnce(function(){if(e.auto_ui.node_bottomBtn.active)if(e.getCanDressUpCell()){e.auto_ui.node_bottomBtn.active&&e.setCellFatherMove(!0),e.setTouchStartNode(e.aiPickEquip.node);var t=e.aiPickCell[0].node.convertToWorldSpaceAR(cc.v2(0,0)),i=e.aiPickEquip.getGridNode().children[0].convertToWorldSpaceAR(cc.v2(0,0)),o=cc.v2(t.x-i.x,t.y-i.y);e.aiPickEquip.node.runAction(cc.sequence(cc.moveTo(a.default._instance.dragTime,e.aiPickEquip.node.x+o.x,e.aiPickEquip.node.y+o.y),cc.callFunc(function(){e.moveLength=1e3,e.onChildTouchUp()})))}else e.getUpLevelEquip()||e.getLevelLowSelf()?(e.setTouchStartNode(e.aiPickEquip.node),e.aiPickOtherEquip.lockCellArray&&e.aiPickOtherEquip.lockCellArray.length>0?(t=e.aiPickOtherEquip.node.convertToWorldSpaceAR(cc.v2(0,0)),i=e.aiPickEquip.getGridNode().children[0].convertToWorldSpaceAR(cc.v2(0,0)),o=cc.v2(t.x-i.x,t.y-i.y),e.aiPickEquip.node.runAction(cc.sequence(cc.moveTo(a.default._instance.dragTime,e.aiPickEquip.node.x+o.x,e.aiPickEquip.node.y+o.y),cc.callFunc(function(){e.moveLength=1e3,e.onChildTouchUp()})))):e.scheduleOnce(function(){var t=e.aiPickOtherEquip.node.convertToWorldSpaceAR(cc.v2(0,0)),i=e.aiPickEquip.getGridNode().children[0].convertToWorldSpaceAR(cc.v2(0,0)),o=cc.v2(t.x-i.x,t.y-i.y);e.aiPickEquip.node.runAction(cc.sequence(cc.moveTo(a.default._instance.dragTime,e.aiPickEquip.node.x+o.x,e.aiPickEquip.node.y+o.y),cc.callFunc(function(){e.moveLength=1e3,e.onChildTouchUp()})))})):e.getEquipCanDressUp()?(e.setTouchStartNode(e.aiPickEquip.node),t=e.aiPickCell[0].node.convertToWorldSpaceAR(cc.v2(0,0)),i=e.aiPickEquip.getGridNode().children[0].convertToWorldSpaceAR(cc.v2(0,0)),o=cc.v2(t.x-i.x,t.y-i.y),e.aiPickEquip.node.runAction(cc.sequence(cc.moveTo(a.default._instance.dragTime,e.aiPickEquip.node.x+o.x,e.aiPickEquip.node.y+o.y),cc.callFunc(function(){e.moveLength=1e3,e.onChildTouchUp()})))):e.getCanResetEquipPool()?a.default._instance.displayClickButton(e.auto_ui.btn_ResetBtn.node,function(){e.sliderResetClick(),e.checkAI()}):e.getCanVideoResetEquipPool()?a.default._instance.displayClickButton(e.auto_ui.btn_VideoResetBtn.node,function(){e.resetEquip(!1,!0,!1),e.auto_ui.btn_VideoResetBtn.node.active=!1,e.checkAI()}):e.checkIsBigLevel()?a.default._instance.displayClickButton(e.auto_ui.btn_ResetBtn.node,function(){e.sliderResetClick()}):a.default._instance.displayClickButton(e.auto_ui.btn_start.node,function(){e.gameStart()});else a.default._instance.displayClickButton(e.auto_ui.btn_UseGeZiBtn.node,function(){e.setCellFatherMove(!1),e.checkAI()})},a.default._instance.aiCDTime)},t.prototype.getCanDressUpCell=function(){var e=this;this.aiPickEquip=null,this.aiPickCell=null;var t=!1;if(this.equipPool.forEach(function(e){e.isGeZiType&&(t=!0)}),!t)return!1;var i=null;if(this.equipPool.forEach(function(e){e.isGeZiType&&!i&&(i=e)}),i)for(var o=i.getGridNode().children.map(function(e,t,i){return 0===t?cc.v2(0,0):cc.v2(e.x-i[0].x,e.y-i[0].y)}),a=function(t){var a=o.map(function(e){return cc.v2(t.node.x+e.x,t.node.y+e.y)}),r=a.map(function(t){return e.baseCellCompArray.find(function(e){return cc.Vec2.distance(t,e.node.getPosition())<10&&-1===d.GameDataMgr.getGameBag.bagArray[e.cellData.cellIndex]})}).filter(function(e){return void 0!==e});if(r.length===a.length&&n.checkOneCellArrayIsOk(r.map(function(e){return e.cellData.cellIndex}),d.GameDataMgr.getGameBag.bagArray))return n.aiPickEquip=i,n.aiPickCell=r,{value:!0}},n=this,r=0,s=this.baseCellCompArray;r<s.length;r++){var c=a(s[r]);if("object"==typeof c)return c.value}return!1},t.prototype.getUpLevelEquip=function(){this.aiPickEquip=null,this.aiPickOtherEquip=null;var e=Array.from(this.equipPool.values()),t=Array.from(this.dressUpEquipMap.values()),i=function(e,t){for(var i=0,o=e;i<o.length;i++)for(var a=o[i],n=0,r=t;n<r.length;n++){var s=r[n];if(a!==s&&a.equipData.equipLevel===s.equipData.equipLevel&&(a.equipData.shuiguoId===s.equipData.shuiguoId||a.equipData.equipLevel===h.GameGlobalVariable.normalMaxLevel-1&&y.default.getInstance.getZaZhongId(a.equipData.shuiguoId)===s.equipData.shuiguoId))return[a,s]}return null},o=i(e,e);return o||(o=i(e,t)),o||(o=i(t,t)),!!o&&(this.aiPickEquip=o[0],this.aiPickOtherEquip=o[1],!0)},t.prototype.getLevelLowSelf=function(){this.aiPickEquip=null,this.aiPickOtherEquip=null;var e=Array.from(this.equipPool.values()),t=Array.from(this.dressUpEquipMap.values()),i=e.find(function(e){return t.some(function(t){return t.equipData.shuiguoId===e.equipData.shuiguoId&&t.equipData.equipLevel<e.equipData.equipLevel})});return!!i&&(this.aiPickEquip=i,this.aiPickOtherEquip=t.find(function(e){return e.equipData.shuiguoId===i.equipData.shuiguoId&&e.equipData.equipLevel<i.equipData.equipLevel}),!0)},t.prototype.getEquipCanDressUp=function(){var e=this;this.aiPickEquip=null,this.aiPickCell=null;for(var t=0,i=Array.from(this.equipPool.values()).sort(function(e,t){return t.equipData.equipLevel-e.equipData.equipLevel});t<i.length;t++)for(var o=i[t],a=o.getGridNode().children.map(function(e,t,i){return 0===t?cc.v2(0,0):cc.v2(e.x-i[0].x,e.y-i[0].y)}),n=function(t){var i=a.map(function(e){return cc.v2(t.x+e.x,t.y+e.y)}),n=i.map(function(t){return Array.from(e.cellCompMap.values()).find(function(e){return cc.Vec2.distance(t,e.node.getPosition())<10&&0===d.GameDataMgr.getGameBag.bagArray[e.cellData.cellIndex]})}).filter(function(e){return void 0!==e});if(n.length===i.length)return r.aiPickEquip=o,r.aiPickCell=n,{value:!0}},r=this,s=0,c=this.auto_ui.node_cubeFather.children;s<c.length;s++){var l=n(c[s]);if("object"==typeof l)return l.value}return!1},t.prototype.getCanResetEquipPool=function(){return d.GameDataMgr.getGameBag.silverCoin>=this.oneBuyMoney},t.prototype.getCanVideoResetEquipPool=function(){return this.auto_ui.btn_VideoResetBtn.node.active},t.prototype.checkIsBigLevel=function(){if(h.GameGlobalVariable.nowlevel){var e=u.Excel.shuiguoguanqia(h.GameGlobalVariable.nowlevel).levelboshuid.length,t=d.GameDataMgr.getCurrentLevelWaveState(h.GameGlobalVariable.nowlevel,2)+1;v.LogMgr.debug("maxBoShu:",e,"boshu:",t);var i=0;if(e<=10?4===t?i=5:7===t?i=10:10===t&&(i=20):e<=15?5===t?i=5:10===t?i=10:15===t&&(i=20):5===t?i=5:10===t?i=10:20===t&&(i=20),0!==i){if(-1===this.mustResetTime)return this.mustResetTime=0,!0;if(this.mustResetTime>=i)return this.mustResetTime=-1,!1}}return!1},__decorate([N(M.default)],t.prototype,"auto_ui",void 0),__decorate([N(cc.Prefab)],t.prototype,"paiZiPfb",void 0),__decorate([T],t)}(E.default);i.default=U,cc._RF.pop()},{"./ADManager":"ADManager","./AIControl":"AIControl","./AudioManager":"AudioManager","./BuffMag":"BuffMag","./BundleConfig":"BundleConfig","./Const_Common":"Const_Common","./Const_Game":"Const_Game","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./GuideControl":"GuideControl","./Item_CellFatherMove":"Item_CellFatherMove","./Item_GameBagCell":"Item_GameBagCell","./Item_GameEquip":"Item_GameEquip","./Item_PaiZi":"Item_PaiZi","./LogManager":"LogManager","./Logic_GetEquip":"Logic_GetEquip","./PlayerDataManager":"PlayerDataManager","./TipsManager":"TipsManager","./UIConfig_Game":"UIConfig_Game","./UIManager":"UIManager","./UIView":"UIView","./UI_Bag_UIBindings":"UI_Bag_UIBindings"}],UI_BaoZha:[function(e,t,i){"use strict";cc._RF.push(t,"15d97ijoupCua+TUAldQifO","UI_BaoZha"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./ResKeeper"),a=e("./NodePoolMag"),n=cc._decorator,r=n.ccclass,s=n.property,c=(n.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.explosionAnimation=null,t.iceExplosionAnimation=null,t.cherryExplosionAnimation=null,t}return __extends(t,e),t.prototype.onEnable=function(){},t.prototype.playExplosion=function(e){void 0===e&&(e=100);var t=e<100?100:e;this.node.scale=1+t/100,this.node.children.forEach(function(e){e.active=!1}),this.explosionAnimation=this.node.children[0].getComponent(dragonBones.ArmatureDisplay),this.explosionAnimation.node.active=!0,this.explosionAnimation.playAnimation("newAnimation",1),this.explosionAnimation.addEventListener(dragonBones.EventObject.LOOP_COMPLETE,this.onAnimationState,this)},t.prototype.playIceExplosion=function(){this.node.scale=3,this.node.children.forEach(function(e){e.active=!1}),this.iceExplosionAnimation=this.node.children[1].getComponent(dragonBones.ArmatureDisplay),this.iceExplosionAnimation.node.active=!0,this.iceExplosionAnimation.playAnimation("bingbao",1),this.iceExplosionAnimation.timeScale=1.5,this.iceExplosionAnimation.addEventListener(dragonBones.EventObject.LOOP_COMPLETE,this.onAnimationState,this)},t.prototype.playCherryExplosion=function(e){void 0===e&&(e=100);var t=e<100?100:e;this.node.scale=1+t/100*.5,this.node.children.forEach(function(e){e.active=!1}),this.cherryExplosionAnimation=this.node.children[2].getComponent(cc.Animation),this.cherryExplosionAnimation.node.active=!0,this.cherryExplosionAnimation.play(),this.scheduleOnce(this.onAnimationState,1)},t.prototype.onAnimationState=function(){a.NodePoolMag.instance.recycleNodeToPool("baozha",this.node)},t.prototype.onDisable=function(){this.explosionAnimation&&this.explosionAnimation.node.active&&this.explosionAnimation.removeEventListener(dragonBones.EventObject.LOOP_COMPLETE,this.onAnimationState,this),this.iceExplosionAnimation&&this.iceExplosionAnimation.node.active&&this.iceExplosionAnimation.removeEventListener(dragonBones.EventObject.LOOP_COMPLETE,this.onAnimationState,this)},__decorate([s(dragonBones.ArmatureDisplay)],t.prototype,"explosionAnimation",void 0),__decorate([s(dragonBones.ArmatureDisplay)],t.prototype,"iceExplosionAnimation",void 0),__decorate([s(cc.Animation)],t.prototype,"cherryExplosionAnimation",void 0),__decorate([r],t)}(o.default));i.default=c,cc._RF.pop()},{"./NodePoolMag":"NodePoolMag","./ResKeeper":"ResKeeper"}],UI_BingDong:[function(e,t,i){"use strict";cc._RF.push(t,"3f0928St45BHIcTQk5qQ1Jn","UI_BingDong"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./ResKeeper"),a=cc._decorator,n=a.ccclass,r=(a.property,a.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.frozenAnimation=null,t}return __extends(t,e),t.prototype.onEnable=function(){var e=this;this.frozenAnimation=this.node.children[0].getComponent(dragonBones.ArmatureDisplay),this.frozenAnimation&&(this.frozenAnimation.timeScale=1,this.frozenAnimation.playAnimation("bingdong",1),this.scheduleOnce(function(){e.frozenAnimation&&(e.frozenAnimation.timeScale=0)},.4))},t.prototype.onDisable=function(){},__decorate([n],t)}(o.default));i.default=r,cc._RF.pop()},{"./ResKeeper":"ResKeeper"}],UI_BoxAward:[function(e,t,i){"use strict";cc._RF.push(t,"08a07NusGlOYaTzfY+qMlRT","UI_BoxAward"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./BundleConfig"),a=e("./ResKeeper"),n=e("./CommonUtils"),r=cc._decorator,s=r.ccclass,c=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.touchNode=null,t}return __extends(t,e),t.prototype.onEnable=function(){this.touchNode.width=cc.winSize.width,this.touchNode.height=cc.winSize.height,this.touchNode.active=!1},t.prototype.onDisable=function(){this.touchNode.active=!1},t.prototype.hideTouchNode=function(){this.node.active=!1,this.touchNode.active=!1},t.prototype.displayAward=function(e,t,i,o){void 0===o&&(o=1),this.node.x=e.x,this.node.active=!0,this.node.scale=0,cc.tween(this.node).to(.25,{scale:1},{easing:"backOut"}).start(),this.touchNode.active=!0,this.configureAwardNode(t,i,o)},t.prototype.getCurrentAwardNode=function(e,t,i){var o=null;return 1===i?("1"===t&&(o=e.awardbox1),"2"===t&&(o=e.awardbox2),"3"===t&&(o=e.awardbox3)):2===i&&("1"===t&&(o=e.tiaozhanbox1),"2"===t&&(o=e.tiaozhanbox2),"3"===t&&(o=e.tiaozhanbox3),"4"===t&&(o=e.tiaozhanbox4)),o},t.prototype.configureAwardNode=function(e,t,i){var a=this,r=this.getCurrentAwardNode(e,t,i),s=["ui/tu/powerIcon","ui/tu/goldIcon","ui/tu/diamondIcon","quality/suipian_1","quality/suipian_2","quality/suipian_3"],c=function(e,t){return __awaiter(a,void 0,void 0,function(){var i,a,r,c,l,u;return __generator(this,function(d){switch(d.label){case 0:switch(i=t.getChildByName("img").getComponent(cc.Sprite),a=t.getChildByName("awardlb").getComponent(cc.Label),r="",c=0,e[0]){case 1:r="res/"+s[1],c=e[1];break;case 2:r="res/"+s[2],c=e[1];break;case 3:r="res/"+s[0],c=e[1];break;case 5:switch(l=e[1],c=e[2],l){case 1:r="res/"+s[3];break;case 2:r="res/"+s[4];break;case 3:r="res/"+s[5]}}return[4,this._loadRes(o.BundleNames.Common,r,cc.SpriteFrame)];case 1:return u=d.sent(),i.spriteFrame=u,n.default.limitSpriteSize(i,60),a.string="+"+c,[2]}})})},l=this.node.children[0].children;l.forEach(function(e){return e.active=!1});for(var u=0;u<r.length;u++){var d=l[u];d||(d=cc.instantiate(l[0]),this.node.children[0].addChild(d)),d.active=!0,c(r[u],d)}this.scheduleOnce(function(){a.node.width=a.node.children[0].width;var e=a.node.x,t=a.node.x-a.node.width/2,i=a.node.x+a.node.width/2;t<-cc.winSize.width/2&&(a.node.x=-(cc.winSize.width/2-a.node.width/2)),i>cc.winSize.width/2&&(a.node.x=cc.winSize.width/2-a.node.width/2),a.node.children[1].x=e-a.node.x})},__decorate([c(cc.Node)],t.prototype,"touchNode",void 0),__decorate([s],t)}(a.default);i.default=l,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./ResKeeper":"ResKeeper"}],UI_BoxIitemInfo_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"db86cmE4l1DT7wZgMPRJg/W","UI_BoxIitemInfo_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.node_cardFather=null,t.node_ItemIcon=null,t.node_itemFather=null,t.txt_jiLvLabel=null,t.btn_closeBtn=null,t.btn_queDingBtn=null,t._btnNames=["btn_closeBtn","btn_queDingBtn"],t}return __extends(t,e),__decorate([r(cc.Node)],t.prototype,"node_cardFather",void 0),__decorate([r(cc.Node)],t.prototype,"node_ItemIcon",void 0),__decorate([r(cc.Node)],t.prototype,"node_itemFather",void 0),__decorate([r(cc.Label)],t.prototype,"txt_jiLvLabel",void 0),__decorate([r(cc.Button)],t.prototype,"btn_closeBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_queDingBtn",void 0),__decorate([n("UI_BoxIitemInfo_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_BoxIitemInfo:[function(e,t,i){"use strict";cc._RF.push(t,"6d5f73MlIxBaIqJRpYNLUxK","UI_BoxIitemInfo"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UI_BoxIitemInfo_UIBindings"),a=e("./UIView"),n=e("./Excel"),r=e("./PlayerDataManager"),s=e("./BundleConfig"),c=e("./CommonUtils"),l=e("./Const_Hall"),u=cc._decorator,d=u.ccclass,h=u.property,p=function(e){function t(){var t=e.call(this)||this;return t.auto_ui=null,t.spriteMaterial=[],t}return __extends(t,e),t.prototype._show=function(e){this.auto_ui.node_cardFather.children.forEach(function(t,i){t.active=i+1===e});var t=n.Excel.shuiguo_all.filter(function(t){return t.quality===e&&-1!==t.isShow}).map(function(e){var t=r.PlayerDataMgr.getEquipDataById(e.id).isUnLock;return{id:e.id,isUnLock:t}});t.sort(function(e,t){return e.isUnLock?t.isUnLock?e.id-t.id:-1:1});var i=t.filter(function(e){return e.isUnLock});this.auto_ui.txt_jiLvLabel.string=0===i.length?"\u6bcf\u4e2a\u6c34\u679c\u788e\u7247\u7684\u6982\u7387:0%":"\u6bcf\u4e2a\u6c34\u679c\u788e\u7247\u7684\u6982\u7387:"+(100/i.length).toFixed(2)+"%",this.auto_ui.node_itemFather.children.forEach(function(e){e.active=!1});for(var o=0;o<t.length;o++){var a=void 0;o<this.auto_ui.node_itemFather.childrenCount?a=this.auto_ui.node_itemFather.children[o]:(a=cc.instantiate(this.auto_ui.node_ItemIcon)).parent=this.auto_ui.node_itemFather,a.active=!0,this.showItem(a,t[o])}},t.prototype._clickListener=function(){this._close()},t.prototype.showItem=function(e,t){return __awaiter(this,void 0,Promise,function(){var i,o,a,r;return __generator(this,function(u){switch(u.label){case 0:return[4,this._loadRes(s.BundleNames.Common,"res/player/player"+(t.id-1e3)+"_1",cc.SpriteFrame)];case 1:return i=u.sent(),(o=e.getChildByName("icon").getComponent(cc.Sprite)).spriteFrame=i,c.default.limitSpriteSize(o,l.equipIconSize),o.setMaterial(0,t.isUnLock?this.spriteMaterial[0]:this.spriteMaterial[1]),a=n.Excel.shuiguo(t.id).quality,t.isUnLock||(a=0),[4,this._loadRes(s.BundleNames.Common,"res/quality/quality_"+a,cc.SpriteFrame)];case 2:return r=u.sent(),e.getChildByName("quality").getComponent(cc.Sprite).spriteFrame=r,e.getChildByName("lock").active=!t.isUnLock,[2]}})})},__decorate([h(o.default)],t.prototype,"auto_ui",void 0),__decorate([h([cc.Material])],t.prototype,"spriteMaterial",void 0),__decorate([d],t)}(a.default);i.default=p,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Const_Hall":"Const_Hall","./Excel":"Excel","./PlayerDataManager":"PlayerDataManager","./UIView":"UIView","./UI_BoxIitemInfo_UIBindings":"UI_BoxIitemInfo_UIBindings"}],UI_BoxInfo_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"aa83dbsAsVPUpNaz3EccPd7","UI_BoxInfo_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txt_titleLabel=null,t.txt_priceLabel=null,t.txt_goldLabel=null,t.txt_lvLabel=null,t.txt_lanLabel=null,t.txt_ziLabel=null,t.node_boxBG=null,t.node_box2Node=null,t.btn_videoBuyBtn=null,t.btn_buyBtn=null,t.btn_lvIconBtn=null,t.btn_lanIconBtn=null,t.btn_ziIconBtn=null,t.btn_closeBtn=null,t._btnNames=["btn_videoBuyBtn","btn_buyBtn","btn_lvIconBtn","btn_lanIconBtn","btn_ziIconBtn","btn_closeBtn"],t}return __extends(t,e),__decorate([r(cc.Label)],t.prototype,"txt_titleLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_priceLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_goldLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_lvLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_lanLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_ziLabel",void 0),__decorate([r(cc.Node)],t.prototype,"node_boxBG",void 0),__decorate([r(cc.Node)],t.prototype,"node_box2Node",void 0),__decorate([r(cc.Button)],t.prototype,"btn_videoBuyBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_buyBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_lvIconBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_lanIconBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_ziIconBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_closeBtn",void 0),__decorate([n("UI_BoxInfo_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_BoxInfo:[function(e,t,i){"use strict";cc._RF.push(t,"7f37cK7xAhCva73zXDWKoJp","UI_BoxInfo"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UI_BoxInfo_UIBindings"),a=e("./UIView"),n=e("./Excel"),r=e("./HallManager"),s=e("./UIManager"),c=e("./BundleConfig"),l=e("./PlayerDataManager"),u=e("./UIConfig_Home"),d=cc._decorator,h=d.ccclass,p=d.property,_=(d.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t}return __extends(t,e),t.prototype._show=function(e){this.infoData=e;var t=n.Excel.shopBoxLevel(r.HallMgr.shopData.boxLevel+1);0===e.type?this.auto_ui.txt_titleLabel.string="\u666e\u901a\u793c\u76d2":this.auto_ui.txt_titleLabel.string="\u7cbe\u81f4\u793c\u76d2";var i=0===e.type?t.moneyCount:t.bigMoneyCount,o=0===e.type?t.rewards:t.bigRewards;this.auto_ui.txt_goldLabel.node.parent.active=i>0,this.auto_ui.txt_goldLabel.string=""+i,this.auto_ui.txt_lvLabel.node.parent.active=o[0]>0,this.auto_ui.txt_lvLabel.string=""+o[0],this.auto_ui.txt_lanLabel.node.parent.active=o[1]>0,this.auto_ui.txt_lanLabel.string=""+o[1],this.auto_ui.txt_ziLabel.node.parent.active=o[2]>0,this.auto_ui.txt_ziLabel.string=""+o[2],this.auto_ui.node_boxBG.children[0].active=0===e.type,this.auto_ui.node_boxBG.children[1].active=1===e.type;var a=n.Excel.shopControl(1);0===e.type?this.auto_ui.btn_videoBuyBtn.interactable=a.box1BuyCount-r.HallMgr.shopData.box1BuyCount>0:this.auto_ui.btn_videoBuyBtn.interactable=a.box2BuyCount-r.HallMgr.shopData.box2BuyCount>0,this.auto_ui.txt_priceLabel.string=""+(0===e.type?a.boxPrice:a.bigBoxPrice),0===e.type?this.auto_ui.btn_buyBtn.interactable=l.PlayerDataMgr.globalData.diamond>=a.boxPrice:this.auto_ui.btn_buyBtn.interactable=l.PlayerDataMgr.globalData.diamond>=a.bigBoxPrice},t.prototype._clickListener=function(e){var t=this;switch(e){case this.auto_ui.btn_buyBtn:this.infoData&&this.infoData.clickCallBack&&(this.infoData.clickCallBack(!1),this._close());break;case this.auto_ui.btn_videoBuyBtn:this.infoData&&this.infoData.clickCallBack&&this.infoData.clickCallBack(function(){t._close()});break;case this.auto_ui.btn_closeBtn:this._close();break;case this.auto_ui.btn_lvIconBtn:this.showEquipInfo(1);break;case this.auto_ui.btn_lanIconBtn:this.showEquipInfo(2);break;case this.auto_ui.btn_ziIconBtn:this.showEquipInfo(3)}},t.prototype.showEquipInfo=function(e){s.default.open(c.BundleNames.Home,u.UIView_Home.UI_BoxItemInfo,e)},__decorate([p(o.default)],t.prototype,"auto_ui",void 0),__decorate([h],t)}(a.default));i.default=_,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./Excel":"Excel","./HallManager":"HallManager","./PlayerDataManager":"PlayerDataManager","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager","./UIView":"UIView","./UI_BoxInfo_UIBindings":"UI_BoxInfo_UIBindings"}],UI_BoxLevelInfo_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"63925zq8wBDe4xeo2wpRoos","UI_BoxLevelInfo_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.btn_closeBtn=null,t.btn_lastBtn=null,t.btn_nextBtn=null,t.node_box1Node=null,t.node_box2Node=null,t.txt_box1LvLabel=null,t.txt_box1LanLabel=null,t.txt_box1ZiLabel=null,t.txt_box2LvLabel=null,t.txt_box2LanLabel=null,t.txt_box2ZiLabel=null,t.txt_levelLbael=null,t._btnNames=["btn_closeBtn","btn_lastBtn","btn_nextBtn"],t}return __extends(t,e),__decorate([r(cc.Button)],t.prototype,"btn_closeBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_lastBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_nextBtn",void 0),__decorate([r(cc.Node)],t.prototype,"node_box1Node",void 0),__decorate([r(cc.Node)],t.prototype,"node_box2Node",void 0),__decorate([r(cc.Label)],t.prototype,"txt_box1LvLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_box1LanLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_box1ZiLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_box2LvLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_box2LanLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_box2ZiLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_levelLbael",void 0),__decorate([n("UI_BoxLevelInfo_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_BoxLevelInfo:[function(e,t,i){"use strict";cc._RF.push(t,"f51cfKC79tKw56yCCxVEgS3","UI_BoxLevelInfo"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UI_BoxLevelInfo_UIBindings"),a=e("./UIView"),n=e("./HallManager"),r=e("./Excel"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.currLevel=0,t.firstBoxData=null,t}return __extends(t,e),t.prototype._show=function(){this.currLevel=n.HallMgr.shopData.boxLevel,this.firstBoxData=r.Excel.shopBoxLevel(1),this.showLevel(this.currLevel)},t.prototype._clickListener=function(e){switch(e){case this.auto_ui.btn_closeBtn:this._close();break;case this.auto_ui.btn_lastBtn:this.currLevel=Math.max(0,this.currLevel-1),this.showLevel(this.currLevel);break;case this.auto_ui.btn_nextBtn:this.currLevel=Math.min(r.Excel.shopBoxLevel_all.size-1,this.currLevel+1),this.showLevel(this.currLevel)}},t.prototype.showLevel=function(e){this.currLevel=e;var t=this.auto_ui;t.txt_levelLbael.string="LV."+(e+1),t.btn_lastBtn.node.active=e>0,t.btn_nextBtn.node.active=e<r.Excel.shopBoxLevel_all.size-1;var i=r.Excel.shopBoxLevel(e+1),o=this.firstBoxData.rewards,a=this.firstBoxData.bigRewards;t.txt_box1LvLabel.node.parent.active=i.rewards[0]>0,t.txt_box1LvLabel.string="+"+(i.rewards[0]-o[0]),t.txt_box1LanLabel.node.parent.active=i.rewards[1]>0,t.txt_box1LanLabel.string="+"+(i.rewards[1]-o[1]),t.txt_box1ZiLabel.node.parent.active=i.rewards[2]>0,t.txt_box1ZiLabel.string="+"+(i.rewards[2]-o[2]),t.txt_box2LvLabel.node.parent.active=i.bigRewards[0]>0,t.txt_box2LvLabel.string="+"+(i.bigRewards[0]-a[0]),t.txt_box2LanLabel.node.parent.active=i.bigRewards[1]>0,t.txt_box2LanLabel.string="+"+(i.bigRewards[1]-a[1]),t.txt_box2ZiLabel.node.parent.active=i.bigRewards[2]>0,t.txt_box2ZiLabel.string="+"+(i.bigRewards[2]-a[2])},__decorate([l(o.default)],t.prototype,"auto_ui",void 0),__decorate([c],t)}(a.default);i.default=u,cc._RF.pop()},{"./Excel":"Excel","./HallManager":"HallManager","./UIView":"UIView","./UI_BoxLevelInfo_UIBindings":"UI_BoxLevelInfo_UIBindings"}],UI_BoxUpLevel_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"75820nWcXRN4akaDso2ZEl4","UI_BoxUpLevel_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.node_lightNode=null,t.node_titileNode=null,t.node_box1Node=null,t.node_box2Node=null,t.txt_levelLabel=null,t.txt_titleLabel=null,t.txt_box1LvLabel=null,t.txt_box1LanLabel=null,t.txt_box1ZiLabel=null,t.txt_box2LvLabel=null,t.txt_box2LanLabel=null,t.txt_box2ZiLabel=null,t.btn_closeBtn=null,t._btnNames=["btn_closeBtn"],t}return __extends(t,e),__decorate([r(cc.Node)],t.prototype,"node_lightNode",void 0),__decorate([r(cc.Node)],t.prototype,"node_titileNode",void 0),__decorate([r(cc.Node)],t.prototype,"node_box1Node",void 0),__decorate([r(cc.Node)],t.prototype,"node_box2Node",void 0),__decorate([r(cc.Label)],t.prototype,"txt_levelLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_titleLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_box1LvLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_box1LanLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_box1ZiLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_box2LvLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_box2LanLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_box2ZiLabel",void 0),__decorate([r(cc.Button)],t.prototype,"btn_closeBtn",void 0),__decorate([n("UI_BoxUpLevel_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_BoxUpLevel:[function(e,t,i){"use strict";cc._RF.push(t,"b9b47Y9D9ZBfZf/eqfGZIEw","UI_BoxUpLevel"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UI_BoxUpLevel_UIBindings"),a=e("./UIView"),n=e("./Excel"),r=e("./HallManager"),s=cc._decorator,c=s.ccclass,l=s.property,u=(s.inspector,function(e){function t(){var t=e.call(this)||this;return t.auto_ui=null,t}return __extends(t,e),t.prototype._show=function(e){for(var t=this,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];this.showLevel(r.HallMgr.shopData.boxLevel),this.auto_ui.node_lightNode.stopAllActions(),this.auto_ui.node_lightNode.runAction(cc.repeatForever(cc.rotateBy(3,360))),this.auto_ui.btn_closeBtn.node.active=!1,this.scheduleOnce(function(){t.auto_ui.btn_closeBtn.node.active=!0},2)},t.prototype._clickListener=function(e){switch(e){case this.auto_ui.btn_closeBtn:this._close(),this.auto_ui.node_lightNode.stopAllActions(),this.auto_ui.btn_closeBtn.node.active=!1}},t.prototype.showLevel=function(e){var t=this.auto_ui,i=n.Excel.shopBoxLevel(e),o=n.Excel.shopBoxLevel(e+1);t.txt_levelLabel.string="l"+(e+1),t.txt_box1LvLabel.node.parent.active=o.rewards[0]>0,t.txt_box1LvLabel.string="+"+(o.rewards[0]-i.rewards[0]),t.txt_box1LanLabel.node.parent.active=o.rewards[1]>0,t.txt_box1LanLabel.string="+"+(o.rewards[1]-i.rewards[1]),t.txt_box1ZiLabel.node.parent.active=o.rewards[2]>0,t.txt_box1ZiLabel.string="+"+(o.rewards[2]-i.rewards[2]),t.txt_box2LvLabel.node.parent.active=o.bigRewards[0]>0,t.txt_box2LvLabel.string="+"+(o.bigRewards[0]-i.bigRewards[0]),t.txt_box2LanLabel.node.parent.active=o.bigRewards[1]>0,t.txt_box2LanLabel.string="+"+(o.bigRewards[1]-i.bigRewards[1]),t.txt_box2ZiLabel.node.parent.active=o.bigRewards[2]>0,t.txt_box2ZiLabel.string="+"+(o.bigRewards[2]-i.bigRewards[2])},__decorate([l(o.default)],t.prototype,"auto_ui",void 0),__decorate([c],t)}(a.default));i.default=u,cc._RF.pop()},{"./Excel":"Excel","./HallManager":"HallManager","./UIView":"UIView","./UI_BoxUpLevel_UIBindings":"UI_BoxUpLevel_UIBindings"}],UI_BulletBombCollider:[function(e,t,i){"use strict";cc._RF.push(t,"6f456gBygZA/pHcM9xqpHXN","UI_BulletBombCollider"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./EventManager"),a=e("./ResKeeper"),n=e("./EvenType"),r=e("./GameGlobalVariable"),s=e("./BuffMag"),c=e("./UI_MosterLogic"),l=e("./UI_BulletBomb"),u=cc._decorator,d=u.ccclass,h=(u.property,u.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastCollisionTime=0,t}return __extends(t,e),t.prototype.onCollisionEnter=function(e,t){var i=(new Date).getTime();if(i-this.lastCollisionTime>=100){r.GameGlobalVariable.playBomb1SoundEffect(),this.lastCollisionTime=i;var a=t.node.parent.getComponent(l.default);a.getCurrentMonsterNodes().forEach(function(e){var t=e.getComponent(c.default);s.BuffMgr.monsterHit(t,a.attackfang),t.receiveAttack(a);var i=s.BuffMgr.getBlueMelonExtraBuff(a.attackfang);if(i){var o=t.xueliang*(i.value[0]/100);t.applyAdditionalAttack(o,5,a)}});var u=e.node.getComponent(c.default);s.BuffMgr.addMosterBombCount(u),a.hideBullet(),o.EventMgrInstance.emitEvent(n.EVENT_TYPE.Game_Add_BaoZha,a.node.getPosition(),1,a.getExplosionRange())}},t.prototype.handleMyCollisionEnter=function(e){var t=(new Date).getTime();if(t-this.lastCollisionTime>=100){r.GameGlobalVariable.playBomb1SoundEffect(),this.lastCollisionTime=t;var i=this.node.parent.getComponent(l.default);i.getCurrentMonsterNodes().forEach(function(e){var t=e.getComponent(c.default);s.BuffMgr.monsterHit(t,i.attackfang),t.receiveAttack(i);var o=s.BuffMgr.getBlueMelonExtraBuff(i.attackfang);if(o){var a=t.xueliang*(o.value[0]/100);t.applyAdditionalAttack(a,5,i)}});var a=e.getComponent(c.default);s.BuffMgr.addMosterBombCount(a),i.hideBullet(),o.EventMgrInstance.emitEvent(n.EVENT_TYPE.Game_Add_BaoZha,i.node.getPosition(),1,i.getExplosionRange())}},__decorate([d],t)}(a.default));i.default=h,cc._RF.pop()},{"./BuffMag":"BuffMag","./EvenType":"EvenType","./EventManager":"EventManager","./GameGlobalVariable":"GameGlobalVariable","./ResKeeper":"ResKeeper","./UI_BulletBomb":"UI_BulletBomb","./UI_MosterLogic":"UI_MosterLogic"}],UI_BulletBomb:[function(e,t,i){"use strict";cc._RF.push(t,"d3c38pEhixLNJlUy5iWoxIE","UI_BulletBomb"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./BundleConfig"),a=e("./ResKeeper"),n=e("./Excel"),r=e("./NodePoolMag"),s=e("./UI_BulletBombCollider"),c=cc._decorator,l=c.ccclass,u=c.property,d=(c.inspector,function(e){function t(){var t=e.call(this)||this;return t.bulletId=1,t.nowbox=null,t.spr=null,t.attack=0,t.attackfanwei=0,t.isbaoji=!1,t.attackfang=null,t.nowdirection=0,t.nowpos=null,t.tw=null,t.createtime=0,t.ispengzhuang=!1,t.bulletspeed=40,t.issend=!1,t}return __extends(t,e),t.prototype.initializeBullet=function(e,t){return __awaiter(this,void 0,Promise,function(){var i,a,r,s,c;return __generator(this,function(l){switch(l.label){case 0:return this.attack=e.attack,this.attackfang=e.playerId,this.isbaoji=e.isbaoji,i=e.skinlevel,this.createtime=(new Date).getTime(),[4,this._loadRes(o.BundleNames.Common,"res/player/player8_"+(i+1),cc.SpriteFrame)];case 1:return a=l.sent(),this.spr&&(this.spr.spriteFrame=a),this.nowpos=t,r=cc.v2(),cc.Vec2.subtract(r,cc.v2(t.x,t.y),this.node.getPosition()),this.nowdirection=Math.atan2(r.y,r.x),this.issend=!0,(s=n.Excel.shuiguobuff(this.attackfang.sgtianfuid))&&(this.attackfanwei=s.value[0]),this.tw&&this.tw.stop(),c=cc.tween(this.spr.node).to(.5,{scale:.9}).to(.5,{scale:1}),this.tw=cc.tween(this.spr.node).repeatForever(c).start(),[2]}})})},t.prototype.getExplosionRange=function(){return this.attackfanwei},t.prototype.fireBullet1=function(){this.moveBulletInDirection(this.nowdirection)},t.prototype.moveBulletInDirection=function(e){var t=cc.Vec2.distance(cc.v2(this.nowpos.x,this.nowpos.y),this.node.getPosition()),i=this.bulletspeed;t<this.bulletspeed&&(i=t),this.node.x+=Math.cos(e)*i,this.node.y+=Math.sin(e)*i,cc.Vec2.distance(cc.v2(this.nowpos.x,this.nowpos.y),this.node.getPosition())<=10&&(this.issend=!1,this.node.x=this.nowpos.x,this.node.y=this.nowpos.y)},t.prototype.getBulletAttack=function(){return this.attack},t.prototype.getCurrentMonsterNodes=function(){for(var e=[],t=0,i=this.attackfang.mosterNodes.children;t<i.length;t++){var o=i[t];cc.Vec2.distance(o.getPosition(),this.node.getPosition())-o.width/2-this.node.width/2<=this.attackfanwei&&e.push(o)}return e},t.prototype.hideBullet=function(){this.issend=!1,r.NodePoolMag.instance.recycleNodeToPool("bullet_2",this.node)},t.prototype.setBoxState=function(e){this.ispengzhuang=e},t.prototype.onUpdate=function(){this.issend&&this.fireBullet1()},t.prototype.collideWithMonster=function(e){if(this.ispengzhuang)for(var t=0,i=e.children;t<i.length;t++){var o=i[t];if(cc.Vec2.distance(o.getPosition(),this.node.getPosition())<=20){this.nowbox.getComponent(s.default).handleMyCollisionEnter(o);break}}},__decorate([u],t.prototype,"bulletId",void 0),__decorate([u(cc.Node)],t.prototype,"nowbox",void 0),__decorate([u(cc.Sprite)],t.prototype,"spr",void 0),__decorate([l],t)}(a.default));i.default=d,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./Excel":"Excel","./NodePoolMag":"NodePoolMag","./ResKeeper":"ResKeeper","./UI_BulletBombCollider":"UI_BulletBombCollider"}],UI_BulletCollider:[function(e,t,i){"use strict";cc._RF.push(t,"6c4407x+99HuZrExpHs9ueO","UI_BulletCollider"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./EventManager"),a=e("./ResKeeper"),n=e("./EvenType"),r=e("./Excel"),s=e("./GameGlobalVariable"),c=e("./BuffMag"),l=e("./UI_MosterLogic"),u=e("./UI_Bullet"),d=cc._decorator,h=d.ccclass,p=(d.property,d.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastCollisionTime=0,t.hasExplosion=!1,t}return __extends(t,e),t.prototype.onCollisionEnter=function(e,t){if((new Date).getTime()-this.lastCollisionTime>=50){this.lastCollisionTime=(new Date).getTime();var i=t.node.parent.getComponent(u.default);i.hideBullet();var a=e.node.getComponent(l.default),d=r.Excel.shuiguobuff(i.attackfang.sgtianfuid),h=-1;switch(d&&(h=d.buffefftype),h){case 4:s.GameGlobalVariable.playBomb2SoundEffect();var p=d.value[0];p+=p*c.BuffMgr.getBombBuffScope(i.attackfang);var _=i.getNowMosterNode(p);o.EventMgrInstance.emitEvent(n.EVENT_TYPE.Game_Add_BaoZha,i.node.getPosition(),3,p),a.beAttack(i,!0),_.forEach(function(e){var t=e.getComponent(l.default);if(t.node.uuid!=a.node.uuid){c.BuffMgr.monsterHit(t,i.attackfang);var o=i.getBulletAttack(a)*d.value[1]/100;t.fujiaAttack(o,1,i),c.BuffMgr.getMonsterBombDamageIncrease()>0&&t.setIsXiGuaBomb()}});break;default:c.BuffMgr.monsterHit(a,i.attackfang),a.beAttack(i),this.hasExplosion?s.GameGlobalVariable.playBomb2SoundEffect():s.GameGlobalVariable.playHitSound()}}},t.prototype.onOptimizedCollision=function(e){if((new Date).getTime()-this.lastCollisionTime>=50){this.lastCollisionTime=(new Date).getTime();var t=this.node.parent.getComponent(u.default);t.hideBullet();var i=e.getComponent(l.default),a=r.Excel.shuiguobuff(t.attackfang.sgtianfuid),d=-1;switch(a&&(d=a.buffefftype),d){case 4:s.GameGlobalVariable.playBomb2SoundEffect();var h=a.value[0];h+=h*c.BuffMgr.getBombBuffScope(t.attackfang);var p=t.getCurrentMonsterNodes(h);o.EventMgrInstance.emitEvent(n.EVENT_TYPE.Game_Add_BaoZha,t.node.getPosition(),3,h),i.receiveAttack(t,!0),p.forEach(function(e){var o=e.getComponent(l.default);if(o.node.uuid!=i.node.uuid){c.BuffMgr.monsterHit(o,t.attackfang);var n=t.getBulletAttack(i)*a.value[1]/100;o.fujiaAttack(n,1,t),c.BuffMgr.getMonsterBombDamageIncrease()>0&&o.setIsXiGuaBomb()}});break;default:c.BuffMgr.monsterHit(i,t.attackfang),i.receiveAttack(t),this.applyExtraDamage(t,i),this.applyAreaDamage(t,i),this.hasExplosion?s.GameGlobalVariable.playBomb2SoundEffect():s.GameGlobalVariable.playHitSound()}}},t.prototype.binDongEwai=function(){},t.prototype.applyAreaDamage=function(e,t){this.hasExplosion=!1;var i=c.BuffMgr.getRangeBuff(e.attackfang);if(i&&Math.random()<i.probability/100){var o=e.attack*i.value[0]/100,a=i.value[1];e.getNowMosterNode(a).forEach(function(a){var n=a.getComponent(l.default);t.node.uuid!=n.node.uuid&&(n.fujiaAttack(o,5,e),n.setJianShu(i.value[2],i.bufftime,e.attackfang))})}},t.prototype.applyExtraDamage=function(e,t){var i=c.BuffMgr.getBombBuff(e.attackfang);if(this.hasExplosion=!1,i){this.hasExplosion=!0;var a=e.attack*i.value[1]/100,r=i.value[0];e.getNowMosterNode(r).forEach(function(e){var i=e.getComponent(l.default);t.node.uuid!=i.node.uuid&&i.fujiaAttack(a,5)});var s=1;5==e.attackfang.playerId&&(s=3),o.EventMgrInstance.emitEvent(n.EVENT_TYPE.Game_Add_BaoZha,e.node.getPosition(),s,r)}},__decorate([h],t)}(a.default));i.default=p,cc._RF.pop()},{"./BuffMag":"BuffMag","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GameGlobalVariable":"GameGlobalVariable","./ResKeeper":"ResKeeper","./UI_Bullet":"UI_Bullet","./UI_MosterLogic":"UI_MosterLogic"}],UI_BulletMoveCollider:[function(e,t,i){"use strict";cc._RF.push(t,"a7f4foc2VtOh7IYPn02Tmri","UI_BulletMoveCollider"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./ResKeeper"),a=e("./Excel"),n=e("./GameGlobalVariable"),r=e("./BuffMag"),s=e("./UI_MosterLogic"),c=e("./UI_BulletMove"),l=cc._decorator,u=l.ccclass,d=(l.property,l.inspector,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onCollisionEnter=function(e,t){n.GameGlobalVariable.playHitDurianSoundEffect();var i=t.node.parent.getComponent(c.default),o=e.node.getComponent(s.default);if(!o.isDie){r.BuffMgr.monsterHit(o,i.attackfang),o.receiveAttack(i),i.isChaoJi||i.hideBullet();var l=a.Excel.shuiguobuff(i.attackfang.sgtianfuid);if(11===l.buffefftype){var u=a.Excel.shuiguoguaiwu(o.mosterId);!i.isChaoJi&&Math.random()<l.probability/100*u.resistance&&o.knockback(l.value[0])}}},__decorate([u],t)}(o.default));i.default=d,cc._RF.pop()},{"./BuffMag":"BuffMag","./Excel":"Excel","./GameGlobalVariable":"GameGlobalVariable","./ResKeeper":"ResKeeper","./UI_BulletMove":"UI_BulletMove","./UI_MosterLogic":"UI_MosterLogic"}],UI_BulletMove_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"2ba1axjozxP9rcfVYEWEhDj","UI_BulletMove_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.node_effNode=null,t}return __extends(t,e),__decorate([r(cc.Node)],t.prototype,"node_effNode",void 0),__decorate([n("UI_BulletMove_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_BulletMove:[function(e,t,i){"use strict";cc._RF.push(t,"ca3e0A3hL5HuI5uNa991De3","UI_BulletMove"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UI_BulletMove_UIBindings"),a=e("./BundleConfig"),n=e("./ResKeeper"),r=e("./GameGlobalVariable"),s=e("./NodePoolMag"),c=e("./UI_BulletBomb"),l=e("./BuffMag"),u=cc._decorator,d=u.ccclass,h=u.property,p=(u.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.bulletId=1,t.img=null,t.attack=0,t.attackfang=null,t.isbaoji=!1,t.nowpos=null,t.issend=!1,t.moveindex=5,t.isChaoJi=!1,t.languajiaodus=[],t.chongjiNode=null,t.bulletspeed=7,t}return __extends(t,e),t.prototype.initializeBullet=function(e){return __awaiter(this,void 0,Promise,function(){var t,i,o,n,r,s;return __generator(this,function(c){switch(c.label){case 0:if(this.node.angle=0,this.attack=e.attack,this.attackfang=e.playerId,this.isbaoji=e.isbaoji,this.moveindex=5,this.node.scale=1,this.isChaoJi=!1,this.clearImpactEffect(),l.BuffMgr.getDurianBuff(this.attackfang)&&(this.isChaoJi=!0,this.node.scale=1.7,this.addImpactEffect()),this.issend=!0,this.languajiaodus=[],l.BuffMgr.getDurianBomb(this.attackfang))for(t=this.getThreeUniqueRandomNumbers([0,200],[300,360]),i=0,o=t;i<o.length;i++)n=o[i],this.languajiaodus.push({angle:n,has:!1});return r=1,e&&4===e.playerLevel&&(r=5),[4,this._loadRes(a.BundleNames.Common,"res/player/player7_"+r,cc.SpriteFrame)];case 1:return s=c.sent(),this.img.spriteFrame=s,console.log("\u5f53\u524d\u968f\u673a\u89d2\u5ea6",this.languajiaodus),[2]}})})},t.prototype.onDisable=function(){this.clearImpactEffect()},t.prototype.addImpactEffect=function(){return __awaiter(this,void 0,Promise,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return this.chongjiNode=s.NodePoolMag.instance.getNodeFromPool("chongji"),this.chongjiNode?[3,2]:[4,this._loadRes(a.BundleNames.Game,"prefabs/effpre/UI_ChongJi",cc.Prefab)];case 1:e=t.sent(),s.NodePoolMag.instance.createNodePool("chongji",1,e),this.chongjiNode=s.NodePoolMag.instance.getNodeFromPool("chongji"),t.label=2;case 2:return this.chongjiNode.x=-40,this.chongjiNode.y=0,this.auto_ui.node_effNode.addChild(this.chongjiNode),[2]}})})},t.prototype.clearImpactEffect=function(){this.chongjiNode&&(s.NodePoolMag.instance.recycleNodeToPool("chongji",this.chongjiNode),this.chongjiNode=null)},t.prototype.hideBullet=function(){this.issend=!1,this.clearImpactEffect(),s.NodePoolMag.instance.recycleNodeToPool("bullet_3",this.node)},t.prototype.getRandomInteger=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},t.prototype.getThreeUniqueRandomNumbers=function(e,t){for(var i=[],o=e[0];o<=e[1];o++)i.push(o);for(o=t[0];o<=t[1];o++)i.push(o);for(var a=[];a.length<3;){var n=i[this.getRandomInteger(0,i.length-1)];a.includes(n)||a.push(n)}return a},t.prototype.createLanGua=function(){var e=this,t=this.node.parent;if(t)for(var i=cc.Vec2.subtract(cc.v2(),this.node.getPosition(),t.getPosition()),o=180/Math.PI*Math.atan2(i.y,i.x)+180,a=function(t){var i=e.languajiaodus[t];if(!i.has){var a=i.angle;if(Math.abs(o-a)<=10){i.has=!0;var n=e.node.x,r=e.node.y;e.scheduleOnce(function(){e.createBulletExplosion(cc.v2(n,r))}),e.languajiaodus[t]=i}}},n=0;n<this.languajiaodus.length;n++)a(n)},t.prototype.createBulletExplosion=function(e){return __awaiter(this,void 0,Promise,function(){var t,i,o,n;return __generator(this,function(u){switch(u.label){case 0:return(t=s.NodePoolMag.instance.getNodeFromPool("bullet_2"))?[3,2]:[4,this._loadRes(a.BundleNames.Game,"prefabs/bullet/bullet2",cc.Prefab)];case 1:i=u.sent(),s.NodePoolMag.instance.createNodePool("bullet_2",1,i),t=s.NodePoolMag.instance.getNodeFromPool("bullet_2"),u.label=2;case 2:return t.x=e.x,t.y=e.y,r.GameGlobalVariable.languaNode.addChild(t),t.scale=0,cc.tween(t).to(.2,{scale:1}).start(),o=t.getComponent(c.default),n=l.BuffMgr.getDurianBomb(this.attackfang),o.initializeBullet({attack:this.attack*r.GameGlobalVariable.liulianlanguabomb,attackfanwei:n.value[0],playerId:this.attackfang,skinlevel:4,isbaoji:this.isbaoji},cc.v2(e.x,e.y)),[2]}})})},t.prototype.sendBullet1=function(){var e=this,t=r.GameGlobalVariable.paths.children[this.moveindex];if(t){if(5===this.moveindex)this.node.setPosition(t.x,t.y),this.moveindex-=1;else{var i=function(t){var o=r.GameGlobalVariable.paths.children[e.moveindex];if(o){var a=cc.Vec2.subtract(cc.v2(),cc.v2(o.x,o.y),e.node.getPosition()),n=Math.atan2(a.y,a.x),s=cc.Vec2.distance(e.node.getPosition(),cc.v2(o.x,o.y)),c=t,l=0;s<c&&(l=c-s,c=s),e.node.x+=Math.cos(n)*c,e.node.y+=Math.sin(n)*c,l>0&&(e.moveindex-=1,i(l))}else e.hideBullet()};i(this.getBulletSpeed())}this.updateDirection()}else this.hideBullet()},t.prototype.updateDirection=function(){switch(this.moveindex){case 4:this.auto_ui.node_effNode.angle=0;break;case 3:this.auto_ui.node_effNode.angle=-90;break;case 2:this.auto_ui.node_effNode.angle=180;break;case 1:this.auto_ui.node_effNode.angle=90;break;case 0:this.auto_ui.node_effNode.angle=0}},t.prototype.getBulletAttack=function(){return this.attack},t.prototype.getBulletSpeed=function(){return this.bulletspeed*=r.GameGlobalVariable.jiasuState,this.bulletspeed},t.prototype.onUpdate=function(){this.issend&&(this.node.children[0].angle+=this.getBulletSpeed(),this.sendBullet1(),this.attackfang.playerInfo.equipLevel>=4&&this.createLanGua())},__decorate([h(o.default)],t.prototype,"auto_ui",void 0),__decorate([h],t.prototype,"bulletId",void 0),__decorate([h(cc.Sprite)],t.prototype,"img",void 0),__decorate([d],t)}(n.default));i.default=p,cc._RF.pop()},{"./BuffMag":"BuffMag","./BundleConfig":"BundleConfig","./GameGlobalVariable":"GameGlobalVariable","./NodePoolMag":"NodePoolMag","./ResKeeper":"ResKeeper","./UI_BulletBomb":"UI_BulletBomb","./UI_BulletMove_UIBindings":"UI_BulletMove_UIBindings"}],UI_Bullet:[function(e,t,i){"use strict";cc._RF.push(t,"fb126qN7c1NuqbbyTRBO6z1","UI_Bullet"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./BundleConfig"),a=e("./ResKeeper"),n=e("./GameGlobalVariable"),r=e("./NodePoolMag"),s=e("./UI_MosterLogic"),c=e("./UI_BulletCollider"),l=e("./Excel"),u=cc._decorator,d=u.ccclass,h=u.property,p=function(e){function t(){var t=e.call(this)||this;return t.bulletId=1,t.img=null,t.attack=0,t.isbaoji=!1,t.attackfang=null,t.attacktype=1,t.nowtagMoster=null,t.nowdirection=0,t.tuoweiNode=null,t.tagMosterX=0,t.tagMosterY=0,t.isshua=!1,t.offtime=0,t.bulletspeed=20,t.issend=!1,t}return __extends(t,e),t.prototype.initializeBullet=function(e,t){return __awaiter(this,void 0,Promise,function(){var i,a,n,r,s;return __generator(this,function(c){switch(c.label){case 0:if(this.attack=e.attack,this.isshua=!1,this.attackfang=e.playerId,this.attacktype=e.feixintype,this.isbaoji=e.isbaoji,this.nowtagMoster=t,i=cc.v2(),cc.Vec2.subtract(i,cc.v2(this.nowtagMoster.x,this.nowtagMoster.y),this.node.getPosition()),this.nowdirection=Math.atan2(i.y,i.x),this.issend=!0,a=l.Excel.shuiguobuff(this.attackfang.sgtianfuid))switch(a.buffefftype){case 10:n=cc.Vec2.distance(cc.v2(this.nowtagMoster.x,this.nowtagMoster.y),this.node.getPosition()),r=n/a.value[0]*(a.value[1]/100),this.attack+=this.attack*r}return[4,this._loadRes(o.BundleNames.Common,"res/player/player"+this.attackfang.playerId+"_1",cc.SpriteFrame)];case 1:return s=c.sent(),this.img.spriteFrame=s,this.createTrailEffect(),[2]}})})},t.prototype.onDisable=function(){this.tuoweiNode&&(r.NodePoolMag.instance.recycleNodeToPool("tuowei",this.tuoweiNode),this.tuoweiNode=null)},t.prototype.createTrailEffect=function(){return __awaiter(this,void 0,Promise,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return(e=r.NodePoolMag.instance.getNodeFromPool("tuowei"))?[3,2]:[4,this._loadRes(o.BundleNames.Game,"prefabs/effpre/UI_TuoWei",cc.Prefab)];case 1:t=i.sent(),r.NodePoolMag.instance.createNodePool("tuowei",1,t),e=r.NodePoolMag.instance.getNodeFromPool("tuowei"),i.label=2;case 2:return this.tuoweiNode=e,n.GameGlobalVariable.effNode.addChild(e),[2]}})})},t.prototype.getBulletAttack=function(e){var t=this.attack;if(e.isjianshu&&14===this.attackfang.playerId){var i=l.Excel.shuiguo(1014);t+=t*(l.Excel.shuiguobuff(i.talent).value[0]/100)}return 1===e.nowmosterdata.boss&&10===this.attackfang.playerId&&(i=l.Excel.shuiguo(1010),t+=t*(l.Excel.shuiguobuff(i.talent).value[0]/100)),t},t.prototype.sendBulletType1=function(e){var t=cc.v2();this.isshua||(this.tagMosterX=this.nowtagMoster.x,this.tagMosterY=this.nowtagMoster.y),cc.Vec2.subtract(t,cc.v2(this.tagMosterX,this.tagMosterY),this.node.getPosition()),this.nowdirection=Math.atan2(t.y,t.x),this.moveBullet(this.nowdirection,e)},t.prototype.moveBullet=function(e,t){this.node.x+=Math.cos(e)*this.bulletspeed,this.node.y+=Math.sin(e)*this.bulletspeed,this.nowtagMoster.getComponent(s.default).isDie&&(this.isshua=!0);var i=cc.Vec2.distance(cc.v2(this.nowtagMoster.x,this.nowtagMoster.y),this.node.getPosition());if(this.offtime+=t,i<=25&&this.img.node.getComponent(c.default).onOptimizedCollision(this.nowtagMoster),this.isshua){var o=cc.Vec2.distance(cc.v2(this.nowtagMoster.x,this.nowtagMoster.y),this.node.getPosition());this.offtime+=t,o<=50&&this.hideBullet(),this.offtime>=.5&&(this.offtime=0,this.hideBullet())}},t.prototype.hideBullet=function(){this.issend=!1,r.NodePoolMag.instance.recycleNodeToPool("bullet_"+this.bulletId,this.node)},t.prototype.getCurrentMonsterNodes=function(e){for(var t=this.attackfang.mosterNodes.children,i=[],o=0;o<t.length;o++){var a=t[o];cc.Vec2.distance(a.getPosition(),this.node.getPosition())-(a.width/2+this.node.width/2)<=e&&i.push(a)}return i},t.prototype.sendBulletType2=function(){},t.prototype.getBulletSpeed=function(){return this.bulletspeed*=n.GameGlobalVariable.jiasuState,this.bulletspeed},t.prototype.onUpdate=function(e){this.issend&&(this.sendBulletType1(e),this.tuoweiNode&&(this.tuoweiNode.x=this.node.x,this.tuoweiNode.y=this.node.y))},__decorate([h()],t.prototype,"bulletId",void 0),__decorate([h(cc.Sprite)],t.prototype,"img",void 0),__decorate([d],t)}(a.default);i.default=p,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./Excel":"Excel","./GameGlobalVariable":"GameGlobalVariable","./NodePoolMag":"NodePoolMag","./ResKeeper":"ResKeeper","./UI_BulletCollider":"UI_BulletCollider","./UI_MosterLogic":"UI_MosterLogic"}],UI_CameraControl:[function(e,t,i){"use strict";cc._RF.push(t,"05b01LKIy1MpJ/22zpE6jci","UI_CameraControl"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./EventManager"),a=e("./ResKeeper"),n=e("./EvenType"),r=cc._decorator.ccclass,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEnable=function(){o.EventMgrInstance.addListener(n.EVENT_TYPE.Game_CameraControl,this.setCamera,this),o.EventMgrInstance.addListener("zuobiaozhuanhuan",this.convertPosition,this)},t.prototype.setCamera=function(e){cc.winSize.height/cc.winSize.width<=2&&(e-=.1);var t=0;1!==e&&(t=-50);var i="cubicActionIn";1!==e&&(i="cubicActionOut");var a=this.node.getComponent(cc.Camera);cc.tween(this.node).to(.7,{y:t},{easing:i}).start(),cc.tween(a).to(.7,{zoomRatio:e},{easing:i}).call(function(){o.EventMgrInstance.emitEvent(n.EVENT_TYPE.Game_Hide),o.EventMgrInstance.emitEvent(n.EVENT_TYPE.GAME_LOCK_SCREE,!1)}).start()},t.prototype.convertPosition=function(e,t){var i=this.node.getComponent(cc.Camera),o=cc.v2();i.getScreenToWorldPoint(e,o),t(o)},t.prototype.onDisable=function(){o.EventMgrInstance.removeListener(n.EVENT_TYPE.Game_CameraControl,this.setCamera,this)},__decorate([r],t)}(a.default);i.default=s,cc._RF.pop()},{"./EvenType":"EvenType","./EventManager":"EventManager","./ResKeeper":"ResKeeper"}],UI_ChiTiaoItem:[function(e,t,i){"use strict";cc._RF.push(t,"ce391aWdktAd7WS9N/RJL/2","UI_ChiTiaoItem"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./ResKeeper"),a=cc._decorator,n=a.ccclass,r=(a.property,a.inspector,function(e){function t(){return e.call(this)||this}return __extends(t,e),__decorate([n],t)}(o.default));i.default=r,cc._RF.pop()},{"./ResKeeper":"ResKeeper"}],UI_ChiTiao_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"3141cUm4cJDmbGc9SHCZOH8","UI_ChiTiao_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.txt_huanyipilb=null,t.txt_allhavelb=null,t}return __extends(t,e),__decorate([r(cc.Label)],t.prototype,"txt_huanyipilb",void 0),__decorate([r(cc.Label)],t.prototype,"txt_allhavelb",void 0),__decorate([n("UI_ChiTiao_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_ChiTiao:[function(e,t,i){"use strict";cc._RF.push(t,"de461Cen4VP8rEDZLBj8LDC","UI_ChiTiao"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UI_ChiTiao_UIBindings"),a=e("./UIView"),n=e("./Excel"),r=e("./BuffMag"),s=e("./BundleConfig"),c=e("./ExcelUtil"),l=e("./GameGlobalVariable"),u=e("./GameDataManager"),d=e("./CommonUtils"),h=e("./PlayerDataManager"),p=e("./GuideControl"),_=e("./LogManager"),g=e("./ADManager"),f=e("./AIControl"),m=e("./AudioManager"),v=e("./EventManager"),y=e("./EvenType"),b=e("./Const_Common"),I=cc._decorator,E=I.ccclass,M=I.property,C=(I.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.citiaoNode=null,t.btNode=null,t.huanNode=null,t.allNode=null,t.currentData={},t.isEffect=!1,t.currentCiTiao=[],t.currentSelectId=1,t.isClick=!1,t}return __extends(t,e),t.prototype._show=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.btNode.scale=0,this.currentData=e,_.LogMgr.debug(e,t),this.initCiTiao(),this.updateCiShu(),this.updateBtNode(),d.default.clearCoins()},t.prototype.updateBtNode=function(){l.GameGlobalVariable.huanyipi<=0&&(this.huanNode.active=!1),l.GameGlobalVariable.allhave<=0&&(this.allNode.active=!1)},t.prototype.updateCiShu=function(){var e=c.ExcelUtil.getMatchingData(n.Excel.shuiguoconfig_all,"configkey","huanyipin")[0].value;this.auto_ui.txt_huanyipilb.string=l.GameGlobalVariable.huanyipi+"/"+e;var t=c.ExcelUtil.getMatchingData(n.Excel.shuiguoconfig_all,"configkey","allhave")[0].value;this.auto_ui.txt_allhavelb.string=l.GameGlobalVariable.allhave+"/"+t;var i=2,o=l.GameGlobalVariable.nowlevel;-1===o&&(i=1,o=l.GameGlobalVariable.teshulevel),u.GameDataMgr.updateCurrentLevel(o,l.GameGlobalVariable.huanyipi,l.GameGlobalVariable.allhave,i)},t.prototype.showEff=function(){var e=this;m.AudioMgr.playSoundEffect("sound/bufftanchu",!1,s.BundleNames.Game);var t=this.citiaoNode.children;t.forEach(function(e){return e.scale=0}),this.btNode.scale=0;var i=0;this.schedule(function(){i<3?cc.tween(t[i]).to(.2,{scale:1.1}).to(.1,{scale:1}).start():cc.tween(e.btNode).to(.2,{scale:1.1}).to(.1,{scale:1}).call(function(){var i=(e.node.height-1334)/2;if(h.PlayerDataMgr.getGuideIndexByTaskName(b.GuideName.GameBag)===b.GameBagGuideIndex.EntryGuide7){var o=t[0].convertToWorldSpaceAR(cc.v2(0,0)),a=cc.size(t[0].width,t[0].height);p.GuideCtrlInstance.showGuide({callBack:function(){e.onClick1(),h.PlayerDataMgr.setGuideIndex(b.GuideName.GameBag,b.GameBagGuideIndex.EntryGuide7Completion)},sayStr:"\u5347\u7ea7\u540e\u53ef\u4ee5\u83b7\u5f97\u5c5e\u6027\u63d0\u5347\uff0c\u9009\u62e9\u8fd9\u4e2a\u6bd2\u8611\u83c7\u7684\u7279\u6027\u5427",sayNodePos:cc.v2(0,500+i),wPos:o,size:a})}else e.AICheck()}).start(),i+=1},.1,3)},t.prototype.onHuanYiPi=function(){var e=this,t="\u89c6\u9891\u6362\u4e00\u6279\u8bcd\u6761";if(1===l.GameGlobalVariable.isSpecialLevel())t="\u65e0\u5c3d\u6a21\u5f0f\u89c6\u9891\u6362\u4e00\u6279\u8bcd\u6761";else{var i=u.GameDataMgr.getCurrentLevelWaveState(l.GameGlobalVariable.nowlevel,2)+1;t=l.GameGlobalVariable.nowlevel+"\u7ae0_"+i+"\u6ce2_"+t}g.ADMgr.showRewardedVideoAd(t,function(){l.GameGlobalVariable.decrementHuanYiPi(),e.updateBtNode(),e.updateCiShu(),e.initCiTiao()})},t.prototype.initCiTiao=function(){return __awaiter(this,void 0,Promise,function(){var e,t,i,o,a,c,u,d,p;return __generator(this,function(_){switch(_.label){case 0:if(this.isEffect)return[2];h.PlayerDataMgr.getGuideIndexByTaskName(b.GuideName.GameBag)===b.GameBagGuideIndex.EntryGuide7?(this.currentCiTiao.push(n.Excel.shuiguocitiao(45)),this.currentCiTiao.push(n.Excel.shuiguocitiao(53)),this.currentCiTiao.push(n.Excel.shuiguocitiao(56))):(e=this.currentData.nowbo,t=!0,5===e&&1===l.GameGlobalVariable.nowlevel&&(t=!1),this.currentCiTiao=r.BuffMgr.getCurrentCiTiao(t)),console.log("\u5f53\u524d\u8bcd\u6761\u4e0b\u4fe1\u606f",this.currentCiTiao),i=this.citiaoNode.children,o=0,_.label=1;case 1:return o<this.currentCiTiao.length?(a=this.currentCiTiao[o],(c=i[o]).active=!0,u=c.getChildByName("context").getComponent(cc.RichText),this.setCiTiaoContent(u,a),c.getChildByName("diejia").active=-1!==a.citiaochuxian,[4,this._loadRes(s.BundleNames.Game,"res/\u6218\u6597buff/citiao"+a.quality,cc.SpriteFrame)]):[3,5];case 2:return d=_.sent(),c.getChildByName("img").getComponent(cc.Sprite).spriteFrame=d,[4,this._loadRes(s.BundleNames.Common,"res/skillicon/skill_"+a.id,cc.SpriteFrame)];case 3:p=_.sent(),c.getChildByName("icon1").getComponent(cc.Sprite).spriteFrame=p,_.label=4;case 4:return o++,[3,1];case 5:return this.showEff(),[2]}})})},t.prototype.setCiTiaoContent=function(e,t){var i=t.citiaomiaoshu,o=n.Excel.shuiguobuff(t.citiaoshuzhitype),a=(i=d.default.replaceStringSymbols(i,"n",["\n"])).split("X"),r="";if(a.length>1)for(var s=0;s<a.length;s++){var c=a[s];o.value[s]&&s<c.length-1&&44!==t.id?r+="<color=#ffffff>"+c+"</c><color=#00ff00>"+o.value[s]+"</color>":r+="<color=#ffffff>"+c+"</c>"}else r=a[0];r="<outline color=#000000 width=3>"+r+"</outline>",e.string=r},t.prototype.onClickAll=function(){var e=this;if(!this.isEffect){var t="\u89c6\u9891\u5168\u90fd\u8981\u8bcd\u6761";if(1===l.GameGlobalVariable.isSpecialLevel())t="\u65e0\u5c3d\u6a21\u5f0f\u89c6\u9891\u5168\u90fd\u8981\u8bcd\u6761";else{var i=u.GameDataMgr.getCurrentLevelWaveState(l.GameGlobalVariable.nowlevel,2)+1;t=l.GameGlobalVariable.nowlevel+"\u7ae0_"+i+"\u6ce2_"+t}g.ADMgr.showRewardedVideoAd(t,function(){l.GameGlobalVariable.decrementAllHave(),e.updateBtNode(),e.updateCiShu(),r.BuffMgr.addCurrentCiTiao(e.currentCiTiao[0]),r.BuffMgr.addCurrentCiTiao(e.currentCiTiao[1]),r.BuffMgr.addCurrentCiTiao(e.currentCiTiao[2]),e._close(),e.currentData.back(),setTimeout(function(){v.EventMgrInstance.emitEvent(y.EVENT_TYPE.Game_Add_CiTiao)},100)})}},t.prototype.onClick1=function(){var e=this;if(!this.isEffect){var t=this.citiaoNode.children;this.isClick||(this.isClick=!0,t[2].opacity=0,t[1].opacity=0,t[0].opacity=255,cc.tween(t[0]).to(.4,{scale:1.1},{easing:"backOut"}).delay(.2).call(function(){e.currentSelectId=1,e.onCloseView(),e.isClick=!1}).start())}},t.prototype.onClick2=function(){var e=this;if(!this.isEffect){var t=this.citiaoNode.children;this.isClick||(this.isClick=!0,t[2].opacity=0,t[0].opacity=0,t[1].opacity=255,cc.tween(t[1]).to(.4,{scale:1.1},{easing:"backOut"}).delay(.2).call(function(){e.currentSelectId=2,e.onCloseView(),e.isClick=!1}).start())}},t.prototype.onClick3=function(){var e=this;if(!this.isEffect){var t=this.citiaoNode.children;this.isClick||(this.isClick=!0,t[1].opacity=0,t[0].opacity=0,t[2].opacity=255,cc.tween(t[2]).delay(.2).to(.4,{scale:1.1},{easing:"backOut"}).call(function(){e.currentSelectId=3,e.onCloseView(),e.isClick=!1}).start())}},t.prototype.onCloseView=function(){r.BuffMgr.addCurrentCiTiao(this.currentCiTiao[this.currentSelectId-1]),this._close(),this.currentData.back(),v.EventMgrInstance.emitEvent(y.EVENT_TYPE.Game_Add_CiTiao)},t.prototype.AICheck=function(){var e=this;if(f.default._instance.isOpen){if(c.ExcelUtil.getMatchingData(n.Excel.shuiguoconfig_all,"configkey","allhave")[0].value>0){var t=0;if(this.currentCiTiao.forEach(function(e){e.quality>1&&t++}),t>=2)return f.default._instance.displayClickButton(this.allNode,function(){e.onClickAll()})}for(var i=0,o=0,a=0;a<this.currentCiTiao.length;a++){var r=this.currentCiTiao[a];r.quality>i&&(i=r.quality,o=a)}var s=null,l=null;switch(o){case 0:s=this.citiaoNode.children[0],l=this.onClick1.bind(this);break;case 1:s=this.citiaoNode.children[1],l=this.onClick2.bind(this);break;case 2:s=this.citiaoNode.children[2],l=this.onClick3.bind(this)}f.default._instance.displayClickButton(s,l)}},__decorate([M(o.default)],t.prototype,"auto_ui",void 0),__decorate([M(cc.Node)],t.prototype,"citiaoNode",void 0),__decorate([M(cc.Node)],t.prototype,"btNode",void 0),__decorate([M(cc.Node)],t.prototype,"huanNode",void 0),__decorate([M(cc.Node)],t.prototype,"allNode",void 0),__decorate([E],t)}(a.default));i.default=C,cc._RF.pop()},{"./ADManager":"ADManager","./AIControl":"AIControl","./AudioManager":"AudioManager","./BuffMag":"BuffMag","./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Const_Common":"Const_Common","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./ExcelUtil":"ExcelUtil","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./GuideControl":"GuideControl","./LogManager":"LogManager","./PlayerDataManager":"PlayerDataManager","./UIView":"UIView","./UI_ChiTiao_UIBindings":"UI_ChiTiao_UIBindings"}],UI_CreateMoster:[function(e,t,i){"use strict";cc._RF.push(t,"23771QohcxPTapMNjhureHO","UI_CreateMoster"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./BundleConfig"),a=e("./EventManager"),n=e("./LogManager"),r=e("./ResKeeper"),s=e("./CommonUtils"),c=e("./EvenType"),l=e("./Excel"),u=e("./GameGlobalVariable"),d=e("./NodePoolMag"),h=e("./UI_MosterLogic"),p=cc._decorator,_=p.ccclass,g=p.property,f=(p.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.pathsNode=null,t.onOver=null,t.isCreateMoster=!1,t.mosterboshu=0,t.mostertime=0,t.mosteraindex=0,t.chuguaicount=0,t.isBoShuOver=!1,t.isonguai=!1,t.miaojishu=0,t}return __extends(t,e),t.prototype.onEnable=function(){a.EventMgrInstance.addListener(c.EVENT_TYPE.Game_Moster_FenLie,this.splitCreateMonster,this),a.EventMgrInstance.addListener(c.EVENT_TYPE.Game_ZhaoHuan_Moster,this.summonCreateMonster,this)},t.prototype.setOver=function(e){this.onOver=e},t.prototype.resetBoShu=function(){this.mostertime=0,this.mosteraindex=0},t.prototype.initMoster=function(){this.mostertime=0,this.isCreateMoster=!0},t.prototype.summonCreateMonster=function(e){var t=this,i=u.GameGlobalVariable.getMonsterDistance(e,this.pathsNode);this.scheduleOnce(function(){t.addMonster(e.mosterId,i.pos,null,i.tagindex)},.1)},t.prototype.splitCreateMonster=function(e){var t=this,i=u.GameGlobalVariable.splitCreateMonster(e,this.pathsNode);this.scheduleOnce(function(){i.forEach(function(i){t.addMonster(e.mosterId,i.pos,null,i.tagindex)})},.1)},t.prototype.recycleMonster=function(){this.resetValues();for(var e=this.node.children,t=e.length,i=0;i<t;i++){var o=e[0];d.NodePoolMag.instance.recycleNodeToPool("moster_"+o.getComponent(h.default).mosterId,o)}},t.prototype.getCurrentWave=function(){var e;e=1===u.GameGlobalVariable.isSpecialLevel()?l.Excel.shuiguotiaozhan(u.GameGlobalVariable.teshulevel):l.Excel.shuiguoguanqia(u.GameGlobalVariable.nowlevel);var t=this.mosterboshu+1;return t>e.levelboshuid.length&&(t=e.levelboshuid.length),t},t.prototype.resetValues=function(){this.mostertime=0,this.mosteraindex=0,this.chuguaicount=0},t.prototype.createMonster=function(){var e,t=this,i=(1===u.GameGlobalVariable.isSpecialLevel()?l.Excel.shuiguotiaozhan(u.GameGlobalVariable.teshulevel):l.Excel.shuiguoguanqia(u.GameGlobalVariable.nowlevel)).levelboshuid[this.mosterboshu];if(i){var o=l.Excel.shuiguoboshu(i),a=-1,r=o.mosterid[this.mosteraindex];if(!r)return n.LogMgr.debug("\u5f53\u524d\u8fd9\u4e00\u6ce2\u602a\u7269\u5168\u90e8\u51fa\u5b8c"),void(null===(e=this.onOver)||void 0===e||e.call(this));if(r[2]===this.mostertime&&(a=this.mosteraindex,this.mosteraindex+=1),-1===a)return;this.mostertime=0;var c=r[0],d=function(e){t.addMonster(c,t.pathsNode.children[0].getPosition(),o),--e>0&&t.scheduleOnce(function(){d(e)},s.default.limitIntegerInRange(1,3)/10)};d(r[1])}else n.LogMgr.debug("\u901a\u5173")},t.prototype.addMonster=function(e,t,i,n){return void 0===n&&(n=1),__awaiter(this,void 0,Promise,function(){var r,s,u;return __generator(this,function(p){switch(p.label){case 0:return 1===(r=l.Excel.shuiguoguaiwu(e)).boss&&a.EventMgrInstance.emitEvent(c.EVENT_TYPE.GAME_SHOW_BOOS),(s=d.NodePoolMag.instance.getNodeFromPool("moster_"+r.mostertype))?[3,2]:[4,this._loadRes(o.BundleNames.Game,"prefabs/moster/moster"+r.mostertype,cc.Prefab)];case 1:u=p.sent(),d.NodePoolMag.instance.createNodePool("moster_"+r.mostertype,1,u),s=d.NodePoolMag.instance.getNodeFromPool("moster_"+r.mostertype),p.label=2;case 2:return s.setPosition(t),s.scale=0,cc.tween(s).to(.1,{scale:1.2}).to(.1,{scale:1}).start(),this.node.addChild(s),this.chuguaicount++,s.getComponent(h.default).initializeMonsterInfo(e,this.pathsNode,this.chuguaicount,i,n),[2]}})})},t.prototype.onCreateMonster=function(e){this.miaojishu+=e*u.GameGlobalVariable.jiasuState,this.miaojishu>=1&&this.isCreateMoster&&(this.miaojishu=0,this.createMonster(),this.mostertime+=.5)},t.prototype.onDisable=function(){a.EventMgrInstance.removeListener(c.EVENT_TYPE.Game_Moster_FenLie,this.splitCreateMonster,this),a.EventMgrInstance.removeListener(c.EVENT_TYPE.Game_ZhaoHuan_Moster,this.summonCreateMonster,this)},__decorate([g(cc.Node)],t.prototype,"pathsNode",void 0),__decorate([_],t)}(r.default));i.default=f,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GameGlobalVariable":"GameGlobalVariable","./LogManager":"LogManager","./NodePoolMag":"NodePoolMag","./ResKeeper":"ResKeeper","./UI_MosterLogic":"UI_MosterLogic"}],UI_DeBugItem:[function(e,t,i){"use strict";cc._RF.push(t,"6e90c4zKlNEBbD43J+r3z2p","UI_DeBugItem"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./EventManager"),a=e("./ResKeeper"),n=e("./EvenType"),r=e("./PlayerDataManager"),s=e("./Excel"),c=e("./GameDataManager"),l=e("./HallGlobalVariable"),u=cc._decorator,d=u.ccclass,h=u.property,p=(u.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.typeadd=0,t.togglebeilv1=null,t.togglebeilv2=null,t.jiabeicode=1,t}return __extends(t,e),t.prototype.onEnable=function(){this.jiabeicode=1,this.togglebeilv1&&this.togglebeilv2&&(this.togglebeilv1.isChecked=!1,this.togglebeilv2.isChecked=!1)},t.prototype.addHuoBi=function(){switch(this.typeadd){case 1:r.PlayerDataMgr.addDiamond(100*this.jiabeicode);break;case 2:r.PlayerDataMgr.addPower(100*this.jiabeicode);break;case 3:r.PlayerDataMgr.addGold(100*this.jiabeicode);break;case 4:this.addEquipFragments([100*this.jiabeicode,0,0]);break;case 5:this.addEquipFragments([0,100*this.jiabeicode,0]);break;case 6:this.addEquipFragments([0,0,100*this.jiabeicode]);break;case 7:this.handleMaxLevelUpdate();break;case 8:this.handleChallengeUpdate();break;case 9:r.PlayerDataMgr.resetWuJinCount(!0)}},t.prototype.onClickTen=function(){10===this.jiabeicode?(this.jiabeicode=1,this.togglebeilv1&&(this.togglebeilv1.isChecked=!1)):(this.jiabeicode=10,this.togglebeilv2&&(this.togglebeilv2.isChecked=!1),this.togglebeilv1&&(this.togglebeilv1.isChecked=!0))},t.prototype.onClickTen100=function(){100===this.jiabeicode?(this.jiabeicode=1,this.togglebeilv2&&(this.togglebeilv2.isChecked=!1)):(this.jiabeicode=100,this.togglebeilv1&&(this.togglebeilv1.isChecked=!1),this.togglebeilv2&&(this.togglebeilv2.isChecked=!0))},t.prototype.addEquipFragments=function(e){l.default.getSuiPian(e).forEach(function(e,t){r.PlayerDataMgr.addEquipFragments(t,e)})},t.prototype.handleMaxLevelUpdate=function(){var e=c.GameDataMgr.getCurrentMaxLevel();e+=1;var t=s.Excel.shuiguoguanqia(e+1).levelboshuid.length;c.GameDataMgr.updateLevelWave(e,t,2),l.default.isNeedResetWareHouse=!0,o.EventMgrInstance.emitEvent(n.EVENT_TYPE.HallResetUnLockFurit),o.EventMgrInstance.emitEvent(n.EVENT_TYPE.HallResetBag)},t.prototype.handleChallengeUpdate=function(){var e=s.Excel.shuiguotiaozhan(1).levelboshuid.length;c.GameDataMgr.updateLevelWave(1,e,1)},__decorate([h],t.prototype,"typeadd",void 0),__decorate([h(cc.Toggle)],t.prototype,"togglebeilv1",void 0),__decorate([h(cc.Toggle)],t.prototype,"togglebeilv2",void 0),__decorate([d],t)}(a.default));i.default=p,cc._RF.pop()},{"./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GameDataManager":"GameDataManager","./HallGlobalVariable":"HallGlobalVariable","./PlayerDataManager":"PlayerDataManager","./ResKeeper":"ResKeeper"}],UI_Debug:[function(e,t,i){"use strict";cc._RF.push(t,"f4968oXKAhCu6M0XmHymk0H","UI_Debug"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./List"),a=cc._decorator,n=a.ccclass,r=a.property,s=(a.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.list_logs=null,t._logs=[],t}return __extends(t,e),t.prototype.refresh=function(e){this._logs=e,this.list_logs.numItems=e.length},t.prototype.logItemRender=function(e,t){e.getComponent(cc.Label).string=this._logs[t]},__decorate([r(o.default)],t.prototype,"list_logs",void 0),__decorate([n],t)}(cc.Component));i.default=s,cc._RF.pop()},{"./List":"List"}],UI_DuWu:[function(e,t,i){"use strict";cc._RF.push(t,"0f6e7ze3BdBNJ8MCe0FTo8G","UI_DuWu"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./ResKeeper"),a=e("./NodePoolMag"),n=e("./BuffMag"),r=e("./UI_MosterLogic"),s=cc._decorator,c=s.ccclass,l=s.property,u=(s.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nowBuffData=null,t.dushanPlayer=null,t.nowMoster=[],t.offTime=0,t}return __extends(t,e),t.prototype.initializeInfo=function(e,t){var i=this;this.nowBuffData=e,this.dushanPlayer=t,this.scheduleOnce(function(){i.nowMoster=[],a.NodePoolMag.instance.recycleNodeToPool("duwu",i.node)},this.nowBuffData.bufftime)},t.prototype.onCollisionEnter=function(e){var t=e.node.getComponent(r.default);this.nowMoster.push(t)},t.prototype.onCollisionExit=function(e){var t=e.node.getComponent(r.default),i=this.nowMoster.findIndex(function(e){return e.node.uuid===t.node.uuid});-1!==i&&this.nowMoster.splice(i,1)},t.prototype.onUpdate=function(e){var t=this;this.offTime+=e,this.offTime>=1&&(this.nowMoster.forEach(function(e){var i=n.BuffMgr.applyAttackBonus(t.dushanPlayer,t.dushanPlayer.sgattack,1);e.fujiaAttack(i,3,t.dushanPlayer)}),this.offTime=0)},__decorate([l],t.prototype,"nowBuffData",void 0),__decorate([l],t.prototype,"dushanPlayer",void 0),__decorate([l],t.prototype,"nowMoster",void 0),__decorate([l],t.prototype,"offTime",void 0),__decorate([c],t)}(o.default));i.default=u,cc._RF.pop()},{"./BuffMag":"BuffMag","./NodePoolMag":"NodePoolMag","./ResKeeper":"ResKeeper","./UI_MosterLogic":"UI_MosterLogic"}],UI_Entry:[function(e,t,i){"use strict";cc._RF.push(t,"6c062MfaE9MvamhpuU0uzRy","UI_Entry"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./Const_Common"),a=e("./EvenType"),n=e("./PlayerDataManager"),r=e("./ExcelLoader"),s=e("./GameDataManager"),c=e("./GameGlobalVariable"),l=e("./UIConfig_Game"),u=e("./UIConfig_Home"),d=e("./BundleConfig"),h=e("./GameConfig"),p=e("./AudioManager"),_=e("./EventManager"),g=e("./LogManager"),f=e("./ResLoader"),m=e("./UIManager"),v=e("./UIView"),y=e("./0/YpNetMag"),b=cc._decorator,I=b.ccclass,E=b.property,M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.progress_loading=null,t}return __extends(t,e),t.prototype.onLoad=function(){cc.director.getCollisionManager().enabled=!0},t.prototype._show=function(){this.progress_loading.progress=0,this.startGameLoading()},t.prototype.startGameLoading=function(){var e=[this.loadGameConfig,this.loadExcelData,this.loadUserData,this.loadCommonBundle,this.loadMainBundle];this.completeTasks(e,this.loadGame),cc.sys.platform,cc.sys.WECHAT_GAME},t.prototype.loadExcelData=function(){return new Promise(function(e){var t=(new Date).getTime();r.ExcelLoader.loadAllExcelFiles().then(function(){console.log("\u6e38\u620f\u6570\u636e\u8868\u52a0\u8f7d\u6210\u529f",(new Date).getTime()-t),e(!0)})})},t.prototype.loadGame=function(){this._close(),n.PlayerDataMgr.getGuideIndexByTaskName(o.GuideName.GameBag)!==o.GameBagGuideIndex.GuideCompletion?(n.PlayerDataMgr.gmSetGuideIndex(o.GuideName.GameBag,o.GameBagGuideIndex.InitialGuide1),s.GameDataMgr.clearGameBagData(),c.GameGlobalVariable.nowlevel=1,m.default.open(d.BundleNames.Game,l.UIView_Game.UI_GameView)):(_.EventMgrInstance.emitEvent(a.EVENT_TYPE.Game_Load_View,!0),m.default.open(d.BundleNames.Home,u.UIView_Home.UI_Hall)),this.onInitWhiteName()},t.prototype.completeTasks=function(e,t){var i=this,o=0,a=0,n=Promise.resolve();e.forEach(function(t){n=n.then(function(){return t()}).then(function(){o++,i.setProgress(o/e.length)}).catch(function(){a++})}),n.then(function(){0===a&&t.call(i)})},t.prototype.loadGameConfig=function(){var e=this;return new Promise(function(t,i){return __awaiter(e,void 0,void 0,function(){var e,o;return __generator(this,function(a){switch(a.label){case 0:return e=(new Date).getTime(),[4,f.default.loadRes("resources","config/GameConfig",cc.JsonAsset)];case 1:return(o=a.sent())?(h.default.appConfig=o.json,console.log("Load game config success:",h.default.appConfig),o.decRef(),t(!0),console.log("\u6e38\u620f\u672c\u5730\u914d\u7f6e\u52a0\u8f7d\u6210\u529f",(new Date).getTime()-e)):(console.log("Load game config failure"),i(!1)),[2]}})})})},t.prototype.loadRemoteConfig=function(){var e=this;return new Promise(function(t,i){return __awaiter(e,void 0,void 0,function(){var e,o,a,n;return __generator(this,function(r){switch(r.label){case 0:return e=(new Date).getTime(),(o=h.default.appConfig.RemoteUrl)?(a=o+"/ADConfig.json",[4,Promise.resolve({json:{ADUnitId:[""]}})]):[3,2];case 1:return(n=r.sent())&&n.json?(h.default.adConfig=n.json,console.log("Load remote config success:",h.default.adConfig),t(!0),console.log("\u8fdc\u7a0b\u914d\u7f6e\u52a0\u8f7d\u6210\u529f",(new Date).getTime()-e)):(console.log("Load remote config failure:",a),i(!1)),[3,3];case 2:console.log("Load remote config failure: RemoteUrl is null"),i(!1),r.label=3;case 3:return[2]}})})})},t.prototype.loadCommonBundle=function(){var e=this;return new Promise(function(t,i){return __awaiter(e,void 0,void 0,function(){var e,o;return __generator(this,function(a){switch(a.label){case 0:return e=(new Date).getTime(),[4,f.default.loadBundle(d.BundleNames.Common)];case 1:return o=a.sent(),console.log("Loaded main bundle",o),o?(t(!0),console.log("Common\u5206\u5305\u4e0b\u8f7d",(new Date).getTime()-e)):i(!1),[2]}})})})},t.prototype.loadMainBundle=function(){var e=this;return new Promise(function(t,i){return __awaiter(e,void 0,void 0,function(){var e,o;return __generator(this,function(a){switch(a.label){case 0:return e=(new Date).getTime(),[4,f.default.loadBundle(d.MainGameBundle)];case 1:return o=a.sent(),console.log("Loaded main bundle",o),o?(t(!0),console.log("Home\u5206\u5305\u4e0b\u8f7d",(new Date).getTime()-e)):i(!1),[2]}})})})},t.prototype.sdk_init=function(){var e=this;return new Promise(function(t,i){return __awaiter(e,void 0,void 0,function(){var e;return __generator(this,function(){e=(new Date).getTime();try{t(!0),console.log("\u6e38\u54c1\u670d\u52a1\u5668\u521d\u59cb\u5316",(new Date).getTime()-e)}catch(o){i(!1)}return[2]})})})},t.prototype.sdk_login=function(){var e=this;return new Promise(function(t,i){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(){try{t(!0)}catch(e){i(!1)}return[2]})})})},t.prototype.onInitWhiteName=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return n.PlayerDataMgr.WHITE_NAME_NO_VIDEO=!0,[2]})})},t.prototype.loadUserData=function(){var e=this;return new Promise(function(t){return __awaiter(e,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),cc.log("\u521d\u59cb\u5316\u6570\u636e"),p.AudioMgr.initialize(),c.GameGlobalVariable.initializeConfig(),[4,y.GameNetworkManager.initServer({})];case 1:return i.sent(),[3,3];case 2:return e=i.sent(),g.LogMgr.error("load user data error:",e),[3,3];case 3:return t(!0),[2]}})})})},t.prototype.setProgress=function(e){e=Math.max(0,Math.min(1,e)),this.progress_loading.progress=e},__decorate([E(cc.ProgressBar)],t.prototype,"progress_loading",void 0),__decorate([I],t)}(v.default);i.default=M,cc._RF.pop()},{"./0/YpNetMag":"YpNetMag","./AudioManager":"AudioManager","./BundleConfig":"BundleConfig","./Const_Common":"Const_Common","./EvenType":"EvenType","./EventManager":"EventManager","./ExcelLoader":"ExcelLoader","./GameConfig":"GameConfig","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./LogManager":"LogManager","./PlayerDataManager":"PlayerDataManager","./ResLoader":"ResLoader","./UIConfig_Game":"UIConfig_Game","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager","./UIView":"UIView"}],UI_EquipInfo_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"fc5d8F5VDtPsrxpCVpZyD97","UI_EquipInfo_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.btn_closeBtn=null,t.btn_upLevelBtn=null,t.btn_clearBtn=null,t.btn_useBtn=null,t.node_attributeFather=null,t.node_cardFather=null,t.node_ciTiaoFather=null,t.node_upLevelEffect=null,t.sp_tianFuIcon=null,t.txt_nameLabel=null,t.txt_decLabel=null,t.txt_upPriceLabel=null,t.txt_unLockLabel=null,t._btnNames=["btn_closeBtn","btn_upLevelBtn","btn_clearBtn","btn_useBtn"],t}return __extends(t,e),__decorate([r(cc.Button)],t.prototype,"btn_closeBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_upLevelBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_clearBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_useBtn",void 0),__decorate([r(cc.Node)],t.prototype,"node_attributeFather",void 0),__decorate([r(cc.Node)],t.prototype,"node_cardFather",void 0),__decorate([r(cc.Node)],t.prototype,"node_ciTiaoFather",void 0),__decorate([r(cc.Node)],t.prototype,"node_upLevelEffect",void 0),__decorate([r(cc.Sprite)],t.prototype,"sp_tianFuIcon",void 0),__decorate([r(cc.Label)],t.prototype,"txt_nameLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_decLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_upPriceLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_unLockLabel",void 0),__decorate([n("UI_EquipInfo_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_EquipInfo:[function(e,t,i){"use strict";cc._RF.push(t,"54fb5oUD3RO0Y4QC4SANMKG","UI_EquipInfo"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UI_EquipInfo_UIBindings"),a=e("./UIView"),n=e("./Excel"),r=e("./BundleConfig"),s=e("./Item_Bag_EquipItem"),c=e("./PlayerDataManager"),l=e("./EventManager"),u=e("./EvenType"),d=e("./HallGlobalVariable"),h=e("./Item_Bag_CiTiao"),p=e("./TipsManager"),_=e("./CommonUtils"),g=e("./AudioManager"),f=e("./GuideControl"),m=e("./RedPointControl"),v=e("./AIControl"),y=e("./Const_Common"),b=e("./Const_Game"),I=cc._decorator,E=I.ccclass,M=I.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.ciTiaoPrefab=null,t.cardComponent=null,t}return __extends(t,e),t.prototype._show=function(e){this.args=e,this.initializeEquipInfo()},t.prototype.onEnable=function(){var e=this;this.scheduleOnce(function(){c.PlayerDataMgr.getGuideIndexByTaskName(y.GuideName.EquipLevelUp)==y.UpEquipLevelGuideIndex.GuideClickUpgrade3?e.showEquipGuide():e.checkWearGuide()},.5)},t.prototype.showEquipGuide=function(){var e=this,t=this.auto_ui.btn_upLevelBtn.node,i=t.convertToWorldSpaceAR(cc.v2(0,0)),o=cc.size(t.width,t.height);f.GuideCtrlInstance.showGuide({callBack:function(){e.clickUpLevel(),c.PlayerDataMgr.setGuideIndex(y.GuideName.EquipLevelUp,y.UpEquipLevelGuideIndex.GuideBattle4),f.GuideCtrlInstance.showGuide({callBack:function(){c.PlayerDataMgr.setGuideIndex(y.GuideName.EquipLevelUp,y.UpEquipLevelGuideIndex.GuideCompletion),d.default.selfMap["\u6218\u6597\u6309\u94ae"]&&(f.GuideCtrlInstance.showOneFingerGuide({parent:d.default.selfMap["\u6218\u6597\u6309\u94ae"],isWillClickClose:!0,x:0,y:0,getFingerCallBack:null}),e._close())},sayStr:"\u7ee7\u7eed\u6311\u6218\u5173\u5361\uff0c\u53ef\u89e3\u9501\u66f4\u5f3a\u5927\u7684\u6c34\u679c\u5e76\u83b7\u5f97\u5927\u91cf\u5956\u52b1"})},sayStr:"\u6c34\u679c\u5347\u7ea7\u4f1a\u589e\u52a0\u57fa\u7840\u5c5e\u6027\uff0c\u8fbe\u5230\u7279\u5b9a\u7b49\u7ea7\u4f1a\u89e3\u9501\u65b0\u7684\u6280\u80fd",wPos:i,size:o})},t.prototype.checkWearGuide=function(){c.PlayerDataMgr.getGuideIndexByTaskName(y.GuideName.FruitDressUpEquip)==y.DressUpEquipGuideIndex.GuideDressing?c.PlayerDataMgr.setGuideIndex(y.GuideName.FruitDressUpEquip,y.DressUpEquipGuideIndex.GuideCompletion):this.checkAI()},t.prototype.initializeEquipInfo=function(){var e=n.Excel.shuiguo(this.args.openData.shuiGuoId),t=c.PlayerDataMgr.getEquipDataById(this.args.openData.shuiGuoId);this.auto_ui.txt_nameLabel.string=e.name,this.auto_ui.txt_decLabel.string=e.shuiguomiaoshu,this.displayCard(),this.displayCiTiao(),this.updateAttributes(),this.auto_ui.sp_tianFuIcon.spriteFrame=null,e.id!=b.FruitId.\u6768\u6843\u5fcd\u8005&&this.loadFruitSprite(e.id),t.isUnLock?this.auto_ui.txt_unLockLabel.string="":this.auto_ui.txt_unLockLabel.string="\u901a\u8fc7\u7ae0\u8282"+e.unLock+"\u89e3\u9501";var i=c.PlayerDataMgr.hallGetEquipIsDressUp(this.args.openData.shuiGuoId);this.auto_ui.btn_clearBtn.node.active=i,this.auto_ui.btn_upLevelBtn.node.active=t.isUnLock&&t.level<=this.args.openData.upLevelDatas.length,this.auto_ui.btn_useBtn.node.active=t.isUnLock&&!i,t.level>this.args.openData.upLevelDatas.length?this.auto_ui.txt_upPriceLabel.string="MAX":(this.requiredLevelData=this.args.openData.upLevelDatas[t.level-1],this.auto_ui.txt_upPriceLabel.string=""+this.requiredLevelData.money)},t.prototype.updateAttributes=function(){var e=this,t=["\u6700\u524d","\u968f\u673a","\u8f6e\u6d41","\u7cbe\u82f1","-","\u968f\u673a","\u6700\u524d","-","-"],i=n.Excel.shuiguo(this.args.openData.shuiGuoId),o=d.default.getShuiGuoCurrLevelData(this.args.openData.shuiGuoId);this.auto_ui.node_attributeFather.children.forEach(function(a,n){var r=a.getChildByName("value"),s=r.getChildByName("valueLabel").getComponent(cc.Label),c=r.getChildByName("addLabel").getComponent(cc.Label);switch(s.string="-",c.string="",n){case 0:0!==i.attack&&e.args.openData.shuiGuoId!=b.FruitId.\u8fa3\u59b9\u5b50&&(s.string=""+o[0].atk,o[1].atk>o[0].atk&&(c.string="+"+(o[1].atk-o[0].atk)));break;case 1:0!==i.attackspeed&&(s.string=""+o[0].atkSpeed,o[1].atkSpeed>o[0].atkSpeed&&(c.string="+"+(o[1].atkSpeed-o[0].atkSpeed)));break;case 2:s.string=t[i.attackstate-1];break;case 3:e.setSpecialAttributes(a,i,o,s,c)}})},t.prototype.setSpecialAttributes=function(e,t,i,o,a){var r=!!t.littleDesc&&t.littleDesc.length>0;if(e.getChildByName("nameLabel").getComponent(cc.Label).string=r?t.littleDesc:"-",r&&i[0]&&i[0].talent[0]){var s=i[0].buffIsBaiFenBi?"%":"";if(t.id==b.FruitId.\u69b4\u83b2\u738b?o.string=""+n.Excel.shuiguobuff(t.talent).probability+s:(o.string=""+i[0].talent[0]+s,t.id==b.FruitId.\u9999\u8549\u5c04\u624b&&(o.string=""+i[0].talent[1]+s)),i[1].talent[0]>i[0].talent[0]){var c=i[1].talent[0]-i[0].talent[0];a.string="+"+c.toFixed(1)}}},t.prototype._clickListener=function(e){switch(e){case this.auto_ui.btn_upLevelBtn:this.clickUpLevel();break;case this.auto_ui.btn_clearBtn:this.handleClearButtonClick();break;case this.auto_ui.btn_useBtn:this.handleUseButtonClick();break;case this.auto_ui.btn_closeBtn:this._close()}},t.prototype.handleClearButtonClick=function(){l.EventMgrInstance.emitEvent(u.EVENT_TYPE.HallBagRemoveId,this.args.openData.shuiGuoId),this._close()},t.prototype.handleUseButtonClick=function(){c.PlayerDataMgr.dressUpArray.filter(function(e){return 0==e}).length<=0?l.EventMgrInstance.emitEvent(u.EVENT_TYPE.HallBagShowDrag,this.args.openData.shuiGuoId):(c.PlayerDataMgr.addDressUpEquip(this.args.openData.shuiGuoId),l.EventMgrInstance.emitEvent(u.EVENT_TYPE.HallResetBag)),this._close()},t.prototype.clickUpLevel=function(){c.PlayerDataMgr.globalData.gold<this.requiredLevelData.money?p.TipMgr.showToast("\u91d1\u5e01\u4e0d\u8db3"):c.PlayerDataMgr.useEquipFragments(this.args.openData.shuiGuoId,this.requiredLevelData.shengjixiaohao)&&(c.PlayerDataMgr.subtractGold(this.requiredLevelData.money),c.PlayerDataMgr.addEquipLevel(this.args.openData.shuiGuoId),this.initializeEquipInfo(),this.args.upLevelReset&&this.args.upLevelReset(),g.AudioMgr.playSoundEffect("effect/upLevel"),this.showUpLevelEffect(),l.EventMgrInstance.emitEvent(u.EVENT_TYPE.MainRedPointChange,m.RedPointType.upEquip))},t.prototype.showUpLevelEffect=function(){this.auto_ui.node_upLevelEffect.active=!0,this.auto_ui.node_upLevelEffect.children.forEach(function(e){e.getComponent(cc.ParticleSystem).resetSystem()})},t.prototype.displayCard=function(){return __awaiter(this,void 0,Promise,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return this.cardComponent?(this.cardComponent.startSet(this.args.openData,!1,!1),this.cardComponent.auto_ui.txt_nameLabel.string="",[3,3]):[3,1];case 1:return[4,this._loadRes(r.BundleNames.Home,"item/Item_bag_equipItem",cc.Prefab)];case 2:e=i.sent(),(t=cc.instantiate(e)).parent=this.auto_ui.node_cardFather,t.setPosition(0,0),this.cardComponent=t.getComponent(s.default),this.cardComponent.startSet(this.args.openData,!1,!1),this.cardComponent.auto_ui.txt_nameLabel.string="",i.label=3;case 3:return[2]}})})},t.prototype.displayCiTiao=function(){return __awaiter(this,void 0,Promise,function(){var e,t=this;return __generator(this,function(i){switch(i.label){case 0:return this.ciTiaoPrefab?[3,2]:(e=this,[4,this._loadRes(r.BundleNames.Home,"item/item_bag_ciTiao",cc.Prefab)]);case 1:e.ciTiaoPrefab=i.sent(),i.label=2;case 2:return this.scheduleOnce(function(){t.updateCiTiaoData()}),[2]}})})},t.prototype.updateCiTiaoData=function(){var e=this,t=d.default.getShuiGuoCiTiaoMap.get(this.args.openData.shuiGuoId);t.sort(function(e,t){return e.jiesuo-t.jiesuo}),this.auto_ui.node_ciTiaoFather.children.forEach(function(e){return e.active=!1}),t.forEach(function(t,i){var o;i<e.auto_ui.node_ciTiaoFather.childrenCount?o=e.auto_ui.node_ciTiaoFather.children[i]:(o=cc.instantiate(e.ciTiaoPrefab)).parent=e.auto_ui.node_ciTiaoFather,o.active=!0,o.getComponent(h.default).initializeSettings(t)})},t.prototype.loadFruitSprite=function(e){return __awaiter(this,void 0,Promise,function(){var t;return __generator(this,function(i){switch(i.label){case 0:return[4,this._loadRes(r.BundleNames.Common,"res/tianfuicon/tianfu_"+e,cc.SpriteFrame)];case 1:return t=i.sent(),this.auto_ui.sp_tianFuIcon.spriteFrame=t,_.default.limitSpriteSize(this.auto_ui.sp_tianFuIcon,80),[2]}})})},t.prototype.checkAI=function(){var e=this,t=v.default._instance;if(t.isOpen){var i=this.args.openData.shuiGuoId,o=c.PlayerDataMgr.getEquipDataById(i);c.PlayerDataMgr.globalData.gold>=this.requiredLevelData.money&&o.fragments>=this.requiredLevelData.shengjixiaohao?t.displayClickButton(this.auto_ui.btn_upLevelBtn.node,function(){e.clickUpLevel(),e.checkAI()}):this.args.isAiDressUp&&t.displayClickButton(this.auto_ui.btn_useBtn.node,function(){c.PlayerDataMgr.dressUpArray.filter(function(e){return 0==e}).length<=0?l.EventMgrInstance.emitEvent(u.EVENT_TYPE.HallBagShowDrag,i):(c.PlayerDataMgr.addDressUpEquip(i),l.EventMgrInstance.emitEvent(u.EVENT_TYPE.HallResetBag),l.EventMgrInstance.emitEvent(u.EVENT_TYPE.ResetWareHouseAI)),e._close()})}},__decorate([M(o.default)],t.prototype,"auto_ui",void 0),__decorate([E],t)}(a.default);i.default=C,cc._RF.pop()},{"./AIControl":"AIControl","./AudioManager":"AudioManager","./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Const_Common":"Const_Common","./Const_Game":"Const_Game","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GuideControl":"GuideControl","./HallGlobalVariable":"HallGlobalVariable","./Item_Bag_CiTiao":"Item_Bag_CiTiao","./Item_Bag_EquipItem":"Item_Bag_EquipItem","./PlayerDataManager":"PlayerDataManager","./RedPointControl":"RedPointControl","./TipsManager":"TipsManager","./UIView":"UIView","./UI_EquipInfo_UIBindings":"UI_EquipInfo_UIBindings"}],UI_GameDeBug:[function(e,t,i){"use strict";cc._RF.push(t,"76e474/scVIU4IOd3TPR7Tr","UI_GameDeBug"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./LoadingManager"),a=e("./UIManager"),n=e("./UIView"),r=e("./GuideControl"),s=e("./NodePoolMag"),c=e("./ModuleManager"),l=cc._decorator,u=l.ccclass,d=(l.property,l.inspector,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype._show=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i]},t.prototype.onResetData=function(){o.LoadingMgr.show(),this.scheduleOnce(function(){window.tt?window.tt.restartMiniProgramSync?window.tt.restartMiniProgramSync():window.tt.exitMiniProgram({isFullExit:!0}):window.wx?window.wx.restartMiniProgram():cc.sys.isBrowser&&(a.default.closeAllViews(),c.ModuleMgr.clearAllModules(),r.GuideCtrlInstance.clearGuide(),s.NodePoolMag.instance.clearAllNodePools(),cc.director.loadScene("entry")),o.LoadingMgr.hide()},.5)},t.prototype.onCloseView=function(){this._close()},__decorate([u],t)}(n.default));i.default=d,cc._RF.pop()},{"./GuideControl":"GuideControl","./LoadingManager":"LoadingManager","./ModuleManager":"ModuleManager","./NodePoolMag":"NodePoolMag","./UIManager":"UIManager","./UIView":"UIView"}],UI_GameEquipInfo_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"274acU7OyhGsqNQ73Gs+SDj","UI_GameEquipInfo_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txt_titleLabel=null,t.txt_zaJiaoTipLabel=null,t.txt_tianFuLabel=null,t.node_light=null,t.node_qiFather=null,t.node_huoFather=null,t.node_attributeFather=null,t.node_zaZhongTip=null,t.node_zaZhongName=null,t.node_tianFuNode=null,t.sp_iconSprite=null,t.sp_tianFuIcon=null,t.sp_ciTiaoIcon=null,t.rtxt_ciTiaoInfo=null,t.btn_closeBtn=null,t._btnNames=["btn_closeBtn"],t}return __extends(t,e),__decorate([r(cc.Label)],t.prototype,"txt_titleLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_zaJiaoTipLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_tianFuLabel",void 0),__decorate([r(cc.Node)],t.prototype,"node_light",void 0),__decorate([r(cc.Node)],t.prototype,"node_qiFather",void 0),__decorate([r(cc.Node)],t.prototype,"node_huoFather",void 0),__decorate([r(cc.Node)],t.prototype,"node_attributeFather",void 0),__decorate([r(cc.Node)],t.prototype,"node_zaZhongTip",void 0),__decorate([r(cc.Node)],t.prototype,"node_zaZhongName",void 0),__decorate([r(cc.Node)],t.prototype,"node_tianFuNode",void 0),__decorate([r(cc.Sprite)],t.prototype,"sp_iconSprite",void 0),__decorate([r(cc.Sprite)],t.prototype,"sp_tianFuIcon",void 0),__decorate([r(cc.Sprite)],t.prototype,"sp_ciTiaoIcon",void 0),__decorate([r(cc.RichText)],t.prototype,"rtxt_ciTiaoInfo",void 0),__decorate([r(cc.Button)],t.prototype,"btn_closeBtn",void 0),__decorate([n("UI_GameEquipInfo_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_GameEquipInfo:[function(e,t,i){"use strict";cc._RF.push(t,"0fcc8zAtZFIibOV45p/tKGg","UI_GameEquipInfo"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UI_GameEquipInfo_UIBindings"),a=e("./UIView"),n=e("./Excel"),r=e("./HallGlobalVariable"),s=e("./BundleConfig"),c=e("./ExcelUtil"),l=e("./CommonUtils"),u=e("./BuffMag"),d=e("./GameGlobalVariable"),h=e("./Logic_GetEquip"),p=e("./Const_Game"),_=cc._decorator,g=_.ccclass,f=_.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t}return __extends(t,e),t.prototype.onLoad=function(){this.auto_ui.node_light.runAction(cc.repeatForever(cc.rotateBy(5,360)))},t.prototype._show=function(e){var t=this;this.fruitId=e.shuiGuoId,this.fruitLevel=e.level,this.updateAttributes();var i=h.default.getInstance.getMaxLevel(e.shuiGuoId)===d.GameGlobalVariable.zaZhongMaxLevel;if(this.auto_ui.node_zaZhongTip.active=i,i){var o=n.Excel.shuiguo(e.shuiGuoId),a=n.Excel.shuiguo(h.default.getInstance.getZaZhongId(this.fruitId));this.auto_ui.txt_zaJiaoTipLabel.string="4\u9636"+o.name+"\u53ef\u4e0e4\u9636"+a.name+"\u6742\u4ea4\u5408\u6210\u81f35\u9636";var r="player"+((0!=o.jinjieShuiGuoId?o:a).id-1e3)+"_5";this.auto_ui.node_zaZhongName.children.forEach(function(e){e.active=e.name===r})}if(this.auto_ui.node_tianFuNode.active=!1,4===e.level){this.auto_ui.node_zaZhongTip.active=!1,l.default.loadLevel5Effect(this.fruitId,this.auto_ui.node_qiFather,this.auto_ui.node_huoFather,this._loadRes.bind(this)),this.auto_ui.node_tianFuNode.active=!0,this._loadRes(s.BundleNames.Common,"res/tianfuicon/tianfu_"+e.shuiGuoId+"_1",cc.SpriteFrame).then(function(e){t.auto_ui.sp_ciTiaoIcon.spriteFrame=e});var c=-1;if(n.Excel.shuiguohecheng_all.forEach(function(t){t.shuiguoId===e.shuiGuoId&&0!==t.newTianFuBuff&&(c=t.newTianFuBuff)}),-1!==c){var u=n.Excel.shuiguo(e.shuiGuoId),p=n.Excel.shuiguobuff(c);if(p){var _=p.value,g=p.buffdesc,f=[g=l.default.replaceStringSymbols(g,"\\n",[""])];g.includes("X")&&(f=g.split("X"));var m="";f.forEach(function(e,t){if(e.includes("#")){var i='<color=#ffff00 click="ShowZaZhongInfo">'+u.newName+"</c>";i="<u>"+i+"</u>",e=l.default.replaceStringSymbols(e,"#",[i])}m+="<color=#ffffff>"+e+"</c>",t<f.length-1&&_&&(m+="<color=#71ff00>"+_[t]+"</c>")}),m="<outline color=#000000 width=3><b>"+m+"</b></outline>",this.auto_ui.rtxt_ciTiaoInfo.string=m}}}},t.prototype._clickListener=function(e){switch(e){case this.auto_ui.btn_closeBtn:this._close()}},t.prototype.updateAttributes=function(){var e=this,t=n.Excel.shuiguo(this.fruitId);this._loadRes(s.BundleNames.Common,"res/player/player"+(this.fruitId-1e3)+"_"+(this.fruitLevel+1),cc.SpriteFrame).then(function(t){e.auto_ui.sp_iconSprite.spriteFrame=t}),this.auto_ui.sp_tianFuIcon.spriteFrame=null,this.fruitId!==p.FruitId.\u6768\u6843\u5fcd\u8005&&this._loadRes(s.BundleNames.Common,"res/tianfuicon/tianfu_"+this.fruitId,cc.SpriteFrame).then(function(t){e.auto_ui.sp_tianFuIcon.spriteFrame=t,l.default.limitSpriteSize(e.auto_ui.sp_tianFuIcon,80)});var i=r.default.getShuiGuoCurrLevelData(this.fruitId);this.fruitLevel===d.GameGlobalVariable.normalMaxLevel?this.auto_ui.txt_titleLabel.string=t.newName+"(LV."+(this.fruitLevel+1)+")":this.auto_ui.txt_titleLabel.string=t.name+"(LV."+(this.fruitLevel+1)+")",this.auto_ui.txt_tianFuLabel.string=t.shuiguomiaoshu;var o=["\u6700\u524d","\u968f\u673a","\u8f6e\u6d41","\u7cbe\u82f1","-","\u968f\u673a","\u6700\u524d","-","-"],a=this.calculateEquipAtk(t,this.fruitLevel,i[0]);this.calculateEquipAtk(t,this.fruitLevel+1,i[0]),this.auto_ui.node_attributeFather.children.forEach(function(i,r){var s=i.getChildByName("value").getChildByName("valueLabel").getComponent(cc.Label);switch(i.getChildByName("value").getChildByName("addLabel").getComponent(cc.Label).string="",s.string="-",r){case 0:0!==t.attack&&e.fruitId!==p.FruitId.\u8fa3\u59b9\u5b50&&(s.string=a.sgattack<1&&a.sgattack>0?a.sgattack.toFixed(2):""+a.sgattack);break;case 1:0!==t.attackspeed&&(s.string=a.sgattackspeed<1&&a.sgattackspeed>0?a.sgattackspeed.toFixed(2):""+a.sgattackspeed);break;case 2:s.string=o[t.attackstate-1];break;case 3:var c=!1;if(t.littleDesc&&t.littleDesc.length>0&&(c=!0),i.getChildByName("nameLabel").getComponent(cc.Label).string=c?t.littleDesc:"-",c){var l=u.BuffMgr.getFruitBuff(t.id,e.fruitLevel),d="";switch(e.fruitId){case p.FruitId.\u7206\u5934\u74dc:case p.FruitId.\u69b4\u83b2\u738b:case p.FruitId.\u9999\u8549\u5c04\u624b:case p.FruitId.\u9ec4\u74dc\u5927\u68d2:case p.FruitId.\u8fa3\u59b9\u5b50:case p.FruitId.\u51bb\u65af\u68a8:case p.FruitId.\u6bd2\u8611\u83c7:case p.FruitId.\u5929\u5c71\u96ea\u83b2:case p.FruitId.\u5143\u5a74\u679c:d="%"}s.string=n.Excel.shuiguobuff(t.talent).probability+d,e.fruitId===p.FruitId.\u69b4\u83b2\u738b?s.string=n.Excel.shuiguobuff(t.talent).probability+d:s.string=e.fruitId===p.FruitId.\u9999\u8549\u5c04\u624b?""+l.otherValue+d:""+l.nowvalue+d}}})},t.prototype.calculateEquipAtk=function(e,t,i){var o=i.atk,a=i.atkSpeed,r=c.ExcelUtil.getMatchingData(n.Excel.shuiguohecheng_all,"shuiguoId",e.id);t>=r.length&&(t=r.length-1);var s=r[t];return{sgattack:o+o*s.addattack/100,sgattackspeed:a/(1+s.addattackspeed/100)}},__decorate([f(o.default)],t.prototype,"auto_ui",void 0),__decorate([g],t)}(a.default);i.default=m,cc._RF.pop()},{"./BuffMag":"BuffMag","./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Const_Game":"Const_Game","./Excel":"Excel","./ExcelUtil":"ExcelUtil","./GameGlobalVariable":"GameGlobalVariable","./HallGlobalVariable":"HallGlobalVariable","./Logic_GetEquip":"Logic_GetEquip","./UIView":"UIView","./UI_GameEquipInfo_UIBindings":"UI_GameEquipInfo_UIBindings"}],UI_GameFail_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"a5163FUvfdOXaiiz02GAqqV","UI_GameFail_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.txt_timelb=null,t.btn_fuhuo=null,t.btn_nofuhuo=null,t._btnNames=["btn_fuhuo","btn_nofuhuo"],t}return __extends(t,e),__decorate([r(cc.Label)],t.prototype,"txt_timelb",void 0),__decorate([r(cc.Button)],t.prototype,"btn_fuhuo",void 0),__decorate([r(cc.Button)],t.prototype,"btn_nofuhuo",void 0),__decorate([n("UI_GameFail_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_GameFail:[function(e,t,i){"use strict";cc._RF.push(t,"d1ffboiH4VHE72pDA6q24Ve","UI_GameFail"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UI_GameFail_UIBindings"),a=e("./UIView"),n=e("./ADManager"),r=e("./GameGlobalVariable"),s=e("./CommonUtils"),c=e("./GameDataManager"),l=cc._decorator,u=l.ccclass,d=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.nowdata={},t.time=10,t.offtime=0,t.isjishi=!1,t}return __extends(t,e),t.prototype._show=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.nowdata=e,this.isjishi=!1,s.default.clearCoins()},t.prototype._clickListener=function(e){var t=this.auto_ui;switch(e){case t.btn_fuhuo:this.handleRevive();break;case t.btn_nofuhuo:this.handleBackHome()}},t.prototype.handleRevive=function(){var e=this,t="\u89c6\u9891\u590d\u6d3b";if(1===r.GameGlobalVariable.isSpecialLevel())t="\u65e0\u5c3d\u6a21\u5f0f\u89c6\u9891\u590d\u6d3b";else{var i=c.GameDataMgr.getCurrentLevelWaveState(r.GameGlobalVariable.nowlevel,2)+1;t=r.GameGlobalVariable.nowlevel+"\u7ae0_"+i+"\u6ce2_"+t}n.ADMgr.showRewardedVideoAd(t,function(){e.nowdata.back(1),e.onCloseView()})},t.prototype.handleBackHome=function(){this.nowdata.back(4),this.onCloseView()},t.prototype.onCloseView=function(){this._close()},t.prototype.updateTime=function(){},t.prototype.jianTime=function(){this.time-=1,this.updateTime(),this.time<=0&&(this.isjishi=!0,this.handleBackHome())},t.prototype.update=function(e){this.isjishi||(this.offtime+=e,this.offtime>=1&&(this.offtime=0))},__decorate([d(o.default)],t.prototype,"auto_ui",void 0),__decorate([u],t)}(a.default);i.default=h,cc._RF.pop()},{"./ADManager":"ADManager","./CommonUtils":"CommonUtils","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./UIView":"UIView","./UI_GameFail_UIBindings":"UI_GameFail_UIBindings"}],UI_GameLock:[function(e,t,i){"use strict";cc._RF.push(t,"6177dIBc8ZFEqxcAs+D4/+J","UI_GameLock"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./EventManager"),a=e("./ResKeeper"),n=e("./EvenType"),r=cc._decorator,s=r.ccclass,c=(r.property,r.inspector,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEnable=function(){this.node.children[0].active=!1,o.EventMgrInstance.addListener(n.EVENT_TYPE.GAME_LOCK_SCREE,this.toggleLockScreen,this)},t.prototype.onDisable=function(){o.EventMgrInstance.removeListener(n.EVENT_TYPE.GAME_LOCK_SCREE,this.toggleLockScreen,this)},t.prototype.toggleLockScreen=function(e){this.node.children[0].active=e},__decorate([s],t)}(a.default));i.default=c,cc._RF.pop()},{"./EvenType":"EvenType","./EventManager":"EventManager","./ResKeeper":"ResKeeper"}],UI_GameOhterNode:[function(e,t,i){"use strict";cc._RF.push(t,"ff5c19kmgJCGKwG+WapLS5R","UI_GameOhterNode"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./BundleConfig"),a=e("./EventManager"),n=e("./ResKeeper"),r=e("./EvenType"),s=e("./NodePoolMag"),c=e("./UI_BaoZha"),l=cc._decorator,u=l.ccclass,d=(l.property,l.inspector,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEnable=function(){a.EventMgrInstance.addListener(r.EVENT_TYPE.Game_Add_BaoZha,this.handleAddBao,this)},t.prototype.handleAddBao=function(e,t,i){return void 0===t&&(t=1),__awaiter(this,void 0,Promise,function(){var a,n,r;return __generator(this,function(l){switch(l.label){case 0:return(a=s.NodePoolMag.instance.getNodeFromPool("baozha"))?[3,2]:[4,this._loadRes(o.BundleNames.Game,"prefabs/effpre/UI_BaoZha",cc.Prefab)];case 1:n=l.sent(),s.NodePoolMag.instance.createNodePool("baozha",1,n),a=s.NodePoolMag.instance.getNodeFromPool("baozha"),l.label=2;case 2:if(a&&(a.x=e.x,a.y=e.y,this.node.addChild(a),r=a.getComponent(c.default)))switch(t){case 1:r.playExplosion(i);break;case 2:r.playIceExplosion();break;case 3:r.playCherryExplosion(i)}return[2]}})})},t.prototype.onDisable=function(){a.EventMgrInstance.removeListener(r.EVENT_TYPE.Game_Add_BaoZha,this.handleAddBao,this)},__decorate([u],t)}(n.default));i.default=d,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./EvenType":"EvenType","./EventManager":"EventManager","./NodePoolMag":"NodePoolMag","./ResKeeper":"ResKeeper","./UI_BaoZha":"UI_BaoZha"}],UI_GameOverItem:[function(e,t,i){"use strict";cc._RF.push(t,"196f0xlSM9Nl7TOegVK29Fe","UI_GameOverItem"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./BundleConfig"),a=e("./ResKeeper"),n=e("./CommonUtils"),r=e("./Excel"),s=e("./HallGlobalVariable"),c=cc._decorator,l=c.ccclass,u=c.property,d=(c.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.quality=null,t.countLb=null,t}return __extends(t,e),t.prototype.onEnable=function(){},t.prototype.initUI=function(e,t){return __awaiter(this,void 0,void 0,function(){var i,a,c,l,u,d;return __generator(this,function(h){switch(h.label){case 0:switch(e){case s.default.goldId:return[3,1];case 12345:return[3,4]}return[3,7];case 1:return[4,this._loadRes(o.BundleNames.Common,"res/ui/tu/goldIcon",cc.SpriteFrame)];case 2:return i=h.sent(),a=this.quality,[4,this._loadRes(o.BundleNames.Common,"res/quality/quality_m_1",cc.SpriteFrame)];case 3:return a.spriteFrame=h.sent(),this.icon.spriteFrame=i,[3,10];case 4:return[4,this._loadRes(o.BundleNames.Common,"res/ui/tu/jifen",cc.SpriteFrame)];case 5:return i=h.sent(),c=this.quality,[4,this._loadRes(o.BundleNames.Common,"res/quality/quality_m_3",cc.SpriteFrame)];case 6:return c.spriteFrame=h.sent(),this.icon.spriteFrame=i,[3,10];case 7:return l=r.Excel.shuiguo(e).quality,u=this.icon,[4,this._loadRes(o.BundleNames.Common,"res/player/player"+(e-1e3)+"_1",cc.SpriteFrame)];case 8:return u.spriteFrame=h.sent(),n.default.limitSpriteSize(this.icon,100),d=this.quality,[4,this._loadRes(o.BundleNames.Common,"res/quality/quality_"+l,cc.SpriteFrame)];case 9:return d.spriteFrame=h.sent(),[3,10];case 10:return this.countLb.string="\xd7"+t,[2]}})})},t.prototype._loadRes=function(e,t,i){return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,new Promise(function(o,a){cc.assetManager.loadBundle(e,function(e,n){e?a(e):n.load(t,i,function(e,t){e?a(e):o(t)})})})]})})},__decorate([u(cc.Sprite)],t.prototype,"icon",void 0),__decorate([u(cc.Sprite)],t.prototype,"quality",void 0),__decorate([u(cc.Label)],t.prototype,"countLb",void 0),__decorate([l],t)}(a.default));i.default=d,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Excel":"Excel","./HallGlobalVariable":"HallGlobalVariable","./ResKeeper":"ResKeeper"}],UI_GameOver_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"8b3cbudq7tFU4Nv9kvvQMt3","UI_GameOver_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.node_successtop=null,t.node_failtop=null,t.txt_nowboshu=null,t.txt_sharecount=null,t.scroll_nowscroll=null,t.btn_fenxiang=null,t.btn_queding=null,t._btnNames=["btn_fenxiang","btn_queding"],t}return __extends(t,e),__decorate([r(cc.Node)],t.prototype,"node_successtop",void 0),__decorate([r(cc.Node)],t.prototype,"node_failtop",void 0),__decorate([r(cc.Label)],t.prototype,"txt_nowboshu",void 0),__decorate([r(cc.Label)],t.prototype,"txt_sharecount",void 0),__decorate([r(cc.ScrollView)],t.prototype,"scroll_nowscroll",void 0),__decorate([r(cc.Button)],t.prototype,"btn_fenxiang",void 0),__decorate([r(cc.Button)],t.prototype,"btn_queding",void 0),__decorate([n("UI_GameOver_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_GameOver:[function(e,t,i){"use strict";cc._RF.push(t,"361f6GU/5dAGrW/x4EB83ep","UI_GameOver"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./AIControl"),a=e("./AudioManager"),n=e("./BundleConfig"),r=e("./CommonUtils"),s=e("./Const_Hall"),c=e("./EventManager"),l=e("./EvenType"),u=e("./Excel"),d=e("./GameDataManager"),h=e("./GameGlobalVariable"),p=e("./HallGlobalVariable"),_=e("./LogManager"),g=e("./PlayerDataManager"),f=e("./UI_GameOver_UIBindings"),m=e("./UI_GameOverItem"),v=e("./UIView"),y=e("./Const_Common"),b=e("./Const_Game"),I=cc._decorator,E=I.ccclass,M=I.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.nowdata={},t.nowlevel=1,t.itemData=null,t}return __extends(t,e),t.prototype._show=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0];this.nowdata=i,this.nowlevel=h.GameGlobalVariable.nowlevel,this.auto_ui.btn_fenxiang.node.active=!0,1===h.GameGlobalVariable.isSpecialLevel()&&(this.auto_ui.btn_fenxiang.node.active=!1,this.nowlevel=h.GameGlobalVariable.teshulevel,g.PlayerDataMgr.subtractWuJinCount(1)),1===this.nowdata.type?this.updateFailUI():this.updateSuccessUI(),1===h.GameGlobalVariable.isSpecialLevel()?this.initTiaoZhanAward():this.initAward(),this.checkAI(),d.GameDataMgr.updateCiTiaoData(this.nowlevel,null),r.default.clearCoins()},t.prototype.updateFailUI=function(){this.auto_ui.node_successtop.active=!1,this.auto_ui.node_failtop.active=!0,this.animateScaleNode(this.auto_ui.node_failtop);var e=d.GameDataMgr.getCurrentLevelWaveState(this.nowlevel,h.GameGlobalVariable.isSpecialLevel());this.auto_ui.txt_nowboshu.string="\u6700\u9ad8\u8fdb\u5ea6:\u7b2c"+e+"\u6ce2",a.AudioMgr.playSoundEffect("sound/\u5931\u8d25",!1,n.BundleNames.Game)},t.prototype.updateSuccessUI=function(){a.AudioMgr.playSoundEffect("sound/\u80dc\u5229",!1,n.BundleNames.Game),this.auto_ui.node_successtop.active=!0,this.animateScaleNode(this.auto_ui.node_successtop),this.auto_ui.node_failtop.active=!1},t.prototype.animateScaleNode=function(e){this.scheduleOnce(function(){e.scale=0,cc.tween(e).to(.3,{scale:1},{easing:"backOut"}).start()})},t.prototype.initTiaoZhanAward=function(){var e=100*d.GameDataMgr.getCurrentLevelWaveState(this.nowlevel,1);this.itemData=new s.GetItemsData,this.itemData.ids=[],this.itemData.counts=[],this.itemData.ids.push(12345),this.itemData.counts.push(e),this.initAwardUi(this.itemData)},t.prototype.initAward=function(){var e=this,t=u.Excel.shuiguoguanqia(this.nowlevel),i=t.levelaward,o=d.GameDataMgr.getCurrentLevelWaveState(this.nowlevel,2),a=i[0][1];if(this.itemData=new s.GetItemsData,this.itemData.ids=[],this.itemData.counts=[],h.GameGlobalVariable.isFirstGuide=!1,g.PlayerDataMgr.getGuideIndexByTaskName(y.GuideName.EquipLevelUp)===y.UpEquipLevelGuideIndex.GiveFixedReward1)this.itemData.ids.push(p.default.goldId),this.itemData.counts.push(200),this.itemData.ids.push(b.FruitId.\u6768\u6843\u5fcd\u8005),this.itemData.counts.push(4);else{var n=Math.floor(o*(a/t.levelboshuid.length));n>0&&(this.itemData.ids.push(p.default.goldId),this.itemData.counts.push(n)),h.GameGlobalVariable.addjinbi=n;var r=function(e,i){return o<e?0:Math.floor((o+1-e)/(t.levelboshuid.length+1-e)*i)},c=r(t.awardboshuid[0],i[1][2]);_.LogMgr.debug("\u7eff\u8272\u788e\u7247\u6570\u91cf",c);var l=i[2]&&r(t.awardboshuid[1],i[2][2]);_.LogMgr.debug("\u84dd\u8272\u788e\u7247\u6570\u91cf",l);var f=i[3]&&r(t.awardboshuid[2],i[3][2]);_.LogMgr.debug("\u7d2b\u788e\u7247\u6570\u91cf",f),p.default.getSuiPian([c,l,f]).forEach(function(t,i){e.itemData.ids.push(i),e.itemData.counts.push(t),g.PlayerDataMgr.addEquipFragments(i,t)})}this.initAwardUi(this.itemData),d.GameDataMgr.getCurrentMaxLevel(),cc.sys.platform,cc.sys.BYTEDANCE_GAME},t.prototype.getNodes=function(e){var t=e.ids.length,i=1;if(t>4){var o=t%4;i=(t-o)/4+(o>0?1:0)}for(var a=this.auto_ui.scroll_nowscroll.content.children,n=[],r=0,s=0;s<a.length;s++){var c=a[s];s<i?(c.active=!0,c.children[0].children.forEach(function(t){r<e.ids.length?(t.scale=0,n.push(t),r++):t.active=!1})):c.active=!1}return n},t.prototype.initAwardUi=function(e){var t=this.getNodes(e),i=0;this.schedule(function(){var o=t[i],a=e.ids[i],n=e.counts[i];o.getComponent(m.default).initUI(a,n),cc.tween(o).to(.3,{scale:1},{easing:"backOut"}).start(),i+=1},.1,t.length-1)},t.prototype._clickListener=function(e){var t=this.auto_ui;switch(e){case t.btn_fenxiang:this.handleShareButtonClick();break;case t.btn_queding:this.getReward(!1),this.onBackHome()}},t.prototype.handleShareButtonClick=function(){var e=this;cc.sys.isBrowser?(this.doubleRewards(),this.auto_ui.btn_fenxiang.node.active=!1):r.default.onShare(function(t){t&&(e.doubleRewards(),e.auto_ui.btn_fenxiang.node.active=!1)})},t.prototype.doubleRewards=function(){this.itemData.counts=this.itemData.counts.map(function(e){return 2*e}),this.initAwardUi(this.itemData)},t.prototype.getReward=function(e){var t=this;this.itemData&&(this.itemData.ids.forEach(function(i,o){var a=t.itemData.counts[o];e&&(a*=2),t.awardItem(i,a)}),g.PlayerDataMgr.getGuideIndexByTaskName(y.GuideName.EquipLevelUp)===y.UpEquipLevelGuideIndex.GiveFixedReward1&&g.PlayerDataMgr.setGuideIndex(y.GuideName.EquipLevelUp,y.UpEquipLevelGuideIndex.GuideClickWarehouseFruit2))},t.prototype.awardItem=function(e,t){switch(e){case p.default.goldId:g.PlayerDataMgr.addGold(t);break;case 12345:var i=d.GameDataMgr.getCurrentLevelWaveState(this.nowlevel,1);d.GameDataMgr.updateChallengePoints(1,100*i);break;default:g.PlayerDataMgr.addEquipFragments(e,t)}},t.prototype.onBackHome=function(){this.nowdata.back(2),this.onCloseView()},t.prototype.onBack=function(){this.nowdata.back(2),this.onCloseView()},t.prototype.onCloseView=function(){this._close(),c.EventMgrInstance.emitEvent(l.EVENT_TYPE.Game_Value_Fei)},t.prototype.checkAI=function(){var e=this;o.default._instance.isOpen&&this.scheduleOnce(function(){o.default._instance.displayClickButton(e.auto_ui.btn_queding.node,function(){e.getReward(!1),e.onBackHome()})},1)},__decorate([M(f.default)],t.prototype,"auto_ui",void 0),__decorate([E],t)}(v.default);i.default=C,cc._RF.pop()},{"./AIControl":"AIControl","./AudioManager":"AudioManager","./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Const_Common":"Const_Common","./Const_Game":"Const_Game","./Const_Hall":"Const_Hall","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./HallGlobalVariable":"HallGlobalVariable","./LogManager":"LogManager","./PlayerDataManager":"PlayerDataManager","./UIView":"UIView","./UI_GameOverItem":"UI_GameOverItem","./UI_GameOver_UIBindings":"UI_GameOver_UIBindings"}],UI_GamePuase:[function(e,t,i){"use strict";cc._RF.push(t,"47253S2o4VELqeiQMQoObNs","UI_GamePuase"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./BundleConfig"),a=e("./AudioManager"),n=e("./UIManager"),r=e("./UIView"),s=e("./CommonUtils"),c=e("./Excel"),l=e("./BuffMag"),u=e("./UIConfig_Home"),d=cc._decorator,h=d.ccclass,p=d.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tipView=null,t.scroll=null,t.tipUi=null,t.nowBack=null,t.endindex=-1,t}return __extends(t,e),t.prototype._show=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.nowBack=e.back,this.tipView.active=!1},t.prototype.onEnable=function(){this.tipUi.active=!1,this.initUI(),s.default.clearCoins()},t.prototype.initUI=function(){return __awaiter(this,void 0,Promise,function(){var e,t,i,a,n,r,s,u,d,h,p,_,g,f,m,v,y;return __generator(this,function(b){switch(b.label){case 0:for(e=l.BuffMgr.ciTiaoData,t={},i=0,a=e;i<a.length;i++)n=a[i],t[n.id]||(t[n.id]={id:n.id,count:0}),t[n.id].count++;r=Object.keys(t),(s=this.scroll.content.children).forEach(function(e){return e.active=!1}),u=0,b.label=1;case 1:return u<r.length?(d=r[u],h=t[d],p=s[u]||cc.instantiate(s[0]),s[u]||this.scroll.content.addChild(p),p.active=!0,_=p.children[1].getComponent(cc.Sprite),g=p.children[0].getComponent(cc.Sprite),f=p.children[2].getComponent(cc.Label),m=c.Excel.shuiguocitiao(h.id),[4,this._loadRes(o.BundleNames.Game,"res/skill_icon"+m.quality,cc.SpriteFrame)]):[3,5];case 2:return v=b.sent(),g.spriteFrame=v,[4,this._loadRes(o.BundleNames.Common,"res/skillicon/skill_"+h.id,cc.SpriteFrame)];case 3:y=b.sent(),_.spriteFrame=y,f.string="\xd7"+h.count,p.on(cc.Node.EventType.TOUCH_START,this.handleIconClick.bind(this,u,h),this),b.label=4;case 4:return u++,[3,1];case 5:return[2]}})})},t.prototype.handleIconClick=function(e,t){if(a.AudioMgr.playSoundEffect("effect/button"),this.endindex!==e){this.tipUi.active=!0,this.endindex=e;var i=this.scroll.content.children[e].convertToWorldSpaceAR(cc.v2(0,0)),o=this.node.convertToNodeSpaceAR(i);this.tipUi.y=o.y+100,this.tipUi.x=o.x;var n=-(this.tipUi.x+cc.winSize.width/2),r=this.tipUi.x+cc.winSize.width/2;n<cc.winSize.width/2&&(this.tipUi.x=-(cc.winSize.width/2-this.tipUi.width/2)),r>cc.winSize.width/2&&(this.tipUi.x=cc.winSize.width/2-this.tipUi.width/2),this.tipUi.getChildByName("jiantou").x=o.x-this.tipUi.x;var s=c.Excel.shuiguocitiao(t.id),l=this.tipUi.getChildByName("lb").getComponent(cc.RichText),u=this.tipUi.getChildByName("layout").getChildByName("count").getComponent(cc.Label),d=c.Excel.shuiguobuff(s.citiaoshuzhitype);-1!==s.citiaochuxian?(this.tipUi.getChildByName("layout").active=!0,u.string=t.count*d.value[0]+"%"):this.tipUi.getChildByName("layout").active=!1,this.setBuffContent(l,s,t.count)}else this.tipUi.active=!1,this.endindex=-1},t.prototype.showSetting=function(){n.default.open(o.BundleNames.Home,u.UIView_Home.UI_Setting)},t.prototype.setBuffContent=function(e,t){var i=t.citiaomiaoshu,o=c.Excel.shuiguobuff(t.citiaoshuzhitype);i=s.default.replaceStringSymbols(i,"n",[""]).split("X");for(var a="",n=0;n<i.length;n++){var r=i[n];o.value[n]&&n<i.length-1?a+="<color=#ffffff>"+r+"</color><color=#00ff00>"+o.value[n]+"</color>":a+="<color=#ffffff>"+r+"</color>"}e.string="<outline color=#000000 width = 3>"+a+"</outline>"},t.prototype.onDisable=function(){},t.prototype.onJixu=function(){this._close(),this.nowBack&&this.nowBack(3)},t.prototype.backHome=function(){this.tipView.active=!0},t.prototype.realHome=function(){this._close(),this.nowBack&&this.nowBack(2)},t.prototype.closeHome=function(){this._close(),this.tipView.active=!1},t.prototype._loadRes=function(e,t,i){return new Promise(function(o,a){cc.assetManager.loadBundle(e,function(e,n){e?a(e):n.load(t,i,function(e,t){e?a(e):o(t)})})})},__decorate([p(cc.Node)],t.prototype,"tipView",void 0),__decorate([p(cc.ScrollView)],t.prototype,"scroll",void 0),__decorate([p(cc.Node)],t.prototype,"tipUi",void 0),__decorate([h],t)}(r.default);i.default=_,cc._RF.pop()},{"./AudioManager":"AudioManager","./BuffMag":"BuffMag","./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Excel":"Excel","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager","./UIView":"UIView"}],UI_GameViewMap:[function(e,t,i){"use strict";cc._RF.push(t,"c34a1XuLaFHeYepZbAqOYpX","UI_GameViewMap"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./BundleConfig"),a=e("./EvenType"),n=e("./EventManager"),r=e("./GameDataManager"),s=e("./GameGlobalVariable"),c=e("./NodePoolMag"),l=e("./ResKeeper"),u=e("./UI_Bullet"),d=e("./UI_BulletBomb"),h=e("./UI_BulletMove"),p=e("./UI_Player"),_=cc._decorator,g=_.ccclass,f=_.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gridNode=null,t.playerNode=null,t.bulletNode=null,t.mosterNode=null,t.boosTip=null,t.isOk=!0,t.currentIndex=-1,t.lastUpdateTime=0,t}return __extends(t,e),t.prototype.onEnable=function(){var e=this;n.EventMgrInstance.addListener(a.EVENT_TYPE.GAME_UPDATE_BAG,this.initUI,this),n.EventMgrInstance.addListener(a.EVENT_TYPE.GAME_SHOW_BOOS,this.displayBossTip,this),this.isOk=!0,this.scheduleOnce(function(){e.isOk=!1,e.initUI()},.5)},t.prototype.displayBossTip=function(){var e=this;if(!this.boosTip.active){this.boosTip.active=!0;var t=this.node.getChildByName("gezibg1");this.boosTip.width=t.width+95,this.boosTip.height=t.height+90,this.boosTip.opacity=0,cc.tween(this.boosTip).to(.2,{opacity:255}).start(),this.scheduleOnce(function(){cc.tween(e.boosTip).to(.2,{opacity:0}).call(function(){e.boosTip.active=!1}).start()},2)}},t.prototype.handleGameState=function(e){1===e&&this.recycleNodes()},t.prototype.recycleNodes=function(){for(var e=this.playerNode.children;e.length>0;){var t=e[0];c.NodePoolMag.instance.recycleNodeToPool("player"+t.getComponent(p.default).playerId,t)}for(var i=this.bulletNode.children;i.length>0;){var o=i[0],a=o.getComponent(u.default);a&&c.NodePoolMag.instance.recycleNodeToPool("bullet_"+a.bulletId,o)}if(s.GameGlobalVariable.liulianNode)for(var n=s.GameGlobalVariable.liulianNode.children;n.length>0;){var r=n[0],l=r.getComponent(h.default);c.NodePoolMag.instance.recycleNodeToPool("bullet_"+l.bulletId,r)}if(s.GameGlobalVariable.languaNode)for(var _=s.GameGlobalVariable.languaNode.children;_.length>0;){var g=_[0],f=g.getComponent(d.default);c.NodePoolMag.instance.recycleNodeToPool("bullet_"+f.bulletId,g)}},t.prototype.initUI=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i,a,n,l,u,d,h,_,g,f,m,v,y,b,I,E,M,C;return __generator(this,function(B){switch(B.label){case 0:if(this.isOk)return[2];if((new Date).getTime()-this.lastUpdateTime<=100)return[2];this.lastUpdateTime=(new Date).getTime(),this.recycleNodes(),e=0,t=0,i=0,a=0,n=r.GameDataMgr.getGameBag.cellWposArray,l=Math.max(this.gridNode.children.length,n.length),u=0,B.label=1;case 1:return u<l?(d=n[u],h=this.gridNode.children[u],d?(C=this.gridNode.convertToNodeSpaceAR(d),h||(h=cc.instantiate(this.gridNode.children[0]),this.gridNode.addChild(h)),h.active=!0,_=h.getChildByName("grid").getComponent(cc.Sprite),[4,this._loadRes(o.BundleNames.Game,"res/bg/"+s.GameGlobalVariable.getSceneId(),cc.SpriteFrame)]):[3,3]):[3,5];case 2:return g=B.sent(),_.spriteFrame=g,h.x=C.x,h.y=C.y,e=Math.min(e,h.x),t=Math.max(t,h.x),i=Math.min(i,h.y),a=Math.max(a,h.y),[3,4];case 3:h&&(h.active=!1),B.label=4;case 4:return u++,[3,1];case 5:return f=this.node.getChildByName("gezibg1"),m=f.getComponent(cc.Sprite),[4,this._loadRes(o.BundleNames.Game,"res/bg/gezibg"+s.GameGlobalVariable.getSceneId(),cc.SpriteFrame)];case 6:v=B.sent(),m.spriteFrame=v,f.width=Math.abs(e-t)+170,f.height=Math.abs(i-a)+170,y=r.GameDataMgr.getGameBag.dressUpEquips,b=0,B.label=7;case 7:return b<y.length?-1!==this.currentIndex&&this.currentIndex!==b?[3,9]:(I=y[b],[4,this._loadRes(o.BundleNames.Game,"prefabs/player/player"+(I.shuiguoId-1e3),cc.Prefab)]):[3,10];case 8:E=B.sent(),(M=c.NodePoolMag.instance.getNodeFromPool("player"+(I.shuiguoId-1e3)))||(c.NodePoolMag.instance.createNodePool("player"+(I.shuiguoId-1e3),1,E),M=c.NodePoolMag.instance.getNodeFromPool("player"+(I.shuiguoId-1e3))),C=this.playerNode.convertToNodeSpaceAR(I.wPostion),M.x=C.x,M.y=C.y,this.playerNode.addChild(M),M.getComponent(p.default).initializePlayerInfo(this.mosterNode,I),B.label=9;case 9:return b++,[3,7];case 10:return[2]}})})},t.prototype.onDisable=function(){n.EventMgrInstance.removeListener(a.EVENT_TYPE.GAME_UPDATE_BAG,this.initUI,this),n.EventMgrInstance.removeListener(a.EVENT_TYPE.GAME_SHOW_BOOS,this.displayBossTip,this)},t.prototype._loadRes=function(e,t,i){return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,new Promise(function(o,a){cc.assetManager.loadBundle(e,function(e,n){e?a(e):n.load(t,i,function(e,t){e?a(e):o(t)})})})]})})},__decorate([f(cc.Node)],t.prototype,"gridNode",void 0),__decorate([f(cc.Node)],t.prototype,"playerNode",void 0),__decorate([f(cc.Node)],t.prototype,"bulletNode",void 0),__decorate([f(cc.Node)],t.prototype,"mosterNode",void 0),__decorate([f(cc.Node)],t.prototype,"boosTip",void 0),__decorate([g],t)}(l.default);i.default=m,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./EvenType":"EvenType","./EventManager":"EventManager","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./NodePoolMag":"NodePoolMag","./ResKeeper":"ResKeeper","./UI_Bullet":"UI_Bullet","./UI_BulletBomb":"UI_BulletBomb","./UI_BulletMove":"UI_BulletMove","./UI_Player":"UI_Player"}],UI_GameView_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"9c592EicSlMX7vydgI+h42F","UI_GameView_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.node_bg=null,t.node_lu=null,t.node_chaoxue=null,t.node_playani=null,t.node_shuimitao=null,t.txt_level=null,t.txt_lunhui=null,t.btn_back=null,t.btn_jiasuNode=null,t.dbAnim_openGame=null,t._btnNames=["btn_back","btn_jiasuNode"],t}return __extends(t,e),__decorate([r(cc.Node)],t.prototype,"node_bg",void 0),__decorate([r(cc.Node)],t.prototype,"node_lu",void 0),__decorate([r(cc.Node)],t.prototype,"node_chaoxue",void 0),__decorate([r(cc.Node)],t.prototype,"node_playani",void 0),__decorate([r(cc.Node)],t.prototype,"node_shuimitao",void 0),__decorate([r(cc.Label)],t.prototype,"txt_level",void 0),__decorate([r(cc.Label)],t.prototype,"txt_lunhui",void 0),__decorate([r(cc.Button)],t.prototype,"btn_back",void 0),__decorate([r(cc.Button)],t.prototype,"btn_jiasuNode",void 0),__decorate([r(dragonBones.ArmatureDisplay)],t.prototype,"dbAnim_openGame",void 0),__decorate([n("UI_GameView_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_GameView:[function(e,t,i){"use strict";cc._RF.push(t,"4551c4Mto9JcrkQxSOkrWCM","UI_GameView"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UI_GameView_UIBindings"),a=e("./UIView"),n=e("./EventManager"),r=e("./EvenType"),s=e("./Excel"),c=e("./NodePoolMag"),l=e("./BundleConfig"),u=e("./UI_MosterLogic"),d=e("./GameGlobalVariable"),h=e("./UI_Player"),p=e("./UI_ShowAttackInfo"),_=e("./UIManager"),g=e("./UIConfig_Game"),f=e("./CommonUtils"),m=e("./BuffMag"),v=e("./UI_Bullet"),y=e("./GameDataManager"),b=e("./UIConfig_Home"),I=e("./UI_DuWu"),E=e("./UI_Bag"),M=e("./ExcelUtil"),C=e("./UI_BulletBomb"),B=e("./UI_BulletMove"),x=e("./AudioManager"),w=e("./LogManager"),G=e("./PlayerDataManager"),T=e("./Const_Common"),N=e("./TipsManager"),U=e("./UI_GameViewMap"),D=e("./UI_CreateMoster"),P=e("./UI_SkillShow"),S=e("./LoadingManager"),L=cc._decorator,k=L.ccclass,A=L.property,R=(L.inspector,function(e){function t(){var t=e.call(this)||this;return t.auto_ui=null,t.UI_BagNode=null,t.UI_BagPre=null,t.mosterNode=null,t.pathsNode=null,t.playerNode=null,t.bulletNode=null,t.languaNode=null,t.liulianNode=null,t.othereff=null,t.aixinNode=null,t.mapNode=null,t.tiaozhanTip=null,t.tongjiNode=null,t.bottmoNode=null,t.showattackinfo=null,t.bottomNd=null,t.isgamepuase=!0,t.jiasuCode=1,t.isadd=!1,t.nowlevel=1,t.xueliang=3,t.fuhuocount=0,t.maxcount=1,t.isOpenPuase=!1,t.isGameOver=!1,t.overstate=-1,t.addbool=!1,t.rolelevel=1,t.roleexperience=0,t.isCiTiaoOpen=!1,t.nowBag=null,t.mosterScript=null,t}return __extends(t,e),t.prototype._show=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var o=this;if(n.EventMgrInstance.emitEvent(r.EVENT_TYPE.Game_Load_View,!1),this.scheduleOnce(function(){},3),console.log("\u767b\u9646\u65f6\u95f4",(new Date).getTime()-d.GameGlobalVariable.offtime),this.mosterScript=this.mosterNode.getComponent(D.default),this.mosterScript.setOver(this.isOver.bind(this)),this.tiaozhanTip.active=!1,x.AudioMgr.playBackgroundMusic("sound/gamebgm",!0,l.BundleNames.Game),1===d.GameGlobalVariable.isSpecialLevel()){if(d.GameGlobalVariable.huanyipi=M.ExcelUtil.getMatchingData(s.Excel.shuiguoconfig_all,"configkey","huanyipin")[0].value,d.GameGlobalVariable.allhave=M.ExcelUtil.getMatchingData(s.Excel.shuiguoconfig_all,"configkey","allhave")[0].value,!y.GameDataMgr.getContinueChallenge()){y.GameDataMgr.clearGameBagData(),this.nowlevel=d.GameGlobalVariable.teshulevel;var a=s.Excel.shuiguotiaozhan(this.nowlevel);y.GameDataMgr.addSilverCoin(a.yinbi)}y.GameDataMgr.updateChallengeContinue(this.nowlevel,!0),this.maxcount=d.GameGlobalVariable.wujinfuhuocount}else if(this.maxcount=d.GameGlobalVariable.putongfuhuocount,this.nowlevel=d.GameGlobalVariable.nowlevel,m.BuffMgr.ciTiaoData&&m.BuffMgr.ciTiaoData.length>0){var c=y.GameDataMgr.getContinueGame();this.mosterScript.mosterboshu=c.nowboshu,d.GameGlobalVariable.huanyipi=y.GameDataMgr.getCiTiaoCount(d.GameGlobalVariable.nowlevel,1),d.GameGlobalVariable.allhave=y.GameDataMgr.getCiTiaoCount(d.GameGlobalVariable.nowlevel,2);var u=y.GameDataMgr.getRoleLevel(this.nowlevel,d.GameGlobalVariable.isSpecialLevel());u?(this.rolelevel=u.level,this.roleexperience=0):this.rolelevel=1}else d.GameGlobalVariable.huanyipi=M.ExcelUtil.getMatchingData(s.Excel.shuiguoconfig_all,"configkey","huanyipin")[0].value,d.GameGlobalVariable.allhave=M.ExcelUtil.getMatchingData(s.Excel.shuiguoconfig_all,"configkey","allhave")[0].value,y.GameDataMgr.updateLevelWave(this.nowlevel,this.mosterScript.mosterboshu,d.GameGlobalVariable.isSpecialLevel()),G.PlayerDataMgr.getGuideIndexByTaskName(T.GuideName.GameBag)===T.GameBagGuideIndex.GuideCompletion&&y.GameDataMgr.clearGameBagData();d.GameGlobalVariable.bulletNode=this.bulletNode,d.GameGlobalVariable.languaNode=this.languaNode,d.GameGlobalVariable.liulianNode=this.liulianNode,d.GameGlobalVariable.mosterNode=this.mosterNode,d.GameGlobalVariable.effNode=this.othereff,d.GameGlobalVariable.paths=this.pathsNode,d.GameGlobalVariable.nowlevelhuobi=0,this.initUI(),this.showattackinfo.addEventListener(),this.auto_ui.dbAnim_openGame.node.active=!1,this.scheduleOnce(function(){o.loadBottom()},.5)},t.prototype.loadBottom=function(){return __awaiter(this,void 0,Promise,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return this.bottomNd?[3,2]:[4,this._loadRes(l.BundleNames.Game,"prefabs/bottomNode",cc.Prefab)];case 1:e=t.sent(),this.bottomNd=cc.instantiate(e),t.label=2;case 2:return this.bottmoNode.addChild(this.bottomNd),this.bottomNd.setPosition(0,0),[2]}})})},t.prototype._close=function(){e.prototype._close.call(this),this.showattackinfo.removeEventListener(),m.BuffMgr.resetCurrentWave(),c.NodePoolMag.instance.clearAllNodePools(),cc.game.setFrameRate(60)},t.prototype._addEventListener=function(){this._addEvent(r.EVENT_TYPE.Game_Update,this.updateMultiplier,this),this._addEvent(r.EVENT_TYPE.Game_Moster_DIE,this.onMonsterDie,this),this._addEvent(r.EVENT_TYPE.Game_Moster_Attack,this.reduceHealth,this),this._addEvent(r.EVENT_TYPE.Game_OpenGame,this.onStartGame,this),this._addEvent(r.EVENT_TYPE.Game_CreateDuWu,this.createPoisonFog,this),this._addEvent(r.EVENT_TYPE.GAME_BackHall,this.backView,this)},t.prototype.createPoisonFog=function(e,t,i){return __awaiter(this,void 0,Promise,function(){var o,a;return __generator(this,function(n){switch(n.label){case 0:return(o=c.NodePoolMag.instance.getNodeFromPool("duwu"))?[3,2]:[4,this._loadRes(l.BundleNames.Game,"prefabs/effpre/UI_DuWu",cc.Prefab)];case 1:a=n.sent(),c.NodePoolMag.instance.createNodePool("duwu",1,a),o=c.NodePoolMag.instance.getNodeFromPool("duwu"),n.label=2;case 2:return o.setPosition(e.node.x,e.node.y),o.angle=1===e.moveindex||3===e.moveindex||5===e.moveindex?0:90,this.othereff.addChild(o),o.getComponent(I.default).initializeInfo(t,i),[2]}})})},t.prototype.updateMultiplier=function(e){1!==this.jiasuCode&&this.onUpdate(e),this.onUpdate(e)},t.prototype.onDisable=function(){d.GameGlobalVariable.clearAttackRecords()},t.prototype.onUpdate=function(e){this.isgamepuase||(this.mosterScript.onCreateMonster(e),this.setPlayerState(e),this.setMonsterState(e),this.updateBullets(e),this.updateOtherEffects(e))},t.prototype.updateOtherEffects=function(e){this.othereff.getComponentsInChildren(I.default).forEach(function(t){t.onUpdate(e)})},t.prototype.updateBullets=function(e){var t=this;d.GameGlobalVariable.bulletNode.getComponentsInChildren(v.default).forEach(function(t){t.onUpdate(e)});var i=d.GameGlobalVariable.languaNode.getComponentsInChildren(C.default),o=0,a=[];i.forEach(function(t){t.node.zIndex=-2,a.push(t),t.onUpdate(e),o+=1}),o>100&&(a.sort(function(e,t){return e.createtime-t.createtime}),a.shift().hideBullet()),d.GameGlobalVariable.sortBlueMelons(a,this.mosterNode),a.forEach(function(e){e.getComponent(C.default).pengZhuangMoster(t.mosterNode)}),d.GameGlobalVariable.liulianNode.getComponentsInChildren(B.default).forEach(function(t){t.node.zIndex=-1,t.onUpdate(e)})},t.prototype.ceshiDaYin=function(){},t.prototype.setPlayerState=function(e){this.playerNode.getComponentsInChildren(h.default).forEach(function(t){t.node.active&&t.onUpdate(e)})},t.prototype.setMonsterState=function(e){this.mosterNode.getComponentsInChildren(u.default).forEach(function(t){t.onUpdate(e)});var t=d.GameGlobalVariable.sortMonsters(this.mosterNode),i=999;t.forEach(function(e){e.script.node.zIndex=i,i-=1})},t.prototype.onClose=function(){},t.prototype._clickListener=function(e){var t=this.auto_ui;switch(e){case t.btn_back:if(G.PlayerDataMgr.getGuideIndexByTaskName(T.GuideName.GameBag)<T.GameBagGuideIndex.GuideCompletion)return void N.TipMgr.showToast("\u8bf7\u5148\u5b8c\u6210\u5f15\u5bfc\u7ae0\u8282\u6311\u6218");this.onClickBack();break;case t.btn_jiasuNode:this.onClickSpeed()}},t.prototype.resetSpeed=function(){cc.director.getScheduler().setTimeScale(1)},t.prototype.setSpeedState=function(e){this.jiasuCode=e,2===this.jiasuCode?(cc.director.getScheduler().setTimeScale(2),this.auto_ui.btn_jiasuNode.node.children[3].active=!0,this.auto_ui.btn_jiasuNode.node.children[2].active=!1):(cc.director.getScheduler().setTimeScale(1),this.auto_ui.btn_jiasuNode.node.children[3].active=!1,this.auto_ui.btn_jiasuNode.node.children[2].active=!0)},t.prototype.onClickSpeed=function(){1===this.jiasuCode?this.setSpeedState(2):this.setSpeedState(1)},t.prototype.onBackToGame=function(){m.BuffMgr.cleanLiuLian(),this.mosterScript.isCreateMoster=!1,this.isgamepuase=!0,this.setNodeState(2),n.EventMgrInstance.emitEvent(r.EVENT_TYPE.Game_CameraControl,1),this.resetGame()},t.prototype.resetGame=function(){switch(this.overstate){case 1:this.resetSpeed(),this.mosterScript.mosterboshu++,y.GameDataMgr.updateLevelWave(this.nowlevel,this.mosterScript.mosterboshu,d.GameGlobalVariable.isSpecialLevel());break;case 2:this.xueliang=3;break;case 3:this.mosterScript.mosterboshu=0,this.xueliang=3}this.isgamepuase=!1,this.mosterScript.recycleMonster(),this.updateRound()},t.prototype.onStartGame=function(){var e=this;this.overstate=-1,this.setSpeedState(this.jiasuCode),this.isgamepuase=!1,this.setNodeState(1),this.scheduleOnce(function(){n.EventMgrInstance.emitEvent(r.EVENT_TYPE.Game_CameraControl,.68)},.3),this.scheduleOnce(function(){e.auto_ui.dbAnim_openGame.node.active=!0,e.auto_ui.dbAnim_openGame.playAnimation("newAnimation",1),x.AudioMgr.playSoundEffect("sound/pengzhuang",!1,l.BundleNames.Game)},.6),this.scheduleOnce(function(){e.auto_ui.dbAnim_openGame.node.active=!1},1.5),this.scheduleOnce(function(){e.playGame()},.5)},t.prototype.challengeGame=function(){this.overstate=-1,this.setSpeedState(this.jiasuCode),this.isgamepuase=!1,this.playGame()},t.prototype.setNodeState=function(e){var t=this;switch(e){case 1:this.scheduleOnce(function(){t.UI_BagNode.active=!1,t.mapNode.y=0,t.mapNode.opacity=255,t.updateRound()},.3),this.auto_ui.node_shuimitao.active=!0,this.auto_ui.node_shuimitao.opacity=0,cc.Tween.stopAllByTarget(this.auto_ui.node_shuimitao),cc.tween(this.auto_ui.node_shuimitao).to(.5,{opacity:255}).start(),this.auto_ui.node_chaoxue.active=!0,this.auto_ui.node_chaoxue.opacity=0,cc.tween(this.auto_ui.node_chaoxue).to(.5,{opacity:255}).start(),this.auto_ui.btn_jiasuNode.node.active=!0,this.auto_ui.btn_jiasuNode.node.opacity=0,cc.tween(this.auto_ui.btn_jiasuNode.node).to(.5,{opacity:255}).start(),this.aixinNode.active=!0,this.aixinNode.opacity=0,cc.tween(this.aixinNode).to(.5,{opacity:255}).start(),this.auto_ui.node_lu.active=!0,this.auto_ui.node_lu.opacity=0,cc.tween(this.auto_ui.node_lu).to(.5,{opacity:255}).start(),this.tongjiNode.active=!0,this.tongjiNode.opacity=0,cc.tween(this.tongjiNode).to(.5,{opacity:255}).start(),this.playerNode.active=!0,this.playerNode.opacity=0,cc.tween(this.playerNode).to(.5,{opacity:255}).start(),cc.game.setFrameRate(59);break;case 2:n.EventMgrInstance.emitEvent(r.EVENT_TYPE.GAME_HIDE_TONGJI),cc.tween(this.mapNode).to(.5,{y:100}).start(),cc.tween(this.playerNode).to(.5,{y:100}).start(),this.scheduleOnce(function(){t.mapNode.getComponent(U.default).recycleNodes(),t.mapNode.opacity=0,t.mapNode.y=0,t.playerNode.y=0,t.playerNode.active=!1,t.UI_BagNode.active=!0,t.UI_BagNode.children[0].getComponent(E.default).openView({isGameEnd:!0}),t.updateRound()},.6),cc.Tween.stopAllByTarget(this.auto_ui.node_shuimitao),cc.tween(this.auto_ui.node_shuimitao).to(.5,{opacity:0}).call(function(){t.auto_ui.node_shuimitao.active=!1}).start(),cc.tween(this.auto_ui.node_chaoxue).to(.5,{opacity:0}).call(function(){t.auto_ui.node_chaoxue.active=!1}).start(),cc.tween(this.auto_ui.btn_jiasuNode.node).to(.5,{opacity:0}).call(function(){t.auto_ui.btn_jiasuNode.node.active=!1}).start(),cc.tween(this.aixinNode).to(.5,{opacity:0}).call(function(){t.aixinNode.active=!1}).start(),cc.tween(this.auto_ui.node_lu).to(.5,{opacity:0}).call(function(){t.auto_ui.node_lu.active=!1}).start(),cc.game.setFrameRate(60),cc.winSize.height/cc.winSize.width<2&&cc.tween(this.tongjiNode).to(.5,{opacity:0}).call(function(){t.tongjiNode.active=!1}).start()}},t.prototype.playGame=function(){this.mosterScript.initMoster(),this.updateExperienceUI(),this.updateHealth()},t.prototype.reduceHealth=function(e){var t=e.mosterId,i=1;1===s.Excel.shuiguoguaiwu(t).boss&&(i=3),n.EventMgrInstance.emitEvent(r.EVENT_TYPE.COMMON_SHAK),this.xueliang-=i,this.xueliang<0&&(this.xueliang=0),x.AudioMgr.playSoundEffect("sound/abb",!1,l.BundleNames.Game),this.updateHealth(),this.xueliang<=0&&(this.mosterScript.isCreateMoster=!1,this.isgamepuase=!0,this.resetSpeed(),this.fuhuocount<this.maxcount?(this.fuhuocount+=1,1===d.GameGlobalVariable.isSpecialLevel()&&m.BuffMgr.clearCurrentCiTiao(),_.default.open(l.BundleNames.Game,g.UIView_Game.UI_GameFail,{back:this.onBack.bind(this),type:d.GameGlobalVariable.isSpecialLevel()})):this.onBack(4))},t.prototype.updateHealth=function(){for(var e=this.aixinNode.children,t=0;t<e.length;t++)e[t].children[0].active=this.xueliang>=t+1},t.prototype.showIllustration=function(){_.default.open(l.BundleNames.Game,g.UIView_Game.UI_TuJian)},t.prototype.updateRound=function(){var e;e=1===d.GameGlobalVariable.isSpecialLevel()?s.Excel.shuiguotiaozhan(this.nowlevel):s.Excel.shuiguoguanqia(this.nowlevel);var t=this.mosterScript.getCurrentWave();this.UI_BagNode.active&&1===d.GameGlobalVariable.isSpecialLevel()?this.auto_ui.txt_lunhui.string="\u4e00\u6ce2\u5408\u6210,\u602a\u7269\u65e0\u5c3d\u6765\u88ad":this.auto_ui.txt_lunhui.string="\u7b2c"+t+"/"+e.levelboshuid.length+"\u6ce2"},t.prototype.onBack=function(e){switch(e){case 1:1===d.GameGlobalVariable.isSpecialLevel()?n.EventMgrInstance.emitEvent(r.EVENT_TYPE.Game_Add_YinBi,30):n.EventMgrInstance.emitEvent(r.EVENT_TYPE.Game_Add_YinBi,15),this.overstate=2,this.onBackToGame();break;case 2:this.overstate=3,this.resetGame(),m.BuffMgr.clearCurrentCiTiao(),this.backView(),y.GameDataMgr.clearGameBagData(),n.EventMgrInstance.emitEvent(r.EVENT_TYPE.Game_Hide),n.EventMgrInstance.emitEvent(r.EVENT_TYPE.Game_CameraControl,1);break;case 3:this.setSpeedState(this.jiasuCode),this.isCiTiaoOpen||this.isOpenPuase||(this.isgamepuase=!1);break;case 4:this.isGameOver=!0,_.default.open(l.BundleNames.Game,g.UIView_Game.UI_GameOver,{type:1,back:this.onBack.bind(this)})}},t.prototype.onClickBack=function(){var e=this;this.resetSpeed(),this.isgamepuase=!0,this.isOpenPuase=!0,_.default.open(l.BundleNames.Game,g.UIView_Game.UI_GamePuase,{back:function(t){e.isOpenPuase=!1,e.onBack(t)}})},t.prototype.backView=function(){y.GameDataMgr.updateChallengeContinue(this.nowlevel,!1),this.resetSpeed(),n.EventMgrInstance.emitEvent(r.EVENT_TYPE.Game_Load_View,!0),this.onHideView(),_.default.closeAllViews(),_.default.open(l.BundleNames.Home,b.UIView_Home.UI_Hall,d.GameGlobalVariable.isSpecialLevel())},t.prototype.onHideView=function(){this._close()},t.prototype.isGamePassed=function(){var e=1===d.GameGlobalVariable.isSpecialLevel()?s.Excel.shuiguotiaozhan(this.nowlevel):s.Excel.shuiguoguanqia(this.nowlevel),t=this.mosterScript.mosterboshu+1;return!!e.levelboshuid[t]||(y.GameDataMgr.updateLevelWave(this.nowlevel,t,d.GameGlobalVariable.isSpecialLevel()),this.isGameOver=!0,this.mosterScript.isCreateMoster=!1,this.isgamepuase=!0,this.resetSpeed(),this.isCiTiaoOpen||(n.EventMgrInstance.emitEvent(r.EVENT_TYPE.Game_Hide),console.log("\u6311\u6218\u6a21\u5f0f\u901a\u5173"),_.default.open(l.BundleNames.Game,g.UIView_Game.UI_GameOver,{type:2,back:this.onBack.bind(this)})),!1)},t.prototype.recycleBullets=function(){for(var e=this.bulletNode.children,t=e.length,i=0;i<t;i++){var o=e[0],a=o.getComponent(v.default);a&&c.NodePoolMag.instance.recycleNodeToPool("bullet_"+a.bulletId,o)}var n=d.GameGlobalVariable.liulianNode.children,r=n.length;for(i=0;i<r;i++){var s=n[0],l=s.getComponent(B.default);c.NodePoolMag.instance.recycleNodeToPool("bullet_"+l.bulletId,s)}},t.prototype.isOver=function(){var e=this;this.mosterNode.children.length<=0&&(w.LogMgr.debug("\u5f53\u524d\u4e00\u8f6e\u901a\u5173 \u8fdb\u5165\u5408\u6210\u754c\u9762"),-1===this.overstate&&(n.EventMgrInstance.emitEvent(r.EVENT_TYPE.GAME_LOCK_SCREE,!0),this.isGamePassed()&&(m.BuffMgr.saveCurrentCiTiao(),m.BuffMgr.boshuAttackAdd(),1===d.GameGlobalVariable.isSpecialLevel()?(this.overstate=1,this.recycleBullets(),m.BuffMgr.cleanLiuLian(),this.mosterScript.mosterboshu+=1,y.GameDataMgr.updateLevelWave(this.nowlevel,this.mosterScript.mosterboshu,d.GameGlobalVariable.isSpecialLevel()),this.mosterScript.recycleMonster(),this.updateRound(),this.tiaozhanTip.active=!0,this.tiaozhanTip.opacity=255,this.tiaozhanTip.scaleY=0,this.tiaozhanTip.children[1].getComponent(cc.Label).string="\u7b2c"+this.mosterScript.mosterboshu+"\u6ce2\u7ed3\u675f,\u8fdb\u5165\u7b2c"+(this.mosterScript.mosterboshu+1)+"\u6ce2",this.challengeGame(),cc.tween(this.tiaozhanTip).to(.5,{scaleY:1}).delay(.5).call(function(){n.EventMgrInstance.emitEvent(r.EVENT_TYPE.GAME_LOCK_SCREE,!1)}).to(.25,{opacity:0}).call(function(){}).start()):(x.AudioMgr.playSoundEffect("sound/boxopen",!1,l.BundleNames.Game),this.auto_ui.node_playani.active=!0,this.auto_ui.node_playani.getComponent(dragonBones.ArmatureDisplay).playAnimation("box",1),this.scheduleOnce(function(){var t=s.Excel.shuiguoguanqia(d.GameGlobalVariable.nowlevel),i=m.BuffMgr.calculateFinalAward(t.yinbi);n.EventMgrInstance.emitEvent(r.EVENT_TYPE.Game_Add_YinBi,i),e.overstate=1,e.scheduleOnce(function(){e.auto_ui.node_playani.active=!1,e.onBackToGame(),n.EventMgrInstance.emitEvent(r.EVENT_TYPE.Game_Hide),n.EventMgrInstance.emitEvent(r.EVENT_TYPE.Game_CameraControl,1)},2)},.6)))))},t.prototype.onMonsterDie=function(e){var t=e.moster,i=s.Excel.shuiguoguaiwu(t).mosterjinyan;i=m.BuffMgr.getPlayerExperienceValue(i),this.roleexperience+=i,this.updateExperienceUI()},t.prototype.updateExperienceUI=function(){var e=this;if(!this.isCiTiaoOpen&&!this.isGameOver){var t=s.Excel.shuiguoneibulevel(this.rolelevel);if(console.log("\u5f53\u524d\u83b7\u5f97\u7ecf\u9a8c\u53d8\u5316",this.roleexperience,t.jinyan),this.roleexperience>=t.jinyan&&(this.isCiTiaoOpen=!0,this.isgamepuase=!0,this.roleexperience-=t.jinyan,console.log("\u5269\u4f59\u7ecf\u9a8c",this.roleexperience),this.rolelevel+=1,this.scheduleOnce(function(){e.resetSpeed(),_.default.open(l.BundleNames.Game,g.UIView_Game.UI_ChiTiao,{back:e.backToCiTiao.bind(e),nowbo:e.mosterScript.getCurrentWave()})},.2)),this.bottomNd){var i=this.bottomNd.getComponent(P.default),o=this.roleexperience/t.jinyan;i.updateUI(this.rolelevel,o)}y.GameDataMgr.updateRoleLevel(this.nowlevel,this.rolelevel,this.roleexperience,d.GameGlobalVariable.isSpecialLevel())}},t.prototype.backToCiTiao=function(){this.setSpeedState(this.jiasuCode),this.isCiTiaoOpen=!1,this.isCiTiaoOpen||this.isOpenPuase||(this.isgamepuase=!1),this.updateExperienceUI()},t.prototype.initUI=function(){return __awaiter(this,void 0,Promise,function(){var e,t,i,o,a,n,r,c,u;return __generator(this,function(h){switch(h.label){case 0:return e=null,e=1===d.GameGlobalVariable.isSpecialLevel()?s.Excel.shuiguotiaozhan(this.nowlevel):s.Excel.shuiguoguanqia(this.nowlevel),t=(new Date).getTime(),i=this.auto_ui.node_bg.getComponent(cc.Sprite),o=this.auto_ui.node_chaoxue.getComponent(cc.Sprite),a=this.auto_ui.node_lu.getComponent(cc.Sprite),[4,this._loadRes(l.BundleNames.Game,"res/bg/changjin/\u573a\u666f"+e.dipicture,cc.SpriteFrame)];case 1:return n=h.sent(),i.spriteFrame=n,r=[{x:-63.189,y:529.428},{x:-63.189,y:529.428},{x:-38.237,y:560.618},{x:-61.717,y:536.019}],[4,this._loadRes(l.BundleNames.Game,"res/bg/caoxue"+e.dipicture,cc.SpriteFrame)];case 2:return c=h.sent(),o.spriteFrame=c,o.node.setPosition(r[e.dipicture-1]),[4,this._loadRes(l.BundleNames.Game,"res/bg/lu"+e.dipicture,cc.SpriteFrame)];case 3:return u=h.sent(),a.spriteFrame=u,console.log("\u80cc\u666f\u5e95\u56fe\u65f6\u95f4\u5dee",(new Date).getTime()-t),this.loadUIBag(),1===d.GameGlobalVariable.isSpecialLevel()?this.auto_ui.txt_level.string="\u65e0\u5c3d\u8bd5\u70bc":this.auto_ui.txt_level.string="\u7b2c"+this.nowlevel+"\u7ae0",cc.winSize.height/cc.winSize.width<2?this.tongjiNode.active=!1:this.tongjiNode.active=!0,this.updateRound(),this.setSpeedState(1),[2]}})})},t.prototype.loadUIBag=function(){return __awaiter(this,void 0,Promise,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return S.LoadingMgr.show(),this.nowBag?[3,2]:[4,this._loadRes(l.BundleNames.Game,"prefabs/hecheng/UI_Bag",cc.Prefab)];case 1:e=t.sent(),this.nowBag=cc.instantiate(e),t.label=2;case 2:return this.UI_BagNode.addChild(this.nowBag),S.LoadingMgr.hide(),[2]}})})},t.prototype.onClickTongGuan=function(){var e;this.overstate=1,e=1===d.GameGlobalVariable.isSpecialLevel()?s.Excel.shuiguotiaozhan(this.nowlevel):s.Excel.shuiguoguanqia(this.nowlevel),this.mosterScript.mosterboshu=e.levelboshuid.length,this.isGamePassed()},t.prototype.onClickCiTiao=function(){_.default.open(l.BundleNames.Game,g.UIView_Game.UI_ChiTiao,{back:this.backToCiTiao.bind(this)})},t.prototype.setCiTiaoContent=function(e){var t=e.citiaomiaoshu,i=s.Excel.shuiguobuff(e.citiaoshuzhitype).value.map(function(e){return e.toString()});return f.default.replaceStringSymbols(t,"X",i)},__decorate([A(o.default)],t.prototype,"auto_ui",void 0),__decorate([A(cc.Node)],t.prototype,"UI_BagNode",void 0),__decorate([A(cc.Prefab)],t.prototype,"UI_BagPre",void 0),__decorate([A(cc.Node)],t.prototype,"mosterNode",void 0),__decorate([A(cc.Node)],t.prototype,"pathsNode",void 0),__decorate([A(cc.Node)],t.prototype,"playerNode",void 0),__decorate([A(cc.Node)],t.prototype,"bulletNode",void 0),__decorate([A(cc.Node)],t.prototype,"languaNode",void 0),__decorate([A(cc.Node)],t.prototype,"liulianNode",void 0),__decorate([A(cc.Node)],t.prototype,"othereff",void 0),__decorate([A(cc.Node)],t.prototype,"aixinNode",void 0),__decorate([A(cc.Node)],t.prototype,"mapNode",void 0),__decorate([A(cc.Node)],t.prototype,"tiaozhanTip",void 0),__decorate([A(cc.Node)],t.prototype,"tongjiNode",void 0),__decorate([A(cc.Node)],t.prototype,"bottmoNode",void 0),__decorate([A(p.default)],t.prototype,"showattackinfo",void 0),__decorate([k],t)}(a.default));i.default=R,cc._RF.pop()},{"./AudioManager":"AudioManager","./BuffMag":"BuffMag","./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Const_Common":"Const_Common","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./ExcelUtil":"ExcelUtil","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./LoadingManager":"LoadingManager","./LogManager":"LogManager","./NodePoolMag":"NodePoolMag","./PlayerDataManager":"PlayerDataManager","./TipsManager":"TipsManager","./UIConfig_Game":"UIConfig_Game","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager","./UIView":"UIView","./UI_Bag":"UI_Bag","./UI_Bullet":"UI_Bullet","./UI_BulletBomb":"UI_BulletBomb","./UI_BulletMove":"UI_BulletMove","./UI_CreateMoster":"UI_CreateMoster","./UI_DuWu":"UI_DuWu","./UI_GameViewMap":"UI_GameViewMap","./UI_GameView_UIBindings":"UI_GameView_UIBindings","./UI_MosterLogic":"UI_MosterLogic","./UI_Player":"UI_Player","./UI_ShowAttackInfo":"UI_ShowAttackInfo","./UI_SkillShow":"UI_SkillShow"}],UI_GameYinBi:[function(e,t,i){"use strict";cc._RF.push(t,"fc8c3SaFllM/qzP5zJqA3Qw","UI_GameYinBi"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./CommonUtils"),a=e("./EventManager"),n=e("./EvenType"),r=e("./GameDataManager"),s=e("./LogManager"),c=e("./ResKeeper"),l=cc._decorator,u=l.ccclass,d=l.property,h=(l.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.icon=null,t.cost=null,t}return __extends(t,e),t.prototype.onEnable=function(){a.EventMgrInstance.addListener(n.EVENT_TYPE.Game_YinBiValue,this.initYinBi,this),a.EventMgrInstance.addListener(n.EVENT_TYPE.Game_Add_YinBi,this.addYinBi,this),this.initYinBi()},t.prototype.addYinBi=function(e,t,i,a){void 0===t&&(t=null),void 0===a&&(a=!0),s.LogMgr.debug("addYinBi",e,t,i,a),o.default.showCoinAnimation(this.icon.node.convertToWorldSpaceAR(cc.v2()),t,e,"yinbi",a,i)},t.prototype.initYinBi=function(){this.cost.string=r.GameDataMgr.getSilverCoin+""},t.prototype.onDisable=function(){a.EventMgrInstance.removeListener(n.EVENT_TYPE.Game_YinBiValue,this.initYinBi,this),a.EventMgrInstance.removeListener(n.EVENT_TYPE.Game_Add_YinBi,this.addYinBi,this)},__decorate([d(cc.Sprite)],t.prototype,"icon",void 0),__decorate([d(cc.Label)],t.prototype,"cost",void 0),__decorate([u],t)}(c.default));i.default=h,cc._RF.pop()},{"./CommonUtils":"CommonUtils","./EvenType":"EvenType","./EventManager":"EventManager","./GameDataManager":"GameDataManager","./LogManager":"LogManager","./ResKeeper":"ResKeeper"}],UI_GetItems_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"5213b2dc2ZNQKHODtEADSf0","UI_GetItems_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=e("./List"),n=cc._decorator,r=n.ccclass,s=n.property,c=function(e){function t(){var t=e.call(this)||this;return t.btn_close=null,t.list_min=null,t.list_max=null,t._btnNames=["btn_close"],t}return __extends(t,e),__decorate([s(cc.Button)],t.prototype,"btn_close",void 0),__decorate([s(a.default)],t.prototype,"list_min",void 0),__decorate([s(a.default)],t.prototype,"list_max",void 0),__decorate([r("UI_GetItems_UIBindings")],t)}(o.default);i.default=c,cc._RF.pop()},{"./List":"List","./UIBindings":"UIBindings"}],UI_GetItems:[function(e,t,i){"use strict";cc._RF.push(t,"0893bpZnzNDRZ8n8vvRlEpj","UI_GetItems"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UI_GetItems_UIBindings"),a=e("./UIView"),n=e("./Item_Icon"),r=e("./AudioManager"),s=cc._decorator,c=s.ccclass,l=s.property,u=(s.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.delayTime=.1,t}return __extends(t,e),t.prototype._show=function(e){this.delayTime=.1,this.itemData=e,e.ids.length<=5?this.auto_ui.list_min.numItems=e.ids.length:this.auto_ui.list_max.numItems=e.ids.length,r.AudioMgr.playSoundEffect("effect/getReward")},t.prototype.getItemRender=function(e,t){e.getComponent(n.default).initialize(this.itemData.ids[t],this.itemData.counts[t]),e.stopAllActions(),e.scale=0,e.runAction(cc.sequence(cc.delayTime(this.delayTime),cc.scaleTo(.1,1,1))),this.delayTime+=.05},t.prototype._clickListener=function(){this.itemData&&this.itemData.clickCallBack&&this.itemData.clickCallBack(),this.itemData=null,this._close()},__decorate([l(o.default)],t.prototype,"auto_ui",void 0),__decorate([c],t)}(a.default));i.default=u,cc._RF.pop()},{"./AudioManager":"AudioManager","./Item_Icon":"Item_Icon","./UIView":"UIView","./UI_GetItems_UIBindings":"UI_GetItems_UIBindings"}],UI_GetZaZhong_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"e7e41ijiENKvrKfWo2WTCOa","UI_GetZaZhong_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.txt_titleLabel=null,t.node_light=null,t.node_qiFather=null,t.node_huoFather=null,t.sp_icon=null,t.sp_ciTiaoIcon=null,t.btn_closeBtn=null,t.rtxt_ciTiaoInfo=null,t._btnNames=["btn_closeBtn"],t}return __extends(t,e),__decorate([r(cc.Label)],t.prototype,"txt_titleLabel",void 0),__decorate([r(cc.Node)],t.prototype,"node_light",void 0),__decorate([r(cc.Node)],t.prototype,"node_qiFather",void 0),__decorate([r(cc.Node)],t.prototype,"node_huoFather",void 0),__decorate([r(cc.Sprite)],t.prototype,"sp_icon",void 0),__decorate([r(cc.Sprite)],t.prototype,"sp_ciTiaoIcon",void 0),__decorate([r(cc.Button)],t.prototype,"btn_closeBtn",void 0),__decorate([r(cc.RichText)],t.prototype,"rtxt_ciTiaoInfo",void 0),__decorate([n("UI_GetZaZhong_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_GetZaZhong:[function(e,t,i){"use strict";cc._RF.push(t,"4e49dugrHdB7ovb3gPxfOD8","UI_GetZaZhong"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UI_GetZaZhong_UIBindings"),a=e("./BundleConfig"),n=e("./CommonUtils"),r=e("./Excel"),s=e("./UIView"),c=cc._decorator,l=c.ccclass,u=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t}return __extends(t,e),t.prototype._show=function(e){var t=r.Excel.shuiguo(e.shuiGuoId);if(t){var i=this.auto_ui;i.txt_titleLabel.string=t.newName;var o="player"+(e.shuiGuoId-1e3)+"_5";this._loadRes(a.BundleNames.Common,"res/player/"+o,cc.SpriteFrame).then(function(e){i.sp_icon.spriteFrame=e});var s="tianfu_"+e.shuiGuoId+"_1";this._loadRes(a.BundleNames.Common,"res/tianfuicon/"+s,cc.SpriteFrame).then(function(e){i.sp_ciTiaoIcon.spriteFrame=e}),i.node_light.stopAllActions(),i.node_light.runAction(cc.repeatForever(cc.rotateBy(5,360)));var c=-1;if(r.Excel.shuiguohecheng_all.forEach(function(t){t.shuiguoId===e.shuiGuoId&&0!==t.newTianFuBuff&&(c=t.newTianFuBuff)}),-1!==c){var l=r.Excel.shuiguobuff(c);if(l){var u=l.buffdesc,d=[u=n.default.replaceStringSymbols(u,"\\n",[""])];u.includes("X")&&(d=u.split("X"));var h="";d.forEach(function(e,i){if(e.includes("#")){var o='<u><color=#ffff00 click="ShowZaZhongInfo">'+t.newName+"</c></u>";e=n.default.replaceStringSymbols(e,"#",[o])}h+="<color=#ffffff>"+e+"</c>",i<d.length-1&&l.value&&(h+="<color=#71ff00>"+l.value[i]+"</c>")}),h="<outline color=#000000 width=3>"+h+"</outline>",i.rtxt_ciTiaoInfo.string=h}}n.default.loadLevel5Effect(e.shuiGuoId,i.node_qiFather,i.node_huoFather,this._loadRes.bind(this))}else this._close()},t.prototype._clickListener=function(e){switch(e){case this.auto_ui.btn_closeBtn:this._close()}},t.prototype._loadRes=function(e,t,i){return new Promise(function(o,a){cc.assetManager.loadBundle(e,function(e,n){e?a(e):n.load(t,i,function(e,t){e?a(e):o(t)})})})},__decorate([u(o.default)],t.prototype,"auto_ui",void 0),__decorate([l],t)}(s.default);i.default=d,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Excel":"Excel","./UIView":"UIView","./UI_GetZaZhong_UIBindings":"UI_GetZaZhong_UIBindings"}],UI_Hall_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"52699qfIxJNS7wt1cWJniO8","UI_Hall_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.btn_choice=null,t.btn_shake=null,t.btn_music=null,t.btn_setting=null,t.btn_start=null,t.btn_sidebar=null,t.btn_powerAddBtn=null,t.btn_goldAddBtn=null,t.btn_diamondAddBtn=null,t.btn_shopBtn=null,t.btn_wareHouseBtn=null,t.btn_fightingBtn=null,t.btn_newsBtn=null,t.node_setting=null,t.node_off_shake=null,t.node_off_music=null,t.node_NewMainView=null,t.node_NewViewFather=null,t.node_bottomBtnFather=null,t.txt_powerLabel=null,t.txt_goldLabel=null,t.txt_diamondLabel=null,t._btnNames=["btn_choice","btn_shake","btn_music","btn_setting","btn_start","btn_sidebar","btn_powerAddBtn","btn_goldAddBtn","btn_diamondAddBtn","btn_shopBtn","btn_wareHouseBtn","btn_fightingBtn","btn_newsBtn"],t}return __extends(t,e),__decorate([r(cc.Button)],t.prototype,"btn_choice",void 0),__decorate([r(cc.Button)],t.prototype,"btn_shake",void 0),__decorate([r(cc.Button)],t.prototype,"btn_music",void 0),__decorate([r(cc.Button)],t.prototype,"btn_setting",void 0),__decorate([r(cc.Button)],t.prototype,"btn_start",void 0),__decorate([r(cc.Button)],t.prototype,"btn_sidebar",void 0),__decorate([r(cc.Button)],t.prototype,"btn_powerAddBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_goldAddBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_diamondAddBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_shopBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_wareHouseBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_fightingBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_newsBtn",void 0),__decorate([r(cc.Node)],t.prototype,"node_setting",void 0),__decorate([r(cc.Node)],t.prototype,"node_off_shake",void 0),__decorate([r(cc.Node)],t.prototype,"node_off_music",void 0),__decorate([r(cc.Node)],t.prototype,"node_NewMainView",void 0),__decorate([r(cc.Node)],t.prototype,"node_NewViewFather",void 0),__decorate([r(cc.Node)],t.prototype,"node_bottomBtnFather",void 0),__decorate([r(cc.Label)],t.prototype,"txt_powerLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_goldLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_diamondLabel",void 0),__decorate([n("UI_Hall_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_Hall:[function(e,t,i){"use strict";cc._RF.push(t,"cbc447QF6dIoabEFmuFsMLw","UI_Hall"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./AIControl"),a=e("./AudioManager"),n=e("./BaseModule"),r=e("./BundleConfig"),s=e("./Const_Common"),c=e("./EvenType"),l=e("./EventManager"),u=e("./GameDataManager"),d=e("./GameGlobalVariable"),h=e("./GuideControl"),p=e("./HallGlobalVariable"),_=e("./ModuleManager"),g=e("./PlayerDataManager"),f=e("./RedPointControl"),m=e("./ResLoader"),v=e("./TipsManager"),y=e("./UIConfig_Game"),b=e("./UIConfig_Home"),I=e("./UIManager"),E=e("./UIView"),M=e("./UI_Hall_UIBindings"),C=cc._decorator,B=C.ccclass,x=C.property,w=(C.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t._deltaTime=0,t}var i;return __extends(t,e),i=t,t.prototype._show=function(){var e=this;i._instance=this,l.EventMgrInstance.emitEvent(c.EVENT_TYPE.Game_Load_View,!1),this.auto_ui.node_setting.active=!1,this.auto_ui.setClickFast(this.auto_ui.btn_setting),this.auto_ui.btn_sidebar.node.active=!1,cc.sys.platform,cc.sys.BYTEDANCE_GAME,a.AudioMgr.playBackgroundMusic("sound/homebg",!0,r.BundleNames.Home),this.resetRichLabel(),g.PlayerDataMgr.getWuJinCount(),p.default.selfMap["\u6218\u6597\u6309\u94ae"]=this.auto_ui.btn_fightingBtn.node,this.scheduleOnce(function(){e.checkContinueGame()}),this.checkUnLockFruit(),this.loadGame()},t.prototype.checkUnLockFruit=function(){var e=this,t=g.PlayerDataMgr.gameWinCheckUnlock();t&&t.length>0?I.default.open(r.BundleNames.Home,b.UIView_Home.UI_UnlockNewEquip,{shuiGuoIds:t,callBack:function(){if(g.PlayerDataMgr.getGuideIndexByTaskName(s.GuideName.FruitDressUpEquip)===s.DressUpEquipGuideIndex.GuideDialog){var t=e.auto_ui.btn_wareHouseBtn.node,i=t.convertToWorldSpaceAR(cc.v2(0,0)),a=cc.size(t.width,t.height),n=(e.node.height-1334)/2;h.GuideCtrlInstance.showGuide({callBack:function(){g.PlayerDataMgr.setGuideIndex(s.GuideName.FruitDressUpEquip,s.DressUpEquipGuideIndex.SelectFruit),e.showViewByType(1)},sayStr:"\u606d\u559c\u89e3\u9501\u4e86\u65b0\u6c34\u679c\uff0c\u8d76\u7d27\u53bb\u5c06\u65b0\u6c34\u679c\u4e0a\u9635\u5427",wPos:i,size:a,sayNodePos:cc.v2(0,-250-n)})}else o.default._instance.displayClickButton(e.auto_ui.btn_wareHouseBtn.node,function(){e.showViewByType(1)});l.EventMgrInstance.emitEvent(c.EVENT_TYPE.HallResetBag),p.default.isNeedResetWareHouse=!0}}):f.RedPointCtrl.getRedPointStatusByType(f.RedPointType.upEquip)&&o.default._instance.displayClickButton(e.auto_ui.btn_wareHouseBtn.node,function(){e.showViewByType(1)}),p.default.selfMap["\u6218\u6597\u6309\u94ae"]=this.auto_ui.btn_fightingBtn.node},t.prototype.checkContinueGame=function(){g.PlayerDataMgr.getGuideIndexByTaskName(s.GuideName.GameBag)!==s.GameBagGuideIndex.GuideCompletion||o.default._instance.isOpen||(u.GameDataMgr.getContinueGame()&&(I.default.open(r.BundleNames.Home,b.UIView_Home.UI_JiXuGame,1),this.showViewByType(2)),u.GameDataMgr.getContinueChallenge()?(this.showViewByType(3),I.default.open(r.BundleNames.Home,b.UIView_Home.UI_JiXuGame,2)):-1!==d.GameGlobalVariable.nowlevel?this.showViewByType(2):this.showViewByType(3))},t.prototype.start=function(){var e=this;this.scheduleOnce(function(){if(g.PlayerDataMgr.getGuideIndexByTaskName(s.GuideName.EquipLevelUp)===s.UpEquipLevelGuideIndex.GuideClickWarehouseFruit2){var t=e.auto_ui.btn_wareHouseBtn.node,i=t.convertToWorldSpaceAR(cc.v2(0,0)),o=cc.size(t.width,t.height),a=(e.node.height-1334)/2;h.GuideCtrlInstance.showGuide({callBack:function(){e.showViewByType(1)},sayStr:"\u83b7\u5f97\u4e86\u6c34\u679c\u788e\u7247\uff0c\u53bb\u7ed9\u6c34\u679c\u5347\u7ea7\u63d0\u5347\u6218\u529b\u5427",wPos:i,size:o,sayNodePos:cc.v2(0,-250-a)})}})},t.prototype._addEventListener=function(){this._addEvent(c.EVENT_TYPE.Game_count_down_time,this._refreshTime,this),this._addEvent(c.EVENT_TYPE.Hall_ResetRich,this.resetRichLabel,this),this._addEvent(c.EVENT_TYPE.Hall_StartGame,this._start,this),this._addEvent(c.EVENT_TYPE.GAME_TIAOZHAN_VIEW,this.openSpecialChallenge,this),this._addEvent(c.EVENT_TYPE.HallResetUnLockFurit,this.checkUnLockFruit,this)},t.prototype._clickListener=function(e){var t=this.auto_ui;switch(e){case t.btn_start:this._start();break;case t.btn_choice:this._choice();break;case t.btn_setting:this._setting();break;case t.btn_sidebar:this._sidebar();break;case t.btn_shopBtn:this.showViewByType(0);break;case t.btn_wareHouseBtn:this.showViewByType(1);break;case t.btn_fightingBtn:this.showViewByType(2);break;case t.btn_newsBtn:this.showViewByType(3);break;case t.btn_powerAddBtn:I.default.open(r.BundleNames.Home,b.UIView_Home.UI_AddPower);break;case t.btn_goldAddBtn:this.showViewByType(0,{isBottom:!0}),l.EventMgrInstance.emitEvent(c.EVENT_TYPE.HallScrollShop,{isBottom:!0});break;case t.btn_diamondAddBtn:this.showViewByType(0,{isUp:!0}),l.EventMgrInstance.emitEvent(c.EVENT_TYPE.HallScrollShop,{isUp:!0})}},t.prototype._start=function(e,t){void 0===e&&(e=1),void 0===t&&(t=!1),g.PlayerDataMgr.globalData.power>=d.GameGlobalVariable.kaishitilicount||t?(t||g.PlayerDataMgr.subtractPower(d.GameGlobalVariable.kaishitilicount),l.EventMgrInstance.emitEvent(c.EVENT_TYPE.Game_Load_View,!0),this.onHideView(),d.GameGlobalVariable.nowlevel=e,d.GameGlobalVariable.offtime=(new Date).getTime(),I.default.open(r.BundleNames.Game,y.UIView_Game.UI_GameView)):v.TipMgr.showToast("\u4f53\u529b\u4e0d\u591f")},t.prototype.openSpecialChallenge=function(){l.EventMgrInstance.emitEvent(c.EVENT_TYPE.Game_Load_View,!0),this.onHideView(),d.GameGlobalVariable.teshulevel=1,d.GameGlobalVariable.nowlevel=-1,this._close(),I.default.open(r.BundleNames.Game,y.UIView_Game.UI_GameView)},t.prototype.onHideView=function(){_.ModuleMgr.clearAllModules(),this._close()},t.prototype._choice=function(){},t.prototype._setting=function(){this.auto_ui.node_setting.active=!this.auto_ui.node_setting.active},t.prototype._sidebar=function(){I.default.open(r.BundleNames.Home,b.UIView_Home.UI_Sidebar)},t.prototype.onResume=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];a.AudioMgr.playBackgroundMusic("sound/homebgm",!0,r.BundleNames.Home)},t.prototype._refreshTime=function(){},t.prototype.update=function(){},t.prototype.resetRichLabel=function(){var e=this.auto_ui;e.txt_powerLabel.string=g.PlayerDataMgr.globalData.power+"/"+g.PlayerDataMgr.globalData.maxPower,e.txt_goldLabel.string=""+g.PlayerDataMgr.globalData.gold,e.txt_diamondLabel.string=""+g.PlayerDataMgr.globalData.diamond},t.prototype.showViewByType=function(e,t){switch(void 0===t&&(t={}),this.auto_ui.node_bottomBtnFather.children.forEach(function(t,i){t.children[1].active=i===e,i===e?(t.width=t.children[1].width,t.height=t.children[1].height):(t.width=t.children[0].width,t.height=t.children[0].height)}),e){case 0:_.ModuleMgr.show(n.ModuleNames.Shop,this.auto_ui.node_NewViewFather,t);break;case 1:_.ModuleMgr.show(n.ModuleNames.WareHouse,this.auto_ui.node_NewViewFather,t);break;case 2:_.ModuleMgr.show(n.ModuleNames.Fighting,this.auto_ui.node_NewViewFather,t);break;case 3:_.ModuleMgr.show(n.ModuleNames.News,this.auto_ui.node_NewViewFather,t)}},t.prototype.loadGame=function(){m.default.loadBundle(r.BundleNames.Game).then(function(e){console.log("Loaded main bundle",e)})},__decorate([x(M.default)],t.prototype,"auto_ui",void 0),i=__decorate([B],t)}(E.default));i.default=w,cc._RF.pop()},{"./AIControl":"AIControl","./AudioManager":"AudioManager","./BaseModule":"BaseModule","./BundleConfig":"BundleConfig","./Const_Common":"Const_Common","./EvenType":"EvenType","./EventManager":"EventManager","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./GuideControl":"GuideControl","./HallGlobalVariable":"HallGlobalVariable","./ModuleManager":"ModuleManager","./PlayerDataManager":"PlayerDataManager","./RedPointControl":"RedPointControl","./ResLoader":"ResLoader","./TipsManager":"TipsManager","./UIConfig_Game":"UIConfig_Game","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager","./UIView":"UIView","./UI_Hall_UIBindings":"UI_Hall_UIBindings"}],UI_HuDun:[function(e,t,i){"use strict";cc._RF.push(t,"2c0e5cX22pEK6LDbjAdesGI","UI_HuDun"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./ResKeeper"),a=e("./NodePoolMag"),n=cc._decorator,r=n.ccclass,s=(n.property,n.inspector,function(e){function t(){var t=e.call(this)||this;return t.xuelinag=0,t}return __extends(t,e),t.prototype.initializeHealth=function(e){this.xuelinag=e},t.prototype.reduceHealth=function(e){this.xuelinag-=e;var t=this.node.opacity;cc.tween(this.node).to(.1,{opacity:t-50}).to(.1,{opacity:t}).start(),this.xuelinag<=0&&a.NodePoolMag.instance.recycleNodeToPool("hudun",this.node)},__decorate([r],t)}(o.default));i.default=s,cc._RF.pop()},{"./NodePoolMag":"NodePoolMag","./ResKeeper":"ResKeeper"}],UI_JiXuGame_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"37756Ofko1Fk6ogcDSpu1Bb","UI_JiXuGame_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.btn_closeBtn=null,t.btn_queDingBtn=null,t.btn_quxiaoBtn=null,t.txt_desclb=null,t._btnNames=["btn_closeBtn","btn_queDingBtn","btn_quxiaoBtn"],t}return __extends(t,e),__decorate([r(cc.Button)],t.prototype,"btn_closeBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_queDingBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_quxiaoBtn",void 0),__decorate([r(cc.Label)],t.prototype,"txt_desclb",void 0),__decorate([n("UI_JiXuGame_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_JiXuGame:[function(e,t,i){"use strict";cc._RF.push(t,"bd9bbDsvH5CQJ/b2CFsTNyq","UI_JiXuGame"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UI_JiXuGame_UIBindings"),a=e("./UIView"),n=e("./GameDataManager"),r=e("./BuffMag"),s=e("./EventManager"),c=e("./EvenType"),l=cc._decorator,u=l.ccclass,d=l.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currentCodeState=1,t.auto_ui=null,t}return __extends(t,e),t.prototype._show=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];if(this.currentCodeState=e,2===e)this.auto_ui.txt_desclb.string="\u4f60\u7684\u6311\u6218\u6a21\u5f0f\u8fd8\u6709\u672a\u5b8c\u6210";else{var o=n.GameDataMgr.getContinueGame();this.auto_ui.txt_desclb.string="\u4f60\u5728\u7b2c"+o.level+"\u5173\u8fd8\u6709\u672a\u5b8c\u6210\u7684\u6218\u6597"}},t.prototype.onEnable=function(){},t.prototype._clickListener=function(e){switch(e){case this.auto_ui.btn_closeBtn:this._close(),this.startGame(1);break;case this.auto_ui.btn_queDingBtn:this._close(),this.startGame(2);break;case this.auto_ui.btn_quxiaoBtn:this._close(),this.startGame(1)}},t.prototype.startGame=function(e){var t=n.GameDataMgr.getContinueGame();1===e?(n.GameDataMgr.clearGameBagData(),1===this.currentCodeState?n.GameDataMgr.updateCiTiaoData(t.level,null):n.GameDataMgr.updateChallengeContinue(1,!1)):2===e&&(1===this.currentCodeState?(r.BuffMgr.setSavedCiTiao(t.citiaodata),s.EventMgrInstance.emitEvent(c.EVENT_TYPE.Hall_StartGame,t.level,!0)):s.EventMgrInstance.emitEvent(c.EVENT_TYPE.GAME_TIAOZHAN_VIEW,1,!0))},__decorate([d(o.default)],t.prototype,"auto_ui",void 0),__decorate([u],t)}(a.default);i.default=h,cc._RF.pop()},{"./BuffMag":"BuffMag","./EvenType":"EvenType","./EventManager":"EventManager","./GameDataManager":"GameDataManager","./UIView":"UIView","./UI_JiXuGame_UIBindings":"UI_JiXuGame_UIBindings"}],UI_JianTou:[function(e,t,i){"use strict";cc._RF.push(t,"63a8do9fFxKyJyf2q5waAtd","UI_JianTou"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./BundleConfig"),a=e("./ResKeeper"),n=cc._decorator,r=n.ccclass,s=(n.property,n.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state=1,t.elapsedOfflineTime=0,t}return __extends(t,e),t.prototype.onEnable=function(){},t.prototype.startArrow=function(){return __awaiter(this,void 0,Promise,function(){var e,t=this;return __generator(this,function(i){switch(i.label){case 0:switch(e=function(e,i){return __awaiter(t,void 0,void 0,function(){var t,a,n;return __generator(this,function(r){switch(r.label){case 0:return[4,this._loadRes(o.BundleNames.Game,i,cc.SpriteFrame)];case 1:return t=r.sent(),(a=null===(n=this.node.children[e])||void 0===n?void 0:n.getComponent(cc.Sprite))&&(a.spriteFrame=t),[2,t]}})})},this.state){case 1:return[3,1];case 2:return[3,5];case 3:return[3,9]}return[3,13];case 1:return[4,e(2,"res/jian1")];case 2:return i.sent(),[4,e(1,"res/jian3")];case 3:return i.sent(),[4,e(0,"res/jian3")];case 4:return i.sent(),this.state=2,[3,14];case 5:return[4,e(2,"res/jian2")];case 6:return i.sent(),[4,e(1,"res/jian1")];case 7:return i.sent(),[4,e(0,"res/jian3")];case 8:return i.sent(),this.state=3,[3,14];case 9:return[4,e(2,"res/jian3")];case 10:return i.sent(),[4,e(1,"res/jian2")];case 11:return i.sent(),[4,e(0,"res/jian1")];case 12:return i.sent(),this.state=1,[3,14];case 13:return[3,14];case 14:return[2]}})})},t.prototype.update=function(e){this.elapsedOfflineTime+=e,this.elapsedOfflineTime>=.3&&(this.elapsedOfflineTime=0,this.startArrow())},t.prototype._loadRes=function(e,t,i){return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,new Promise(function(o,a){var n;null===(n=cc.assetManager.getBundle(e))||void 0===n||n.load(t,i,function(e,t){e?a(e):o(t)})})]})})},__decorate([r],t)}(a.default));i.default=s,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./ResKeeper":"ResKeeper"}],UI_LiuXue:[function(e,t,i){"use strict";cc._RF.push(t,"aad78wWN9pAM7L0LsEWUjqL","UI_LiuXue"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,n=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.xuedi=null,t.mosteids={1:{w:123,h:123}},t.nodePool=null,t.cachedNodes=[],t.currentTween=null,t.accumulatedTime=0,t}return __extends(t,e),t.prototype.onEnable=function(){var e=this;this.node.children.forEach(function(t){t.scale=0,t.opacity=0,e.recycleNode(t)}),this.dispatchXueDi()},t.prototype.getLiuXueNode=function(){var e=this.cachedNodes.shift();return e||(e=cc.instantiate(this.xuedi),this.node.addChild(e)),e},t.prototype.recycleNode=function(e){this.cachedNodes.push(e)},t.prototype.createRandomPoint=function(e,t){var i=2*Math.random()*Math.PI,o=Math.random()*t;return e.add(new cc.Vec2(Math.cos(i)*o,Math.sin(i)*o))},t.prototype.dispatchXueDi=function(){var e=this,t=this.obtainRandomPosition(this.node.getBoundingBox()),i=this.getLiuXueNode();i.setPosition(t),i.scale=0,i.opacity=0,this.currentTween=cc.tween(i).to(.1,{scale:1.2,opacity:255}).to(.5,{scale:0,opacity:0,y:i.position.y-150}).call(function(){e.recycleNode(i)}).start()},t.prototype.obtainRandomPosition=function(e){var t=e.x+Math.random()*e.width,i=e.y+Math.random()*e.height+50;return new cc.Vec2(t,i)},t.prototype.update=function(e){this.accumulatedTime+=e,this.accumulatedTime>.2&&(this.dispatchXueDi(),this.accumulatedTime=0)},t.prototype.onDisable=function(){var e=this;this.currentTween&&(this.currentTween.stop(),this.node.children.forEach(function(t){t.scale=0,t.opacity=0,e.recycleNode(t)}))},__decorate([n(cc.Node)],t.prototype,"xuedi",void 0),__decorate([a],t)}(cc.Component);i.default=r,cc._RF.pop()},{}],UI_Loading:[function(e,t,i){"use strict";cc._RF.push(t,"ed8b8ApAO1LWoHqLy7DKI6N","UI_Loading"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,n=(o.property,o.inspector,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.show=function(){},__decorate([a],t)}(cc.Component));i.default=n,cc._RF.pop()},{}],UI_MosterLogic_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"bb8a1CfUutJO6+bz2mRS8bd","UI_MosterLogic_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.node_piaozipos=null,t.node_hudunnode=null,t.node_effnode=null,t.txt_xuelb=null,t}return __extends(t,e),__decorate([r(cc.Node)],t.prototype,"node_piaozipos",void 0),__decorate([r(cc.Node)],t.prototype,"node_hudunnode",void 0),__decorate([r(cc.Node)],t.prototype,"node_effnode",void 0),__decorate([r(cc.Label)],t.prototype,"txt_xuelb",void 0),__decorate([n("UI_MosterLogic_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_MosterLogic:[function(e,t,i){"use strict";cc._RF.push(t,"3942dkIzf5GNJQkJEI7Cncq","UI_MosterLogic"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UI_MosterLogic_UIBindings"),a=e("./ResKeeper"),n=e("./EventManager"),r=e("./EvenType"),s=e("./NodePoolMag"),c=e("./BundleConfig"),l=e("./UI_HuDun"),u=e("./UI_MosterXueTiao"),d=e("./LogManager"),h=e("./GameDataManager"),p=e("./GameGlobalVariable"),_=e("./AudioManager"),g=e("./Excel"),f=e("./BuffMag"),m=cc._decorator,v=m.ccclass,y=m.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.mosterId=1,t.hunmoNode=null,t.mosterXueTiao=null,t.xueliang=0,t.maxxueliang=0,t.mosterspeed=0,t.defy=999999,t.liuxueContentNode=null,t.zhengshangNode=null,t.nowmosterdata=null,t.paths=null,t.nowtexindex=0,t.twmove=null,t.nowHuDunNode=null,t.iszhaohuan=!1,t.zhaohuantime=100,t.isXiGuaBomb=!1,t.isDie=!1,t.ohterbullet=null,t.zhongduNode=null,t.bingdongNode=null,t.dongjieNode=null,t.liuxueNode=null,t.bingdongjianshu=0,t.isjianshu=!1,t.jianshutime=0,t.isdongjie=!1,t.dongjietime=0,t.iszhongdu=!1,t.dushan=0,t.zhongdutime=0,t.isliuxue=!1,t.liuxueshang=0,t.liuxuetime=0,t.isransao=!1,t.ransaoshang=0,t.ransaotime=0,t.diejiacount=0,t.dushangplayer=null,t.nowbuffatackplay=null,t.ismove=!1,t.moveindex=0,t.tesofftime=0,t.dutimeleiji=0,t.liutimeleiji=0,t.ransaotimeleiji=0,t.jiansuleiji=0,t.dongjieleiji=0,t.zhaohuantimeleiji=0,t}return __extends(t,e),t.prototype.onEnable=function(){this.node.children.forEach(function(e){e.active=!0}),999999!==this.defy?this.hunmoNode.y=this.defy:this.defy=this.hunmoNode.y,this.hunmoNode.active=!1,this.node.getChildByName("dongImg").active=!1,this.liuxueContentNode=this.node.getChildByName("liuxueNode"),this.zhengshangNode=this.node.getChildByName("zhengshang"),this.zhengshangNode.active=!1},t.prototype.onDisable=function(){this.nowHuDunNode&&(s.NodePoolMag.instance.recycleNodeToPool("hudun",this.nowHuDunNode),this.nowHuDunNode=null),f.BuffMgr.clearMonsterBombCount(this),this.removePoisonEffect(),this.removeFreezeEffect(),this.removeFrozenEffect(),this.removeBleedEffect(),this.deactivateXiGuaBomb(),this.unscheduleAllCallbacks()},t.prototype.activateXiGuaBomb=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return this.isXiGuaBomb||this.isDie||(this.isXiGuaBomb=!0,this.zhengshangNode.active=!0),[2]})})},t.prototype.deactivateXiGuaBomb=function(){this.zhengshangNode.active=!1},t.prototype.initializeMonsterInfo=function(e,t,i,o,a){return void 0===a&&(a=1),__awaiter(this,void 0,void 0,function(){var n,r,c,l,u,d,_,f,m;return __generator(this,function(){for(this.isDie=!1,this.isXiGuaBomb=!1,this.nowtexindex=i,n=g.Excel.shuiguoguaiwu(e),this.nowmosterdata=n,this.mosterspeed=this.nowmosterdata.mosterspeed/60,this.xueliang=this.nowmosterdata.mosterxue,r=1,1===p.GameGlobalVariable.isSpecialLevel()&&(c=h.GameDataMgr.getCurrentMaxLevel(),l=g.Excel.shuiguoguanqia(c),u=l.levelboshuid[l.levelboshuid.length-1],d=g.Excel.shuiguoboshu(u),r=d.mosterjiaxue),o&&(this.xueliang=this.nowmosterdata.mosterxue*o.mosterjiaxue*r),this.maxxueliang=this.xueliang,this.mosterXueTiao.initializeBloodBar(this.maxxueliang),this.moveindex=a,this.paths=t,this.updateHealthBar(),this.ismove=!0,this.node.opacity=0,cc.tween(this.node).to(.2,{opacity:255}).start(),_=this.auto_ui.node_piaozipos.children,f=0;f<_.length;f++)m=_[0],s.NodePoolMag.instance.recycleNodeToPool("piaozi",m);return this.twmove=cc.tween(this.node.children[0]).to(.25,{scaleY:.9}).to(.25,{scaleY:1}),cc.tween(this.node.children[0]).repeatForever(this.twmove).start(),[2]})})},t.prototype.addShield=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return this.nowHuDunNode=s.NodePoolMag.instance.getNodeFromPool("hudun"),this.nowHuDunNode?[3,2]:[4,this._loadRes(c.BundleNames.Game,"prefabs/effpre/UI_HuDun",cc.Prefab)];case 1:e=t.sent(),s.NodePoolMag.instance.createNodePool("hudun",1,e),this.nowHuDunNode=s.NodePoolMag.instance.getNodeFromPool("hudun"),t.label=2;case 2:return this.auto_ui.node_hudunnode.addChild(this.nowHuDunNode),this.nowHuDunNode.getComponent(l.default).initializeHealth(100),this.iszhaohuan=!1,[2]}})})},t.prototype.updateHealthBar=function(){this.xueliang<=0&&this.handleMonsterDeath()},t.prototype.handleMonsterDeath=function(e){var t=this;if(void 0===e&&(e=1),!this.isDie){f.BuffMgr.clearMonsterStack(this),f.BuffMgr.cleanMosterBomb(this.node.uuid);var i=f.BuffMgr.getPoisonFog();this.iszhongdu&&i&&n.EventMgrInstance.emitEvent(r.EVENT_TYPE.Game_CreateDuWu,this,i,this.dushangplayer),this.ohterbullet&&this.ohterbullet.attackfang&&f.BuffMgr.setBombDamage(this.ohterbullet.attackfang,this),this.node.children.forEach(function(e){e.active=!1}),this.hunmoNode.active=!0,this.hunmoNode.opacity=255,cc.tween(this.hunmoNode).to(.5,{y:this.hunmoNode.y+100}).to(.1,{opacity:0}).call(function(){t.node.stopAllActions(),t.unscheduleAllCallbacks(),t.resetMonsterState(),s.NodePoolMag.instance.recycleNodeToPool("moster_"+t.mosterId,t.node)}).start(),this.isDie=!0,this.ismove=!1,1===e&&n.EventMgrInstance.emitEvent(r.EVENT_TYPE.Game_Moster_DIE,{moster:this.mosterId})}},t.prototype.moveStep=function(){if(this.ismove){var e=this.paths.children[this.moveindex];if(!e)return this.handleMonsterDeath(2),void n.EventMgrInstance.emitEvent(r.EVENT_TYPE.Game_Moster_Attack,{mosterId:this.mosterId});var t=e.x,i=e.y;if(0===this.moveindex)this.node.setPosition(t,i),this.moveindex+=1;else{var o=cc.Vec2.subtract(cc.v2(),cc.v2(t,i),this.node.getPosition()),a=Math.atan2(o.y,o.x),s=cc.Vec2.distance(this.node.getPosition(),cc.v2(t,i));this.node.x+=Math.cos(a)*this.getCurrentSpeed(),this.node.y+=Math.sin(a)*this.getCurrentSpeed(),s<5&&(this.moveindex+=1)}}},t.prototype.getNearbyMonsterNodes=function(e){for(var t=this.node.parent.children,i=[],o=0;o<t.length;o++){var a=t[o],n=cc.Vec2.distance(a.getPosition(),this.node.getPosition());(n-=a.width/2+this.node.width/2)<=e&&i.push(a)}return i},t.prototype.knockback=function(e){var t=this;if(this.moveindex>=2){this.ismove=!1;var i=this.moveindex-1;i<0&&(i=0);var o=function(e,i){var a=t.paths.children[i];if(a){var n=a.x,r=a.y,s=cc.Vec2.distance(t.node.getPosition(),cc.v2(n,r)),c=0;e>s&&(c=e-s,e=s);var l=cc.Vec2.subtract(cc.v2(),cc.v2(n,r),t.node.getPosition()),u=Math.atan2(l.y,l.x),d=t.node.x+Math.cos(u)*e,h=t.node.y+Math.sin(u)*e;cc.tween(t.node).to(.1,{x:d,y:h}).call(function(){c>0?o(c,i-1):(t.moveindex=i+1,t.scheduleOnce(function(){t.ismove=!0},.1))}).start()}else t.moveindex=i+1};o(e,i)}},t.prototype.receiveAttack=function(e,t){if(void 0===t&&(t=!1),!this.isDie){this.ohterbullet=e;var i=e.getBulletAttack(this),o=f.BuffMgr.addPlayerAttack(this,e.attackfang),a=f.BuffMgr.getMonsterBombBonus(this),n=0;2===e.bulletId&&(n=f.BuffMgr.getMonsterBombSailingCount(this));var r=0;this.isXiGuaBomb&&(r=f.BuffMgr.getMonsterBombDamageIncrease()),i+=i*(o+a+n+r),i+=f.BuffMgr.getFixedAttack(e.attackfang),this.playHitEffect();var s=1;e.isbaoji&&(s=2),(2===e.bulletId||t)&&(s=5),this.reduceHealth(i,s,e.attackfang)}},t.prototype.reduceHealth=function(e,t,i){if(this.nowHuDunNode){var o=this.nowHuDunNode.getComponent(l.default);o.reduceHealth(e),o.xuelinag<0&&(this.nowHuDunNode=null)}else e=f.BuffMgr.getTotalMonsterDamage(e),this.mosterXueTiao.decreaseBlood(e),this.xueliang-=e,this.updateHealthBar();var a=this.auto_ui.node_piaozipos;i&&i.playerId&&p.GameGlobalVariable.recordAttack(i.playerId,e),n.EventMgrInstance.emitEvent(r.EVENT_TYPE.Game_ShangHai_FeiZi,e,a.convertToWorldSpaceAR(cc.v2()),null,t)},t.prototype.applyAdditionalAttack=function(e,t,i){this.isDie||(this.ohterbullet=i,this.playHitEffect(),this.reduceHealth(e,t,i))},t.prototype.playHitEffect=function(){var e=this.node.children[0].getChildByName("item").getComponent(cc.Sprite),t={value:0};cc.tween(t).to(.1,{value:1},{onUpdate:function(){e.getMaterial(0).setProperty("u_rate",t.value)}}).call(function(){e.getMaterial(0).setProperty("u_rate",t.value)}).start()},t.prototype.getCurrentSpeed=function(){var e=0;if(this.isdongjie)e=0;else{var t=.3*this.mosterspeed,i=f.BuffMgr.getCurrentSpeedRatio();(e=this.mosterspeed-this.mosterspeed*(this.bingdongjianshu+i))<t&&(e=t)}return e*p.GameGlobalVariable.jiasuState},t.prototype.resetMonsterState=function(){this.isjianshu=!1,this.isdongjie=!1,this.iszhongdu=!1,this.isliuxue=!1,this.isransao=!1,this.dushan=0,this.bingdongjianshu=0},t.prototype.applySlowEffect=function(e,t,i){this.isjianshu&&!f.BuffMgr.isStacked(i)||(this.diejiacount+=1,this.diejiacount>=3&&(this.diejiacount=3),this.unschedule(this.resetFreezeValue),this.addFreezeEffect(),this.isjianshu=!0,this.bingdongjianshu=e/100*this.diejiacount,this.scheduleOnce(this.resetFreezeValue,t),this.setFrozenImage(!0,this.diejiacount),d.LogMgr.debug("\u51b0\u51bb\u51cf\u901f\u6548\u76ca",this.bingdongjianshu))},t.prototype.addPoisonEffect=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return this.zhongduNode=s.NodePoolMag.instance.getNodeFromPool("zhongdu"),this.zhongduNode?[3,2]:[4,this._loadRes(c.BundleNames.Game,"prefabs/effpre/UI_ZhongDu",cc.Prefab)];case 1:e=t.sent(),s.NodePoolMag.instance.createNodePool("zhongdu",1,e),this.zhongduNode=s.NodePoolMag.instance.getNodeFromPool("zhongdu"),t.label=2;case 2:return this.zhongduNode.x=0,this.zhongduNode.y=0,p.GameGlobalVariable.effNode.addChild(this.zhongduNode),[2]}})})},t.prototype.removePoisonEffect=function(){this.zhongduNode&&(s.NodePoolMag.instance.recycleNodeToPool("zhongdu",this.zhongduNode),this.zhongduNode=null)},t.prototype.addFreezeEffect=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(){return[2]})})},t.prototype.updateEffects=function(){this.zhongduNode&&this.zhongduNode.setPosition(this.node.getPosition()),this.dongjieNode&&this.dongjieNode.setPosition(this.node.getPosition())},t.prototype.removeFreezeEffect=function(){this.bingdongNode&&(s.NodePoolMag.instance.recycleNodeToPool("bingshuang",this.bingdongNode),this.bingdongNode=null)},t.prototype.addFrozenEffect=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return this.isdongjie?[2]:(_.AudioMgr.playSoundEffect("sound/\u51bb\u7ed3",!1,c.BundleNames.Game),this.dongjieNode=s.NodePoolMag.instance.getNodeFromPool("dongjie"),this.dongjieNode?[3,2]:[4,this._loadRes(c.BundleNames.Game,"prefabs/effpre/UI_BingDong",cc.Prefab)]);case 1:e=t.sent(),s.NodePoolMag.instance.createNodePool("dongjie",1,e),this.dongjieNode=s.NodePoolMag.instance.getNodeFromPool("dongjie"),t.label=2;case 2:return this.dongjieNode.x=0,this.dongjieNode.y=0,p.GameGlobalVariable.effNode.addChild(this.dongjieNode),[2]}})})},t.prototype.removeFrozenEffect=function(){this.dongjieNode&&(s.NodePoolMag.instance.recycleNodeToPool("dongjie",this.dongjieNode),this.dongjieNode=null)},t.prototype.addBleedEffect=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return this.isliuxue?[2]:this.liuxueContentNode?(this.liuxueNode=s.NodePoolMag.instance.getNodeFromPool("liuxue"),this.liuxueNode?[3,2]:[4,this._loadRes(c.BundleNames.Game,"prefabs/effpre/UI_LiuXue",cc.Prefab)]):[3,3];case 1:e=t.sent(),s.NodePoolMag.instance.createNodePool("liuxue",1,e),this.liuxueNode=s.NodePoolMag.instance.getNodeFromPool("liuxue"),t.label=2;case 2:this.liuxueNode.x=0,this.liuxueNode.y=0,this.liuxueNode.width=this.liuxueContentNode.width,this.liuxueNode.height=this.liuxueContentNode.height,this.liuxueContentNode.addChild(this.liuxueNode),t.label=3;case 3:return[2]}})})},t.prototype.removeBleedEffect=function(){this.liuxueNode&&(s.NodePoolMag.instance.recycleNodeToPool("liuxue",this.liuxueNode),this.liuxueNode=null)},t.prototype.setFrozenImage=function(e,t){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(o){switch(o.label){case 0:return this.isDie?[2]:e?(p.GameGlobalVariable.playHitSoundEffect(),this.node.getChildByName("dongImg").active=!0,[4,this._loadRes(c.BundleNames.Common,"res/player/"+t,cc.SpriteFrame)]):[3,2];case 1:return i=o.sent(),this.node.getChildByName("dongImg").getComponent(cc.Sprite).spriteFrame=i,[3,3];case 2:this.node.getChildByName("dongImg").active=!1,o.label=3;case 3:return[2]}})})},t.prototype.applySpeedReduction=function(e,t){switch(this.nowbuffatackplay=t,e.buffefftype){case 2:var i=f.BuffMgr.isStacked(t);this.isjianshu&&!i||(this.diejiacount+=1,this.diejiacount>=3&&(this.diejiacount=3),this.unschedule(this.resetFreezeValue),this.addFreezeEffect(),this.isjianshu=!0,this.jianshutime=e.bufftime,this.bingdongjianshu=e.value[0]/100*this.diejiacount,this.scheduleOnce(this.resetFreezeValue,e.bufftime),this.setFrozenImage(!0,this.diejiacount),d.LogMgr.debug("\u51b0\u51bb\u51cf\u901f\u6548\u76ca",this.bingdongjianshu));break;case 5:if(g.Excel.shuiguoguaiwu(this.mosterId),Math.random()<=e.probability/100){if(this.isdongjie)return;this.addFrozenEffect(),this.isdongjie=!0,this.dongjietime=e.bufftime,d.LogMgr.debug("\u51bb\u7ed3\u6548\u76ca",this.isdongjie)}break;case 1:if(this.dushan=e.value[0]/100,this.iszhongdu)return;this.addPoisonEffect(),this.dushangplayer=t,this.iszhongdu=!0,this.zhongdutime=e.bufftime;break;case 22:if(this.isliuxue)return;this.addBleedEffect(),this.liuxueshang=e.value[0]+e.value[0]*f.BuffMgr.getBleedBonus(t),this.isliuxue=!0,this.liuxuetime=e.bufftime;break;case 24:if(this.isransao)return;this.ransaoshang=e.value[0],this.isransao=!0,this.ransaotime=e.bufftime}},t.prototype.resetFreezeValue=function(){this.bingdongjianshu=0,this.isjianshu=!1,this.diejiacount=0,this.removeFreezeEffect(),this.setFrozenImage(!1,0)},t.prototype.resetFrozenState=function(){this.isdongjie=!1,this.removeFrozenEffect()},t.prototype.applyPoisonDamage=function(){var e=f.BuffMgr.getPoisonDamage(),t=f.BuffMgr.applyAttackBonus(this.dushangplayer,this.dushangplayer.sgattack,1)*this.dushan;e&&(t+=t*(e.value[0]/100)),this.reduceHealth(t,3,this.nowbuffatackplay)},t.prototype.applyBleedDamage=function(){this.reduceHealth(this.liuxueshang,4,this.nowbuffatackplay)},t.prototype.applyBurnDamage=function(){this.reduceHealth(this.ransaoshang,5,this.nowbuffatackplay)},t.prototype.onUpdate=function(e){this.moveStep(),this.updateEffects(),this.isransao&&(this.ransaotimeleiji+=e,this.ransaotimeleiji>=1&&(this.applyBurnDamage(),this.ransaotime-=1,this.ransaotime<=0&&(this.isransao=!1),this.ransaotimeleiji=0)),this.iszhongdu&&(this.dutimeleiji+=e,this.dutimeleiji>=1&&(this.applyPoisonDamage(),this.zhongdutime-=1,this.zhongdutime<=0&&(this.removePoisonEffect(),this.iszhongdu=!1),this.dutimeleiji=0)),this.isliuxue&&(this.liutimeleiji+=e,this.liutimeleiji>=1&&(this.applyBleedDamage(),this.liuxuetime-=1,this.liuxuetime<=0&&(this.removeBleedEffect(),this.isliuxue=!1),this.liutimeleiji=0)),this.isdongjie&&(this.dongjieleiji+=e,this.dongjieleiji>=1&&(this.dongjietime-=1,this.dongjietime<=0&&this.resetFrozenState(),this.dongjieleiji=0)),this.iszhaohuan&&(this.zhaohuantimeleiji+=e,this.zhaohuantimeleiji>=1&&(n.EventMgrInstance.emitEvent(r.EVENT_TYPE.Game_ZhaoHuan_Moster,this),this.zhaohuantimeleiji=0))},__decorate([y(o.default)],t.prototype,"auto_ui",void 0),__decorate([y],t.prototype,"mosterId",void 0),__decorate([y(cc.Node)],t.prototype,"hunmoNode",void 0),__decorate([y(u.default)],t.prototype,"mosterXueTiao",void 0),__decorate([v],t)}(a.default);i.default=b,cc._RF.pop()},{"./AudioManager":"AudioManager","./BuffMag":"BuffMag","./BundleConfig":"BundleConfig","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./LogManager":"LogManager","./NodePoolMag":"NodePoolMag","./ResKeeper":"ResKeeper","./UI_HuDun":"UI_HuDun","./UI_MosterLogic_UIBindings":"UI_MosterLogic_UIBindings","./UI_MosterXueTiao":"UI_MosterXueTiao"}],UI_MosterXueTiao:[function(e,t,i){"use strict";cc._RF.push(t,"1d25fPzjkNIhpBYK96uzA/9","UI_MosterXueTiao"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./ResKeeper"),a=e("./AutoImagZiTi"),n=cc._decorator,r=n.ccclass,s=n.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.xue2=null,t.xue1=null,t.bloodLabel=null,t.bloodScript=null,t.maxValue=0,t.currentValue=0,t.currentOffTime=0,t.tween=null,t}return __extends(t,e),t.prototype.initializeBloodBar=function(e){var t=this.node.getChildByName("xuetiaolb");t&&(this.bloodScript=t.getComponent(a.default),this.bloodLabel=t.getComponent(cc.Label)),this.maxValue=e,this.currentValue=e,this.xue1.fillStart=1,this.xue2.fillStart=1;var i=(this.currentValue+"").split(".")[0];this.bloodLabel&&(this.bloodLabel.string=i),this.bloodScript&&this.bloodScript.setSprites(i)},t.prototype.decreaseBlood=function(e){this.currentValue-=e,this.currentValue<0&&(this.currentValue=0);var t=this.currentValue/this.maxValue;t<0&&(t=0),this.xue2.fillStart=t,this.tween&&this.tween.stop(),this.tween=cc.tween(this.xue1).delay(.1).to(.2,{fillStart:t}).start();var i=(this.currentValue+"").split(".")[0];this.bloodLabel&&(this.bloodLabel.string=i),this.bloodScript&&this.bloodScript.setSprites(i)},__decorate([s(cc.Sprite)],t.prototype,"xue2",void 0),__decorate([s(cc.Sprite)],t.prototype,"xue1",void 0),__decorate([r],t)}(o.default);i.default=c,cc._RF.pop()},{"./AutoImagZiTi":"AutoImagZiTi","./ResKeeper":"ResKeeper"}],UI_MoveYun:[function(e,t,i){"use strict";cc._RF.push(t,"d804f3y169KJp7JJiscxtvG","UI_MoveYun"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./ResKeeper"),a=cc._decorator,n=a.ccclass,r=(a.property,a.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.code=1,t.speed=1,t}return __extends(t,e),t.prototype.update=function(){var e=1===this.code?1:-1;this.node.x+=e*this.speed,this.node.x>800?this.code=2:this.node.x<-800&&(this.code=1)},__decorate([n],t)}(o.default));i.default=r,cc._RF.pop()},{"./ResKeeper":"ResKeeper"}],UI_OpenBox_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"9b4f1RRqklCRIC+CB+0dijm","UI_OpenBox_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node_lightNode=null,t.node_boxNode=null,t.node_titileNode=null,t.node_openTip=null,t.dbAnim_box1=null,t.dbAnim_box2=null,t.txt_countLabel=null,t.txt_titleLabel=null,t.btn_openBtn=null,t._btnNames=["btn_openBtn"],t}return __extends(t,e),__decorate([r(cc.Node)],t.prototype,"node_lightNode",void 0),__decorate([r(cc.Node)],t.prototype,"node_boxNode",void 0),__decorate([r(cc.Node)],t.prototype,"node_titileNode",void 0),__decorate([r(cc.Node)],t.prototype,"node_openTip",void 0),__decorate([r(dragonBones.ArmatureDisplay)],t.prototype,"dbAnim_box1",void 0),__decorate([r(dragonBones.ArmatureDisplay)],t.prototype,"dbAnim_box2",void 0),__decorate([r(cc.Label)],t.prototype,"txt_countLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_titleLabel",void 0),__decorate([r(cc.Button)],t.prototype,"btn_openBtn",void 0),__decorate([n("UI_OpenBox_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_OpenBox:[function(e,t,i){"use strict";cc._RF.push(t,"0530bOhPpFAoolE6E2ruqwI","UI_OpenBox"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UI_OpenBox_UIBindings"),a=e("./UIView"),n=e("./AudioManager"),r=e("./BundleConfig"),s=cc._decorator,c=s.ccclass,l=s.property,u=(s.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.boxType=0,t}return __extends(t,e),t.prototype._show=function(e){var t=e.clickCallBack,i=e.boxType,o=e.boxCount;this.clickCallBack=t,this.boxType=i,this.auto_ui.txt_countLabel.string=o.toString(),this.auto_ui.dbAnim_box1.node.active=0===i,this.auto_ui.dbAnim_box2.node.active=1===i,1===i?(this.auto_ui.txt_titleLabel.string="\u7cbe\u81f4\u793c\u76d2",this.auto_ui.dbAnim_box2.playAnimation("daiji_1",0)):(this.auto_ui.txt_titleLabel.string="\u666e\u901a\u793c\u76d2",this.auto_ui.dbAnim_box1.playAnimation("daiji_1",0)),this.startTween()},t.prototype._clickListener=function(e){e===this.auto_ui.btn_openBtn&&this.handleClick()},t.prototype.startTween=function(){var e=this.auto_ui.btn_openBtn.node,t=this.auto_ui.node_boxNode,i=this.auto_ui.node_titileNode,o=this.auto_ui.node_lightNode;e.active=!1,t.stopAllActions(),i.stopAllActions(),i.scaleX=0,o.stopAllActions(),o.scale=0,t.y=1e3;var a=cc.sequence(cc.moveTo(.35,0,0),cc.scaleTo(.05,1,.8),cc.scaleTo(.05,1,1),cc.callFunc(function(){o.runAction(cc.sequence(cc.scaleTo(.25,1.1,1.1),cc.scaleTo(.05,1,1),cc.callFunc(function(){o.runAction(cc.repeatForever(cc.rotateBy(3,360))),e.active=!0}))),i.runAction(cc.scaleTo(.25,1,1))}));t.runAction(a)},t.prototype.handleClick=function(){var e=this,t=this.auto_ui.btn_openBtn.node,i=this.auto_ui.node_lightNode;t.active=!1,n.AudioMgr.playSoundEffect("sound/openBox",!1,r.BundleNames.Home),0===this.boxType?this.auto_ui.dbAnim_box1.playAnimation("kai",0):this.auto_ui.dbAnim_box2.playAnimation("kai",0),this.scheduleOnce(function(){i.stopAllActions(),e.clickCallBack&&e.clickCallBack(),e._close()},1.1)},__decorate([l(o.default)],t.prototype,"auto_ui",void 0),__decorate([c],t)}(a.default));i.default=u,cc._RF.pop()},{"./AudioManager":"AudioManager","./BundleConfig":"BundleConfig","./UIView":"UIView","./UI_OpenBox_UIBindings":"UI_OpenBox_UIBindings"}],UI_PlaerInfo_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"fd3a5JgD/tKR70W/OS9SsNj","UI_PlaerInfo_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.sp_shuiguoimg=null,t.txt_attacklb=null,t.txt_attackspeed=null,t.txt_baoji=null,t.txt_baojilv=null,t.scroll_citiao=null,t}return __extends(t,e),__decorate([r(cc.Sprite)],t.prototype,"sp_shuiguoimg",void 0),__decorate([r(cc.Label)],t.prototype,"txt_attacklb",void 0),__decorate([r(cc.Label)],t.prototype,"txt_attackspeed",void 0),__decorate([r(cc.Label)],t.prototype,"txt_baoji",void 0),__decorate([r(cc.Label)],t.prototype,"txt_baojilv",void 0),__decorate([r(cc.ScrollView)],t.prototype,"scroll_citiao",void 0),__decorate([n("UI_PlaerInfo_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_PlaerInfo:[function(e,t,i){"use strict";cc._RF.push(t,"f70c9P8Sx9Aqb9NEEbDQbm5","UI_PlaerInfo"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./BundleConfig"),a=e("./UIView"),n=e("./UI_PlaerInfo_UIBindings"),r=e("./Excel"),s=e("./BuffMag"),c=cc._decorator,l=c.ccclass,u=c.property,d=(c.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t}return __extends(t,e),t.prototype._show=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.initializePlayerInfo(e)},t.prototype.initializePlayerInfo=function(e){return __awaiter(this,void 0,Promise,function(){var t,i,a,n,r;return __generator(this,function(c){switch(c.label){case 0:return t=e.playerInfo.equipLevel,[4,this._loadRes(o.BundleNames.Common,"res/player/player"+e.playerId+"_"+(t+1),cc.SpriteFrame)];case 1:return i=c.sent(),this.auto_ui.sp_shuiguoimg.spriteFrame=i,a=s.BuffMgr.applyAttackBonus(e,e.sgattack,1),n=s.BuffMgr.getAttackCritical(e,!0),r=s.BuffMgr.applyAttackBonus(e,e.sgattackspeed,2),this.auto_ui.txt_attacklb.string="\u653b\u51fb\u529b: "+a,this.auto_ui.txt_attackspeed.string="\u653b\u901f: "+r,this.auto_ui.txt_baoji.string="\u66b4\u51fb: "+100*(e.sgbaojia+n.baojijiacheng)+"%",this.auto_ui.txt_baojilv.string="\u66b4\u51fb\u7387: "+100*(e.sgbaojilv+n.baojijilv)+"%",this.updateBuffList(e),[2]}})})},t.prototype.updateBuffList=function(e){var t=s.BuffMgr.getPlayerCiTiaoList(e),i=this.auto_ui.scroll_citiao.content,o=i.children;o.forEach(function(e){e.active=!1});for(var a=0;a<t.length;a++){var n=t[a],r=o[a];r||(r=cc.instantiate(o[0]),i.addChild(r)),r.active=!0;var c=r.children[0].getComponent(cc.RichText);this.setBuffDescription(c,n)}},t.prototype.setBuffDescription=function(e,t){for(var i=t.citiaomiaoshu,o=r.Excel.shuiguobuff(t.citiaoshuzhitype),a=i.split("X"),n="",s=0;s<a.length;s++){var c=a[s];o.value[s]?n+="<color=#ffffff>"+c+"</c><color=#00ff00>"+o.value[s]+"</color>":n+="<color=#ffffff>"+c+"</c>"}n="<outline color=#000000>"+n+"</outline>",e.string=n},t.prototype.onCloseView=function(){this._close()},__decorate([u(n.default)],t.prototype,"auto_ui",void 0),__decorate([l],t)}(a.default));i.default=d,cc._RF.pop()},{"./BuffMag":"BuffMag","./BundleConfig":"BundleConfig","./Excel":"Excel","./UIView":"UIView","./UI_PlaerInfo_UIBindings":"UI_PlaerInfo_UIBindings"}],UI_Player_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"ad212OQIj5OHpA9HE5/T3Q9","UI_Player_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.node_sendpoint=null,t}return __extends(t,e),__decorate([r(cc.Node)],t.prototype,"node_sendpoint",void 0),__decorate([n("UI_Player_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_Player:[function(e,t,i){"use strict";cc._RF.push(t,"066c7wmzz1Fdqmt7FuHjiy4","UI_Player"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./BundleConfig"),a=e("./LogManager"),n=e("./ResKeeper"),r=e("./CommonUtils"),s=e("./UI_Player_UIBindings"),c=e("./PlayerDataManager"),l=e("./ExcelUtil"),u=e("./GameGlobalVariable"),d=e("./NodePoolMag"),h=e("./UI_BulletBomb"),p=e("./BuffMag"),_=e("./UI_MosterLogic"),g=e("./Excel"),f=e("./UI_Bullet"),m=cc._decorator,v=m.ccclass,y=m.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.playerId=1,t.playimg=null,t.eff1=null,t.eff2=null,t.sgattack=0,t.sgattackspeed=0,t.sgbaojilv=0,t.sgbaojia=0,t.sgattacktype=1,t.sgattacktagtype=-1,t.sgtianfuid=-1,t.kuangrePlayer=null,t.buffId=-1,t.xiaolajiao=null,t.mosterNodes=null,t.playerInfo=null,t.kuangReParNode=null,t.levelIconSpr=null,t.nowAttackIndex=0,t.kuangReEffNode=null,t.attackTime=0,t.kuangReTime=0,t.offKuangReTime=0,t.kuangReIsOver=!1,t.playerPause=!1,t.isSend=!1,t.isMove=!1,t}return __extends(t,e),t.prototype.onEnable=function(){this.xiaolajiao=this.node.getChildByName("xialajiao"),this.xiaolajiao.active=!1},t.prototype.onClickPlayer=function(){},t.prototype.onDisable=function(){this.clearFrenzyEffect(),this.kuangrePlayer=null,p.BuffMgr.clearPlayerSendCount(this),this.attackTime=0},t.prototype.initializePlayerInfo=function(e,t){return __awaiter(this,void 0,void 0,function(){var i,o;return __generator(this,function(n){switch(n.label){case 0:return this.kuangReParNode=this.node.getChildByName("kuangreNode"),this.mosterNodes=e,this.playerInfo=t,this.eff1&&this.eff2&&(this.eff1.active=this.eff2.active=4===this.playerInfo.equipLevel),i=1e3+this.playerId,o=g.Excel.shuiguo(i),a.LogMgr.debug("\u6c34\u679c\u4fe1\u606f",o),this.sgattack=o.attack,this.sgattackspeed=o.attackspeed,this.sgbaojilv=o.baojilv,this.sgbaojia=o.baojivalue,this.sgattacktype=o.attacktype,this.sgattacktagtype=o.attackstate,this.addExternalLevel(),this.addSynthesis(),this.sgtianfuid=o.talent,[4,this.initUI()];case 1:return n.sent(),[2]}})})},t.prototype.addExternalLevel=function(){if(this.playerInfo){for(var e=l.ExcelUtil.getMatchingData(g.Excel.shuiguolevel_all,"shuiguoId",this.playerId+1e3),t=c.PlayerDataMgr.getEquipDataById(this.playerId+1e3).level,i=0,o=0,a=0;a<e.length;a++)a+1<=t&&a>0&&(i+=e[a-1].addattack,o+=e[a-1].addAtkSpeed);this.sgattack+=i,this.sgattackspeed-=o}},t.prototype.addSynthesis=function(){if(this.playerInfo){var e=l.ExcelUtil.getMatchingData(g.Excel.shuiguohecheng_all,"shuiguoId",this.playerId+1e3)[this.playerInfo.equipLevel];e&&(this.sgattack+=this.sgattack*e.addattack/100,this.sgattackspeed/=1+e.addattackspeed/100)}},t.prototype.getCurrentSynthesisLevel=function(){if(this.playerInfo){var e=l.ExcelUtil.getMatchingData(g.Excel.shuiguohecheng_all,"shuiguoId",this.playerId+1e3);if(e)return e[this.playerInfo.equipLevel]}},t.prototype.initUI=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i;return __generator(this,function(a){switch(a.label){case 0:return this.playerInfo?[4,this._loadRes(o.BundleNames.Common,"res/player/player"+this.playerId+"_"+(this.playerInfo.equipLevel+1),cc.SpriteFrame)]:[3,3];case 1:return e=a.sent(),this.playimg.spriteFrame=e,this.levelIconSpr=this.node.getChildByName("levelicon").getComponent(cc.Sprite),t=["\u5c0f\u724c\u5b50","\u5c0f\u724c\u5b50-1","\u5c0f\u724c\u5b50-2","\u5c0f\u724c\u5b50-3","xiaowu"],[4,this._loadRes(o.BundleNames.Common,"res/player/"+t[this.playerInfo.equipLevel],cc.SpriteFrame)];case 2:i=a.sent(),this.levelIconSpr.spriteFrame=i,a.label=3;case 3:return[2]}})})},t.prototype.getAttackTarget=function(e){var t=null;if(!this.mosterNodes){var i=u.GameGlobalVariable.mosterNode;return i.children.length>0?i.children[0]:t}if(this.mosterNodes.children.length>0){var o=void 0;switch(e){case 4:o=this.mosterNodes.children;for(var a=null,n=0;n<o.length;n++){var s=o[n].getComponent(_.default);if(1===s.nowmosterdata.boss){a=s;break}}t=a?a.node:o[0].script.node;break;case 1:t=(o=u.GameGlobalVariable.sortMonsters(this.mosterNodes)).length>0?o[0].script.node:null;break;case 2:t=(o=u.GameGlobalVariable.sortMonsters(this.mosterNodes)).length>0?o[r.default.limitIntegerInRange(0,o.length-1)].script.node:null;break;case 3:var c=(o=u.GameGlobalVariable.sortMonsters(this.mosterNodes))[this.nowAttackIndex];c||(this.nowAttackIndex=0,c=o[this.nowAttackIndex]),t=c?c.script.node:null,this.nowAttackIndex+=1;break;case 8:case 5:break;default:t=(o=u.GameGlobalVariable.sortMonsters(this.mosterNodes)).length>0?o[0].script.node:null}}return t},t.prototype.sendAttack=function(){var e=this,t=this.getAttackTarget(this.sgattacktagtype);if(t){cc.tween(this.playimg.node).to(.1,{scaleY:1.3,scaleX:1.1}).to(.1,{scale:1}).start();var i=p.BuffMgr.playerAttackModeInProgress(this,this.sgattacktype),o=p.BuffMgr.applyAttackBonus(this,this.sgattack,1),a=p.BuffMgr.getAttackCritical(this),n=this.sgbaojilv+a.baojijilv,r=this.sgbaojia+a.baojijiacheng,s=!1;Math.random()<=n&&(s=!0,o*=r),p.BuffMgr.isContinuousAttack(this)&&this.scheduleOnce(function(){e.sendBullet(i,o,t,s)},.1),this.sendBullet(i,o,t,s)}},t.prototype.sendMoveAttack=function(){if(this.mosterNodes.children.length>=1){var e=p.BuffMgr.applyAttackBonus(this,this.sgattack,1);this.createMoveBullet(e)}},t.prototype.sendBombAttack=function(){if(this.mosterNodes.children.length>=1){cc.tween(this.playimg.node).to(.1,{scaleY:1.1}).to(.1,{scaleY:1}).start();var e=p.BuffMgr.applyAttackBonus(this,this.sgattack,1),t=this.getBulletBombPosition();t&&this.createBombBullet(e,t)}},t.prototype.sendBullet=function(e,t,i,o){switch(e){case 1:this.createBullet(t,i,1,o);break;case 2:for(var a=u.GameGlobalVariable.sortMonsters(this.mosterNodes),n=0;n<3;n++){var r=a[n];r&&this.createBullet(t,r.script.node,n+1,o)}}},t.prototype.getBulletBombPosition=function(){for(var e=u.GameGlobalVariable.paths.children,t=[],i=0;i<e.length-1;i++){var o=e[i],a=e[i+1],n=0,s=0;0===i&&(n=-100),i+1===5&&(s=100);var c=r.default.getRandomInteger(o.x+n,a.x+s),l=r.default.getRandomInteger(o.y,a.y);t.push(cc.v2(c,l))}return t[r.default.getRandomInteger(0,t.length-1)]},t.prototype.createMoveBullet=function(e){return __awaiter(this,void 0,void 0,function(){var t,i,o,a;return __generator(this,function(){return t=p.BuffMgr.getAttackCritical(this),i=this.sgbaojilv+t.baojijilv,o=this.sgbaojia+t.baojijiacheng,a=!1,Math.random()<=i&&(a=!0,e*=o),cc.tween(this.playimg.node).to(.1,{scaleY:1.1}).to(.1,{scaleY:1}).start(),u.GameGlobalVariable.addMovingBullet({attack:e,playerId:this,playerLevel:this.playerInfo.equipLevel,isbaoji:a}),[2]})})},t.prototype.createBombBullet=function(e,t){return __awaiter(this,void 0,void 0,function(){var i,a,n,r,s=this;return __generator(this,function(c){switch(c.label){case 0:return(i=d.NodePoolMag.instance.getNodeFromPool("bullet_2"))?[3,2]:[4,this._loadRes(o.BundleNames.Game,"prefabs/bullet/bullet2",cc.Prefab)];case 1:a=c.sent(),d.NodePoolMag.instance.createNodePool("bullet_2",1,a),i=d.NodePoolMag.instance.getNodeFromPool("bullet_2"),c.label=2;case 2:return n=this.auto_ui.node_sendpoint.convertToWorldSpaceAR(cc.v2()),r=u.GameGlobalVariable.languaNode.convertToNodeSpaceAR(n),i.x=r.x,i.y=r.y,u.GameGlobalVariable.languaNode.addChild(i),this.scheduleOnce(function(){var o=i.getComponent(h.default),a=p.BuffMgr.getAttackCritical(s),n=s.sgbaojilv+a.baojijilv,r=s.sgbaojia+a.baojijiacheng,c=!1;Math.random()<=n&&(c=!0,e*=r),o.initializeBullet({attack:e,playerId:s,skinlevel:s.playerInfo.equipLevel,isbaoji:c},t)}),[2]}})})},t.prototype.createBullet=function(e,t,i,a){return __awaiter(this,void 0,void 0,function(){var n,r,s,c,l=this;return __generator(this,function(h){switch(h.label){case 0:return(n=d.NodePoolMag.instance.getNodeFromPool("bullet_1"))?[3,2]:[4,this._loadRes(o.BundleNames.Game,"prefabs/bullet/bullet1",cc.Prefab)];case 1:r=h.sent(),d.NodePoolMag.instance.createNodePool("bullet_1",5,r),n=d.NodePoolMag.instance.getNodeFromPool("bullet_1"),h.label=2;case 2:return s=this.auto_ui.node_sendpoint.convertToWorldSpaceAR(cc.v2()),c=u.GameGlobalVariable.bulletNode.convertToNodeSpaceAR(s),n.x=c.x,n.y=c.y,u.GameGlobalVariable.bulletNode.addChild(n),this.scheduleOnce(function(){n.getComponent(f.default).initializeBullet({attack:e,playerId:l,feixintype:i,isbaoji:a},t)}),[2]}})})},t.prototype.setFrenzyEffect=function(e){if(!this.kuangrePlayer||this.kuangrePlayer.node.uuid!==e.node.uuid){this.kuangrePlayer=e;var t=g.Excel.shuiguobuff(e.sgtianfuid);this.kuangReTime=t.bufftime,a.LogMgr.debug("\u8bbe\u7f6e\u72c2\u70ed\u6548\u679c",this),this.addFrenzyEffect()}},t.prototype.addFrenzyEffect=function(){return __awaiter(this,void 0,void 0,function(){var e,t=this;return __generator(this,function(i){switch(i.label){case 0:return this.xiaolajiao.active=!0,this.kuangReEffNode=d.NodePoolMag.instance.getNodeFromPool("kuangre"),this.kuangReEffNode?[3,2]:[4,this._loadRes(o.BundleNames.Game,"prefabs/effpre/UI_KuangRe",cc.Prefab)];case 1:e=i.sent(),d.NodePoolMag.instance.createNodePool("kuangre",1,e),this.kuangReEffNode=d.NodePoolMag.instance.getNodeFromPool("kuangre"),i.label=2;case 2:return this.kuangReEffNode.x=0,this.kuangReEffNode.y=0,this.kuangReParNode.addChild(this.kuangReEffNode),this.scheduleOnce(function(){t.kuangReEffNode.scale=1}),[2]}})})},t.prototype.clearFrenzyEffect=function(){this.kuangReEffNode&&(this.xiaolajiao.active=!1,d.NodePoolMag.instance.recycleNodeToPool("kuangre",this.kuangReEffNode),this.kuangReEffNode=null,this.kuangReTime=0,this.offKuangReTime=0)},t.prototype.puasePlayer=function(){},t.prototype.onUpdate=function(e){if(this.kuangrePlayer&&!this.kuangReIsOver&&(this.offKuangReTime+=e,this.offKuangReTime>=1&&(this.kuangReTime-=1,this.offKuangReTime=0,this.kuangReTime<=0&&(p.BuffMgr.isFrenzyOver()?this.kuangReIsOver=!0:(this.clearFrenzyEffect(),this.kuangrePlayer=null,this.kuangReTime=0)))),!this.playerPause){this.attackTime+=e;var t=p.BuffMgr.applyAttackBonus(this,this.sgattackspeed,2);t<.2&&(t=5===this.playerId?.25:.15),t/=u.GameGlobalVariable.jiasuState,this.attackTime>=t&&(this.startAttack(),this.attackTime=0)}},t.prototype.startAttack=function(){switch(p.BuffMgr.addPlayerSendCount(this),this.sgattacktagtype){case 7:this.sendMoveAttack();break;case 6:this.sendBombAttack();break;case 5:break;case 9:cc.tween(this.playimg.node).to(.1,{scaleY:1.1}).to(.1,{scaleY:1}).start(),p.BuffMgr.setFrenzyBuff(this);break;default:this.sendAttack()}},__decorate([y(s.default)],t.prototype,"auto_ui",void 0),__decorate([y],t.prototype,"playerId",void 0),__decorate([y(cc.Sprite)],t.prototype,"playimg",void 0),__decorate([y(cc.Node)],t.prototype,"eff1",void 0),__decorate([y(cc.Node)],t.prototype,"eff2",void 0),__decorate([v],t)}(n.default);i.default=b,cc._RF.pop()},{"./BuffMag":"BuffMag","./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Excel":"Excel","./ExcelUtil":"ExcelUtil","./GameGlobalVariable":"GameGlobalVariable","./LogManager":"LogManager","./NodePoolMag":"NodePoolMag","./PlayerDataManager":"PlayerDataManager","./ResKeeper":"ResKeeper","./UI_Bullet":"UI_Bullet","./UI_BulletBomb":"UI_BulletBomb","./UI_MosterLogic":"UI_MosterLogic","./UI_Player_UIBindings":"UI_Player_UIBindings"}],UI_QianDaoItem:[function(e,t,i){"use strict";cc._RF.push(t,"cfc6eQzO3VPmIwNhTG3u27m","UI_QianDaoItem"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./BundleConfig"),a=e("./ResKeeper"),n=e("./CommonUtils"),r=e("./PlayerDataManager"),s=cc._decorator,c=s.ccclass,l=s.property,u=(s.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.qiandaoday=null,t.qiandaovalue=null,t.iconSpr=null,t.lockweilai=null,t.putonglinqu=null,t.linquLock=null,t.nowcode=1,t.nowqiandao=null,t}return __extends(t,e),t.prototype.onEnable=function(){},t.prototype.onDisable=function(){},t.prototype.initUI=function(e){return __awaiter(this,void 0,Promise,function(){var t,i,a,s;return __generator(this,function(c){switch(c.label){case 0:return this.nowqiandao=e,this.qiandaoday.string="\u7b2c"+e.id+"\u5929",this.qiandaovalue.string=String(e.award),t={1:"res/ui/tu/goldIcon",2:"res/ui/tu/diamondIcon",3:"res/ui/tu/powerIcon",5:"res/quality/suipian_1",6:"res/quality/suipian_2",7:"res/quality/suipian_3"}[e.awardtype],i=null,t?[4,this._loadRes(o.BundleNames.Common,t,cc.SpriteFrame)]:[3,2];case 1:i=c.sent(),c.label=2;case 2:return i&&(this.iconSpr.spriteFrame=i),n.default.limitSpriteSize(this.iconSpr,80),a=r.PlayerDataMgr.getQianDaoCount(),s=e.id-1,a>s?(this.linquLock.active=!0,this.lockweilai.active=!0,this.putonglinqu.active=!1,this.nowcode=-1):a===s&&1===r.PlayerDataMgr.globalData.isqiandaocode?(this.linquLock.active=!1,this.lockweilai.active=!1,this.putonglinqu.active=!0,this.nowcode=1):(this.linquLock.active=!1,this.lockweilai.active=!0,this.putonglinqu.active=!1,this.nowcode=2),[2]}})})},__decorate([l(cc.Label)],t.prototype,"qiandaoday",void 0),__decorate([l(cc.Label)],t.prototype,"qiandaovalue",void 0),__decorate([l(cc.Sprite)],t.prototype,"iconSpr",void 0),__decorate([l(cc.Node)],t.prototype,"lockweilai",void 0),__decorate([l(cc.Node)],t.prototype,"putonglinqu",void 0),__decorate([l(cc.Node)],t.prototype,"linquLock",void 0),__decorate([c],t)}(a.default));i.default=u,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./PlayerDataManager":"PlayerDataManager","./ResKeeper":"ResKeeper"}],UI_QianDao:[function(e,t,i){"use strict";cc._RF.push(t,"d40cdJMpFdKfJc7XOpOy/Dt","UI_QianDao"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./BundleConfig"),a=e("./ADManager"),n=e("./EventManager"),r=e("./TipsManager"),s=e("./UIManager"),c=e("./UIView"),l=e("./EvenType"),u=e("./PlayerDataManager"),d=e("./Excel"),h=e("./Const_Hall"),p=e("./HallGlobalVariable"),_=e("./UI_QianDaoItem"),g=e("./UIConfig_Home"),f=cc._decorator,m=f.ccclass,v=f.property,y=(f.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.content=null,t.state1=null,t.state2=null,t}return __extends(t,e),t.prototype._show=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];u.PlayerDataMgr.resetQianDaoCount(),this.initializeQianDao()},t.prototype.initializeQianDao=function(){for(var e=this,t=d.Excel.shuiguoqiandao_all.size,i=this.content.children,o=function(t){var o=d.Excel.shuiguoqiandao(t+1),a=i[t];a||(a=cc.instantiate(i[0]),e.content.addChild(a)),e.scheduleOnce(function(){a.getComponent(_.default).initUI(o)})},a=0;a<t;a++)o(a);1===u.PlayerDataMgr.globalData.isqiandaocode?(this.state1.active=!0,this.state2.active=!1):(this.state1.active=!1,this.state2.active=!0)},t.prototype.onLinQu=function(e,t){void 0===t&&(t=1);for(var i=this.content.children,a=null,c=0;c<i.length;c++){var d=i[c].getComponent(_.default);if(1===d.nowcode){a=d.nowqiandao;break}}var f=a.award*t;u.PlayerDataMgr.setQianDaoState();var m=new h.GetItemsData;m.ids=[],m.counts=[];var v=null;switch(a.awardtype){case 1:m.ids.push(p.default.goldId),m.counts.push(f);break;case 2:m.ids.push(p.default.diamondId),m.counts.push(f);break;case 3:m.ids.push(p.default.powerId),m.counts.push(f);break;case 5:v=p.default.getSuiPian([f,0,0]);break;case 6:v=p.default.getSuiPian([0,f,0]);break;case 7:v=p.default.getSuiPian([0,0,f])}v&&v.forEach(function(e,t){m.ids.push(t),m.counts.push(e)}),s.default.open(o.BundleNames.Home,g.UIView_Home.UI_GetItems,m),m.clickCallBack=function(){m.ids.forEach(function(e,t){var i=m.counts[t];switch(e){case p.default.goldId:n.EventMgrInstance.emitEvent(l.EVENT_TYPE.Home_Add_Gold,2,i);break;case p.default.diamondId:n.EventMgrInstance.emitEvent(l.EVENT_TYPE.Home_Add_Gold,3,i);break;case p.default.powerId:n.EventMgrInstance.emitEvent(l.EVENT_TYPE.Home_Add_Gold,1,i);break;default:r.TipMgr.showToast("\u606d\u559c\u83b7\u5f97\u6c34\u679c\u788e\u7247"),u.PlayerDataMgr.addEquipFragments(e,i)}})},this.onCloseQianDao()},t.prototype.onDoubelLinQu=function(){var e=this;a.ADMgr.showRewardedVideoAd("\u53cc\u500d\u7b7e\u5230",function(){e.onLinQu(null,2)})},t.prototype.onCloseQianDao=function(){this._close()},__decorate([v(cc.Node)],t.prototype,"content",void 0),__decorate([v(cc.Node)],t.prototype,"state1",void 0),__decorate([v(cc.Node)],t.prototype,"state2",void 0),__decorate([m],t)}(c.default));i.default=y,cc._RF.pop()},{"./ADManager":"ADManager","./BundleConfig":"BundleConfig","./Const_Hall":"Const_Hall","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./HallGlobalVariable":"HallGlobalVariable","./PlayerDataManager":"PlayerDataManager","./TipsManager":"TipsManager","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager","./UIView":"UIView","./UI_QianDaoItem":"UI_QianDaoItem"}],UI_Setting_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"108ad7WyIpDAZTuUBE8vk5R","UI_Setting_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.btn_close=null,t.btn_btclose=null,t.node_yinyuepro=null,t.node_yinyueHk=null,t.node_yinxiaopro=null,t.node_yinxiaoHk=null,t.txt_idLabel=null,t._btnNames=["btn_close","btn_btclose"],t}return __extends(t,e),__decorate([r(cc.Button)],t.prototype,"btn_close",void 0),__decorate([r(cc.Button)],t.prototype,"btn_btclose",void 0),__decorate([r(cc.Node)],t.prototype,"node_yinyuepro",void 0),__decorate([r(cc.Node)],t.prototype,"node_yinyueHk",void 0),__decorate([r(cc.Node)],t.prototype,"node_yinxiaopro",void 0),__decorate([r(cc.Node)],t.prototype,"node_yinxiaoHk",void 0),__decorate([r(cc.Label)],t.prototype,"txt_idLabel",void 0),__decorate([n("UI_Setting_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_Setting:[function(e,t,i){"use strict";cc._RF.push(t,"052ec15vNpK56s7b+ZzeGa2","UI_Setting"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UI_Setting_UIBindings"),a=e("./UIView"),n=e("./AudioManager"),r=e("./LogManager"),s=cc._decorator,c=s.ccclass,l=s.property,u=(s.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.startX=0,t.maxx=395,t.minx=0,t}return __extends(t,e),t.prototype._show=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];this.initializeState()},t.prototype._clickListener=function(e){var t=this.auto_ui;switch(e){case t.btn_btclose:case t.btn_close:this._close()}},t.prototype.onLoad=function(){var e,t=null===(e=this.auto_ui)||void 0===e?void 0:e.txt_idLabel;t&&(t.string="")},t.prototype.onEnable=function(){var e=this.auto_ui,t=e.node_yinxiaoHk,i=e.node_yinyueHk;t.on(cc.Node.EventType.TOUCH_START,this.handleTouchStart,this),t.on(cc.Node.EventType.TOUCH_MOVE,this.handleTouchMove,this),i.on(cc.Node.EventType.TOUCH_START,this.handleTouchStart,this),i.on(cc.Node.EventType.TOUCH_MOVE,this.handleTouchMove,this)},t.prototype.handleTouchStart=function(e){this.startX=e.getLocationX(),r.LogMgr.debug("\u5f00\u59cb\u89e6\u6478")},t.prototype.handleTouchMove=function(e){r.LogMgr.debug("\u89e6\u6478\u4e2d");var t=e.getLocationX()-this.startX,i=e.getCurrentTarget();(t>0&&i.x<this.maxx||t<0&&i.x>this.minx)&&(i.x+=t),i.x=Math.max(this.minx,Math.min(this.maxx,i.x));var o=i.name,a=i.x/this.maxx;this.updateVolume(o,a),this.startX=e.getLocationX()},t.prototype.initializeState=function(){var e=n.AudioMgr.getAudioSettings(),t=e.effectVolume,i=e.musicVolume,o=this.auto_ui,a=o.node_yinyueHk,r=o.node_yinxiaoHk,s=o.node_yinyuepro,c=o.node_yinxiaopro;a.x=this.maxx*i,r.x=this.maxx*t,s.getComponent(cc.ProgressBar).progress=i,c.getComponent(cc.ProgressBar).progress=t},t.prototype.onDisable=function(){},t.prototype.updateVolume=function(e,t){"$node_yinxiaoHk"===e?(this.auto_ui.node_yinxiaopro.getComponent(cc.ProgressBar).progress=t,n.AudioMgr.setSoundEffectVolume(t)):"$node_yinyueHk"===e&&(this.auto_ui.node_yinyuepro.getComponent(cc.ProgressBar).progress=t,n.AudioMgr.setBackgroundMusicVolume(t))},__decorate([l(o.default)],t.prototype,"auto_ui",void 0),__decorate([c],t)}(a.default));i.default=u,cc._RF.pop()},{"./AudioManager":"AudioManager","./LogManager":"LogManager","./UIView":"UIView","./UI_Setting_UIBindings":"UI_Setting_UIBindings"}],UI_ShopItemInfo_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"f5522jG1UtDP4+cf4V5GkGI","UI_ShopItemInfo_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.sp_iconBg=null,t.sp_iconSprite=null,t.txt_countLabel=null,t.txt_infoLabel=null,t.txt_priceLabel=null,t.txt_titleLabel=null,t.btn_clickBtn=null,t.btn_closeBtn=null,t.node_videoIcon=null,t.node_goldIcon=null,t.node_diamondIcon=null,t._btnNames=["btn_clickBtn","btn_closeBtn"],t}return __extends(t,e),__decorate([r(cc.Sprite)],t.prototype,"sp_iconBg",void 0),__decorate([r(cc.Sprite)],t.prototype,"sp_iconSprite",void 0),__decorate([r(cc.Label)],t.prototype,"txt_countLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_infoLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_priceLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_titleLabel",void 0),__decorate([r(cc.Button)],t.prototype,"btn_clickBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_closeBtn",void 0),__decorate([r(cc.Node)],t.prototype,"node_videoIcon",void 0),__decorate([r(cc.Node)],t.prototype,"node_goldIcon",void 0),__decorate([r(cc.Node)],t.prototype,"node_diamondIcon",void 0),__decorate([n("UI_ShopItemInfo_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_ShopItemInfo:[function(e,t,i){"use strict";cc._RF.push(t,"b7a05sG6TlNRZfiq3t45fRp","UI_ShopItemInfo"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UI_ShopItemInfo_UIBindings"),a=e("./UIView"),n=e("./CommonUtils"),r=e("./BundleConfig"),s=e("./Const_Hall"),c=cc._decorator,l=c.ccclass,u=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t}return __extends(t,e),t.prototype._show=function(e){var t=this.auto_ui;t.txt_titleLabel.string=e.titleName,t.sp_iconBg.spriteFrame=e.qualitySpriteFrame,t.sp_iconSprite.spriteFrame=e.iconSpriteFrame,e.qualitySpriteFrame||this._loadRes(r.BundleNames.Common,"res/quality/quality_1",cc.SpriteFrame).then(function(e){t.sp_iconBg.spriteFrame=e}),n.default.limitSpriteSize(t.sp_iconSprite,s.equipIconSize),t.txt_countLabel.string=e.count.toString(),t.txt_infoLabel.string=e.infoStr,t.node_videoIcon.active=e.richType===s.RichType.Video,t.node_goldIcon.active=e.richType===s.RichType.Gold,t.node_diamondIcon.active=e.richType===s.RichType.Diamond,t.txt_priceLabel.string=e.price.toString(),this.clickCallBack=e.clickCallBack},t.prototype._clickListener=function(e){var t=this.auto_ui;switch(e){case t.btn_closeBtn:this._close();break;case t.btn_clickBtn:this.clickCallBack&&this.clickCallBack(),this._close();break;default:console.warn("Unhandled button click: ",e)}},__decorate([u(o.default)],t.prototype,"auto_ui",void 0),__decorate([l],t)}(a.default);i.default=d,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Const_Hall":"Const_Hall","./UIView":"UIView","./UI_ShopItemInfo_UIBindings":"UI_ShopItemInfo_UIBindings"}],UI_ShowAttackInfo:[function(e,t,i){"use strict";cc._RF.push(t,"31b20WJALpENbqa4mJ6OVeF","UI_ShowAttackInfo"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./EventManager"),a=e("./ResKeeper"),n=e("./CommonUtils"),r=e("./EvenType"),s=e("./NodePoolMag"),c=e("./UI_AttackInfo"),l=cc._decorator,u=l.ccclass,d=l.property,h=(l.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item=null,t}return __extends(t,e),t.prototype.addEventListener=function(){o.EventMgrInstance.addListener(r.EVENT_TYPE.Game_ShangHai_FeiZi,this.handlePiaoZi,this)},t.prototype.removeEventListener=function(){o.EventMgrInstance.removeListener(r.EVENT_TYPE.Game_ShangHai_FeiZi,this.handlePiaoZi,this)},t.prototype.handlePiaoZi=function(e,t,i,o){void 0===o&&(o=1);var a=s.NodePoolMag.instance.getNodeFromPool("piaozi");if(a||(s.NodePoolMag.instance.createNodePool("piaozi",1,this.item),a=s.NodePoolMag.instance.getNodeFromPool("piaozi")),a.stopAllActions(),i){var r=n.default.limitIntegerInRange(0,i.width/2);Math.random()>.5&&(r=-r),t.x=r,t.y=0,i.addChild(a),a.zIndex=2===o?1:0}else t=this.node.convertToNodeSpaceAR(t),t=this.getRandomPoint(t,50),this.node.addChild(a),a.zIndex=2===o?1:0;a.getComponent(c.default).updateValue(e,o),a.x=t.x,a.y=t.y+80,a.opacity=255,cc.tween(a).to(.1,{scale:1.5}).to(.3,{scale:1}).call(function(){}).start(),cc.tween(a).to(.1,{y:a.y+100}).to(.3,{y:a.y+120}).delay(.1).to(.05,{opacity:0}).call(function(){s.NodePoolMag.instance.recycleNodeToPool("piaozi",a)}).start()},t.prototype.getRandomPoint=function(e,t){var i=2*Math.random()*Math.PI,o=Math.random()*t;return e.add(new cc.Vec2(Math.cos(i)*o,Math.sin(i)*o))},__decorate([d(cc.Prefab)],t.prototype,"item",void 0),__decorate([u],t)}(a.default));i.default=h,cc._RF.pop()},{"./CommonUtils":"CommonUtils","./EvenType":"EvenType","./EventManager":"EventManager","./NodePoolMag":"NodePoolMag","./ResKeeper":"ResKeeper","./UI_AttackInfo":"UI_AttackInfo"}],UI_ShowBossTip:[function(e,t,i){"use strict";cc._RF.push(t,"4d46fi3cbBD6ayPPDOgUFo2","UI_ShowBossTip"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./BundleConfig"),a=e("./EventManager"),n=e("./ResKeeper"),r=e("./EvenType"),s=e("./BossComming"),c=cc._decorator,l=c.ccclass,u=c.property,d=(c.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nowNode=null,t}return __extends(t,e),t.prototype.onEnable=function(){a.EventMgrInstance.addListener(r.EVENT_TYPE.GAME_SHOW_BOOS,this.displayAnimation,this)},t.prototype.onDisable=function(){a.EventMgrInstance.removeListener(r.EVENT_TYPE.GAME_SHOW_BOOS,this.displayAnimation,this)},t.prototype.displayAnimation=function(){return __awaiter(this,void 0,Promise,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return this.nowNode?[3,2]:[4,this._loadRes(o.BundleNames.Game,"prefabs/BossComming",cc.Prefab)];case 1:e=t.sent(),this.nowNode=cc.instantiate(e),this.node.addChild(this.nowNode),t.label=2;case 2:return this.nowNode.getComponent(s.default).displayAnimation(),[2]}})})},t.prototype._loadRes=function(e,t,i){return new Promise(function(o,a){var n=cc.assetManager.getBundle(e);if(!n)return a(new Error("Bundle "+e+" is not found"));n.load(t,i,function(e,t){if(e)return a(e);o(t)})})},__decorate([u(cc.Node)],t.prototype,"nowNode",void 0),__decorate([l],t)}(n.default));i.default=d,cc._RF.pop()},{"./BossComming":"BossComming","./BundleConfig":"BundleConfig","./EvenType":"EvenType","./EventManager":"EventManager","./ResKeeper":"ResKeeper"}],UI_ShowZaZhong_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"336323LsVBHhazr8rVyM+XX","UI_ShowZaZhong_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.node_qiFather=null,t.node_huoFather=null,t.sp_icon=null,t.sp_ciTiaoIcon=null,t.txt_titleLabel=null,t.btn_closeBtn=null,t.rtxt_ciTiaoInfo=null,t._btnNames=["btn_closeBtn"],t}return __extends(t,e),__decorate([r(cc.Node)],t.prototype,"node_qiFather",void 0),__decorate([r(cc.Node)],t.prototype,"node_huoFather",void 0),__decorate([r(cc.Sprite)],t.prototype,"sp_icon",void 0),__decorate([r(cc.Sprite)],t.prototype,"sp_ciTiaoIcon",void 0),__decorate([r(cc.Label)],t.prototype,"txt_titleLabel",void 0),__decorate([r(cc.Button)],t.prototype,"btn_closeBtn",void 0),__decorate([r(cc.RichText)],t.prototype,"rtxt_ciTiaoInfo",void 0),__decorate([n("UI_ShowZaZhong_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_ShowZaZhong:[function(e,t,i){"use strict";cc._RF.push(t,"717abMKL2BN0Lk18wlWcqIo","UI_ShowZaZhong"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UI_ShowZaZhong_UIBindings"),a=e("./UIView"),n=e("./Excel"),r=e("./BundleConfig"),s=e("./CommonUtils"),c=cc._decorator,l=c.ccclass,u=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t}return __extends(t,e),t.prototype._show=function(e){var t=n.Excel.shuiguo(e.shuiGuoId);if(t){var i=this.auto_ui,o=i.txt_titleLabel,a=i.sp_icon,c=i.sp_ciTiaoIcon,l=i.rtxt_ciTiaoInfo,u=i.node_qiFather,d=i.node_huoFather;o.string=t.newName,this._loadRes(r.BundleNames.Common,"res/player/player"+(e.shuiGuoId-1e3)+"_5",cc.SpriteFrame).then(function(e){a.spriteFrame=e}),this._loadRes(r.BundleNames.Common,"res/tianfuicon/tianfu_"+e.shuiGuoId+"_1",cc.SpriteFrame).then(function(e){c.spriteFrame=e});var h=-1;if(n.Excel.shuiguohecheng_all.forEach(function(t){t.shuiguoId==e.shuiGuoId&&0!==t.newTianFuBuff&&(h=t.newTianFuBuff)}),-1!==h){var p=n.Excel.shuiguobuff(h);if(p){var _=p.value,g=p.buffdesc,f=s.default.replaceStringSymbols(g,"\\n",[""]),m=f.includes("X")?f.split("X"):[f],v=m.map(function(e,i){if(e.includes("#")){var o='<u><color=#ffff00 click="ShowZaZhongInfo">'+t.newName+"</c></u>";e=s.default.replaceStringSymbols(e,"#",[o])}var a="<color=#ffffff>"+e+"</c>";return _&&i<m.length-1&&(a+="<color=#71ff00>"+_[i]+"</c>"),a}).join("");v="<outline color=#000000 width=3><b>"+v+"</b></outline>",l.string=v}}s.default.loadLevel5Effect(e.shuiGuoId,u,d,this._loadRes.bind(this))}else this._close()},t.prototype._clickListener=function(e){e===this.auto_ui.btn_closeBtn&&this._close()},__decorate([u(o.default)],t.prototype,"auto_ui",void 0),__decorate([l],t)}(a.default);i.default=d,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./CommonUtils":"CommonUtils","./Excel":"Excel","./UIView":"UIView","./UI_ShowZaZhong_UIBindings":"UI_ShowZaZhong_UIBindings"}],UI_ShuoMing:[function(e,t,i){"use strict";cc._RF.push(t,"822e3aWj0NCBbEU93cCicnz","UI_ShuoMing"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./AudioManager"),a=e("./UIView"),n=cc._decorator,r=n.ccclass,s=(n.property,n.inspector,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype._show=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i]},t.prototype.onCloseView=function(){o.AudioMgr.playSoundEffect("effect/button"),this._close()},__decorate([r],t)}(a.default));i.default=s,cc._RF.pop()},{"./AudioManager":"AudioManager","./UIView":"UIView"}],UI_Sidebar_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"f8eb9q7nThMT6kgb3r/COgc","UI_Sidebar_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.btn_close=null,t.btn_sidebar=null,t._buttonNames=["btn_close","btn_sidebar"],t}return __extends(t,e),__decorate([r(cc.Button)],t.prototype,"btn_close",void 0),__decorate([r(cc.Button)],t.prototype,"btn_sidebar",void 0),__decorate([n("UI_Sidebar_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_Sidebar:[function(e,t,i){"use strict";cc._RF.push(t,"d10a7/osTVMh75EnGEcfYHl","UI_Sidebar"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UI_Sidebar_UIBindings"),a=e("./UIView"),n=cc._decorator,r=n.ccclass,s=n.property,c=function(e){function t(){var t=e.call(this)||this;return t.auto_ui=null,t}return __extends(t,e),t.prototype._show=function(){},t.prototype._clickListener=function(e){var t,i;switch(e){case null===(t=this.auto_ui)||void 0===t?void 0:t.btn_close:this._close();break;case null===(i=this.auto_ui)||void 0===i?void 0:i.btn_sidebar:this._goto()}},t.prototype._goto=function(){},__decorate([s(o.default)],t.prototype,"auto_ui",void 0),__decorate([r],t)}(a.default);i.default=c,cc._RF.pop()},{"./UIView":"UIView","./UI_Sidebar_UIBindings":"UI_Sidebar_UIBindings"}],UI_SkillItem:[function(e,t,i){"use strict";cc._RF.push(t,"0e4212LsrNJKJ8x/LqngJDw","UI_SkillItem"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./BundleConfig"),a=e("./ResKeeper"),n=e("./Excel"),r=cc._decorator,s=r.ccclass,c=r.property,l=(r.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.iconimg=null,t.iconbg=null,t.countLb=null,t.callback=null,t.data=null,t}return __extends(t,e),t.prototype.initializeView=function(e,t){return __awaiter(this,void 0,Promise,function(){var i,a,r;return __generator(this,function(s){switch(s.label){case 0:return this.callback=t,this.data=e,console.log("shujuid",this.data),i=n.Excel.shuiguocitiao(e.id),[4,this._loadRes(o.BundleNames.Game,"res/skill_icon"+i.quality,cc.SpriteFrame)];case 1:return a=s.sent(),this.iconbg.spriteFrame=a,[4,this._loadRes(o.BundleNames.Common,"res/skillicon/skill_"+e.id,cc.SpriteFrame)];case 2:return r=s.sent(),this.iconimg.spriteFrame=r,this.countLb.string="\xd7"+e.count,[2]}})})},t.prototype.onClick=function(){this.callback(this)},t.prototype._loadRes=function(e,t,i){return new Promise(function(o,a){cc.assetManager.loadBundle(e,function(e,n){e?a(e):n.load(t,i,function(e,t){e?a(e):o(t)})})})},__decorate([c(cc.Sprite)],t.prototype,"iconimg",void 0),__decorate([c(cc.Sprite)],t.prototype,"iconbg",void 0),__decorate([c(cc.Label)],t.prototype,"countLb",void 0),__decorate([s],t)}(a.default));i.default=l,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./Excel":"Excel","./ResKeeper":"ResKeeper"}],UI_SkillShow:[function(e,t,i){"use strict";cc._RF.push(t,"e2cfb3wJvRHHp7NhXQV8iJG","UI_SkillShow"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./EventManager"),a=e("./ResKeeper"),n=e("./CommonUtils"),r=e("./EvenType"),s=e("./Excel"),c=e("./BuffMag"),l=e("./UI_SkillItem"),u=cc._decorator,d=u.ccclass,h=u.property,p=(u.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tipView=null,t.rolelevel=null,t.progress=null,t.scrollView=null,t.selectedItemId=-1,t}return __extends(t,e),t.prototype.onEnable=function(){this.tipView.active=!1,this.scrollView=this.node.getChildByName("New ScrollView").getComponent(cc.ScrollView),this.addListeners(),o.EventMgrInstance.addListener(r.EVENT_TYPE.Game_Hide,this.hideTipView,this),o.EventMgrInstance.addListener(r.EVENT_TYPE.Game_Add_CiTiao,this.addListeners,this)},t.prototype.hideTipView=function(){this.selectedItemId=-1,this.tipView.active=!1},t.prototype.addListeners=function(){var e=this,t=c.BuffMgr.ciTiaoData,i={};t.forEach(function(e){i[e.id]||(i[e.id]={id:e.id,count:0}),i[e.id].count+=1});var o=Object.keys(i),a=this.scrollView.content.children;a.forEach(function(e){e.active=!1}),o.forEach(function(t,o){var n=a[o];n||(n=cc.instantiate(a[0]),e.scrollView.content.addChild(n)),n.active=!0,n.getComponent(l.default).initializeView(i[t],e.handleItemClick.bind(e))}),this.scheduleOnce(function(){e.scrollView.scrollToBottomRight(.2)},.5),this.tipView.active=!1,this.selectedItemId=-1},t.prototype.handleItemClick=function(e){if(e.nowdata.id!==this.selectedItemId){var t=e.node.convertToWorldSpaceAR(cc.v2()),i=this.node.parent.convertToNodeSpaceAR(t);this.tipView.x=i.x,this.tipView.y=i.y+200;var o=this.node.parent.width-380;this.tipView.x+this.tipView.width/2>o/2&&(this.tipView.x=o/2-(this.tipView.width/2+20)),this.tipView.x-this.tipView.width/2<-o/2&&(this.tipView.x=-(o/2-(this.tipView.width/2+20))),this.tipView.getChildByName("jiantou").x=i.x-this.tipView.x;var a=s.Excel.shuiguocitiao(e.nowdata.id),n=this.tipView.getChildByName("layout").getChildByName("lb").getComponent(cc.RichText),r=this.tipView.getChildByName("layout").getChildByName("layout").getChildByName("count").getComponent(cc.Label),c=s.Excel.shuiguobuff(a.citiaoshuzhitype);-1!==a.citiaochuxian?(this.tipView.getChildByName("layout").getChildByName("layout").active=!0,r.node.active=!0,r.string=e.nowdata.count*c.value[0]+"%"):this.tipView.getChildByName("layout").getChildByName("layout").active=!1,this.updateCiTiaoContent(n,a,e.nowdata.count),this.tipView.active=!0,this.selectedItemId=e.nowdata.id}else this.selectedItemId=-1,this.tipView.active=!1},t.prototype.updateCiTiaoContent=function(e,t){var i=t.citiaomiaoshu,o=s.Excel.shuiguobuff(t.citiaoshuzhitype),a=(i=n.default.replaceStringSymbols(i,"n",[""])).split("X"),r="";a.forEach(function(e,t){t<a.length-1&&o.value[t]?r+="<color=#ffffff>"+e+"</c><color=#00ff00>"+o.value[t]+"</color>":r+="<color=#ffffff>"+e+"</c>"}),e.string="<outline color=#000000 width=4>"+r+"</outline>"},t.prototype.onDisable=function(){o.EventMgrInstance.removeListener(r.EVENT_TYPE.Game_Hide,this.hideTipView,this),o.EventMgrInstance.removeListener(r.EVENT_TYPE.Game_Add_CiTiao,this.addListeners,this)},t.prototype.updateUI=function(e,t){this.rolelevel.string="Lv."+e,this.progress.progress=t},__decorate([h(cc.Node)],t.prototype,"tipView",void 0),__decorate([h(cc.Label)],t.prototype,"rolelevel",void 0),__decorate([h(cc.ProgressBar)],t.prototype,"progress",void 0),__decorate([d],t)}(a.default));i.default=p,cc._RF.pop()},{"./BuffMag":"BuffMag","./CommonUtils":"CommonUtils","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./ResKeeper":"ResKeeper","./UI_SkillItem":"UI_SkillItem"}],UI_TestBtn:[function(e,t,i){"use strict";cc._RF.push(t,"e7cf1DiXmpNKq7QBLcgMRu4","UI_TestBtn"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./ResKeeper"),a=cc._decorator,n=a.ccclass,r=(a.property,a.inspector,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEnable=function(){this.node.active=!1},__decorate([n],t)}(o.default));i.default=r,cc._RF.pop()},{"./ResKeeper":"ResKeeper"}],UI_Toast:[function(e,t,i){"use strict";cc._RF.push(t,"c3c55KalMBN8Krap9o6njNP","UI_Toast"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,n=o.property,r=(o.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.txt_toast=null,t.anm_toast=null,t}return __extends(t,e),t.prototype.show=function(e){this.node.active=!0,this.txt_toast.string=e,this.node.width=e.length*this.txt_toast.fontSize+100,this.anm_toast.play(),this.updateAnimationListener()},t.prototype.updateAnimationListener=function(){this.anm_toast.off(cc.Animation.EventType.FINISHED,this.onAnimationComplete,this),this.anm_toast.on(cc.Animation.EventType.FINISHED,this.onAnimationComplete,this)},t.prototype.onAnimationComplete=function(){this.node.active=!1},__decorate([n(cc.Label)],t.prototype,"txt_toast",void 0),__decorate([n(cc.Animation)],t.prototype,"anm_toast",void 0),__decorate([a],t)}(cc.Component));i.default=r,cc._RF.pop()},{}],UI_TongJiCongZhi:[function(e,t,i){"use strict";cc._RF.push(t,"fd4abFvJeRAf7QhISFcra9l","UI_TongJiCongZhi"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./BundleConfig"),a=e("./EventManager"),n=e("./ResKeeper"),r=e("./EvenType"),s=e("./UI_AttackTongJi"),c=cc._decorator,l=c.ccclass,u=c.property,d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.contentNode=null,t.currentNode=null,t}return __extends(t,e),t.prototype.onEnable=function(){a.EventMgrInstance.addListener(r.EVENT_TYPE.GAME_HIDE_TONGJI,this.hideStatisticsTip,this)},t.prototype.onDisable=function(){a.EventMgrInstance.removeListener(r.EVENT_TYPE.GAME_HIDE_TONGJI,this.hideStatisticsTip,this)},t.prototype.showTip=function(){var e;return __awaiter(this,void 0,Promise,function(){var t;return __generator(this,function(i){switch(i.label){case 0:return this.currentNode?[3,2]:[4,this._loadRes(o.BundleNames.Game,"prefabs/TongJiUi",cc.Prefab)];case 1:t=i.sent(),this.currentNode=cc.instantiate(t),null===(e=this.contentNode)||void 0===e||e.addChild(this.currentNode),i.label=2;case 2:return this.currentNode.getComponent(s.default).displayStatistics(),[2]}})})},t.prototype.hideStatisticsTip=function(){this.currentNode&&this.currentNode.getComponent(s.default).hideStatistics()},__decorate([u(cc.Node)],t.prototype,"contentNode",void 0),__decorate([l],t)}(n.default);i.default=d,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./EvenType":"EvenType","./EventManager":"EventManager","./ResKeeper":"ResKeeper","./UI_AttackTongJi":"UI_AttackTongJi"}],UI_TouchClick:[function(e,t,i){"use strict";cc._RF.push(t,"9e9e2o0WiNE/Zyk3+f+nhe9","UI_TouchClick"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./EventManager"),a=e("./LogManager"),n=e("./ResKeeper"),r=cc._decorator,s=r.ccclass,c=(r.property,r.inspector,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.onEnable=function(){this.node.children[0].active=!1,this.node.on(cc.Node.EventType.TOUCH_START,this.handleTouchStart,this)},t.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this.handleTouchStart,this)},t.prototype.handleTouchStart=function(e){var t=this;a.LogMgr.debug("Touch Position - x:",e.getLocationX(),"y:",e.getLocationY()),o.EventMgrInstance.emitEvent("zuobiaozhuanhuan",e.getLocation(),function(e){var i=t.node.convertToNodeSpaceAR(e),a=t.node.children[0];a.x=i.x,a.y=i.y,o.EventMgrInstance.emitEvent("clicksend",a)})},__decorate([s],t)}(n.default));i.default=c,cc._RF.pop()},{"./EventManager":"EventManager","./LogManager":"LogManager","./ResKeeper":"ResKeeper"}],UI_TuJianItem:[function(e,t,i){"use strict";cc._RF.push(t,"68346xQKdJPAIgXzQnzoDuM","UI_TuJianItem"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./BundleConfig"),a=e("./ResKeeper"),n=e("./PlayerDataManager"),r=e("./Excel"),s=cc._decorator,c=s.ccclass,l=s.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.shuiguo1=null,t.shuiguo2=null,t.shuiguo3=null,t.putongmater=null,t.zhihuimater=null,t.lockNode=null,t.unlockNode=null,t.paizi1=0,t.paizi2=0,t.paizi3=0,t.paizi1y=0,t.paizi2y=0,t.paizi3y=0,t.jiesuostate={},t}return __extends(t,e),t.prototype.initializeData=function(e){var t=e.id-1e3,i=e.jinjieShuiGuoId-1e3;this.initializeShuiGuo1(t,this.shuiguo1,1),this.initializeShuiGuo1(i,this.shuiguo2,2),this.initializeShuiGuo3(t,i,this.shuiguo3),this.paizi1=this.shuiguo1.getChildByName("paizi").x,this.paizi2=this.shuiguo2.getChildByName("paizi").x,this.paizi3=this.shuiguo3.getChildByName("paizi").x,this.paizi1y=this.shuiguo1.getChildByName("paizi").y,this.paizi2y=this.shuiguo2.getChildByName("paizi").y,this.paizi3y=this.shuiguo3.getChildByName("paizi").y},t.prototype.initializeShuiGuo3=function(e,t,i){return __awaiter(this,void 0,Promise,function(){var t,a,n,s,c;return __generator(this,function(l){switch(l.label){case 0:return t=i.children[0].getComponent(cc.Sprite),[4,this._loadRes(o.BundleNames.Common,"res/player/player"+e+"_5",cc.SpriteFrame)];case 1:switch(a=l.sent(),t.spriteFrame=a,t.setMaterial(0,this.putongmater),n=i.getChildByName("paizi"),i.getChildByName("shuiguoname").getComponent(cc.Label).string=r.Excel.shuiguo(e+1e3).newName,s=this.paizi3,c=this.paizi3y,e){case 10:n.x=s-20,t.node.height=120,t.node.width=50;break;case 4:n.x=s-20,t.node.height=120,t.node.width=60;break;case 8:n.y=c-50,t.node.height=60,t.node.width=120;break;default:t.node.height=120,t.node.width=120}return[2]}})})},t.prototype.initializeShuiGuo1=function(e,t,i){return __awaiter(this,void 0,Promise,function(){var a,s,c,l,u,d,h,p,_;return __generator(this,function(g){switch(g.label){case 0:return t?(a=r.Excel.shuiguo(e+1e3),s=t.children[1].getComponent(cc.Sprite),c=t.children[0].getComponent(cc.Label),(l=n.PlayerDataMgr.getEquipDataById(e+1e3))&&l.isUnLock?(s.setMaterial(0,this.putongmater),u=a.jinJieLv,l.level>=u?(c.node.active=!1,this.jiesuostate[e]=3):(c.string="\u5916\u90e8\u7b49\u7ea7"+u+"\u89e3\u9501",this.jiesuostate[e]=2)):(this.jiesuostate[e]=1,s.setMaterial(0,this.zhihuimater),c.string="\u901a\u8fc7"+a.unLock+"\u7ae0\u89e3\u9501"),[4,this._loadRes(o.BundleNames.Common,"res/player/player"+e+"_4",cc.SpriteFrame)]):[2];case 1:switch(d=g.sent(),s.spriteFrame=d,h=t.getChildByName("paizi"),p=0,_=0,1===i?(p=this.paizi1,_=this.paizi1y):2===i&&(p=this.paizi2,_=this.paizi2y),e){case 10:h.x=p-20,s.node.height=120,s.node.width=50;break;case 4:h.x=p-20,s.node.height=120,s.node.width=60;break;case 8:h.y=_+30,s.node.height=60,s.node.width=120;break;default:s.node.height=120,s.node.width=120}return[2]}})})},__decorate([l(cc.Node)],t.prototype,"shuiguo1",void 0),__decorate([l(cc.Node)],t.prototype,"shuiguo2",void 0),__decorate([l(cc.Node)],t.prototype,"shuiguo3",void 0),__decorate([l(cc.Material)],t.prototype,"putongmater",void 0),__decorate([l(cc.Material)],t.prototype,"zhihuimater",void 0),__decorate([l(cc.Node)],t.prototype,"lockNode",void 0),__decorate([l(cc.Node)],t.prototype,"unlockNode",void 0),__decorate([c],t)}(a.default);i.default=u,cc._RF.pop()},{"./BundleConfig":"BundleConfig","./Excel":"Excel","./PlayerDataManager":"PlayerDataManager","./ResKeeper":"ResKeeper"}],UI_TuJian:[function(e,t,i){"use strict";cc._RF.push(t,"3c67f8Y43VH5rC/7v+quU1s","UI_TuJian"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIView"),a=e("./PlayerDataManager"),n=e("./Excel"),r=e("./UI_TuJianItem"),s=cc._decorator,c=s.ccclass,l=s.property,u=(s.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemNode=null,t.layout1=null,t.layout2=null,t.weijiesuo=null,t}return __extends(t,e),t.prototype._show=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onEnable=function(){this.initUI()},t.prototype.initUI=function(){for(var e=n.Excel.shuiguo_all,t=e.size,i=[],o=[],a=0;a<t;a++){var r=e.get(a+1001);r&&r.jinJieLv>0&&(this.isUnlocked(r)?i.push(r):o.push(r))}this.setFruitItems(this.layout1,i),this.setFruitItems(this.layout2,o)},t.prototype.setFruitItems=function(e,t){var i=this;e.children.forEach(function(e){e.active=!1}),t.forEach(function(t,o){var a=e.children[o];a||(a=cc.instantiate(i.itemNode),e.addChild(a)),a.setPosition(0,0),a.active=!0,a.getComponent(r.default).initializeData(t)})},t.prototype.isUnlocked=function(e){var t=this.getFruitById(e.id),i=this.getFruitById(e.jinjieShuiGuoId);return!(!t||!i)},t.prototype.getFruitById=function(e){var t=a.PlayerDataMgr.getEquipDataById(e),i=n.Excel.shuiguo(e);return!(!t||!t.isUnLock)&&t.level>=i.jinJieLv},t.prototype.onCloseView=function(){this._close()},__decorate([l(cc.Node)],t.prototype,"itemNode",void 0),__decorate([l(cc.Node)],t.prototype,"layout1",void 0),__decorate([l(cc.Node)],t.prototype,"layout2",void 0),__decorate([l(cc.Node)],t.prototype,"weijiesuo",void 0),__decorate([c],t)}(o.default));i.default=u,cc._RF.pop()},{"./Excel":"Excel","./PlayerDataManager":"PlayerDataManager","./UIView":"UIView","./UI_TuJianItem":"UI_TuJianItem"}],UI_UnlockNewEquip_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"4df92Rzt7tHPZ1FmGQB73+Z","UI_UnlockNewEquip_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.node_view=null,t.node_guang=null,t.btn_mengban=null,t.sp_iconSprite=null,t.txt_nameLabel=null,t._btnNames=["btn_mengban"],t}return __extends(t,e),__decorate([r(cc.Node)],t.prototype,"node_view",void 0),__decorate([r(cc.Node)],t.prototype,"node_guang",void 0),__decorate([r(cc.Button)],t.prototype,"btn_mengban",void 0),__decorate([r(cc.Sprite)],t.prototype,"sp_iconSprite",void 0),__decorate([r(cc.Label)],t.prototype,"txt_nameLabel",void 0),__decorate([n("UI_UnlockNewEquip_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_UnlockNewEquip:[function(e,t,i){"use strict";cc._RF.push(t,"f05f4MmRYVCKLFb+4/Ia88z","UI_UnlockNewEquip"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UI_UnlockNewEquip_UIBindings"),a=e("./UIView"),n=e("./BundleConfig"),r=e("./AudioManager"),s=e("./Excel"),c=cc._decorator,l=c.ccclass,u=c.property,d=(c.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.fruitIds=[],t.clickCallback=null,t}return __extends(t,e),t.prototype._show=function(e){this.fruitIds=e.shuiGuoIds,this.clickCallback=e.callBack,this.showSingleEquip(this.fruitIds.shift()),this.auto_ui.node_guang.stopAllActions(),this.auto_ui.node_guang.runAction(cc.repeatForever(cc.rotateBy(5,360)))},t.prototype.showSingleEquip=function(e){var t=this;r.AudioMgr.playSoundEffect("effect/getReward"),this.auto_ui.node_view.scale=0,this.auto_ui.node_view.runAction(cc.scaleTo(.5,1,1)),this._loadRes(n.BundleNames.Common,"res/player/player"+(e-1e3)+"_1",cc.SpriteFrame).then(function(e){t.auto_ui.sp_iconSprite.spriteFrame=e});var i=s.Excel.shuiguo(e);this.auto_ui.txt_nameLabel.string=i.name},t.prototype._clickListener=function(e){e===this.auto_ui.btn_mengban&&(this.fruitIds.length>0?this.showSingleEquip(this.fruitIds.shift()):(this.clickCallback&&this.clickCallback(),this._close()))},__decorate([u(o.default)],t.prototype,"auto_ui",void 0),__decorate([l],t)}(a.default));i.default=d,cc._RF.pop()},{"./AudioManager":"AudioManager","./BundleConfig":"BundleConfig","./Excel":"Excel","./UIView":"UIView","./UI_UnlockNewEquip_UIBindings":"UI_UnlockNewEquip_UIBindings"}],UI_VideoBuyOne_UIBindings:[function(e,t,i){"use strict";cc._RF.push(t,"2d927xc4mJP4J1Pf/KSP/fX","UI_VideoBuyOne_UIBindings"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UIBindings"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.node_type=null,t.sp_furitIconSprite=null,t.txt_countLabel=null,t.txt_infoLabel=null,t.txt_priceLabel=null,t.txt_titleLabel=null,t.btn_clickBtn=null,t.btn_closeBtn=null,t._btnNames=["btn_clickBtn","btn_closeBtn"],t}return __extends(t,e),__decorate([r(cc.Node)],t.prototype,"node_type",void 0),__decorate([r(cc.Sprite)],t.prototype,"sp_furitIconSprite",void 0),__decorate([r(cc.Label)],t.prototype,"txt_countLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_infoLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_priceLabel",void 0),__decorate([r(cc.Label)],t.prototype,"txt_titleLabel",void 0),__decorate([r(cc.Button)],t.prototype,"btn_clickBtn",void 0),__decorate([r(cc.Button)],t.prototype,"btn_closeBtn",void 0),__decorate([n("UI_VideoBuyOne_UIBindings")],t)}(o.default);i.default=s,cc._RF.pop()},{"./UIBindings":"UIBindings"}],UI_VideoBuyOne:[function(e,t,i){"use strict";cc._RF.push(t,"5370cBlZ5xCjZ5iYAHmzIJq","UI_VideoBuyOne"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./UI_VideoBuyOne_UIBindings"),a=e("./UIView"),n=e("./BundleConfig"),r=e("./ADManager"),s=e("./AIControl"),c=e("./GameGlobalVariable"),l=e("./GameDataManager"),u=e("./Const_Game"),d=cc._decorator,h=d.ccclass,p=d.property,_=(d.inspector,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.auto_ui=null,t.openData=null,t}return __extends(t,e),t.prototype._show=function(e){var t=this;this.openData=e;var i=this.auto_ui,o=i.txt_titleLabel,a=i.txt_infoLabel,r=i.node_type,c=i.txt_countLabel,l=i.sp_furitIconSprite,d=i.btn_clickBtn;o.string=e.titleStr,a.string=e.infoStr,r.children[1].active=e.coinCount>0,r.children[2].active=0===e.coinCount,e.coinCount>0?c.string=""+e.coinCount:(r.children[2].destroyAllChildren(),l.node.scale=e.pfbName===u.FruitPrefabName.gezi||e.pfbName===u.FruitPrefabName.heng2?1:.5,this._loadRes(n.BundleNames.Game,"item/qiPao_"+e.pfbName,cc.Prefab).then(function(e){var t=cc.instantiate(e);t.children[0].active=!0,r.children[2].addChild(t),r.children[2].scale=l.node.scale,t.setPosition(0,0)}),l.spriteFrame=e.furidSprite||null),s.default._instance.isOpen&&s.default._instance.displayClickButton(d.node,function(){t.openData.clickCallBack&&t.openData.clickCallBack(),t._close()})},t.prototype._clickListener=function(e){var t=this,i=this.auto_ui,o=i.btn_closeBtn,a=i.btn_clickBtn;switch(e){case o:this.openData.failCallBack&&this.openData.failCallBack(),this._close();break;case a:var n=this.openData.titleStr,s=c.GameGlobalVariable;if(1===s.isSpecialLevel())n="\u65e0\u5c3d\u6a21\u5f0f"+n;else{var u=l.GameDataMgr.getCurrentLevelWaveState(s.nowlevel,2)+1;n=s.nowlevel+"\u7ae0_"+u+"\u6ce2_"+n}r.ADMgr.showRewardedVideoAd(n,function(){t.openData.clickCallBack&&t.openData.clickCallBack(),t._close()})}},__decorate([p(o.default)],t.prototype,"auto_ui",void 0),__decorate([h],t)}(a.default));i.default=_,cc._RF.pop()},{"./ADManager":"ADManager","./AIControl":"AIControl","./BundleConfig":"BundleConfig","./Const_Game":"Const_Game","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./UIView":"UIView","./UI_VideoBuyOne_UIBindings":"UI_VideoBuyOne_UIBindings"}],UI_WuJinTiaoZhan:[function(e,t,i){"use strict";cc._RF.push(t,"0d7f8Oci1FCZIm/bsv+kz3i","UI_WuJinTiaoZhan"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./ADManager"),a=e("./BundleConfig"),n=e("./Const_Hall"),r=e("./EvenType"),s=e("./EventManager"),c=e("./Excel"),l=e("./GameDataManager"),u=e("./GameGlobalVariable"),d=e("./HallGlobalVariable"),h=e("./PlayerDataManager"),p=e("./TimeUtils"),_=e("./TipsManager"),g=e("./UIConfig_Game"),f=e("./UIConfig_Home"),m=e("./UIManager"),v=e("./UIRotate"),y=e("./UIView"),b=e("./UI_BoxAward"),I=cc._decorator,E=I.ccclass,M=I.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.wujintime=null,t.wujinfenshu=null,t.wujincount=null,t.shaodangBt=null,t.awardBoxs=null,t.awardNode=null,t.startBt=null,t.saodangLb=null,t.kaishiLb=null,t.tagfen=[1500,3e3,4500,6e3],t}return __extends(t,e),t.prototype.onEnable=function(){s.EventMgrInstance.addListener(r.EVENT_TYPE.GAME_TIAOZHAN_COUNT,this.initializeEndlessModeUI,this),s.EventMgrInstance.addListener(r.EVENT_TYPE.Game_TiaoZhan_JiFen,this.initializeEndlessModeUI,this),s.EventMgrInstance.addListener(r.EVENT_TYPE.Game_TIAOZHAN_PASS,this.initializeEndlessModeUI,this),this.initializeEndlessModeUI()},t.prototype.onDisable=function(){s.EventMgrInstance.removeListener(r.EVENT_TYPE.Game_TiaoZhan_JiFen,this.initializeEndlessModeUI,this),s.EventMgrInstance.removeListener(r.EVENT_TYPE.GAME_TIAOZHAN_COUNT,this.initializeEndlessModeUI,this),s.EventMgrInstance.removeListener(r.EVENT_TYPE.Game_TIAOZHAN_PASS,this.initializeEndlessModeUI,this)},t.prototype._show=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i]},t.prototype.initializeEndlessModeUI=function(){var e=h.PlayerDataMgr.getWuJinCount();this.wujincount.string="\u4eca\u65e5\u5269\u4f59"+e+"\u6b21",this.wujinfenshu.string="\u4eca\u65e5\u7d2f\u8ba1"+l.GameDataMgr.getChallengePoints(1),this.shaodangBt.active=1===l.GameDataMgr.getCurrentLevelPassState(1,1),this.initializeAwardBox(),this.saodangLb.string="\xd7"+u.GameGlobalVariable.wujinsaodangcount,this.kaishiLb.string="\xd7"+u.GameGlobalVariable.wujintilicount},t.prototype.initializeAwardBox=function(){var e=this;this.awardBoxs.children.forEach(function(t,i){var o=e.tagfen[i];t.children[1].getComponent(cc.Label).string="\u7d2f\u8ba1"+o+"\u5206",e.updateBoxStatus(t,o,i)})},t.prototype.updateBoxStatus=function(e,t,i){l.GameDataMgr.getChallengePoints(1)>=t?l.GameDataMgr.getChallengeAwardRecord(1,i+1)?(this.setAwardBoxStatus(e,!0,!1,!1),e.children[0].getComponent(v.default).stopRotateTween()):(this.setAwardBoxStatus(e,!1,!0,!0),e.children[0].getComponent(v.default).startRotateTween()):(this.setAwardBoxStatus(e,!1,!0,!1),e.children[0].getComponent(v.default).stopRotateTween())},t.prototype.setAwardBoxStatus=function(e,t,i,o){e.children[0].getChildByName("unlockimg").active=t,e.children[0].getChildByName("lockimg").active=i,e.children[0].getChildByName("redpoint").active=o},t.prototype.onSaoDang=function(){h.PlayerDataMgr.globalData.power>=u.GameGlobalVariable.wujinsaodangcount?h.PlayerDataMgr.getWuJinCount()>0?o.ADMgr.showRewardedVideoAd("\u89c6\u9891\u626b\u8361",function(){u.GameGlobalVariable.nowlevel=-1,u.GameGlobalVariable.teshulevel=1,h.PlayerDataMgr.subtractPower(u.GameGlobalVariable.wujinsaodangcount),h.PlayerDataMgr.subtractWuJinCount(1),m.default.open(a.BundleNames.Game,g.UIView_Game.UI_GameOver,{type:2,back:function(){}})}):_.TipMgr.showToast("\u4eca\u65e5\u6311\u6218\u6b21\u6570\u7528\u5c3d"):_.TipMgr.showToast("\u4f53\u529b\u4e0d\u8db3")},t.prototype.showTip=function(){m.default.open(a.BundleNames.Home,f.UIView_Home.UI_ShuoMing)},t.prototype.onStartGame=function(){h.PlayerDataMgr.globalData.power>=u.GameGlobalVariable.wujintilicount?h.PlayerDataMgr.getWuJinCount()>0?(h.PlayerDataMgr.subtractPower(u.GameGlobalVariable.wujintilicount),s.EventMgrInstance.emitEvent(r.EVENT_TYPE.GAME_TIAOZHAN_VIEW),this._close()):_.TipMgr.showToast("\u4eca\u65e5\u6311\u6218\u6b21\u6570\u7528\u5c3d"):_.TipMgr.showToast("\u4f53\u529b\u4e0d\u8db3")},t.prototype.onAwardBoxClick=function(e,t){var i=this.tagfen[Number(t)-1],o=l.GameDataMgr.getChallengePoints(1),a=c.Excel.shuiguoguanqia(5);o<i?this.awardNode.getComponent(b.default).displayAward(e.getCurrentTarget(),a,t,2):l.GameDataMgr.getChallengeAwardRecord(1,Number(t))?_.TipMgr.showToast("\u5df2\u9886\u53d6"):(_.TipMgr.showToast("\u606d\u559c\u83b7\u5f97\u5956\u52b1"),this.getAwardDataByBoxIndex(a,t),l.GameDataMgr.updateChallengeAwardRecord(1,Number(t)),this.initializeAwardBox())},t.prototype.getAwardDataByBoxIndex=function(e,t){switch(t){case"1":this.getAwardData(e.tiaozhanbox1);break;case"2":this.getAwardData(e.tiaozhanbox2);break;case"3":this.getAwardData(e.tiaozhanbox3);break;case"4":this.getAwardData(e.tiaozhanbox4)}},t.prototype.getAwardData=function(e){var t=this,i=new n.GetItemsData;i.ids=[],i.counts=[],e.forEach(function(e){var o=e[0],a=e[1],n=e[2];switch(o){case 1:i.ids.push(d.default.goldId),i.counts.push(a);break;case 2:i.ids.push(d.default.diamondId),i.counts.push(a);break;case 3:i.ids.push(d.default.powerId),i.counts.push(a);break;case 5:t.getFragmentData(n).forEach(function(e,t){i.ids.push(t),i.counts.push(e)})}}),i.clickCallBack=this.createAwardCallback(i),m.default.open(a.BundleNames.Home,f.UIView_Home.UI_GetItems,i)},t.prototype.getFragmentData=function(e){var t=new Map;return 1===e?t=d.default.getSuiPian([e,0,0]):2===e?t=d.default.getSuiPian([0,e,0]):3===e&&(t=d.default.getSuiPian([0,0,e])),t},t.prototype.createAwardCallback=function(e){var t=this;return function(){e.ids.forEach(function(i,o){var a=e.counts[o];t.dispatchAwardEvent(i,a)})}},t.prototype.dispatchAwardEvent=function(e,t){switch(e){case d.default.goldId:s.EventMgrInstance.emitEvent(r.EVENT_TYPE.Home_Add_Gold,2,t);break;case d.default.diamondId:s.EventMgrInstance.emitEvent(r.EVENT_TYPE.Home_Add_Gold,3,t);break;case d.default.powerId:s.EventMgrInstance.emitEvent(r.EVENT_TYPE.Home_Add_Gold,1,t);break;default:_.TipMgr.showToast("\u606d\u559c\u83b7\u5f97\u6c34\u679c\u788e\u7247"),h.PlayerDataMgr.addEquipFragments(e,t)}},t.prototype.update=function(){this.wujintime.string=p.default.convertSecondsToHMS(p.default.getMillisecondsUntilMidnight()/1e3)+"\u5237\u65b0"},t.prototype.onCloseView=function(){this._close()},__decorate([M(cc.Label)],t.prototype,"wujintime",void 0),__decorate([M(cc.Label)],t.prototype,"wujinfenshu",void 0),__decorate([M(cc.Label)],t.prototype,"wujincount",void 0),__decorate([M(cc.Node)],t.prototype,"shaodangBt",void 0),__decorate([M(cc.Node)],t.prototype,"awardBoxs",void 0),__decorate([M(cc.Node)],t.prototype,"awardNode",void 0),__decorate([M(cc.Node)],t.prototype,"startBt",void 0),__decorate([M(cc.Label)],t.prototype,"saodangLb",void 0),__decorate([M(cc.Label)],t.prototype,"kaishiLb",void 0),__decorate([E],t)}(y.default);i.default=C,cc._RF.pop()},{"./ADManager":"ADManager","./BundleConfig":"BundleConfig","./Const_Hall":"Const_Hall","./EvenType":"EvenType","./EventManager":"EventManager","./Excel":"Excel","./GameDataManager":"GameDataManager","./GameGlobalVariable":"GameGlobalVariable","./HallGlobalVariable":"HallGlobalVariable","./PlayerDataManager":"PlayerDataManager","./TimeUtils":"TimeUtils","./TipsManager":"TipsManager","./UIConfig_Game":"UIConfig_Game","./UIConfig_Home":"UIConfig_Home","./UIManager":"UIManager","./UIRotate":"UIRotate","./UIView":"UIView","./UI_BoxAward":"UI_BoxAward"}],"UVTransform-unpack":[function(e,t,i){"use strict";cc._RF.push(t,"b5e6ancQp5D/K4CwYOZXHa2","UVTransform-unpack"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,n=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.offset=cc.v2(0,0),t.duration=3,t.renderComponent=null,t.currentCode=1,t.elapsedTime=0,t.deltaX=1,t.deltaY=1,t.currentOffsetX=0,t.currentOffsetY=0,t.offsetXPositive=0,t.offsetYPositive=0,t}return __extends(t,e),t.prototype.onLoad=function(){this.renderComponent=this.node.getComponent(cc.RenderComponent)},t.prototype.start=function(){this.currentCode=1,this.elapsedTime=0,this.deltaX=1,this.deltaY=1,this.currentOffsetX=this.deltaX/this.duration/cc.game.getFrameRate(),this.currentOffsetY=this.deltaY/this.duration/cc.game.getFrameRate(),this.offsetXPositive=this.currentOffsetX,this.offsetYPositive=-this.currentOffsetY},t.prototype.onEnable=function(){},t.prototype.switchCode=function(){switch(this.currentCode){case 1:case 2:this.currentCode=3;break;case 3:this.currentCode=4;break;case 4:this.currentCode=1}switch(this.currentCode){case 1:this.offsetXPositive=this.currentOffsetX,this.offsetYPositive=this.currentOffsetY;break;case 2:this.offsetXPositive=-this.currentOffsetX,this.offsetYPositive=this.currentOffsetY;break;case 3:this.offsetXPositive=-this.currentOffsetX,this.offsetYPositive=-this.currentOffsetY;break;case 4:this.offsetXPositive=this.currentOffsetX,this.offsetYPositive=-this.currentOffsetY}},t.prototype.update=function(e){this.elapsedTime+=e,this.elapsedTime>10&&(this.elapsedTime=0);var t=this.offset.x+this.offsetXPositive;t>=this.deltaX&&(t+=this.deltaX);var i=this.offset.y+this.offsetYPositive;i>=this.deltaY&&(i+=this.deltaY),this.offset=cc.v2(t,i),this.renderComponent&&this.renderComponent.getMaterial(0).setProperty("uv_offset",this.offset)},__decorate([n(cc.Vec2)],t.prototype,"offset",void 0),__decorate([n],t.prototype,"duration",void 0),__decorate([a],t)}(cc.Component);i.default=r,cc._RF.pop()},{}],UnLockLight:[function(e,t,i){"use strict";cc._RF.push(t,"0e170ek5Z1EsK3MlaU7aPXf","UnLockLight"),Object.defineProperty(i,"__esModule",{value:!0});var o=e("./ResKeeper"),a=cc._decorator,n=a.ccclass,r=a.property,s=function(e){function t(){var t=e.call(this)||this;return t.selfMask=null,t.lightNode=null,t}return __extends(t,e),t.prototype.initialize=function(e,t,i){var o=this;this.selfMask.node.width=e.width,this.selfMask.node.height=e.height,t?(this.selfMask.spriteFrame=t,this.selfMask.type=cc.Mask.Type.IMAGE_STENCIL):this.selfMask.type=cc.Mask.Type.RECT;var a=Math.floor(2*e.width/1200);a<1&&(a=1),this.lightNode.stopAllActions(),this.lightNode.x=-e.width,this.lightNode.runAction(cc.sequence(cc.repeat(cc.sequence(cc.moveTo(a,e.width,0),cc.callFunc(function(){o.lightNode.x=-e.width})),i),cc.callFunc(function(){o.node.destroy()})))},__decorate([r(cc.Mask)],t.prototype,"selfMask",void 0),__decorate([r(cc.Node)],t.prototype,"lightNode",void 0),__decorate([n],t)}(o.default);i.default=s,cc._RF.pop()},{"./ResKeeper":"ResKeeper"}],UserData:[function(e,t,i){"use strict";cc._RF.push(t,"8bc89Y/w7BAe7V7XDb0GdpP","UserData"),Object.defineProperty(i,"__esModule",{value:!0}),i.UserInstance=void 0;var o=function(){function e(){this._platform={avatarUrl:"",nickName:""},this._server=null,this._code="",this._openId=null,this._unionId=null}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},Object.defineProperty(e.prototype,"platform",{get:function(){return this._platform},set:function(e){Object.assign(this._platform,e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"server",{get:function(){return this._server},set:function(e){this._server=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"code",{get:function(){return this._code||""},set:function(e){this._code=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"openId",{get:function(){return this._openId||""},set:function(e){this._openId=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"unionId",{get:function(){return this._unionId||""},set:function(e){this._unionId=e},enumerable:!1,configurable:!0}),e}();i.UserInstance=o.getInstance(),cc._RF.pop()},{}],VisibleController:[function(e,t,i){"use strict";cc._RF.push(t,"5575bT25nxBT6+UPhKHA5Hh","VisibleController"),Object.defineProperty(i,"__esModule",{value:!0}),i.VisibleNode=void 0;var o=cc._decorator,a=o.ccclass,n=o.property,r=o.menu,s=function(){function e(){this.name="",this.nd=[]}return __decorate([n({displayName:"\u63a7\u5236\u540d\u79f0"})],e.prototype,"name",void 0),__decorate([n({type:cc.Node,displayName:"\u63a7\u5236\u8282\u70b9"})],e.prototype,"nd",void 0),__decorate([a("VisibleNode")],e)}();i.VisibleNode=s;var c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nodes=[],t._currentSelectIdx=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"choiceIndex",{get:function(){return this._currentSelectIdx},set:function(){},enumerable:!1,configurable:!0}),t.prototype.setChoiceIndex=function(e){e<0||e>=this.nodes.length||(this._currentSelectIdx=e,this.nodes.forEach(function(e){return e.nd.forEach(function(e){return e.active=!1})}),this.nodes[e].nd.forEach(function(e){return e.active=!0}))},t.prototype.setChoiceName=function(e){var t=this;this.nodes.forEach(function(e){return e.nd.forEach(function(e){return e.active=!1})});var i=this.nodes.find(function(i,o){return i.name===e&&(t._currentSelectIdx=o,!0)});i&&i.nd.forEach(function(e){return e.active=!0})},t.prototype.getChoiceIndex=function(){return this._currentSelectIdx},t.prototype.getChoiceNodes=function(){return this._currentSelectIdx>=0&&this._currentSelectIdx<this.nodes.length?this.nodes[this._currentSelectIdx].nd:[]},__decorate([n({type:[s],displayName:"Controller"})],t.prototype,"nodes",void 0),__decorate([n({type:cc.Integer})],t.prototype,"_currentSelectIdx",void 0),__decorate([n({type:cc.Integer})],t.prototype,"choiceIndex",null),__decorate([a,r("Controller/Visible Controller")],t)}(cc.Component);i.default=c,cc._RF.pop()},{}],YpNetMag:[function(e,t,i){"use strict";cc._RF.push(t,"5d085J7OIpOfqbjciOm0erp","YpNetMag"),Object.defineProperty(i,"__esModule",{value:!0}),i.GameNetworkManager=void 0;var o=e("../GameDataManager"),a=e("../HallManager"),n=e("../PlayerDataManager"),r=function(){function e(){}return e.initServer=function(){return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return e.isLoad=!0,this.initLoca(),[2]})})},e.failSever=function(){},e.initLocaSever=function(){var e,t=Number(localStorage.getItem("gameversion"))||0,i=(null===(e=this.nowServerData)||void 0===e?void 0:e.gameversion)||0;console.log("\u5b58\u50a8\u7248\u672c\u5bf9\u6bd4","\u672c\u5730-> "+t,"\u670d\u52a1\u5668-> "+i),i>t?(o.GameDataMgr.initialize(this.nowServerData[o.GameDataMgr.getSecretKey()]),n.PlayerDataMgr.initialize(this.nowServerData[n.PlayerDataMgr.getSecretKey()]),a.HallMgr.initialize(this.nowServerData[a.HallMgr.getSecretKey()]),localStorage.setItem("gameversion",String(i))):this.initLoca()},e.initLoca=function(){o.GameDataMgr.initialize(),n.PlayerDataMgr.initialize(),a.HallMgr.initialize()},e.accesUserinfo=function(){return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,new Promise(function(){})]})})},e.getUserAppInfo=function(){return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,new Promise(function(e){e({})})]})})},e.mapSwitchJson=function(e){var t={};return e.forEach(function(e,i){t[i]=e}),t},e.cleanData=function(e){localStorage.clear(),this.saveSeverStorage(!0,e)},e.getAllData=function(){var e,t=n.PlayerDataMgr.getAllData(),i=o.GameDataMgr.getAllData(),r=a.HallMgr.getAllData(),s=((e={})[n.PlayerDataMgr.getSecretKey()]=this.mapSwitchJson(t),e[o.GameDataMgr.getSecretKey()]=this.mapSwitchJson(i),e[a.HallMgr.getSecretKey()]=this.mapSwitchJson(r),e),c=Number(localStorage.getItem("gameversion"))||0;return s.gameversion=c,s},e.isEmpty=function(e){return"object"==typeof e?!Object.keys(e).length:null==e||"null"===e||"undefined"===e||""===e},e.transformData=function(e){return this.isEmpty(e)&&(e={}),JSON.stringify(e)},e.dataFormTrans=function(e){return this.isEmpty(e)?{}:JSON.parse(e)},e.saveSeverStorage=function(e,t){return void 0===e&&(e=!1),void 0===t&&(t=null),__awaiter(this,void 0,Promise,function(){return __generator(this,function(){return t&&t(),[2]})})},e.getRemoteStorage=function(){return __awaiter(this,void 0,Promise,function(){return __generator(this,function(){return[2,!1]})})},e.loadingIn=!1,e.isLoad=!1,e.failTimeId=0,e.isFail=!1,e.GetTimeAll=0,e.offTime=0,e.nowServerData=null,e}();i.GameNetworkManager=r,cc._RF.pop()},{"../GameDataManager":"GameDataManager","../HallManager":"HallManager","../PlayerDataManager":"PlayerDataManager"}],lookMemery:[function(e,t,i){"use strict";cc._RF.push(t,"54bdek3CLtOK7ESMMaON2u0","lookMemery"),Object.defineProperty(i,"__esModule",{value:!0});var o=cc._decorator,a=o.ccclass,n=o.property,r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.label=null,t.text="hello",t.offtime=0,t}return __extends(t,e),t.prototype.start=function(){},t.prototype.calculateImageMemoryUsage=function(){var e=cc.assetManager.assets,t=[];e.forEach(function(e){e instanceof cc.SpriteFrame&&t.push(e)}),t.sort(function(e,t){return t.getTexture().height*t.getTexture().width-e.getTexture().height*e.getTexture().width});var i="",o=0;return t.forEach(function(e){var t=e.getTexture(),a=e.getOriginalSize(),n=t._native,r=t._uuid,s=n.includes("jpg")?3:4,c=a.width*a.height*s/1024/1024;o+=c,i+="\n"+r+n+"...."+c.toFixed(2)+"M",console.log("\u5185\u5b58\u5360\u7528:",""+r+n+e.name+"\n\u5360\u7528\u5185\u5b58:"+c.toFixed(2)+"M")}),o=Math.floor(1e4*o)/1e4,i="Total Image Mem...."+o.toFixed(2)+"M"+i,console.log("Image Mem==",i),console.log("\u5171\u5360\u7528\u5185\u5b58:",o.toFixed(2)+"M"),o.toFixed(2)},t.prototype.updateMoneyInfo=function(){},t.prototype.update=function(){},__decorate([n(cc.Label)],t.prototype,"label",void 0),__decorate([n],t.prototype,"text",void 0),__decorate([a],t)}(cc.Component);i.default=r,cc._RF.pop()},{}],temp:[function(e,t){"use strict";cc._RF.push(t,"d73c5vWzFZFELDZoxBAdRb6","temp"),cc._RF.pop()},{}]},{},["YpNetMag","ADManager","AIControl","AddPowerByTime","ArrayUtils","AudioManager","AutoImagZiTi","BagCiTiaoRichText","BaseExcel","BaseModule","BossComming","BossComming_UIBindings","BuffMag","BundleConfig","CameraShak","CommonUtils","Const_Common","Const_Game","Const_Hall","DataManager","DebugManager","DingbuShipei","EditorAsset","Entry","EvenType","EventManager","Excel","ExcelData","ExcelLoader","ExcelUtil","FMButton","GameBagData","GameConfig","GameDataManager","GameGlobalVariable","GuideControl","GuideMask","GuideShou","HallGlobalVariable","HallManager","IpadShiPei","Item_Bag_CiTiao","Item_Bag_CiTiao_UIBindings","Item_Bag_EquipItem","Item_Bag_EquipItem_UIBindings","Item_CellFatherMove","Item_GameBagCell","Item_GameBagCell_UIBindings","Item_GameEquip","Item_Icon","Item_Icon_UIBindings","Item_PaiZi","Item_PaiZi_UIBindings","Item_Setting","Item_Setting_UIBindings","Item_Shop_BoxItem","Item_Shop_BoxItem_UIBindings","Item_Shop_GoldItem","Item_Shop_GoldItem_UIBindings","Item_Shop_TodayItem","Item_Shop_TodayItem_UIBindings","LabelDefault","LayoutExtent","List","ListItem","LiuHaiShiPei","LoadingManager","LodingGuodu","LodingGuodu_UIBindings","LogManager","Logic_ChildMoveEvent","Logic_GetEquip","MiniGame","MiniGameSdk","ModuleManager","Module_Fighting","Module_Fighting_RedPoint","Module_Fighting_UIBindings","Module_News","Module_News_RedPoint","Module_Shop","Module_Shop_UIBindings","Module_WareHouse","Module_WareHouse_UIBindings","NodePoolMag","ObjectUtils","PlatformManager","PlayerDataManager","PosController","Province","QiPaoTween","RedPointControl","RedPointItem","ResKeeper","ResLoader","ResUtil","RichTextLink","ScheduleManage","SingletonManager","TimeUtils","TipsManager","UIAdaptive","UIBindings","UIConfig_Entry","UIConfig_Game","UIConfig_Home","UIFuDong","UIHomeAddCoin","UIManager","UIRotate","UIScale","UIScene","UITools","UIView","UI_AddPower","UI_AddPower_UIBindings","UI_AttackInfo","UI_AttackTongJi","UI_Bag","UI_Bag_UIBindings","UI_BaoZha","UI_BingDong","UI_BoxAward","UI_BoxIitemInfo","UI_BoxIitemInfo_UIBindings","UI_BoxInfo","UI_BoxInfo_UIBindings","UI_BoxLevelInfo","UI_BoxLevelInfo_UIBindings","UI_BoxUpLevel","UI_BoxUpLevel_UIBindings","UI_Bullet","UI_BulletBomb","UI_BulletBombCollider","UI_BulletCollider","UI_BulletMove","UI_BulletMoveCollider","UI_BulletMove_UIBindings","UI_CameraControl","UI_ChiTiao","UI_ChiTiaoItem","UI_ChiTiao_UIBindings","UI_CreateMoster","UI_DeBugItem","UI_Debug","UI_DuWu","UI_Entry","UI_EquipInfo","UI_EquipInfo_UIBindings","UI_GameDeBug","UI_GameEquipInfo","UI_GameEquipInfo_UIBindings","UI_GameFail","UI_GameFail_UIBindings","UI_GameLock","UI_GameOhterNode","UI_GameOver","UI_GameOverItem","UI_GameOver_UIBindings","UI_GamePuase","UI_GameView","UI_GameViewMap","UI_GameView_UIBindings","UI_GameYinBi","UI_GetItems","UI_GetItems_UIBindings","UI_GetZaZhong","UI_GetZaZhong_UIBindings","UI_Hall","UI_Hall_UIBindings","UI_HuDun","UI_JiXuGame","UI_JiXuGame_UIBindings","UI_JianTou","UI_LiuXue","UI_Loading","UI_MosterLogic","UI_MosterLogic_UIBindings","UI_MosterXueTiao","UI_MoveYun","UI_OpenBox","UI_OpenBox_UIBindings","UI_PlaerInfo","UI_PlaerInfo_UIBindings","UI_Player","UI_Player_UIBindings","UI_QianDao","UI_QianDaoItem","UI_Setting","UI_Setting_UIBindings","UI_ShopItemInfo","UI_ShopItemInfo_UIBindings","UI_ShowAttackInfo","UI_ShowBossTip","UI_ShowZaZhong","UI_ShowZaZhong_UIBindings","UI_ShuoMing","UI_Sidebar","UI_Sidebar_UIBindings","UI_SkillItem","UI_SkillShow","UI_TestBtn","UI_Toast","UI_TongJiCongZhi","UI_TouchClick","UI_TuJian","UI_TuJianItem","UI_UnlockNewEquip","UI_UnlockNewEquip_UIBindings","UI_VideoBuyOne","UI_VideoBuyOne_UIBindings","UI_WuJinTiaoZhan","UVTransform-unpack","UnLockLight","UserData","VisibleController","lookMemery","temp"]);